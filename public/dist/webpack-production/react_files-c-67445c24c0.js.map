{"version":3,"sources":["webpack:///./public/javascripts/lti/tool_launch_resizer.js","webpack:///./public/javascripts/lti/post_message/messageTypes.js","webpack:///./public/javascripts/translations/lib.text_helper.js","webpack:///./app/coffeescripts/str/TextHelper.coffee","webpack:///./public/javascripts/dummyI18nResource.js?61ff","webpack:///./app/jsx/shared/ProgressBar.js","webpack:///./app/jsx/shared/modal-buttons.js","webpack:///./public/javascripts/lti/post_message lazy ^\\.\\/.*\\.js$ namespace object","webpack:///./public/javascripts/jquery.scrollToVisible.js","webpack:///./node_modules/@instructure/ui-overlays/es/Overlay/index.js","webpack:///./app/jsx/shared/ContentTypeExternalToolTray.js","webpack:///./app/coffeescripts/util/brandableCss.js","webpack:///./node_modules/location-origin/dist/location-origin.js","webpack:///./node_modules/@instructure/ui-dom-utils/es/getFontSize.js","webpack:///./node_modules/@instructure/ui-utils/es/px.js","webpack:///./app/jsx/shared/FriendlyDatetime.js","webpack:///./app/jsx/shared/modal.js","webpack:///./app/coffeescripts/legacyCoffeesScriptHelpers.js","webpack:///./app/coffeescripts/object/unflatten.js","webpack:///./public/javascripts/translations/tray.js","webpack:///./public/javascripts/dummyI18nResource.js?86fe","webpack:///./app/jsx/shared/components/CanvasTray.js","webpack:///./node_modules/@instructure/ui-dom-utils/es/getBoundingClientRect.js","webpack:///./app/coffeescripts/util/deparam.js","webpack:///./public/javascripts/translations/instructure_misc_plugins.js","webpack:///./public/javascripts/dummyI18nResource.js?9aa5","webpack:///./public/javascripts/jquery.instructure_misc_plugins.js","webpack:///./app/jsx/shared/components/ErrorBoundary.js","webpack:///./public/javascripts/translations/user_content.js","webpack:///./public/javascripts/dummyI18nResource.js?15ea","webpack:///./app/coffeescripts/str/apiUserContent.js","webpack:///./app/coffeescripts/react_files/mixins/MultiselectableMixin.js","webpack:///./app/jsx/files/DragFeedback.js","webpack:///./app/coffeescripts/react_files/components/FileRenameForm.js","webpack:///./public/javascripts/translations/file_rename_form.js","webpack:///./public/javascripts/dummyI18nResource.js?d8c0","webpack:///./app/jsx/files/FileRenameForm.js","webpack:///./app/coffeescripts/react_files/utils/moveStuff.js","webpack:///./app/coffeescripts/react_files/mixins/dndMixin.js","webpack:///./app/coffeescripts/react_files/components/FilesApp.js","webpack:///./app/coffeescripts/react_files/components/Breadcrumbs.js","webpack:///./app/jsx/files/BreadcrumbCollapsedContainer.js","webpack:///./app/jsx/files/Breadcrumbs.js","webpack:///./public/javascripts/translations/folder_tree.js","webpack:///./public/javascripts/dummyI18nResource.js?d4a6","webpack:///./app/coffeescripts/react_files/modules/BBTreeBrowserView.js","webpack:///./public/javascripts/translations/rootFoldersFinder.js","webpack:///./public/javascripts/dummyI18nResource.js?7d5e","webpack:///./app/coffeescripts/views/RootFoldersFinder.coffee","webpack:///./app/coffeescripts/react_files/components/FolderTree.js","webpack:///./app/jsx/files/FolderTree.js","webpack:///./app/coffeescripts/react_files/components/FilesUsage.js","webpack:///./app/coffeescripts/util/friendlyBytes.js","webpack:///./app/jsx/files/FilesUsage.js","webpack:///./app/coffeescripts/react_files/modules/FocusStore.js","webpack:///./app/coffeescripts/react_files/components/MoveDialog.js","webpack:///./app/jsx/files/BBTreeBrowser.js","webpack:///./app/jsx/files/MoveDialog.js","webpack:///./app/jsx/files/utils/openMoveDialog.js","webpack:///./app/coffeescripts/react_files/utils/deleteStuff.js","webpack:///./public/javascripts/translations/upload_button.js","webpack:///./public/javascripts/dummyI18nResource.js?cbf7","webpack:///./public/javascripts/translations/zip_file_options_form.js","webpack:///./public/javascripts/dummyI18nResource.js?fd66","webpack:///./app/jsx/files/ZipFileOptionsForm.js","webpack:///./app/coffeescripts/react_files/modules/BaseUploader.js","webpack:///./app/coffeescripts/react_files/modules/FileUploader.js","webpack:///./app/coffeescripts/react_files/modules/ZipUploader.js","webpack:///./app/coffeescripts/react_files/modules/UploadQueue.js","webpack:///./app/coffeescripts/react_files/modules/FileOptionsCollection.js","webpack:///./app/coffeescripts/react_files/components/UploadButton.js","webpack:///./app/jsx/files/UploadButton.js","webpack:///./public/javascripts/translations/usage_rights_modal.js","webpack:///./public/javascripts/dummyI18nResource.js?3371","webpack:///./app/coffeescripts/react_files/components/UsageRightsDialog.js","webpack:///./app/jsx/files/UsageRightsDialog.js","webpack:///./app/coffeescripts/react_files/utils/downloadStuffAsAZip.js","webpack:///./app/jsx/files/Toolbar.js","webpack:///./app/jsx/files/FilesApp.js","webpack:///./app/coffeescripts/react_files/utils/getAllPages.js","webpack:///./app/coffeescripts/react_files/utils/updateAPIQuerySortParams.js","webpack:///./app/coffeescripts/react_files/components/ShowFolder.js","webpack:///./public/javascripts/translations/file_preview.js","webpack:///./public/javascripts/dummyI18nResource.js?f9e3","webpack:///./public/javascripts/translations/file_status.js","webpack:///./public/javascripts/dummyI18nResource.js?357f","webpack:///./app/jsx/files/FilePreviewInfoPanel.js","webpack:///./app/coffeescripts/react_files/utils/getFileStatus.js","webpack:///./app/coffeescripts/react_files/utils/collectionHandler.js","webpack:///./app/jsx/files/codeToRemoveLater.js","webpack:///./app/jsx/files/FilePreview.js","webpack:///./app/coffeescripts/react_files/components/FolderChild.js","webpack:///./app/jsx/files/ItemCog.js","webpack:///./public/javascripts/translations/MasterCourseLock.js","webpack:///./public/javascripts/dummyI18nResource.js?6453","webpack:///./app/jsx/shared/MasterCourseLock.js","webpack:///./app/jsx/files/UsageRightsIndicator.js","webpack:///./app/jsx/files/FolderChild.js","webpack:///./public/javascripts/translations/upload_drop_zone.js","webpack:///./public/javascripts/dummyI18nResource.js?4b4c","webpack:///./app/jsx/files/UploadDropZone.js","webpack:///./app/coffeescripts/react_files/components/ColumnHeaders.js","webpack:///./app/jsx/files/ColumnHeaders.js","webpack:///./app/coffeescripts/react_files/components/CurrentUploads.js","webpack:///./app/coffeescripts/react_files/components/UploadProgress.js","webpack:///./app/jsx/files/UploadProgress.js","webpack:///./app/jsx/files/CurrentUploads.js","webpack:///./app/jsx/files/LoadingIndicator.js","webpack:///./app/jsx/files/ShowFolder.js","webpack:///./app/coffeescripts/react_files/components/SearchResults.js","webpack:///./app/jsx/files/NoResults.js","webpack:///./app/jsx/files/SearchResults.js","webpack:///./app/jsx/files/router.js","webpack:///./app/jsx/bundles/react_files.js","webpack:///./public/javascripts/lti/messages.js","webpack:///./app/jsx/shared/modal-content.js","webpack:///./public/javascripts/lti/post_message/handleLtiPostMessage.js"],"names":["ToolLaunchResizer","constructor","minToolHeight","this","tool_content_wrapper","wrapperId","container","$","length","resize_tool_content_wrapper","height","setHeight","whitelist","mergeI18nTranslations","JSON","parse","scoped","AUTO_LINKIFY_REGEX","th","quoteClump","lines","htmlEscape","t","raw","join","formatMessage","message","links","placeholderBlocks","replace","match","i","push","link","processedLines","quoteBlock","RegExp","shift","line","delimit","number","isNaN","String","sign","abs","Math","result","integer","floor","mod","truncateText","string","options","max","ellipsis","wordSeparator","trim","truncateAt","pos","indexOf","substring","plainText","ProgressBar","props","className","classnames","progress","role","aria-valuenow","aria-valuemin","aria-valuemax","aria-label","style","width","min","ModalButtons","React","Component","render","footerClassName","children","displayName","defaultProps","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","fn","scrollToVisible","obj","$obj","innerOffset","offset","outerWidth","outerHeight","top","bottom","left","right","currentTop","selector","windowScrollTop","scrollTop","currentLeft","scrollLeft","currentHeight","currentWidth","outerOffset","each","tagName","window","_class","_class2","_temp","Overlay","_dec","_Component","_this","call","_timeouts","handlePortalOpen","DOMNode","setTimeout","_isMounted","setState","open","handleTransitionExited","transitioning","state","key","value","prevProps","transition","forEach","timeout","clearTimeout","content","createElement","assign","propTypes","in","transitionOnMount","unmountOnExit","type","onExited","defaultFocusElement","renderTransition","onOpen","get","_DOMNode","set","el","node","bool","func","onClose","mountNode","oneOfType","insertAt","oneOf","label","isRequired","onDismiss","element","applicationElement","arrayOf","contentElement","shouldContainFocus","shouldReturnFocus","shouldCloseOnDocumentClick","shouldCloseOnEscape","transitionEnter","transitionExit","onEnter","onEntering","onEntered","onExit","onExiting","ContentTypeExternalToolTray","tool","placement","acceptedResourceTypes","targetResourceType","allowItemSelection","selectableItems","queryParams","com_instructure_course_accept_canvas_resource_types","com_instructure_course_canvas_resource_type","com_instructure_course_allow_canvas_resource_selection","com_instructure_course_available_canvas_resources","display","prefix","base_url","iframeUrl","param","title","size","padding","headerPadding","border","data-testid","src","data-lti-launch","loadedStylesheets","brandableCss","getCssVariant","variant","ENV","use_responsive_layout","contrast","use_high_contrast","rtl","isRTL","urlFor","bundleName","combinedChecksum","includesNoVariables","brandAndVariant","ASSET_HOST","loadStylesheet","opts","linkElement","document","rel","href","setAttribute","head","appendChild","canvasCssVariablesPolyfill","loc","location","origin","protocol","hostname","port","defineProperty","enumerable","_error","COMPUTED_CACHE","getFontSize","ignoreCache","canUseDOM","ownerDocument","documentElement","fontSize","parseInt","getComputedStyle","getPropertyValue","px","val","body","_parseUnit","parseUnit","_parseUnit2","num","unit","FriendlyDatetime","_","memoize","showTime","timeElementProps","datetime","dateTime","isDate","tz","fudged","fudgeDateForProfileTimezone","friendly","format","datetimeString","friendlyDatetime","timeProps","toISOString","fixedPrefix","endsWith","ref","c","time","aria-hidden","toLocaleDateString","modalOverrides","overlay","backgroundColor","position","borderRadius","Modal","modalIsOpen","isOpen","openModal","cleanupAfterClose","onRequestClose","getAppElement","removeAttr","closeModal","closeWithX","isFunction","onSubmit","promise","modal","disableWhileLoading","onAfterOpen","closeBtn","focus","appElement","getElementById","processMultipleChildren","buttons","Children","child","ModalContent","console","warn","preventDefault","componentWillReceiveProps","callback","ariaHideApp","overlayClassName","contentLabel","onClick","hasProp","hasOwnProperty","extend","parent","ctor","prototype","__super__","shimGetterShorthand","hostObject","getters","configurable","unflatten","reduce","newObj","split","lastKey","test","concat","cur","isArray","CanvasTray","contentPadding","errorSubject","errorCategory","errorImageUrl","otherTrayProps","Flex","Item","grow","Heading","GenericErrorPage","imageUrl","View","as","Tray","insetBlockStart","insetBlockEnd","insetInlineStart","insetInlineEnd","flexDirection","CloseButton","I18n","flex","ErrorBoundary","errorComponent","errorShipUrl","getBoundingClientRect","rect","pageXOffset","pageYOffset","innerWidth","innerHeight","doc","docEl","k","boundingRect","frameElement","defaultView","frameRect","clientTop","clientLeft","offsetWidth","offsetHeight","clientWidth","clientHeight","coerceTypes","true","false","null","deparam","params","coerce","currentQueryString","search","arguments","decodeURIComponent","setOptions","prompt","opt","optHtml","html","ifExists","scrollbarWidth","$div","appendTo","$innerDiv","find","w1","css","w2","remove","dim","speed","animate","opacity","undim","confirmDelete","defaults","$object","$dialog","noMessage","no_message","onContinue","confirmed","url","success","data","fadeOut","prepareData","authenticity_token","ajaxJSON","request","status","error","unhandledXHRs","cancelled","skipConfirmations","dialog","dialog_options","confirmation_class","includes","close","text","click","class","confirm","fragmentChange","query","query_hash","item","bind","$doc","found","_checkFragments","fragmentList","fragment","triggerHandler","hash","list","idx","clickLink","eq","hasClass","showIf","index","show","hide","disableIf","prop","indicate","$indicator","zIndex","addClass","mouseover","stop","append","singleFlash","fadeIn","scroll","hasScrollbar","scrollHeight","log","msg","fillWindowWithMe","minHeight","$this","$wrapper","$main","$not_right_side","$window","$toResize","add","alsoResize","fillWindowWithThisElement","spaceLeftForThis","newHeight","onResize","unbind","autoGrowInput","maxWidth","minWidth","comfortZone","filter","input","testSubject","fontFamily","fontWeight","letterSpacing","whiteSpace","insertAfter","testerWidth","newWidth","hasError","cloneElement","apiUserContent","translateMathmlForScreenreaders","$equationImage","mathml","attr","mathmlSpan","toMediaCommentLink","$link","nodeName","toLowerCase","convert","$dummy","replaceWith","forEditing","uuid","uniqueId","action","files_domain","$form","name","submit","equationImage","after","getInitialState","selectedItems","componentDidMount","on","handleCtrlPlusA","componentWillUnmount","off","multiselectIgnoredElements","needle","target","which","ctrlKey","metaKey","toggleAllSelected","shiftKey","shouldSelect","selectables","areAllItemsSelected","selectRange","newPos","lastPos","last","range","reverse","clearSelectedItems","cb","toggleItemSelected","event","closest","itemIsSelected","leaveOthersAlone","without","DragFeedback","WebkitTransform","pageX","pageY","transform","itemsToDrag","model","FilesystemObjectThumbnail","propType","fileOptions","PropTypes","object","onNameConflictResolved","isEditing","newProps","handleRenameClick","handleBackClick","handleReplaceClick","closeOnResolve","refs","canvasModal","file","dup","expandZip","handleChangeClick","ReactDOM","findDOMNode","newName","handleFormSubmit","FileRenameForm","buildContent","nameToUse","buildContentToRender","cannotOverwrite","renameMessage","defaultValue","buildButtons","buildButtonsToRender","createReactClass","moveStuff","filesAndFolders","destinationFolder","promises","moveItem","dfd","Deferred","moveTo","jqXHR","textStatus","errorThrown","reject","createFactory","attributes","display_name","when","flashMessage","one","other","count","onResolvePath","currentFolder","rootTillCurrentFolder","showingSearchResults","searchResultCollection","updatedModels","models","removedModel","toString","files","findWhere","splice","showingModal","modalContents","mixins","MultiselectableMixin","renderDragFeedback","dragHolder","removeDragFeedback","unmountComponentAtNode","onItemDragStart","dataTransfer","setData","img","Image","setDragImage","effectAllowed","originalEvent","onItemDragEnterOrOver","types","onItemDragLeaveOrEnd","onItemDrop","getData","done","onMove","modelsToMove","uniq","getPreviewQuery","retObj","preview","only_preview","search_term","sort","order","contents","afterClose","afterModalClose","customPropTypes","folder","contextAssetString","maxCrumbWidth","availableWidth","componentWillMount","fixOldCrumbs","handleResize","$oldCrumbs","heightOfOneBreadcrumb","homeName","$a","contextUrl","contextName","startRecalculating","newAvailableWidth","checkIfCrumbsFit","breadcrumbs","BreadcrumbCollapsedContainer","divClasses","closed","popover","onMouseEnter","onMouseLeave","onFocus","onBlur","foldersToContain","cid","urlPath","filesEnv","baseUrl","activeClassName","Breadcrumbs","renderSingleCrumb","isLastCrumb","isRootCrumb","splitAssetString","contextType","contextId","isContextRoot","renderDynamicCrumbs","foldersInMiddle","lastFolder","BBTreeBrowserView","bbOptions","viewObj","view","TreeBrowserView","viewOptions","renderOptions","views","newValues","currentValues","refresh","getView","res","$el","previous","destroyView","refreshed","create","rootFoldersToShow","contentTypes","useVerifiers","RootFoldersFinder","rootFolders","contextFiles","contextTypeAndId","context_asset_string","Folder","fetch","myFiles","rootFoldersFinder","treeBrowserId","onlyShowSubtrees","rootModelsFinder","dndOptions","hrefFor","focusStyleClass","selectedStyleClass","autoFetch","fetchItAll","FolderTreeHolder","expandTillCurrentFolder","treeBrowserViewId","removeClass","flashError","screenReaderFlashMessage","screenReaderFlashMessageExclusive","page","expandFolder","folderIndex","expand","FolderTree","update","interval","setInterval","clearInterval","units","friendlyBytes","resInt","resValue","bytes","pow","toFixed","n","FilesUsage","percentUsed","round","quota_used","quota","percentage","bytesAvailable","srLabel","paddingLeft","_itemToFocus","setItemToFocus","getItemToFocus","setFocusToItem","thingsToMove","filesystemObject","contextsAreEqual","destination","sources","source","assetString","collection","parentFolder","onSelectFolder","isCopyingFile","modelsBeingMoved","closeDialog","getTitle","BBTreeBrowser","MoveDialog","renderMoveButton","buttonClassNames","disabled","btn","aria-disabled","data-text-while-loading","openMoveDialog","returnFocusTo","rootFolderToShow","$moveDialog","showingAllContexts","deleteStuff","args","some","destroy","emulateHTTP","emulateJSON","force","wait","response","reason","json","parseJSON","responseText","Array","from","ZipFileOptionsForm","handleExpandClick","onZipOptionsResolved","handleUploadClick","buildMessage","fileName","BaseUploader","onPreflightComplete","uploadData","_actualUpload","onUploadPosted","trackProgress","loaded","total","onProgress","percentComplete","createPreFlightParams","content_type","on_duplicate","parent_folder_id","no_redirect","getPreflightUrl","upload","deferred","fail","failReason","screenReaderFlashError","completeUpload","catch","getProgress","roundProgress","getFileName","abort","_xhr","FileUploader","fileJson","addFileToCollection","attrs","uploadedFile","BBFile","ZipUploader","super","pre_attachment","contentMigrationId","getContentMigration","getJSON","results","progress_url","pullMigrationProgress","trackMigrationProgress","completion","workflow_state","onMigrationComplete","migrationProgress","migration_type","settings","folder_id","folders","reset","UploadQueue","_queue","flush","getAllUploaders","currentUploader","getCurrentUploader","onChange","createUploader","uploader","cancel","enqueue","attemptNextUpload","dequeue","firstNonErroredUpload","pageChangeWarning","_uploading","unshift","always","buildDefaultState","resolvedNames","nameCollisions","zipOptions","newOptions","queueUploads","f","toFilesOptionArray","fList","findMatchingFile","isZipFile","segregateOptionBuckets","selectedFiles","collisions","resolved","zips","nameToTest","matchingFile","handleAddFilesClick","addFileInput","handleFilesInputChange","fileNameOptions","allOptions","setOptionsFromFiles","notifyChange","hasNewOptions","setFolder","getFolder","getState","resetState","resolvedUserAction","FileOptionsCollection","form","componentDidUpdate","prevState","setStateFromOptions","componentWillUnMount","UploadButton","showingButtons","multiple","hiddenPhoneClassname","buildPotentialModal","itemsToManage","copyright","defaultCopyright","use_justification","defaultSelectedRight","cc_value","defaultCCValue","apiUrl","values","usageSelection","getValues","usageRightSelection","errorBox","usageRightValue","legal_copyright","license","cc_license","setUsageRights","updateModelsUsageRights","setRestrictedAccess","restrictedSelection","extractFormValues","every","save","useJustification","UsageRightsDialog","renderFileName","textToShow","items","renderFolderList","foldersToShow","folderBulletList","renderFolderTooltip","toolTipFolders","renderItems","renderedNames","tabIndex","folderTooltip","data-html-tooltip-title","data-tooltip","data-tooltip-class","renderFolderMessage","renderDifferentRightsMessage","differentRightsMessage","renderAccessManagement","userCanRestrictFilesForContext","RestrictedRadioButtons","usageRightsDialog","Header","buttonRef","cancelXButton","level","Body","DialogPreview","itemsToShow","UsageRightsSelectBox","Footer","Button","cancelButton","saveButton","downloadStuffAsAZip","promptBeforeLeaving","throttledSRMessage","throttle","leading","$progressIndicator","progessAPIResponse","percent","export_type","select","post","pipe","progressObject","Progress","poll","contentExportId","context_id","attachment","Toolbar","renderTrayToolsMenu","indexExternalToolsForContext","onLaunchTrayTool","iconForTrayTool","setExternalToolTray","downloadTitle","addFolder","getItemsToDownload","downloadSelectedAsZip","componentWillUpdate","nextProps","openRestrictedDialog","itemName","RestrictedDialogForm","usageRightsRequiredForContext","openUsageRightsDialog","modalOptions","usageRightsBtn","openPreview","FocusStore","previewLink","queryString","getPreviewRoute","onSubmitSearch","searchTerm","canvas_icon_class","icon_url","alt","ltiState","tray","refreshOnClose","reload","renderUploadAddFolderButtons","canManage","phoneHiddenSet","renderDeleteButton","renderManageUsageRightsButton","userCanManageFilesForContext","renderCopyCourseButton","renderDownloadButton","download","renderRestrictedAccessButtons","selectedItemIsFolder","submissionsFolderSelected","restrictedByMasterCourse","formClassName","buttonSetClasses","viewBtnClasses","placeholder","FilesApp","previewItem","splat","userHasPermission","contextsDictionary","usage_rights_required","externalToolsForContext","contextFor","file_menu_tools","file_index_menu_tools","pathname","getAllPages","modelOrCollection","onUpdate","loadedAll","updateAPIQuerySortParams","newParams","include","per_page","oldUrl","newUrl","LEADING_SLASH_TILL_BUT_NOT_INCLUDING_NEXT_SLASH","debouncedForceUpdate","debounce","isMounted","forceUpdate","previousIdentifier","registerListeners","unregisterListeners","getCurrentFolder","path","pluralAssetString","context","contexts","resolvePath","parsedResponse","errorMessages","errors","redirectToCourseFiles","isntPreviousFolder","isPreviewForFile","FilePreviewInfoPanel","scope","displayedItem","Backbone","Model","from_date","until_date","getFileStatus","mimeClass","html_url","license_name","isBackboneCollection","Collection","getPreviousInRelationTo","collectionItem","isBackbone","itemIndex","nextIndex","at","getNextInRelationTo","codeToRemoveLater","hideFileTreeFromPreviewInJaws","revertJawsChangesBackToNormal","FilePreview","PureComponent","showInfoPanel","getRouteIdentifier","getNavigationParams","except","v","getItemsToView","initialItem","onlyIdsToPreview","otherItems","visibleFile","responseDataRequested","File","preflightUrl","FilesystemObject","setUpOtherItemsQuery","toggle","newState","handleKeyboardNavigation","keyCode","ui","LEFT","RIGHT","nextItem","CollectionHandler","closePreview","stateProperties","renderArrowLink","direction","linkText","base","clickHandler","nativeEvent","renderPreview","iFrameClasses","allowFullScreen","previewOverlay","showInfoPanelClasses","onKeyDown","closeButton","Mask","theme","background","infoButton","getStatusMessage","BackboneMixin","editing","isNew","hideKeyboardCheck","isSelected","focusNameInput","startEditingName","focusPreviousElement","previouslyFocusedElement","activeElement","focusNameLink","nameLink","ext","lastIndexOf","setSelectionRange","saveNameEdit","cancelEditingName","getAttributesForRootNode","classNameString","activeDragTarget","isActiveDragTarget","toggleSelected","draggable","onDragStart","toggleActive","setActive","onDragEnter","onDragOver","onDragLeave","onDragEnd","onDrop","FolderChild","parentNode","checkForAccess","handleFileLinkClick","ItemCog","isMasterCourseRestricted","downloadFile","downloadZip","deleteItem","allTriggers","toArray","toFocus","first","settingsCogBtn","externalToolMenuItems","externalToolEnabled","wrap","singularContextType","menuItems","stopPropagation","data-popup-within","data-append-to-body","aria-expanded","MasterCourseLock","toggleLockedState","axios","put","COURSE_ID","content_id","restricted","isLocked","setLocked","showFlashError","extractStateFromModel","locked","canLockUnlock","wrapperClass","buttonClass","iconClass","UsageRightsIndicator","warningMessage","handleClick","getIconData","iconData","isFolder","renderItemCog","renderPublishCloud","PublishCloud","renderMasterCourseIcon","renderEditingState","maxLength","onKeyUp","elt","addEventListener","renderUsageRightsIndicator","user","selectCheckboxLabel","keyboardCheckboxClass","keyboardLabelClass","checked","UploadDropZone","active","shouldAcceptDrop","dropEffect","onParentDragEnter","killWindowDropDisplay","getParent","killWindowDrop","parentElement","buildNonActiveDropZone","buildInstructions","buildDropZone","removeEventListener","columns","property","displayNameShort","hideToggleAll","queryParamsFor","ColumnHeaders","column","isSortedCol","columnName","columnClassNameObj","columnClassName","linkClassName","encoded_path","part","encodeURIComponent","linkProps","aria-sort","asc","desc","renderColumns","currentUploads","shape","instanceOf","messages","sendProgressUpdate","newProgress","UploadProgress","renderProgressBar","errorMessage","rowClassNames","CurrentUploads","renderUploadProgress","progessComponents","classes","current_uploads","LoadingIndicator","isLoading","aria-live","ShowFolder","closeFilePreview","renderFilePreview","renderFolderChildOrEmptyContainer","isEmpty","currentState","folderOrRootFolder","foldersNextPageOrFilesNextPage","fetchingNextPage","selectAllLabelClass","htmlFor","FilesCollection","onFetchError","translateErrors","updateResults","isEqual","num_results","NoResults","SearchResults","displayErrors","error_message","to","childrenSorter","renderShowFolder","ctx","getFolderSplat","next","rawSplat","qs","querystring","start","router","monitorLtiMessages","beforeUnloadHandler","removeUnloadMessage","findDomForWindow","sourceWindow","iframes","getElementsByTagName","contentWindow","ltiMessageHandler","messageType","handleLtiPostMessage","subject","toolResizer","token","iframe","footer","scrollY","strMessage","stringify","postMessage","returnValue","cancelAnimationFrame","requestAnimationFrame","err","async","handler","default"],"mappings":"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","file":"react_files-c-67445c24c0.js","sourcesContent":["/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\n\nexport default class ToolLaunchResizer {\n  constructor(minToolHeight) {\n    this.minToolHeight = minToolHeight || 450\n  }\n\n  tool_content_wrapper(wrapperId) {\n    let container = $(`div[data-tool-wrapper-id*='${wrapperId}']`)\n    if (container.length <= 0 && $('.tool_content_wrapper').length === 1) {\n      container = $('.tool_content_wrapper')\n    }\n    return container\n  }\n\n  resize_tool_content_wrapper(height, container) {\n    let setHeight = height\n    if (typeof setHeight !== 'number') {\n      setHeight = this.minToolHeight\n    }\n    const toolWrapper = container || this.tool_content_wrapper()\n    toolWrapper.height(!height || this.minToolHeight > setHeight ? this.minToolHeight : setHeight)\n  }\n}\n","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport const whitelist = ['requestFullWindowLaunch', 'lti.resourceImported']\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"  \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"cy\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"dangos testun wedii ddyfynnu\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"da\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"vis tekst i gsejne\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"da-x-k12\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"vis tekst i gsejne\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"de\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"zitierten Text zeigen\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"el\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"   \\\"}}},\\\"en-AU\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"show quoted text\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"en-CA\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"show quoted text\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"en-GB\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"show quoted text\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"es\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"mostrar texto citado\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"fa\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"   \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"fi\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"nyt lainattu teksti\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"fr\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"afficher le texte entre guillemets\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"fr-CA\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"afficher le texte entre guillemets\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"he\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\" \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"ht\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"afiche tks site\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"hu\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"idzett szveg megjelentse\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"hy\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"   \\\",\\\"word_separator\\\":\\\"-\\\"}}},\\\"is\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"Sna vitnaan texta\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"it\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"mostra testo citato\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"ja\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"ko\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"  \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"mi\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"whakaatu kuputuhi faahiti\\\",\\\"word_separator\\\":\\\"-\\\"}}},\\\"nb\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"vis den merkede teksten\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"nb-x-k12\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"vis den merkede teksten\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"nl\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"geciteerde tekst tonen\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"nn\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"vis sitert tekst\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"pl\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"poka cytowany fragment tekstu\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"pt\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"exibir texto citado\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"pt-BR\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"exibir texto citado\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"ru\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"  \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"sl\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"prikai citirano besedilo\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"sv\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"visa citerad text\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"sv-x-k12\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"visa citerad text\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"tr\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"alntlanan metni gster\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"uk\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"  \\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"zh-Hans\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"\\\",\\\"word_separator\\\":\\\" \\\"}}},\\\"zh-Hant\\\":{\\\"lib\\\":{\\\"text_helper\\\":{\\\"ellipsis\\\":\\\"...\\\",\\\"quoted_text_toggle\\\":\\\"\\\",\\\"word_separator\\\":\\\" \\\"}}}}\"));\n","#\n# Copyright (C) 2012 - present Instructure, Inc.\n#\n# This file is part of Canvas.\n#\n# Canvas is free software: you can redistribute it and/or modify it under\n# the terms of the GNU Affero General Public License as published by the Free\n# Software Foundation, version 3 of the License.\n#\n# Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n# A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n# details.\n#\n# You should have received a copy of the GNU Affero General Public License along\n# with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n\nimport $ from 'jquery'\nimport I18n from 'i18n!lib.text_helper'\nimport htmlEscape from 'str/htmlEscape'\n\nAUTO_LINKIFY_PLACEHOLDER = \"LINK-PLACEHOLDER\"\nAUTO_LINKIFY_REGEX = ///\n  \\b\n  (                                            # Capture 1: entire matched URL\n    (?:\n      https?://                                # http or https protocol\n      |                                        # or\n      www\\d{0,3}[.]                            # \"www.\", \"www1.\", \"www2.\"  \"www999.\"\n      |                                        # or\n      [a-z0-9.\\-]+[.][a-z]{2,4}/               # looks like domain name followed by a slash\n    )\n\n    (?:\n      [^\\s()<>]+                               # Run of non-space, non-()<>\n      |                                        # or\n      \\([^\\s()<>]*\\)                           # balanced parens, single level\n    )+\n\n    (?:\n      \\([^\\s()<>]*\\)                           # balanced parens, single level\n      |                                        # or\n      [^\\s`!()\\[\\]{};:'\".,<>?]           # End with: not a space or one of these punct chars\n    )\n  ) | (\n    LINK-PLACEHOLDER\n  )\n///gi\n\nexport default th =\n  quoteClump: (lines) ->\n    \"<div class='quoted_text_holder'>\n      <a href='#' class='show_quoted_text_link'>#{htmlEscape I18n.t(\"quoted_text_toggle\", \"show quoted text\")}</a>\n      <div class='quoted_text' style='display: none;'>\n        #{$.raw lines.join \"\\n\"}\n      </div>\n    </div>\"\n\n  formatMessage: (message) ->\n    # replace any links with placeholders so we don't escape them\n    links = []\n    placeholderBlocks = []\n    message = message.replace AUTO_LINKIFY_REGEX, (match, i) ->\n      placeholderBlocks.push(if match == AUTO_LINKIFY_PLACEHOLDER\n          AUTO_LINKIFY_PLACEHOLDER\n        else\n          link = match\n          link = \"http://\" + link unless link[0..6] == 'http://' or link[0..7] == 'https://'\n          links.push link\n          \"<a href='#{htmlEscape(link)}'>#{htmlEscape(match)}</a>\"\n      )\n      AUTO_LINKIFY_PLACEHOLDER\n\n    # now escape html\n    message = htmlEscape message\n\n    # now put the links back in\n    message = message.replace new RegExp(AUTO_LINKIFY_PLACEHOLDER, 'g'), (match, i) ->\n      placeholderBlocks.shift()\n\n    # replace newlines\n    message = message.replace /\\n/g, '<br />\\n'\n\n    # generate quoting clumps\n    processedLines = []\n    quoteBlock = []\n    for line in message.split(\"\\n\")\n      if line.match /^(&gt;|>)/\n        quoteBlock.push line\n      else\n        processedLines.push th.quoteClump(quoteBlock) if quoteBlock.length\n        quoteBlock = []\n        processedLines.push line\n    processedLines.push th.quoteClump(quoteBlock) if quoteBlock.length\n    message = processedLines.join \"\\n\"\n\n  delimit: (number) ->\n    # only process real numbers\n    return String(number) if isNaN number\n\n    # capture sign and then start working with the absolute value. don't\n    # process infinities.\n    sign = if number < 0 then '-' else ''\n    abs = Math.abs number\n    return String(number) if abs is Infinity\n\n    # break out the integer portion and initialize the result to just the\n    # decimal (if any)\n    integer = Math.floor abs\n    result = if abs == integer then '' else String(abs).replace(/^\\d+\\./, '.')\n\n    # for each comma'd chunk, prepend to the result and remove from integer\n    while integer >= 1000\n      mod = String(integer).replace(/\\d+(\\d\\d\\d)$/, ',$1')\n      integer = Math.floor integer / 1000\n      result = mod + result\n\n    # integer is now either in [1, 999], or equal to 0 iff number in (-1, 1).\n    # prepend it with the sign\n    sign + String(integer) + result\n\n  truncateText: (string, options = {}) ->\n    max = options.max ? 30\n    ellipsis = I18n.t('ellipsis', '...')\n    wordSeparator = I18n.t('word_separator', ' ')\n\n    string = (string ? \"\").replace(/\\s+/g, wordSeparator).trim()\n    return string if not string or string.length <= max\n\n    truncateAt = 0\n    while true\n      pos = string.indexOf(wordSeparator, truncateAt + 1)\n      break if pos < 0 || pos > max - ellipsis.length\n      truncateAt = pos\n    truncateAt or= max - ellipsis.length # first word > max, so we cut it\n\n    string.substring(0, truncateAt) + ellipsis\n\n  plainText: (message) ->\n    # remove all html tags from the message returning only the text\n    message.replace(/(<([^>]+)>)/ig, '');\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/lib.text_helper';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('lib.text_helper');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport {number, string} from 'prop-types'\nimport classnames from 'classnames'\n\nexport default function ProgressBar(props) {\n  return (\n    <div\n      className={classnames({\n        'progress-bar__bar-container': true,\n        'almost-done': props.progress === 100\n      })}\n    >\n      <div\n        className={classnames({\n          'progress-bar__bar': true,\n          'almost-done': props.progress === 100\n        })}\n        role=\"progressbar\"\n        aria-valuenow={props.progress}\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        aria-label={props['aria-label'] || ''}\n        style={{\n          width: `${Math.min(props.progress, 100)}%`\n        }}\n      />\n    </div>\n  )\n}\n\nProgressBar.propTypes = {\n  'aria-label': string,\n  progress: number.isRequired\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\n\nexport default class ModalButtons extends React.Component {\n  static displayName = 'ModalButtons'\n\n  static defaultProps = {\n    className: 'ReactModal__Footer',\n    footerClassName: 'ReactModal__Footer-Actions'\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <div className={this.props.footerClassName}>{this.props.children}</div>\n      </div>\n    )\n  }\n}\n","var map = {\n\t\"./__tests__/handleLtiPostMessages.test.js\": [\n\t\t\"Af1U\",\n\t\t630\n\t],\n\t\"./__tests__/lti.resourceImported.test.js\": [\n\t\t\"yySz\",\n\t\t566\n\t],\n\t\"./__tests__/requestFullWindowLaunch.test.js\": [\n\t\t\"w8Zi\",\n\t\t567\n\t],\n\t\"./handleLtiPostMessage.js\": [\n\t\t\"y+46\"\n\t],\n\t\"./lti.resourceImported.js\": [\n\t\t\"75OS\",\n\t\t631\n\t],\n\t\"./messageTypes.js\": [\n\t\t\"0YqI\"\n\t],\n\t\"./requestFullWindowLaunch.js\": [\n\t\t\"S3m7\",\n\t\t632\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"9cv0\";\nmodule.exports = webpackAsyncContext;","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Scrolls the supplied object until its visible. Call from\n// (\"html,body\") to scroll the window.\n\nimport $ from 'jquery'\nimport './vendor/jquery.scrollTo'\n\n$.fn.scrollToVisible = function(obj) {\n  const options = {}\n  const $obj = $(obj)\n\n  if ($obj.length === 0) {\n    return\n  }\n  let innerOffset = $obj.offset(),\n    width = $obj.outerWidth(),\n    height = $obj.outerHeight(),\n    top = innerOffset.top,\n    bottom = top + height,\n    left = innerOffset.left,\n    right = left + width,\n    currentTop = this.selector == 'html,body' ? $.windowScrollTop() : this.scrollTop(),\n    currentLeft = this.scrollLeft(),\n    currentHeight = this.outerHeight(),\n    currentWidth = this.outerWidth()\n\n  if (this.selector != 'html,body') {\n    let outerOffset = $('body').offset()\n    this.each(function() {\n      try {\n        outerOffset = $(this).offset()\n        return false\n      } catch (e) {}\n    })\n    top -= outerOffset.top\n    bottom -= outerOffset.top\n    left -= outerOffset.left\n    right -= outerOffset.left\n  }\n\n  if (this[0].tagName == 'HTML' || this[0].tagName == 'BODY') {\n    currentHeight = $(window).height()\n    if ($('#wizard_box:visible').length > 0) {\n      currentHeight -= $('#wizard_box:visible').height()\n    }\n    currentWidth = $(window).width()\n    top -= currentTop\n    left -= currentLeft\n    bottom -= currentTop\n    right -= currentLeft\n  }\n  if (top < 0 || (currentHeight < height && bottom > currentHeight)) {\n    options.scrollTop = top + currentTop\n  } else if (bottom > currentHeight) {\n    options.scrollTop = bottom + currentTop - currentHeight + 20\n  }\n  if (left < 0) {\n    options.scrollLeft = left + currentLeft\n  } else if (right > currentWidth) {\n    options.scrollLeft = right + currentLeft - currentWidth + 20\n  }\n  if (options.scrollTop == 1) {\n    options.scrollTop = 0\n  }\n  if (options.scrollLeft == 1) {\n    options.scrollLeft = 0\n  }\n\n  this.scrollTop(options.scrollTop)\n  this.scrollLeft(options.scrollLeft)\n\n  return this\n}\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nvar _dec, _class, _class2, _temp;\n\n/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 - present Instructure, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dialog } from '@instructure/ui-dialog';\nimport { testable } from '@instructure/ui-testable';\nimport { createChainedFunction } from '@instructure/ui-utils';\nimport { omitProps, pickProps } from '@instructure/ui-react-utils';\nimport { element } from '@instructure/ui-prop-types';\nimport { Portal } from '@instructure/ui-portal';\nimport { Transition } from '@instructure/ui-motion';\n/**\n---\ncategory: components\n---\n**/\n\nvar Overlay = (_dec = testable(), _dec(_class = (_temp = _class2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Overlay, _Component);\n\n  function Overlay(props) {\n    var _this;\n\n    _classCallCheck(this, Overlay);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Overlay).call(this, props));\n    _this._timeouts = [];\n\n    _this.handlePortalOpen = function (DOMNode) {\n      _this.DOMNode = DOMNode;\n\n      _this._timeouts.push(setTimeout(function () {\n        if (_this._isMounted) {\n          _this.setState({\n            open: true\n          });\n        }\n      }));\n    };\n\n    _this.handleTransitionExited = function () {\n      _this.setState({\n        open: false,\n        transitioning: false\n      });\n    };\n\n    _this.state = {\n      open: props.open,\n      transitioning: false\n    };\n    return _this;\n  }\n\n  _createClass(Overlay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.open && !this.props.open) {\n        // closing\n        this.setState({\n          transitioning: prevProps.transition !== null\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n\n      this._timeouts.forEach(function (timeout) {\n        return clearTimeout(timeout);\n      });\n    }\n  }, {\n    key: \"renderTransition\",\n    value: function renderTransition(content) {\n      return React.createElement(Transition, Object.assign({}, pickProps(this.props, Transition.propTypes), {\n        in: this.props.open,\n        transitionOnMount: true,\n        unmountOnExit: true,\n        type: this.props.transition,\n        onExited: createChainedFunction(this.handleTransitionExited, this.props.onExited)\n      }), content);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var content = React.createElement(Dialog, Object.assign({}, omitProps(this.props, Overlay.propTypes), pickProps(this.props, Dialog.propTypes), {\n        defaultFocusElement: this.props.defaultFocusElement,\n        open: this.state.open\n      }), this.props.children);\n\n      if (this.props.transition) {\n        content = this.renderTransition(content);\n      }\n\n      return React.createElement(Portal, Object.assign({}, pickProps(this.props, Portal.propTypes), {\n        open: this.props.open || this.state.transitioning,\n        onOpen: createChainedFunction(this.handlePortalOpen, this.props.onOpen)\n      }), content);\n    }\n  }, {\n    key: \"DOMNode\",\n    get: function get() {\n      return this._DOMNode;\n    },\n    set: function set(el) {\n      this._DOMNode = el;\n    }\n  }]);\n\n  Overlay.displayName = \"Overlay\";\n  return Overlay;\n}(Component), _class2.propTypes = {\n  children: PropTypes.node,\n\n  /**\n   * Whether or not the `<Overlay />` is open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Callback fired when `<Portal />` content has been mounted in the DOM\n   */\n  onOpen: PropTypes.func,\n\n  /**\n   * Callback fired when `<Portal />` has been unmounted from the DOM\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * An element or a function returning an element to use as the mount node\n   * for the `<Portal />` (defaults to `document.body`)\n   */\n  mountNode: PropTypes.oneOfType([element, PropTypes.func]),\n\n  /**\n   * Insert the element at the 'top' of the mountNode or at the 'bottom'\n   */\n  insertAt: PropTypes.oneOf(['bottom', 'top']),\n\n  /**\n   * An accessible label for the `<Overlay />` content\n   */\n  label: PropTypes.string.isRequired,\n\n  /**\n   * Callback fired when the `<Overlay />` is requesting to be closed\n   */\n  onDismiss: PropTypes.func,\n\n  /**\n   * An element or a function returning an element to focus by default\n   */\n  defaultFocusElement: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  /**\n   * An element or a function returning an element to apply `aria-hidden` to\n   */\n  applicationElement: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.element), PropTypes.element, PropTypes.func]),\n\n  /**\n   * An element or a function returning an element that wraps the content of the `<Overlay />`\n   */\n  contentElement: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n  shouldContainFocus: PropTypes.bool,\n  shouldReturnFocus: PropTypes.bool,\n  shouldCloseOnDocumentClick: PropTypes.bool,\n  shouldCloseOnEscape: PropTypes.bool,\n\n  /**\n   * The type of `<Transition />` to use for animating in/out\n   */\n  transition: Transition.propTypes.type,\n\n  /**\n   * Show the component; triggers the enter or exit animation\n   */\n  in: PropTypes.bool,\n\n  /**\n   * Unmount the component (remove it from the DOM) when it is not shown\n   */\n  unmountOnExit: PropTypes.bool,\n\n  /**\n   * Run the enter animation when the component mounts, if it is initially\n   * shown\n   */\n  transitionOnMount: PropTypes.bool,\n\n  /**\n   * Run the enter animation\n   */\n  transitionEnter: PropTypes.bool,\n\n  /**\n   * Run the exit animation\n   */\n  transitionExit: PropTypes.bool,\n\n  /**\n   * Callback fired before the \"entering\" classes are applied\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired after the \"entering\" classes are applied\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the \"enter\" classes are applied\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired before the \"exiting\" classes are applied\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exiting\" classes are applied\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exited\" classes are applied\n   */\n  onExited: PropTypes.func\n}, _class2.defaultProps = {\n  children: null,\n  open: false,\n  insertAt: 'bottom',\n  onOpen: function onOpen() {},\n  onClose: function onClose() {},\n  mountNode: null,\n  shouldContainFocus: false,\n  shouldReturnFocus: false,\n  shouldCloseOnDocumentClick: false,\n  shouldCloseOnEscape: true,\n  applicationElement: null,\n  defaultFocusElement: null,\n  contentElement: null,\n  onDismiss: function onDismiss() {},\n  transition: null,\n  in: false,\n  unmountOnExit: false,\n  transitionOnMount: false,\n  transitionEnter: true,\n  transitionExit: true,\n  onEnter: function onEnter() {},\n  onEntering: function onEntering() {},\n  onEntered: function onEntered() {},\n  onExit: function onExit() {},\n  onExiting: function onExiting() {},\n  onExited: function onExited() {}\n}, _temp)) || _class);\nexport default Overlay;\nexport { Overlay };","//\n// Copyright (C) 2019 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under the\n// terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n// FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react'\nimport {arrayOf, oneOf, bool, string, shape, func} from 'prop-types'\nimport CanvasTray from 'jsx/shared/components/CanvasTray'\nimport $ from 'jquery'\n\nconst toolShape = shape({\n  id: string.isRequired,\n  title: string.isRequired,\n  base_url: string.isRequired,\n  icon_url: string\n})\n\nconst moduleShape = shape({\n  id: string.isRequired,\n  name: string.isRequired\n})\n\nconst knownResourceTypes = [\n  'assignment',\n  'assignment_group',\n  'audio',\n  'discussion_topic',\n  'document',\n  'image',\n  'module',\n  'quiz',\n  'page',\n  'video'\n]\n\nContentTypeExternalToolTray.propTypes = {\n  tool: toolShape,\n  placement: string.isRequired,\n  acceptedResourceTypes: arrayOf(oneOf(knownResourceTypes)).isRequired,\n  targetResourceType: oneOf(knownResourceTypes).isRequired,\n  allowItemSelection: bool.isRequired,\n  selectableItems: arrayOf(moduleShape).isRequired,\n  onDismiss: func,\n  open: bool\n}\n\nexport default function ContentTypeExternalToolTray({\n  tool,\n  placement,\n  acceptedResourceTypes,\n  targetResourceType,\n  allowItemSelection,\n  selectableItems,\n  onDismiss,\n  open\n}) {\n  const queryParams = {\n    com_instructure_course_accept_canvas_resource_types: acceptedResourceTypes,\n    com_instructure_course_canvas_resource_type: targetResourceType,\n    com_instructure_course_allow_canvas_resource_selection: allowItemSelection,\n    com_instructure_course_available_canvas_resources: selectableItems,\n    display: 'borderless',\n    placement\n  }\n  const prefix = tool?.base_url.indexOf('?') === -1 ? '?' : '&'\n  const iframeUrl = `${tool?.base_url}${prefix}${$.param(queryParams)}`\n  const title = tool ? tool.title : ''\n  return (\n    <CanvasTray\n      open={open}\n      label={title}\n      onDismiss={onDismiss}\n      placement=\"end\"\n      size=\"regular\"\n      padding=\"0\"\n      headerPadding=\"small\"\n    >\n      <iframe\n        style={{border: 'none', display: 'block', width: '100%', height: '100%'}}\n        data-testid=\"ltiIframe\"\n        src={iframeUrl}\n        title={title}\n        data-lti-launch=\"true\"\n      />\n    </CanvasTray>\n  )\n}\n","//\n// Copyright (C) 2015 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport {isRTL} from 'jsx/shared/helpers/rtlHelper'\n\nconst loadedStylesheets = {}\n\nconst brandableCss = {\n  getCssVariant() {\n    const variant = window.ENV.use_responsive_layout ? 'responsive_layout' : 'new_styles'\n    const contrast = window.ENV.use_high_contrast ? 'high_contrast' : 'normal_contrast'\n    const rtl = isRTL() ? '_rtl' : ''\n    return `${variant}_${contrast}${rtl}`\n  },\n\n  // combinedChecksum should be like '09f833ef7a'\n  // and includesNoVariables should be true if this bundle does not\n  // \"@include\" variables.scss, brand_variables.scss or variant_variables.scss\n  urlFor(bundleName, {combinedChecksum, includesNoVariables}) {\n    const brandAndVariant = includesNoVariables ? 'no_variables' : brandableCss.getCssVariant()\n\n    return [\n      window.ENV.ASSET_HOST || '',\n      'dist',\n      'brandable_css',\n      brandAndVariant,\n      `${bundleName}-${combinedChecksum}.css`\n    ].join('/')\n  },\n\n  // bundleName should be something like 'jst/foo'\n  loadStylesheet(bundleName, opts) {\n    if (bundleName in loadedStylesheets) return\n\n    const linkElement = document.createElement('link')\n    linkElement.rel = 'stylesheet'\n    linkElement.href = brandableCss.urlFor(bundleName, opts)\n\n    // give the person trying to track down a bug a hint on how this link tag got on the page\n    linkElement.setAttribute('data-loaded-by-brandableCss', true)\n    document.head.appendChild(linkElement)\n\n    // For browsers that don't support css varibles (right now only IE11), we need to pass\n    // this newly injected stylesheet to the cssVariables polyfill so that it can polyfill it.\n    // The polyfill will only exist on window in browsers that need it.\n    if (window.canvasCssVariablesPolyfill) window.canvasCssVariablesPolyfill(linkElement)\n  }\n}\nexport default brandableCss\n","(function() {\n  'use strict';\n  var loc, value;\n\n  loc = window.location;\n\n  if (loc.origin) {\n    return;\n  }\n\n  value = loc.protocol + '//' + loc.hostname + (loc.port ? ':' + loc.port : '');\n\n  try {\n    Object.defineProperty(loc, 'origin', {\n      value: value,\n      enumerable: true\n    });\n  } catch (_error) {\n    loc.origin = value;\n  }\n\n}).call(this);\n","/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 - present Instructure, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport { canUseDOM } from './canUseDOM';\nimport { ownerDocument } from './ownerDocument';\nimport { getComputedStyle } from './getComputedStyle';\nvar COMPUTED_CACHE = {};\n/**\n * ---\n * category: utilities/DOM\n * ---\n *\n * Gets font size in px\n *\n * @param {ReactComponent|DomNode} el - component or DOM node\n * @returns {Object} font size in px\n */\n\nfunction getFontSize(el, ignoreCache) {\n  if (!canUseDOM) {\n    return 16;\n  }\n\n  var container = el || ownerDocument(el).documentElement; // return the cached font size if it's there\n\n  if (!ignoreCache && COMPUTED_CACHE[container]) {\n    return COMPUTED_CACHE[container];\n  }\n\n  var fontSize = parseInt(getComputedStyle(container).getPropertyValue('font-size')); // cache the computed font size so that we don't have to compute it again\n\n  COMPUTED_CACHE[container] = fontSize;\n  return fontSize;\n}\n\nexport default getFontSize;\nexport { getFontSize };","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\n/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 - present Instructure, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport { getFontSize } from '@instructure/ui-dom-utils';\nimport { parseUnit } from './parseUnit';\n/**\n * ---\n * category: utilities\n * ---\n * Converts a unit value size combination (em, rem, px) to a number representing px\n *\n * Example inputs:\n *  - '100rem'\n *  - '20em'\n *  - '40px'\n *\n * @module px\n *\n * @param {String} val\n * @param {DomNode} el - containing element, for context measure is em (defaults to document.body)\n * @returns {Number} Returns numerical representation of pixels\n*/\n\nfunction px(val, el) {\n  var container = el || document.body;\n\n  if (!val || typeof val === 'number') {\n    return val;\n  }\n\n  var _parseUnit = parseUnit(val),\n      _parseUnit2 = _slicedToArray(_parseUnit, 2),\n      num = _parseUnit2[0],\n      unit = _parseUnit2[1];\n\n  if (unit === 'rem') {\n    return num * getFontSize();\n  } else if (unit === 'em') {\n    return num * getFontSize(container);\n  } else {\n    return num;\n  }\n}\n\nexport default px;\nexport { px };","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport tz from 'timezone'\nimport _ from 'underscore'\nimport $ from 'jquery'\nimport 'jquery.instructure_date_and_time'\nimport {ScreenReaderContent} from '@instructure/ui-a11y-content'\n\nclass FriendlyDatetime extends Component {\n  static propTypes = {\n    dateTime: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]).isRequired,\n    format: PropTypes.string,\n    prefix: PropTypes.string,\n    showTime: PropTypes.bool\n  }\n\n  static defaultProps = {\n    format: null,\n    prefix: '',\n    showTime: false\n  }\n\n  // The original render function is really slow because of all\n  // tz.parse, $.fudge, $.datetimeString, etc.\n  // As long as @props.datetime stays same, we don't have to recompute our output.\n  // memoizing like this beat React.addons.PureRenderMixin 3x\n  render = _.memoize(\n    () => {\n      // Separate props not used by the `time` element\n      const {showTime, ...timeElementProps} = this.props\n\n      let datetime = this.props.dateTime\n      if (!datetime) {\n        return <time />\n      }\n      if (!_.isDate(datetime)) {\n        datetime = tz.parse(datetime)\n      }\n      const fudged = $.fudgeDateForProfileTimezone(datetime)\n      let friendly\n      if (this.props.format) {\n        friendly = tz.format(datetime, this.props.format)\n      } else if (showTime) {\n        friendly = $.datetimeString(datetime)\n      } else {\n        friendly = $.friendlyDatetime(fudged)\n      }\n\n      const timeProps = {\n        ...timeElementProps,\n        title: $.datetimeString(datetime),\n        dateTime: datetime.toISOString()\n      }\n\n      let fixedPrefix = this.props.prefix\n      if (fixedPrefix && !fixedPrefix.endsWith(' ')) {\n        fixedPrefix += ' '\n      }\n\n      return (\n        <span data-testid=\"friendly-date-time\">\n          <ScreenReaderContent>{fixedPrefix + friendly}</ScreenReaderContent>\n\n          <time\n            {...timeProps}\n            ref={c => {\n              this.time = c\n            }}\n            aria-hidden=\"true\"\n          >\n            <span className=\"visible-desktop\">\n              {/* something like: Mar 6, 2014 */}\n              {fixedPrefix + friendly}\n            </span>\n            <span className=\"hidden-desktop\">\n              {/* something like: 3/3/2014 */}\n              {fudged.toLocaleDateString()}\n            </span>\n          </time>\n        </span>\n      )\n    },\n    () => this.props.dateTime\n  )\n}\n\nexport default FriendlyDatetime\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport $ from 'jquery'\nimport _ from 'underscore'\nimport preventDefault from 'compiled/fn/preventDefault'\nimport ReactModal from 'react-modal'\nimport ModalContent from './modal-content'\nimport ModalButtons from './modal-buttons'\n\nconst modalOverrides = {\n  overlay: {\n    backgroundColor: 'rgba(0,0,0,0.5)'\n  },\n  content: {\n    position: 'static',\n    top: '0',\n    left: '0',\n    right: 'auto',\n    bottom: 'auto',\n    borderRadius: '0',\n    border: 'none',\n    padding: '0'\n  }\n}\n\nexport default class Modal extends React.Component {\n  static defaultProps = {\n    className: 'ReactModal__Content--canvas', // Override with \"ReactModal__Content--canvas ReactModal__Content--mini-modal\" for a mini modal\n    style: {}\n  }\n\n  state = {\n    modalIsOpen: this.props.isOpen\n  }\n\n  componentWillReceiveProps(props) {\n    let callback\n    if (this.props.isOpen && !props.isOpen) callback = this.cleanupAfterClose\n    this.setState({modalIsOpen: props.isOpen}, callback)\n  }\n\n  openModal = () => {\n    this.setState({modalIsOpen: true})\n  }\n\n  cleanupAfterClose = () => {\n    if (this.props.onRequestClose) this.props.onRequestClose()\n    $(this.getAppElement()).removeAttr('aria-hidden')\n  }\n\n  closeModal = () => {\n    this.setState({modalIsOpen: false}, this.cleanupAfterClose)\n  }\n\n  closeWithX = () => {\n    if (_.isFunction(this.props.closeWithX)) this.props.closeWithX()\n    this.closeModal()\n  }\n\n  onSubmit = () => {\n    const promise = this.props.onSubmit()\n    $(this.modal).disableWhileLoading(promise)\n  }\n\n  onAfterOpen = () => {\n    this.closeBtn.focus()\n    if (this.props.onAfterOpen) {\n      this.props.onAfterOpen()\n    }\n  }\n\n  getAppElement = () =>\n    // Need to wait for the dom to load before we can get the default #application dom element\n    this.props.appElement || document.getElementById('application')\n\n  processMultipleChildren = props => {\n    let content = null\n    let buttons = null\n\n    React.Children.forEach(props.children, child => {\n      if (child.type === ModalContent) {\n        content = child\n      } else if (child.type === ModalButtons) {\n        buttons = child\n      } else {\n        // Warning if you don't include a component of the right type\n        console.warn(\n          'Modal chilren must be wrapped in either a modal-content or modal-buttons component.'\n        )\n      }\n    })\n\n    if (this.props.onSubmit) {\n      return (\n        <form className=\"ModalForm\" onSubmit={preventDefault(this.onSubmit)}>\n          {[content, buttons]}\n        </form>\n      )\n    } else {\n      return [content, buttons] // This order needs to be maintained\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"canvasModal\">\n        <ReactModal\n          ariaHideApp={!!this.state.modalIsOpen}\n          isOpen={!!this.state.modalIsOpen}\n          onRequestClose={this.closeModal}\n          className={this.props.className}\n          style={modalOverrides}\n          onAfterOpen={this.onAfterOpen}\n          overlayClassName={this.props.overlayClassName}\n          contentLabel={this.props.contentLabel}\n          appElement={this.getAppElement()}\n        >\n          <div\n            ref={c => {\n              this.modal = c\n            }}\n            className=\"ReactModal__Layout\"\n            style={this.props.style}\n          >\n            <div className=\"ReactModal__Header\">\n              <div className=\"ReactModal__Header-Title\">\n                <h4>{this.props.title}</h4>\n              </div>\n              <div className=\"ReactModal__Header-Actions\">\n                <button\n                  ref={c => {\n                    this.closeBtn = c\n                  }}\n                  className=\"Button Button--icon-action\"\n                  type=\"button\"\n                  onClick={this.closeWithX}\n                >\n                  <i className=\"icon-x\" />\n                  <span className=\"screenreader-only\">Close</span>\n                </button>\n              </div>\n            </div>\n            {this.processMultipleChildren(this.props)}\n          </div>\n        </ReactModal>\n      </div>\n    )\n  }\n}\n","/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst hasProp = {}.hasOwnProperty\n\nexport function extend(child, parent) {\n  for (const key in parent) {\n    if (hasProp.call(parent, key)) child[key] = parent[key]\n  }\n  function ctor() {\n    this.constructor = child\n  }\n  ctor.prototype = parent.prototype\n  child.prototype = new ctor()\n  child.__super__ = parent.prototype\n  return child\n}\n\n/**\n * since you can't use es6 Object initializer getter shorthand (eg: {get foo(){ return 'bar'}})\n * in coffeescript, this is a helper to do it the manual way using Object.defineProperty\n * @param {Object} [hostObject] the object that you want to define the getters onto\n * @param {Object} getters key/value pairs of \"propertyName\" and getter functions. eg: {foo: () => \"bar\"}\n * @returns {Object} hostObject\n */\nexport function shimGetterShorthand(hostObject, getters) {\n  Object.keys(getters).forEach(key =>\n    Object.defineProperty(hostObject, key, {\n      get: getters[key],\n      enumerable: true,\n      configurable: true\n    })\n  )\n  return hostObject\n}\n","//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport _ from 'underscore'\n\n// turns {'foo[bar]': 1} into {foo: {bar: 1}}\nexport default function unflatten(obj) {\n  return _(obj).reduce((newObj, val, key) => {\n    let keys = key.split('][')\n    let lastKey = keys.length - 1\n\n    // If the first keys part contains [ and the last ends with ], then []\n    // are correctly balanced.\n    if (/\\[/.test(keys[0]) && /\\]$/.test(keys[lastKey])) {\n      // Remove the trailing ] from the last keys part.\n      keys[lastKey] = keys[lastKey].replace(/\\]$/, '')\n\n      // Split first keys part into two parts on the [ and add them back onto\n      // the beginning of the keys array.\n      keys = keys\n        .shift()\n        .split('[')\n        .concat(keys)\n      lastKey = keys.length - 1\n    } else {\n      // Basic 'foo' style key.\n      lastKey = 0\n    }\n\n    if (lastKey) {\n      // Complex key, build deep object structure based on a few rules:\n      // * The 'cur' pointer starts at the object top-level.\n      // * [] = array push (n is set to array length), [n] = array if n is\n      //   numeric, otherwise object.\n      // * If at the last keys part, set the value.\n      // * For each keys part, if the current level is undefined create an\n      //   object or array based on the type of the next keys part.\n      // * Move the 'cur' pointer to the next level.\n      // * Rinse & repeat.\n      let i = 0\n      let cur = newObj\n      while (i <= lastKey) {\n        key = keys[i] === '' ? cur.length : keys[i]\n\n        cur = cur[key] =\n          i < lastKey ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : []) : val\n        i++\n      }\n    } else {\n      // Simple key, even simpler rules, since only scalars and shallow\n      // arrays are allowed.\n\n      if (_.isArray(newObj[key])) {\n        // val is already an array, so push on the next value.\n        newObj[key].push(val)\n      } else if (newObj[key] != null) {\n        // val isn't an array, but since a second value has been specified,\n        // convert val into an array.\n        newObj[key] = [newObj[key], val]\n      } else {\n        // val is a scalar.\n        newObj[key] = val\n      }\n    }\n\n    return newObj\n  }, {})\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"cy\\\":{\\\"close_d634289d\\\":\\\"Cau\\\"},\\\"da\\\":{\\\"close_d634289d\\\":\\\"Luk\\\"},\\\"da-x-k12\\\":{\\\"close_d634289d\\\":\\\"Luk\\\"},\\\"de\\\":{\\\"close_d634289d\\\":\\\"Schlieen\\\"},\\\"el\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"en-AU\\\":{\\\"close_d634289d\\\":\\\"Close\\\"},\\\"en-CA\\\":{\\\"close_d634289d\\\":\\\"Close\\\"},\\\"en-GB\\\":{\\\"close_d634289d\\\":\\\"Close\\\"},\\\"es\\\":{\\\"close_d634289d\\\":\\\"Cerrar\\\"},\\\"fa\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"fi\\\":{\\\"close_d634289d\\\":\\\"Sulje\\\"},\\\"fr\\\":{\\\"close_d634289d\\\":\\\"Fermer\\\"},\\\"fr-CA\\\":{\\\"close_d634289d\\\":\\\"Fermer\\\"},\\\"he\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"ht\\\":{\\\"close_d634289d\\\":\\\"Fmen\\\"},\\\"hu\\\":{\\\"close_d634289d\\\":\\\"Bezrs\\\"},\\\"hy\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"is\\\":{\\\"close_d634289d\\\":\\\"Loka\\\"},\\\"it\\\":{\\\"close_d634289d\\\":\\\"Chiudi\\\"},\\\"ja\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"ko\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"mi\\\":{\\\"close_d634289d\\\":\\\"Katia\\\"},\\\"nb\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\"},\\\"nb-x-k12\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\"},\\\"nl\\\":{\\\"close_d634289d\\\":\\\"Sluiten\\\"},\\\"nn\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\"},\\\"pl\\\":{\\\"close_d634289d\\\":\\\"Zamknij\\\"},\\\"pt\\\":{\\\"close_d634289d\\\":\\\"Fechar\\\"},\\\"pt-BR\\\":{\\\"close_d634289d\\\":\\\"Fechar\\\"},\\\"ru\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"sl\\\":{\\\"close_d634289d\\\":\\\"Zapri\\\"},\\\"sv\\\":{\\\"close_d634289d\\\":\\\"Stng\\\"},\\\"sv-x-k12\\\":{\\\"close_d634289d\\\":\\\"Stng\\\"},\\\"tr\\\":{\\\"close_d634289d\\\":\\\"Kapat\\\"},\\\"uk\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"zh-Hans\\\":{\\\"close_d634289d\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"close_d634289d\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/tray';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('tray');\n  ","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!tray'\nimport React from 'react'\nimport {string, node} from 'prop-types'\nimport {CloseButton} from '@instructure/ui-buttons'\nimport {View} from '@instructure/ui-layout'\nimport {Flex} from '@instructure/ui-flex'\nimport {Heading} from '@instructure/ui-heading'\nimport {Tray} from '@instructure/ui-overlays'\n\nimport ErrorBoundary from './ErrorBoundary'\nimport GenericErrorPage from './GenericErrorPage'\nimport errorShipUrl from '../svg/ErrorShip.svg'\n\n/**\nThis is a wrapper around an InstUi Tray component that provides:\n * A header with the specified label as a header and a close button\n * An ErrorBoundary around the children displaying GenericErrorPage\n*/\n\nCanvasTray.propTypes = {\n  children: node.isRequired,\n\n  // padding to be applied around the whole tray contents\n  padding: View.propTypes.padding,\n\n  // Additional padding to be applied around the header specifically. By\n  // default, the header will have bottom padding equal to the padding prop to\n  // separate it from the content.\n  headerPadding: View.propTypes.padding,\n\n  // Additional padding to be applied around the content area\n  contentPadding: View.propTypes.padding,\n\n  // specify this if the header text should be different than the modal's label\n  title: string,\n\n  // Optional props to pass to the GenericErrorPage in ErrorBoundary\n  errorSubject: string,\n  errorCategory: string,\n  errorImageUrl: string,\n\n  ...Tray.propTypes\n}\n\nCanvasTray.defaultProps = {\n  padding: 'small',\n  contentPadding: '0',\n  errorImageUrl: errorShipUrl\n}\n\nexport default function CanvasTray({\n  padding,\n  headerPadding,\n  contentPadding,\n  errorSubject,\n  errorCategory,\n  errorImageUrl,\n  label,\n  title,\n  onDismiss,\n  children,\n  ...otherTrayProps\n}) {\n  if (headerPadding == null) headerPadding = `0 0 ${padding} 0`\n  if (title == null) title = label\n\n  function renderHeader() {\n    return (\n      <Flex as=\"div\" padding={headerPadding}>\n        <Flex.Item grow>\n          <Heading ellipsis>{title}</Heading>\n        </Flex.Item>\n        <Flex.Item>\n          <CloseButton onClick={onDismiss} size=\"small\">\n            {I18n.t('Close')}\n          </CloseButton>\n        </Flex.Item>\n      </Flex>\n    )\n  }\n\n  function renderContent() {\n    return (\n      <ErrorBoundary\n        errorComponent={\n          <GenericErrorPage\n            imageUrl={errorImageUrl}\n            errorSubject={errorSubject}\n            errorCategory={errorCategory}\n          />\n        }\n      >\n        {/* The purpose of this View is to interpret the special InstUI padding props. */}\n        <View as=\"div\" padding={contentPadding} width=\"100%\" height=\"100%\">\n          {children}\n        </View>\n      </ErrorBoundary>\n    )\n  }\n\n  // We want the content area to at least take up all the vertical space below the header so that\n  // the children of this component can size and position themselves. This is useful for LTI trays\n  // that want to display a full-height iframe. To accomplish this, there are a bunch of nested divs\n  // and Views in this component because Flex.Items don't know how to position themselves, Views\n  // don't know how to flex-direction: column, and divs don't know how to interpret InstUI padding\n  // properties. As a result, we have to nest various types of elements to interpret everything\n  // properly. The content area is still allowed to grow beyond the size of the Tray so that the\n  // Tray's vertical scrolling still works in the normal way where the children just have the normal\n  // flow.\n  return (\n    <Tray label={label} onDismiss={onDismiss} {...otherTrayProps}>\n      {/* This needs to be a View to interpret the outer padding prop, and it needs to be positioned\n          so it can properly apply padding and allow the nested elements to have relative widths. */}\n      <View\n        as=\"div\"\n        padding={padding}\n        position=\"absolute\"\n        insetBlockStart=\"0\"\n        insetBlockEnd=\"0\"\n        insetInlineStart=\"0\"\n        insetInlineEnd=\"0\"\n      >\n        {/* We're using divs for the reasons stated above. The outer div should take up the full\n            size of the parent View so that the inner content div can flex-grow to fill up the\n            remaining vertical space below the header. The content div also provides a positioning\n            context so this component's children can position themselves relative to the content\n            section rather than the whole Tray */}\n        <div style={{display: 'flex', flexDirection: 'column', width: '100%', height: '100%'}}>\n          {renderHeader()}\n          <div style={{position: 'relative', flex: 1}}>{renderContent()}</div>\n        </div>\n      </View>\n    </Tray>\n  )\n}\n","/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 - present Instructure, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport { findDOMNode } from './findDOMNode';\nimport { canUseDOM } from './canUseDOM';\nimport { contains } from './contains';\nimport { ownerDocument } from './ownerDocument';\n/**\n * ---\n * category: utilities/DOM\n * ---\n *\n * Gets the bounding rectangle of an element\n *\n * @param {ReactComponent|DomNode} el - component or DOM node\n * @return {object} rect - object with top, left coords and height and width\n */\n\nfunction getBoundingClientRect(el) {\n  var rect = {\n    top: 0,\n    left: 0,\n    height: 0,\n    width: 0\n  };\n\n  if (!canUseDOM) {\n    return rect;\n  }\n\n  var node = findDOMNode(el);\n\n  if (!node) {\n    return rect;\n  }\n\n  if (node === window) {\n    return {\n      left: window.pageXOffset,\n      top: window.pageYOffset,\n      width: window.innerWidth,\n      height: window.innerHeight,\n      right: window.innerWidth + window.pageXOffset,\n      bottom: window.innerHeight + window.pageYOffset\n    };\n  }\n\n  var doc = el === document ? document : ownerDocument(node);\n  var docEl = doc && doc.documentElement;\n\n  if (!docEl || !contains(docEl, node)) {\n    return rect;\n  }\n\n  var boundingRect = node.getBoundingClientRect();\n  var k; // eslint-disable-next-line no-restricted-syntax\n\n  for (k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  if (doc !== document) {\n    var frameElement = doc.defaultView.frameElement;\n\n    if (frameElement) {\n      var frameRect = getBoundingClientRect(frameElement);\n      rect.top += frameRect.top;\n      rect.bottom += frameRect.top;\n      rect.left += frameRect.left;\n      rect.right += frameRect.left;\n    }\n  }\n  /* eslint-disable no-mixed-operators */\n\n\n  return {\n    top: rect.top + (window.pageYOffset || docEl.scrollTop) - (docEl.clientTop || 0),\n    left: rect.left + (window.pageXOffset || docEl.scrollLeft) - (docEl.clientLeft || 0),\n    width: (rect.width == null ? node.offsetWidth : rect.width) || 0,\n    height: (rect.height == null ? node.offsetHeight : rect.height) || 0,\n    right: doc.body.clientWidth - rect.width - rect.left,\n    bottom: doc.body.clientHeight - rect.height - rect.top\n  };\n  /* eslint-enable no-mixed-operators */\n}\n\nexport default getBoundingClientRect;\nexport { getBoundingClientRect };","//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n// an extraction of the deparam method from Ben Alman's jQuery BBQ\n// http://benalman.com/projects/jquery-bbq-plugin/\n\nimport unflatten from '../object/unflatten'\n\nconst coerceTypes = {\n  true: true,\n  false: false,\n  null: null\n}\n\nexport default function deparam(params, coerce) {\n  // shortcut for just deparam'ing the current querystring\n  if (!params || typeof params === 'boolean') {\n    const currentQueryString = window.location.search\n    if (!currentQueryString) return {}\n    return deparam(currentQueryString, ...arguments)\n  }\n\n  const obj = {}\n  params\n    .replace(/\\+/g, ' ')\n    .split('&')\n    .forEach(param => {\n      let [key, val] = param.split('=')\n      key = decodeURIComponent(key)\n      val = decodeURIComponent(val)\n\n      // coerce values.\n      if (coerce) {\n        val =\n          val && !isNaN(val)\n            ? +val // number\n            : val === 'undefined'\n            ? undefined // undefined\n            : coerceTypes[val] !== undefined\n            ? coerceTypes[val] // true, false, null\n            : val // string\n      }\n\n      obj[key] = val\n    })\n\n  return unflatten(obj)\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"     \\\"}}},\\\"cy\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Canslo\\\",\\\"delete\\\":\\\"Dileu\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Ydych chin sir eich bod am ddileu hyn?\\\"}}},\\\"da\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuller\\\",\\\"delete\\\":\\\"Slet\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p, at du vil slette dette?\\\"}}},\\\"da-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuller\\\",\\\"delete\\\":\\\"Slet\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p, at du vil slette dette?\\\"}}},\\\"de\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Abbrechen\\\",\\\"delete\\\":\\\"Lschen\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Mchten Sie dies wirklich lschen?\\\"}}},\\\"el\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\" /     ;\\\"}}},\\\"en-AU\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"en-CA\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"en-GB\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"es\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Eliminar\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Seguro que desea eliminarlo?\\\"}}},\\\"fa\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"       \\\"}}},\\\"fi\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Peruuta\\\",\\\"delete\\\":\\\"Poista\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Haluatko varmasti poistaa tmn?\\\"}}},\\\"fr\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuler\\\",\\\"delete\\\":\\\"Supprimer\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Voulez-vous vraiment supprimer cet lment ?\\\"}}},\\\"fr-CA\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuler\\\",\\\"delete\\\":\\\"Supprimer\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Voulez-vous vraiment supprimer cet lment?\\\"}}},\\\"he\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"/   ?\\\"}}},\\\"ht\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Anile\\\",\\\"delete\\\":\\\"Efase\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Ou kw vrman ou vle efase sa a?\\\"}}},\\\"hu\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Mgse\\\",\\\"delete\\\":\\\"Trls\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Biztos benne, hogy trli ezt?\\\"}}},\\\"hy\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\" \\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"     :\\\"}}},\\\"is\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Htta vi\\\",\\\"delete\\\":\\\"Eya\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Viltu rugglega eya essu?\\\"}}},\\\"it\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annulla\\\",\\\"delete\\\":\\\"Elimina\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vuoi eliminare questo?\\\"}}},\\\"ja\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"ko\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"mi\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Whakakore\\\",\\\"delete\\\":\\\"Muku\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"E tino hiahia ana koe ki te muku i tnei?\\\"}}},\\\"nb\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du nsker  slette dette?\\\"}}},\\\"nb-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du nsker  slette dette?\\\"}}},\\\"nl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuleren\\\",\\\"delete\\\":\\\"Verwijderen\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Weet je zeker dat je dit wilt verwijderen?\\\"}}},\\\"nn\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du vil slette dette?\\\"}}},\\\"pl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Anuluj\\\",\\\"delete\\\":\\\"Usu\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Czy na pewno chcesz usun ten element?\\\"}}},\\\"pt\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Excluir\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Tem certeza de que deseja excluir isto?\\\"}}},\\\"pt-BR\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Excluir\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Tem certeza que deseja excluir isto?\\\"}}},\\\"ru\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"  ?\\\"}}},\\\"sl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Preklii\\\",\\\"delete\\\":\\\"Odstrani\\\"}},\\\"sv\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Ta bort\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vill du verkligen radera det hr?\\\"}}},\\\"sv-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Ta bort\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vill du verkligen radera det hr?\\\"}}},\\\"tr\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"ptal\\\",\\\"delete\\\":\\\"Sil\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Bunu silmek istediinize emin misiniz?\\\"}}},\\\"uk\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"}},\\\"zh-Hans\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"zh-Hant\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"\\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/instructure_misc_plugins';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('instructure_misc_plugins');\n  ","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nimport I18n from 'i18n!instructure_misc_plugins'\nimport $ from 'jquery'\nimport htmlEscape from './str/htmlEscape'\nimport authenticity_token from 'compiled/behaviors/authenticity_token'\nimport './jquery.ajaxJSON'\nimport 'jqueryui/dialog'\nimport './jquery.scrollToVisible'\nimport './vendor/jquery.scrollTo'\n\n$.fn.setOptions = function(prompt, options) {\n  let result = prompt ? \"<option value=''>\" + htmlEscape(prompt) + '</option>' : ''\n\n  if (options == null) {\n    options = []\n  }\n\n  options.forEach(opt => {\n    const optHtml = htmlEscape(opt)\n    result += '<option value=\"' + optHtml + '\">' + optHtml + '</option>'\n  })\n\n  return this.html($.raw(result))\n}\n\n// this function is to prevent you from doing all kinds of expesive operations on a\n// jquery object that doesn't actually have any elements in it\n// it is similar and inspired by http://www.slideshare.net/paul.irish/perfcompression (slide #42)\n// to use it do something like:\n// $(\"a .bunch #of .nodes\").ifExists(function(orignalQuery){\n//   //  'this' points to the original jquery object (in this case, $(\"a .bunch #of .nodes\") );\n//   // orignalQuery is the same as 'this';\n//   this.slideUp().dialog().show();\n// });\n$.fn.ifExists = function(func) {\n  this.length && func.call(this, this)\n  return this\n}\n\n// Returns the width of the browser's scroll bars.\n$.fn.scrollbarWidth = function() {\n  const $div = $(\n      '<div style=\"width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;\"><div style=\"height:100px;\"></div>'\n    ).appendTo(this),\n    $innerDiv = $div.find('div')\n  // Append our div, do our calculation and then remove it\n  const w1 = $innerDiv.innerWidth()\n  $div.css('overflow-y', 'scroll')\n  const w2 = $innerDiv.innerWidth()\n  $div.remove()\n  return w1 - w2\n}\n\n// Simple animation for dimming an element's opacity\n$.fn.dim = function(speed) {\n  return this.animate({opacity: 0.4}, speed)\n}\n\n$.fn.undim = function(speed) {\n  return this.animate({opacity: 1.0}, speed)\n}\n\n// Helper for deleting objects from the DOM and db.\n//  url: URL to pass DELETE message.  If none provided,\n//    behaves as if the request were a success.  Useful for testing.\n//  message: Confirmation message\n//  cancelled: Function to handle cancel.\n//  confirmed: Function to handle confirm, before submit.\n//  success: What to do on success.  If none provided, fades\n//    out the element and removes it from the DOM.\n//  error: Error.\n//  dialog: If present, do a jquery.ui.dialog instead of a confirm(). If an\n//    object, it will be merged into the dialog options.\n$.fn.confirmDelete = function(options) {\n  var options = $.extend({}, $.fn.confirmDelete.defaults, options)\n  const $object = this\n  let $dialog = null\n  let result = true\n  options.noMessage = options.noMessage || options.no_message\n  const onContinue = function() {\n    if (!result) {\n      if (options.cancelled && $.isFunction(options.cancelled)) {\n        options.cancelled.call($object)\n      }\n      return\n    }\n    if (!options.confirmed) {\n      options.confirmed = function() {\n        $object.dim()\n      }\n    }\n    options.confirmed.call($object)\n    if (options.url) {\n      if (!options.success) {\n        options.success = function(data) {\n          $object.fadeOut('slow', () => {\n            $object.remove()\n          })\n        }\n      }\n      const data = options.prepareData ? options.prepareData.call($object, $dialog) : {}\n      data.authenticity_token = authenticity_token()\n      $.ajaxJSON(\n        options.url,\n        'DELETE',\n        data,\n        data => {\n          options.success.call($object, data)\n        },\n        (data, request, status, error) => {\n          if (options.error && $.isFunction(options.error)) {\n            options.error.call($object, data, request, status, error)\n          } else {\n            $.ajaxJSON.unhandledXHRs.push(request)\n          }\n        }\n      )\n    } else {\n      if (!options.success) {\n        options.success = function() {\n          $object.fadeOut('slow', () => {\n            $object.remove()\n          })\n        }\n      }\n      options.success.call($object)\n    }\n  }\n  if (options.message && !options.noMessage && !$.skipConfirmations) {\n    if (options.dialog) {\n      result = false\n      const dialog_options = typeof options.dialog === 'object' ? options.dialog : {}\n      const confirmation_class = options.url.includes('assignments') ? 'btn-danger' : 'btn-primary'\n      $dialog = $(options.message).dialog(\n        $.extend(\n          {},\n          {\n            modal: true,\n            close: onContinue,\n            buttons: [\n              {\n                text: I18n.t('#buttons.cancel', 'Cancel'),\n                click() {\n                  $(this).dialog('close')\n                } // ; onContinue();\n              },\n              {\n                text: I18n.t('#buttons.delete', 'Delete'),\n                class: confirmation_class,\n                click() {\n                  result = true\n                  $(this).dialog('close')\n                }\n              }\n            ]\n          },\n          dialog_options\n        )\n      )\n      return\n    } else {\n      result = confirm(options.message)\n    }\n  }\n  onContinue()\n}\n$.fn.confirmDelete.defaults = {\n  get message() {\n    return I18n.t('confirms.default_delete_thing', 'Are you sure you want to delete this?')\n  }\n}\n\n// Watches the given element's location.href for any changes\n// to the fragment (\"#...\") and calls the provided function\n// when there are any.\n// $(document).fragmentChange(function(event, hash) { alert(hash); });\n$.fn.fragmentChange = function(fn) {\n  if (fn && fn !== true) {\n    const query = (window.location.search || '').replace(/^\\?/, '').split('&')\n    // The URL can hard-code a hash regardless of what's\n    // actually shown in the hash by specifying a query\n    // parameter, hash=some_hash\n    let query_hash = null\n    for (var i = 0; i < query.length; i++) {\n      const item = query[i]\n      if (item && item.indexOf('hash=') === 0) {\n        query_hash = '#' + item.substring(5)\n      }\n    }\n    this.bind('document_fragment_change', fn)\n    const $doc = this\n    let found = false\n    // Can only be used on the root document,\n    // will not work on an iframe, for example.\n    for (var i = 0; i < $._checkFragments.fragmentList.length; i++) {\n      const obj = $._checkFragments.fragmentList[i]\n      if (obj.doc[0] == $doc[0]) {\n        found = true\n      }\n    }\n    if (!found) {\n      $._checkFragments.fragmentList.push({\n        doc: $doc,\n        fragment: ''\n      })\n    }\n    $(window).bind('hashchange', $._checkFragments)\n    setTimeout(() => {\n      if (query_hash && query_hash.length > 0) {\n        $doc.triggerHandler('document_fragment_change', query_hash)\n      } else if ($doc && $doc[0] && $doc[0].location && $doc[0].location.hash.length > 0) {\n        $doc.triggerHandler('document_fragment_change', $doc[0].location.hash)\n      }\n    }, 500)\n  } else {\n    this.triggerHandler('document_fragment_change', this[0].location.hash)\n  }\n  return this\n}\n$._checkFragments = function() {\n  const list = $._checkFragments.fragmentList\n  for (let idx = 0; idx < list.length; idx++) {\n    const obj = list[idx]\n    const $doc = obj.doc\n    if ($doc[0].location.hash != obj.fragment) {\n      $doc.triggerHandler('document_fragment_change', $doc[0].location.hash)\n      obj.fragment = $doc[0].location.hash\n      $._checkFragments.fragmentList[idx] = obj\n    }\n  }\n}\n$._checkFragments.fragmentList = []\n// Triggers a click only if the anchor tag isn't disabled.\n$.fn.clickLink = function() {\n  const $obj = this.eq(0)\n  if (!$obj.hasClass('disabled_link')) {\n    $obj.click()\n  }\n}\n\n// jQuery supposedly has this built-in, but I haven't\n// had much success with it.\n$.fn.showIf = function(bool) {\n  if ($.isFunction(bool)) {\n    return this.each(function(index) {\n      $(this).showIf(bool.call(this))\n    })\n  }\n  if (bool) {\n    this.show()\n  } else {\n    this.hide()\n  }\n  return this\n}\n\n$.fn.disableIf = function(bool) {\n  if ($.isFunction(bool)) {\n    bool = bool.call(this)\n  }\n  this.prop('disabled', !!bool)\n  return this\n}\n\n$.fn.indicate = function(options) {\n  options = options || {}\n  let $indicator\n  if (options == 'remove') {\n    $indicator = this.data('indicator')\n    if ($indicator) {\n      $indicator.remove()\n    }\n    return\n  }\n  $('.indicator_box').remove()\n  let offset = this.offset()\n  if (options && options.offset) {\n    offset = options.offset\n  }\n  const width = this.width()\n  const height = this.height()\n  const zIndex = (options.container || this).zIndex()\n  $indicator = $(document.createElement('div'))\n  $indicator.css({\n    width: width + 6,\n    height: height + 6,\n    top: offset.top - 3,\n    left: offset.left - 3,\n    zIndex: zIndex + 1,\n    position: 'absolute',\n    display: 'block',\n    '-moz-border-radius': 5,\n    opacity: 0.8,\n    border: '2px solid #870',\n    backgroundColor: '#fd0'\n  })\n  $indicator.addClass('indicator_box')\n  $indicator.mouseover(function() {\n    $(this)\n      .stop()\n      .fadeOut('fast', function() {\n        $(this).remove()\n      })\n  })\n  if (this.data('indicator')) {\n    this.indicate('remove')\n  }\n  this.data('indicator', $indicator)\n  $('body').append($indicator)\n  if (options && options.singleFlash) {\n    $indicator\n      .hide()\n      .fadeIn()\n      .animate({opacity: 0.8}, 500)\n      .fadeOut('slow', function() {\n        $(this).remove()\n      })\n  } else {\n    $indicator\n      .hide()\n      .fadeIn()\n      .animate({opacity: 0.8}, 500)\n      .fadeOut('slow')\n      .fadeIn('slow')\n      .animate({opacity: 0.8}, 2500)\n      .fadeOut('slow', function() {\n        $(this).remove()\n      })\n  }\n  if (options && options.scroll) {\n    $('html,body').scrollToVisible($indicator)\n  }\n}\n\n$.fn.hasScrollbar = function() {\n  return this.length && this[0].clientHeight < this[0].scrollHeight\n}\n\n$.fn.log = function(msg) {\n  console.log('%s: %o', msg, this)\n  return this\n}\n\n// this is used if you want to fill the browser window with something inside #content but you want to also leave the footer and header on the page.\n$.fn.fillWindowWithMe = function(options) {\n  const opts = $.extend({minHeight: 400}, options),\n    $this = $(this),\n    $wrapper = $('#wrapper'),\n    $main = $('#main'),\n    $not_right_side = $('#not_right_side'),\n    $window = $(window),\n    $toResize = $(this).add(opts.alsoResize)\n\n  function fillWindowWithThisElement() {\n    $toResize.height(0)\n    const spaceLeftForThis =\n        $window.height() -\n        ($wrapper.offset().top + $wrapper.outerHeight()) +\n        ($main.height() - $not_right_side.height()),\n      newHeight = Math.max(400, spaceLeftForThis)\n\n    $toResize.height(newHeight)\n    if ($.isFunction(opts.onResize)) {\n      opts.onResize.call($this, newHeight)\n    }\n  }\n  fillWindowWithThisElement()\n  $window\n    .unbind('resize.fillWindowWithMe')\n    .bind('resize.fillWindowWithMe', fillWindowWithThisElement)\n  return this\n}\n\n$.fn.autoGrowInput = function(o) {\n  o = $.extend(\n    {\n      maxWidth: 1000,\n      minWidth: 0,\n      comfortZone: 70\n    },\n    o\n  )\n\n  this.filter('input:text').each(function() {\n    let minWidth = o.minWidth || $(this).width(),\n      val = '',\n      input = $(this),\n      testSubject = $('<tester/>').css({\n        position: 'absolute',\n        top: -9999,\n        left: -9999,\n        width: 'auto',\n        fontSize: input.css('fontSize'),\n        fontFamily: input.css('fontFamily'),\n        fontWeight: input.css('fontWeight'),\n        letterSpacing: input.css('letterSpacing'),\n        whiteSpace: 'nowrap'\n      }),\n      check = function() {\n        setTimeout(() => {\n          if (val === (val = input.val())) {\n            return\n          }\n\n          // Enter new content into testSubject\n          testSubject.text(val)\n\n          // Calculate new width + whether to change\n          const testerWidth = testSubject.width(),\n            newWidth =\n              testerWidth + o.comfortZone >= minWidth ? testerWidth + o.comfortZone : minWidth,\n            currentWidth = input.width(),\n            isValidWidthChange =\n              (newWidth < currentWidth && newWidth >= minWidth) ||\n              (newWidth > minWidth && newWidth < o.maxWidth)\n\n          // Animate width\n          if (isValidWidthChange) {\n            input.width(newWidth)\n          }\n        })\n      }\n\n    testSubject.insertAfter(input)\n\n    $(this).bind('keyup keydown blur update change', check)\n  })\n\n  return this\n}\n\nexport default $\n","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport {node} from 'prop-types'\n\nexport default class ErrorBoundary extends React.Component {\n  static propTypes = {\n    children: node.isRequired,\n    errorComponent: node.isRequired\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {hasError: true, error}\n  }\n\n  state = {hasError: false, error: null}\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return React.cloneElement(this.props.errorComponent, {errorSubject: this.state.error.message})\n    }\n\n    return this.props.children\n  }\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"cy\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Cynnwys Defnyddiwr\\\"},\\\"da\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Brugerindhold\\\"},\\\"da-x-k12\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Brugerindhold\\\"},\\\"de\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Benutzer-Content\\\"},\\\"el\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"en-AU\\\":{\\\"user_content_aaf0fb5a\\\":\\\"User Content\\\"},\\\"en-CA\\\":{\\\"user_content_aaf0fb5a\\\":\\\"User Content\\\"},\\\"en-GB\\\":{\\\"user_content_aaf0fb5a\\\":\\\"User content\\\"},\\\"es\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contenido del usuario\\\"},\\\"fa\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"fi\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Kyttjn sislt\\\"},\\\"fr\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contenu de l'utilisateur\\\"},\\\"fr-CA\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contenu de l'utilisateur\\\"},\\\"he\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"ht\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Kontni Itilizat\\\"},\\\"hu\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Felhasznli tartalom\\\"},\\\"is\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Notandaefni\\\"},\\\"it\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contenuto utente\\\"},\\\"ja\\\":{\\\"user_content_aaf0fb5a\\\":\\\"\\\"},\\\"mi\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Ihirangi kaiwhakamahi\\\"},\\\"nb\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Brukerinnhold\\\"},\\\"nb-x-k12\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Brukerinnhold\\\"},\\\"nl\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Gebruikersinhoud\\\"},\\\"nn\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Brukarinnhald\\\"},\\\"pl\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Zawarto uytkownika\\\"},\\\"pt\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contedo do Utilizador\\\"},\\\"pt-BR\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Contedo do Usurio\\\"},\\\"ru\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"sl\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Vsebina uporabnika\\\"},\\\"sv\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Anvndarinnehll\\\"},\\\"sv-x-k12\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Anvndarinnehll\\\"},\\\"tr\\\":{\\\"user_content_aaf0fb5a\\\":\\\"Kullanc erii\\\"},\\\"uk\\\":{\\\"user_content_aaf0fb5a\\\":\\\" \\\"},\\\"zh-Hans\\\":{\\\"user_content_aaf0fb5a\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"user_content_aaf0fb5a\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/user_content';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('user_content');\n  ","//\n// Copyright (C) 2015 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport $ from 'jquery'\nimport _ from 'underscore'\nimport htmlEscape from 'str/htmlEscape'\nimport I18n from 'i18n!user_content'\n\nconst apiUserContent = {\n  /*\n  xsslint safeString.identifier mathml\n  */\n  translateMathmlForScreenreaders($equationImage) {\n    // note, it is safe to treat the x-canvaslms-safe-mathml as html because it\n    // only ever gets put there by us (in Api::Html::Content::apply_mathml).\n    // Any user content that gets sent to the server will have the\n    // x-canvaslms-safe-mathml attribute stripped out.\n    const mathml = $('<div/>')\n      .html($equationImage.attr('x-canvaslms-safe-mathml'))\n      .html()\n    const mathmlSpan = $('<span class=\"hidden-readable\"></span>')\n    mathmlSpan.html(mathml)\n    return mathmlSpan\n  },\n\n  toMediaCommentLink(node) {\n    const $link = $(\n      `<a\n        id='media_comment_${htmlEscape($(node).data('media_comment_id'))}'\n        data-media_comment_type='${htmlEscape($(node).data('media_comment_type'))}'\n        class='instructure_inline_media_comment ${htmlEscape(node.nodeName.toLowerCase())}_comment'\n        data-alt='${htmlEscape($(node).attr('data-alt'))}'\n      />`\n    )\n    $link.html($(node).html())\n    return $link\n  },\n\n  /*\n  xsslint safeString.identifier mathmlSpan\n  */\n  // use this method to process any user content fields returned in api responses\n  // this is important to handle object/embed tags safely, and to properly display audio/video tags\n  convert(html, options = {}) {\n    const $dummy = $('<div />').html(html)\n    // finds any <video/audio class=\"instructure_inline_media_comment\"> and turns them into media comment thumbnails\n    $dummy\n      .find('video.instructure_inline_media_comment,audio.instructure_inline_media_comment')\n      .replaceWith(function() {\n        return apiUserContent.toMediaCommentLink(this)\n      })\n\n    // remove any embed tags inside an object tag, to avoid repeated translations\n    $dummy.find('object.instructure_user_content:not(#kaltura_player) embed').remove()\n\n    // if we aren't actually displaying this content but are instead putting\n    // it into a RTE, we want to preserve the object/embed tags\n    if (!options.forEditing) {\n      // find all object/embed tags and convert them into an iframe that posts\n      // to safefiles to display the content (to avoid javascript attacks)\n      //\n      // see the corresponding code in lib/user_content.rb for non-api user\n      // content handling\n      $dummy\n        .find('object.instructure_user_content,embed.instructure_user_content')\n        .replaceWith(function() {\n          const $this = $(this)\n          if (!$this.data('uc_snippet') || !$this.data('uc_sig')) {\n            return this\n          }\n\n          const uuid = _.uniqueId('uc_')\n          let action = '/object_snippet'\n          if (ENV.files_domain) {\n            action = `//${ENV.files_domain}${action}`\n          }\n          const $form = $(\n            `<form\n            action='${htmlEscape(action)}'\n            method='post'\n            class='user_content_post_form'\n            target='${htmlEscape(uuid)}'\n            id='form-${htmlEscape(uuid)}'\n          />`\n          )\n          $form.append(\n            $(\"<input type='hidden'/>\").attr({\n              name: 'object_data',\n              value: $this.data('uc_snippet')\n            })\n          )\n          $form.append(\n            $(\"<input type='hidden'/>\").attr({\n              name: 's',\n              value: $this.data('uc_sig')\n            })\n          )\n          $('body').append($form)\n          setTimeout(() => $form.submit(), 0)\n          return $(\n            `<iframe\n            class='user_content_iframe'\n            name='${htmlEscape(uuid)}'\n            style='width: ${htmlEscape($this.data('uc_width'))}; height: ${htmlEscape(\n              $this.data('uc_height')\n            )};'\n            frameborder='0'\n            title='${htmlEscape(I18n.t('User Content'))}'\n          />`\n          )\n        })\n\n      $dummy.find('img.equation_image').each((index, equationImage) => {\n        const $equationImage = $(equationImage)\n        const mathmlSpan = apiUserContent.translateMathmlForScreenreaders($equationImage)\n        $equationImage.removeAttr('x-canvaslms-safe-mathml')\n        $equationImage.after(mathmlSpan)\n      })\n    }\n    return $dummy.html()\n  }\n}\n\nexport default apiUserContent\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport $ from 'jquery'\n\n// To use this, your view must implement a `selectables` method that\n// returns an array of the things that are selectable.\nexport default {\n  getInitialState() {\n    return {selectedItems: []}\n  },\n\n  componentDidMount() {\n    $(window).on('keydown', this.handleCtrlPlusA)\n  },\n\n  componentWillUnmount() {\n    $(window).off('keydown', this.handleCtrlPlusA)\n  },\n\n  // overwrite this in your component if you want to suppress the multi-select\n  // behavior on different elements. Should be something you can pass to $.fn.is\n  multiselectIgnoredElements: ':input:not(.multiselectable-toggler), a',\n\n  handleCtrlPlusA(e) {\n    let needle\n    if (((needle = e.target.nodeName.toLowerCase()), ['input', 'textarea'].includes(needle))) {\n      return\n    }\n    if (e.which === 65 && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault()\n      return this.toggleAllSelected(!e.shiftKey)\n    }\n  }, // ctrl-shift-a\n\n  toggleAllSelected(shouldSelect) {\n    if (shouldSelect) {\n      this.setState({selectedItems: this.selectables()})\n    } else {\n      this.setState({selectedItems: []})\n    }\n  },\n\n  areAllItemsSelected() {\n    return (\n      this.state.selectedItems.length &&\n      this.state.selectedItems.length === this.selectables().length\n    )\n  },\n\n  selectRange(item) {\n    const selectables = this.selectables()\n    const newPos = selectables.indexOf(item)\n    const lastPos = selectables.indexOf(_.last(this.state.selectedItems))\n    const range = selectables.slice(Math.min(newPos, lastPos), Math.max(newPos, lastPos) + 1)\n    // the anchor needs to stay at the end\n    if (newPos > lastPos) {\n      range.reverse()\n    }\n    this.setState({selectedItems: range})\n  },\n\n  clearSelectedItems(cb) {\n    this.setState({selectedItems: []}, () => (typeof cb === 'function' ? cb() : undefined))\n  },\n\n  toggleItemSelected(item, event, cb) {\n    let selectedItems\n    if (event && $(event.target).closest(this.multiselectIgnoredElements).length) return\n\n    if (event != null ? event.shiftKey : undefined) return this.selectRange(item)\n\n    const itemIsSelected = this.state.selectedItems.includes(item)\n    const leaveOthersAlone =\n      (event && event.metaKey) ||\n      (event && event.ctrlKey) ||\n      (event && event.target.type) === 'checkbox'\n\n    if (leaveOthersAlone && itemIsSelected) {\n      selectedItems = _.without(this.state.selectedItems, item)\n    } else if (leaveOthersAlone) {\n      selectedItems = this.state.selectedItems.slice() // .slice() is to not mutate state directly\n      selectedItems.push(item)\n    } else if (itemIsSelected) {\n      selectedItems = []\n    } else {\n      selectedItems = [item]\n    }\n\n    return this.setState({selectedItems}, () => (typeof cb === 'function' ? cb() : undefined))\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport FilesystemObjectThumbnail from './FilesystemObjectThumbnail'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\n\nconst MAX_THUMBNAILS_TO_SHOW = 10\n\nexport default function DragFeedback(props) {\n  return (\n    <div\n      className=\"DragFeedback\"\n      style={{\n        WebkitTransform: `translate3d(${props.pageX + 6}px, ${props.pageY + 6}px, 0)`,\n        transform: `translate3d(${props.pageX + 6}px, ${props.pageY + 6}px, 0)`\n      }}\n    >\n      {props.itemsToDrag.slice(0, MAX_THUMBNAILS_TO_SHOW).map((model, index) => (\n        <FilesystemObjectThumbnail\n          model={model}\n          key={model.id}\n          style={{\n            left: 10 + index * 5 - index,\n            top: 10 + index * 5 - index\n          }}\n        />\n      ))}\n      <span className=\"badge badge-important\">{props.itemsToDrag.length}</span>\n    </div>\n  )\n}\n\nDragFeedback.propTypes = {\n  itemsToDrag: PropTypes.arrayOf(customPropTypes.filesystemObject).isRequired,\n  pageX: PropTypes.number.isRequired,\n  pageY: PropTypes.number.isRequired\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\n\nexport default {\n  displayName: 'FileRenameForm',\n\n  // dialog for renaming\n\n  propType: {\n    fileOptions: PropTypes.object,\n    onNameConflictResolved: PropTypes.func.isRequired\n  },\n\n  getInitialState() {\n    return {\n      isEditing: false,\n      fileOptions: this.props.fileOptions\n    }\n  },\n\n  componentWillReceiveProps(newProps) {\n    this.setState({fileOptions: newProps.fileOptions, isEditing: false})\n  },\n\n  handleRenameClick() {\n    this.setState({isEditing: true})\n  },\n\n  handleBackClick() {\n    this.setState({isEditing: false})\n  },\n\n  // pass back expandZip to preserve options that was possibly already made\n  // in a previous modal\n  handleReplaceClick() {\n    if (this.props.closeOnResolve) this.refs.canvasModal.closeModal()\n    return this.props.onNameConflictResolved({\n      file: this.state.fileOptions.file,\n      dup: 'overwrite',\n      name: this.state.fileOptions.name,\n      expandZip: this.state.fileOptions.expandZip\n    })\n  },\n\n  // pass back expandZip to preserve options that was possibly already made\n  // in a previous modal\n  handleChangeClick() {\n    if (this.props.closeOnResolve) this.refs.canvasModal.closeModal()\n    return this.props.onNameConflictResolved({\n      file: this.state.fileOptions.file,\n      dup: 'rename',\n      name: ReactDOM.findDOMNode(this.refs.newName).value,\n      expandZip: this.state.fileOptions.expandZip\n    })\n  },\n\n  handleFormSubmit(e) {\n    e.preventDefault()\n    return this.handleChangeClick()\n  }\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"     \\\\\\\"%{name}\\\\\\\"   .    .\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"   \\\\\\\"%{name}\\\\\\\"    .     \\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" \\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"cy\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Mae eitem wedii chloi or enw \\\\\\\"%{name}\\\\\\\" eisoes yn bodoli yn y lleoliad hwn. Rhowch enw newydd.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Mae eitem or enw \\\\\\\"%{name}\\\\\\\" eisoes yn bodoli yn y lleoliad hwn. Ydych chi am newid y ffeil bresennol?\\\",\\\"back_2900f52a\\\":\\\"Yn l\\\",\\\"change_dcaa253a\\\":\\\"Newid\\\",\\\"change_name_c8cce76c\\\":\\\"Newid Enw\\\",\\\"change_name_to_568374c8\\\":\\\"Newid \\\\\\\"%{name}\\\\\\\" i\\\",\\\"copy_9748f9f\\\":\\\"Copo\\\",\\\"name_1aed4a1b\\\":\\\"Enw\\\",\\\"replace_e61834a7\\\":\\\"Disodli\\\"},\\\"da\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Et lst element med navnet \\\\\\\"%{name}\\\\\\\" findes allerede p denne placering. Indtast et nyt navn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Et element ved navn \\\\\\\"%{name}\\\\\\\" eksisterer allerede p denne placering. Vil du erstatte den eksisterende fil?\\\",\\\"back_2900f52a\\\":\\\"Tilbage\\\",\\\"change_dcaa253a\\\":\\\"Skift\\\",\\\"change_name_c8cce76c\\\":\\\"ndr navn\\\",\\\"change_name_to_568374c8\\\":\\\"ndr \\\\\\\"%{name}\\\\\\\" til\\\",\\\"copy_9748f9f\\\":\\\"Kopi\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"replace_e61834a7\\\":\\\"Erstat\\\"},\\\"da-x-k12\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Et lst element med navnet \\\\\\\"%{name}\\\\\\\" findes allerede p denne placering. Indtast et nyt navn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Et element ved navn \\\\\\\"%{name}\\\\\\\" eksisterer allerede p denne placering. Vil du erstatte den eksisterende fil?\\\",\\\"back_2900f52a\\\":\\\"Tilbage\\\",\\\"change_dcaa253a\\\":\\\"Skift\\\",\\\"change_name_c8cce76c\\\":\\\"ndr navn\\\",\\\"change_name_to_568374c8\\\":\\\"ndr \\\\\\\"%{name}\\\\\\\" til\\\",\\\"copy_9748f9f\\\":\\\"Kopi\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"replace_e61834a7\\\":\\\"Erstat\\\"},\\\"de\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Ein gesperrtes Element mit dem Namen %{name} ist hier bereits vorhanden. Geben Sie bitte einen anderen Namen ein.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Ein Element mit dem Namen \\\\\\\"%{name}\\\\\\\" ist bereits an diesem Speicherort vorhanden. Mchten Sie die vorhandene Datei ersetzen?\\\",\\\"back_2900f52a\\\":\\\"Zurck\\\",\\\"change_dcaa253a\\\":\\\"ndern\\\",\\\"change_name_c8cce76c\\\":\\\"Name ndern\\\",\\\"change_name_to_568374c8\\\":\\\"%{name} ndern in\\\",\\\"copy_9748f9f\\\":\\\"Kopieren\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"replace_e61834a7\\\":\\\"Ersetzen\\\"},\\\"el\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"      \\\\\\\"%{name}\\\\\\\"       . ,    .\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"    %{name}      .      ;\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" \\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"en-AU\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"A locked item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Please enter a new name.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"An item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Do you want to replace the existing file?\\\",\\\"back_2900f52a\\\":\\\"Back\\\",\\\"change_dcaa253a\\\":\\\"Change\\\",\\\"change_name_c8cce76c\\\":\\\"Change Name\\\",\\\"change_name_to_568374c8\\\":\\\"Change \\\\\\\"%{name}\\\\\\\" to\\\",\\\"copy_9748f9f\\\":\\\"Copy\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"replace_e61834a7\\\":\\\"Replace\\\"},\\\"en-CA\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"A locked item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Please enter a new name.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"An item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Do you want to replace the existing file?\\\",\\\"back_2900f52a\\\":\\\"Back\\\",\\\"change_dcaa253a\\\":\\\"Change\\\",\\\"change_name_c8cce76c\\\":\\\"Change Name\\\",\\\"change_name_to_568374c8\\\":\\\"Change \\\\\\\"%{name}\\\\\\\" to\\\",\\\"copy_9748f9f\\\":\\\"Copy\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"replace_e61834a7\\\":\\\"Replace\\\"},\\\"en-GB\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"A locked item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Please enter a new name.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"An item named \\\\\\\"%{name}\\\\\\\" already exists in this location. Do you wish to replace the existing file?\\\",\\\"back_2900f52a\\\":\\\"Back\\\",\\\"change_dcaa253a\\\":\\\"Change\\\",\\\"change_name_c8cce76c\\\":\\\"Change Name\\\",\\\"change_name_to_568374c8\\\":\\\"Change \\\\\\\"%{name}\\\\\\\" to\\\",\\\"copy_9748f9f\\\":\\\"Copy\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"replace_e61834a7\\\":\\\"Replace\\\"},\\\"es\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Un item bloqueado llamado \\\\\\\"%{name}\\\\\\\" ya existe en esta ubicacin. Ingrese un nuevo nombre.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Ya existe un item llamado \\\\\\\"%{name}\\\\\\\" en esta ubicacin. Desea reemplazar el archivo existente?\\\",\\\"back_2900f52a\\\":\\\"Volver\\\",\\\"change_dcaa253a\\\":\\\"Cambiar\\\",\\\"change_name_c8cce76c\\\":\\\"Cambiar nombre\\\",\\\"change_name_to_568374c8\\\":\\\"Cambiar \\\\\\\"%{name}\\\\\\\" a\\\",\\\"copy_9748f9f\\\":\\\"Copiar\\\",\\\"name_1aed4a1b\\\":\\\"Nombre\\\",\\\"replace_e61834a7\\\":\\\"Reemplazar\\\"},\\\"fa\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"      \\\\\\\"%{name}       .      .\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"    \\\\\\\"%{name}\\\\\\\"     .       \\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\" \\\",\\\"change_name_c8cce76c\\\":\\\"  \\\",\\\"change_name_to_568374c8\\\":\\\"  \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\" \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\" \\\"},\\\"fi\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Tss sijaintipaikassa on jo kohde nimelt \\\\\\\"%{name}\\\\\\\" . Syt uusi nimi.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Tss sijaintipaikassa on jo kohde nimelt \\\\\\\"%{name}\\\\\\\" . Haluatko korvata olemassa olevan tiedoston?\\\",\\\"back_2900f52a\\\":\\\"Takaisin\\\",\\\"change_dcaa253a\\\":\\\"Vaihda\\\",\\\"change_name_c8cce76c\\\":\\\"Vaihda nime\\\",\\\"change_name_to_568374c8\\\":\\\"Vaihda \\\\\\\"%{name}\\\\\\\" kohteeseen\\\",\\\"copy_9748f9f\\\":\\\"Kopioi\\\",\\\"name_1aed4a1b\\\":\\\"Nimi\\\",\\\"replace_e61834a7\\\":\\\"Korvaa\\\"},\\\"fr\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Un lment verrouill portant le nom  %{name}  existe dj  cet endroit. Veuillez entrer un nouveau nom.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Un lment nomm  %{name}  existe dj dans cet emplacement. Voulez-vous remplacer le fichier existant ?\\\",\\\"back_2900f52a\\\":\\\"Retour\\\",\\\"change_dcaa253a\\\":\\\"Modifier\\\",\\\"change_name_c8cce76c\\\":\\\"Modifier le nom\\\",\\\"change_name_to_568374c8\\\":\\\"Modifier  %{name}  en\\\",\\\"copy_9748f9f\\\":\\\"Copier\\\",\\\"name_1aed4a1b\\\":\\\"Nom\\\",\\\"replace_e61834a7\\\":\\\"Remplacer\\\"},\\\"fr-CA\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Un lment verrouill nomm  %{name}  existe dj  cet emplacement. Veuillez saisir un nouveau nom.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Un lment nomm  %{name}  existe dj dans cet emplacement. Voulez-vous remplacer le fichier existant?\\\",\\\"back_2900f52a\\\":\\\"Retour\\\",\\\"change_dcaa253a\\\":\\\"Modifier\\\",\\\"change_name_c8cce76c\\\":\\\"Modifier le nom\\\",\\\"change_name_to_568374c8\\\":\\\"Modifier  %{name}  en\\\",\\\"copy_9748f9f\\\":\\\"Copier\\\",\\\"name_1aed4a1b\\\":\\\"Nom\\\",\\\"replace_e61834a7\\\":\\\"Remplacer\\\"},\\\"he\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"   \\\\\\\"%{name}\\\\\\\"   ,    .\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"   \\\\\\\"%{name}\\\\\\\"     .      ?\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" \\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\" :\\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"ht\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Yon eleman bloke ki rele \\\\\\\"%{name}\\\\\\\" egziste nan anplasman sa a deja. Tanpri ekri yon nouvo non.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Yon eleman ki rele \\\\\\\"%{name}\\\\\\\" egziste deja nan anplasman sa a. ske w vle ranplase fichye ki egsizte a?\\\",\\\"back_2900f52a\\\":\\\"Retounen\\\",\\\"change_dcaa253a\\\":\\\"Chanje\\\",\\\"change_name_c8cce76c\\\":\\\"Chanje Non\\\",\\\"change_name_to_568374c8\\\":\\\"Chanje \\\\\\\"%{name}\\\\\\\" an\\\",\\\"copy_9748f9f\\\":\\\"Kopye\\\",\\\"name_1aed4a1b\\\":\\\"Non\\\",\\\"replace_e61834a7\\\":\\\"Ranplase\\\"},\\\"hu\\\":{\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Egy \\\\\\\"%{name}\\\\\\\" nev elem mr ltezik ezen a helyen. Le szeretn cserlni a ltez fjlt?\\\",\\\"back_2900f52a\\\":\\\"Vissza\\\",\\\"change_dcaa253a\\\":\\\"Mdosts\\\",\\\"change_name_c8cce76c\\\":\\\"Nv megvltoztatsa\\\",\\\"change_name_to_568374c8\\\":\\\"\\\\\\\"%{name}\\\\\\\" megvltoztatsa erre \\\",\\\"copy_9748f9f\\\":\\\"Msols\\\",\\\"name_1aed4a1b\\\":\\\"Nv\\\",\\\"replace_e61834a7\\\":\\\"Csere\\\"},\\\"hy\\\":{\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"\\\\\\\"%{name}\\\\\\\"       :           : \\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" \\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\"  -\\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"is\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Lst atrii sem heitir \\\\\\\"%{name}\\\\\\\" er til  essum sta. Skru ntt nafn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Atrii \\\\\\\"%{name}\\\\\\\"  er til  essum sta. Viltu skipta t skrnni?\\\",\\\"back_2900f52a\\\":\\\"Til baka\\\",\\\"change_dcaa253a\\\":\\\"Breyta\\\",\\\"change_name_c8cce76c\\\":\\\"Breyta heiti\\\",\\\"change_name_to_568374c8\\\":\\\"Breyta \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"Afrita\\\",\\\"name_1aed4a1b\\\":\\\"Nafn\\\",\\\"replace_e61834a7\\\":\\\"Skipta t\\\"},\\\"it\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Un elemento bloccato chiamato \\\\\\\"%{name}\\\\\\\" esiste gi in questa posizione. Inserisci un nuovo nome.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Un elemento chiamato \\\\\\\"%{name}\\\\\\\" esiste gi in questa posizione. Desideri sostituire il file esistente?\\\",\\\"back_2900f52a\\\":\\\"Indietro\\\",\\\"change_dcaa253a\\\":\\\"Modifica\\\",\\\"change_name_c8cce76c\\\":\\\"Modifica nome\\\",\\\"change_name_to_568374c8\\\":\\\"Modifica \\\\\\\"%{name}\\\\\\\" in\\\",\\\"copy_9748f9f\\\":\\\"Copia\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"replace_e61834a7\\\":\\\"Sostituisci\\\"},\\\"ja\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"\\\\\\\"%{name}\\\\\\\" \\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"\\\\\\\"%{name}\\\\\\\" ?\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\"\\\",\\\"change_name_to_568374c8\\\":\\\"%{name}\\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"ko\\\":{\\\"name_1aed4a1b\\\":\\\"\\\"},\\\"mi\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"He temi kua rakaina kua ingoatia \\\\\\\"%{name}\\\\\\\" e tariari k ana i roto i tnei tauwhi Tn koa whakauru he ingoa hou.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Kei te tari k ttahi temi huaina \\\\\\\"%{name}\\\\\\\" i roto i tnei whi. E hiahia ana koe ki te whakakapi i te knae tariari?\\\",\\\"back_2900f52a\\\":\\\"Hoki ki muri\\\",\\\"change_dcaa253a\\\":\\\"Huri\\\",\\\"change_name_c8cce76c\\\":\\\"Huri ingoa\\\",\\\"change_name_to_568374c8\\\":\\\"Huri \\\\\\\"%{name}\\\\\\\" ki\\\",\\\"copy_9748f9f\\\":\\\"Trua\\\",\\\"name_1aed4a1b\\\":\\\"Ingoa\\\",\\\"replace_e61834a7\\\":\\\"Whakakapi\\\"},\\\"nb\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Et lst element ved navn %{name} finnes allerede her. Skriv inn et nytt navn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Et element som heter \\\\\\\"%{name}\\\\\\\" finnes allerede i denne plasseringen. nsker du  erstatte den eksisterende filen?\\\",\\\"back_2900f52a\\\":\\\"Tilbake\\\",\\\"change_dcaa253a\\\":\\\"Endre\\\",\\\"change_name_c8cce76c\\\":\\\"Endre navn\\\",\\\"change_name_to_568374c8\\\":\\\"Endre \\\\\\\"%{name}\\\\\\\" til\\\",\\\"copy_9748f9f\\\":\\\"Kopier\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"replace_e61834a7\\\":\\\"Erstatt\\\"},\\\"nb-x-k12\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Et lst element ved navn %{name} finnes allerede her. Skriv inn et nytt navn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Et element som heter \\\\\\\"%{name}\\\\\\\" finnes allerede i denne plasseringen. nsker du  erstatte den eksisterende filen?\\\",\\\"back_2900f52a\\\":\\\"Tilbake\\\",\\\"change_dcaa253a\\\":\\\"Endre\\\",\\\"change_name_c8cce76c\\\":\\\"Endre navn\\\",\\\"change_name_to_568374c8\\\":\\\"Endre \\\\\\\"%{name}\\\\\\\" til\\\",\\\"copy_9748f9f\\\":\\\"Kopier\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"replace_e61834a7\\\":\\\"Erstatt\\\"},\\\"nl\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Er bestaat al een vergrendeld item met de naam \\\\\\\"%{name}\\\\\\\" op deze locatie. Voer een nieuwe naam in\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"En item genaamd \\\\\\\"%{name}\\\\\\\" bestaat al in deze locatie. Wil je het bestaande bestand vervangen?\\\",\\\"back_2900f52a\\\":\\\"Terug\\\",\\\"change_dcaa253a\\\":\\\"Wijzigen\\\",\\\"change_name_c8cce76c\\\":\\\"Naam wijzigen\\\",\\\"change_name_to_568374c8\\\":\\\"\\\\\\\"%{name}\\\\\\\" wijzigen naar\\\",\\\"copy_9748f9f\\\":\\\"Kopiren\\\",\\\"name_1aed4a1b\\\":\\\"Naam\\\",\\\"replace_e61834a7\\\":\\\"Vervangen\\\"},\\\"nn\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Eit lst element med namnet \\\\\\\"%{name}\\\\\\\" finst allereie. Skriv inn eit anna namn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Eit element med namnet \\\\\\\"%{name}\\\\\\\" finst allereie.\\\\\\\" Vil du erstatte den eksisterande fila?\\\",\\\"back_2900f52a\\\":\\\"Tilbake\\\",\\\"change_dcaa253a\\\":\\\"Endre\\\",\\\"change_name_c8cce76c\\\":\\\"Endre namn\\\",\\\"change_name_to_568374c8\\\":\\\"Endre \\\\\\\"%{name}\\\\\\\" til\\\",\\\"copy_9748f9f\\\":\\\"Kopi\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"replace_e61834a7\\\":\\\"Erstatt\\\"},\\\"pl\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Zablokowany element o nazwie \\\\\\\"%{name}\\\\\\\" ju istnieje w tej lokalizacji. Wpisz now nazw.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Pozycja o nazwie  \\\\\\\"%{name}\\\\\\\" ju istnieje w danej lokalizacji. Czy chcesz zamieni istniejcy plik?\\\",\\\"back_2900f52a\\\":\\\"Wstecz\\\",\\\"change_dcaa253a\\\":\\\"Zmie\\\",\\\"change_name_c8cce76c\\\":\\\"Zmie nazw\\\",\\\"change_name_to_568374c8\\\":\\\"Zmie nazw \\\\\\\"%{name}\\\\\\\" na\\\",\\\"copy_9748f9f\\\":\\\"Kopiuj\\\",\\\"name_1aed4a1b\\\":\\\"Nazwa\\\",\\\"replace_e61834a7\\\":\\\"Zastp\\\"},\\\"pt\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Um item bloqueado com o nome \\\\\\\"%{name}\\\\\\\" j existe neste local. Insira um novo nome.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Um item chamado \\\\\\\"%{name}\\\\\\\" j existe nesta localizao. Quer substituir o ficheiro existente?\\\",\\\"back_2900f52a\\\":\\\"Voltar\\\",\\\"change_dcaa253a\\\":\\\"Alterar\\\",\\\"change_name_c8cce76c\\\":\\\"Alterar nome\\\",\\\"change_name_to_568374c8\\\":\\\"Mudar \\\\\\\"%{name}\\\\\\\" para\\\",\\\"copy_9748f9f\\\":\\\"Copiar\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"replace_e61834a7\\\":\\\"Substituir\\\"},\\\"pt-BR\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Um item bloqueado chamado %{name} j existe nesta localizao. Por favor, insira um novo nome.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Um item chamado \\\\\\\"%{name}\\\\\\\" j existe neste local. Voc quer substituir o arquivo existente?\\\",\\\"back_2900f52a\\\":\\\"Voltar\\\",\\\"change_dcaa253a\\\":\\\"Alterar\\\",\\\"change_name_c8cce76c\\\":\\\"Alterar Nome\\\",\\\"change_name_to_568374c8\\\":\\\"Alterar \\\\\\\"%{name}\\\\\\\" para\\\",\\\"copy_9748f9f\\\":\\\"Copiar\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"replace_e61834a7\\\":\\\"Substituir\\\"},\\\"ru\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"    \\\\\\\"%{name}\\\\\\\"     . ,   .\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"   \\\\\\\"%{name}\\\\\\\"     .   ?\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" \\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"sl\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Na tem mestu e obstaja zaklenjeni element z imenom %{name}. Vnesite novo ime.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Na tem mestu e obstaja element z imenom %{name}. Ali elite nadomestiti obstojeo datoteko?\\\",\\\"back_2900f52a\\\":\\\"Nazaj\\\",\\\"change_dcaa253a\\\":\\\"Spremeni\\\",\\\"change_name_c8cce76c\\\":\\\"Spremeni ime\\\",\\\"change_name_to_568374c8\\\":\\\"Spremeni %{name} v\\\",\\\"copy_9748f9f\\\":\\\"Kopiraj\\\",\\\"name_1aed4a1b\\\":\\\"Ime\\\",\\\"replace_e61834a7\\\":\\\"Zamenjaj\\\"},\\\"sv\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Ett lst objekt med namnet %{name} finns redan p den hr platsen. Ange ett nytt namn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Ett lst objekt med namnet \\\\\\\"%{name}\\\\\\\" finns redan p den hr platsen. Vill du erstta den befintliga filen?\\\",\\\"back_2900f52a\\\":\\\"Tillbaka\\\",\\\"change_dcaa253a\\\":\\\"ndra\\\",\\\"change_name_c8cce76c\\\":\\\"ndra namn\\\",\\\"change_name_to_568374c8\\\":\\\"ndra \\\\\\\"%{name}\\\\\\\" till\\\",\\\"copy_9748f9f\\\":\\\"Kopiera\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"replace_e61834a7\\\":\\\"Erstt\\\"},\\\"sv-x-k12\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"Ett lst objekt med namnet %{name} finns redan p den hr platsen. Ange ett nytt namn.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"Ett lst objekt med namnet \\\\\\\"%{name}\\\\\\\" finns redan p den hr platsen. Vill du erstta den befintliga filen?\\\",\\\"back_2900f52a\\\":\\\"Tillbaka\\\",\\\"change_dcaa253a\\\":\\\"ndra\\\",\\\"change_name_c8cce76c\\\":\\\"ndra namn\\\",\\\"change_name_to_568374c8\\\":\\\"ndra \\\\\\\"%{name}\\\\\\\" till\\\",\\\"copy_9748f9f\\\":\\\"Kopiera\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"replace_e61834a7\\\":\\\"Erstt\\\"},\\\"tr\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"\\\\\\\"%{name}\\\\\\\" adna bir e zaten bu konumda mevcut. Ltfen teni bir ad giriniz.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"\\\\\\\"%{name}\\\\\\\" adna bir e zaten bu konumda mevcut. Var olan dosyay deitirmek ister misiniz?\\\",\\\"back_2900f52a\\\":\\\"Geri\\\",\\\"change_dcaa253a\\\":\\\"Deitir\\\",\\\"change_name_c8cce76c\\\":\\\"smi Deitir\\\",\\\"change_name_to_568374c8\\\":\\\"\\\\\\\"%{name}\\\\\\\"i una deitir\\\",\\\"copy_9748f9f\\\":\\\"Kopyala\\\",\\\"name_1aed4a1b\\\":\\\"sim\\\",\\\"replace_e61834a7\\\":\\\"Deitir\\\"},\\\"uk\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"   ' \\\\\\\"%{name}\\\\\\\"     .  ,   '.\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"  ' \\\\\\\"%{name}\\\\\\\"     .     ?\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\" '\\\",\\\"change_name_to_568374c8\\\":\\\" \\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"'\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"zh-Hans\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"%{name}\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"\\\\\\\"%{name}\\\\\\\" \\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\"\\\",\\\"change_name_to_568374c8\\\":\\\"\\\\\\\"%{name}\\\\\\\" \\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"a_locked_item_named_name_already_exists_in_this_lo_ab03ee39\\\":\\\"%{name}\\\",\\\"an_item_named_name_already_exists_in_this_location_147b7312\\\":\\\"%{name}\\\",\\\"back_2900f52a\\\":\\\"\\\",\\\"change_dcaa253a\\\":\\\"\\\",\\\"change_name_c8cce76c\\\":\\\"\\\",\\\"change_name_to_568374c8\\\":\\\"%{name}\\\",\\\"copy_9748f9f\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"replace_e61834a7\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/file_rename_form';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('file_rename_form');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport FileRenameForm from 'compiled/react_files/components/FileRenameForm'\nimport Modal from '../shared/modal'\nimport ModalContent from '../shared/modal-content'\nimport ModalButtons from '../shared/modal-buttons'\nimport I18n from 'i18n!file_rename_form'\n\nFileRenameForm.buildContent = function() {\n  const nameToUse = this.state.fileOptions.name || this.state.fileOptions.file.name\n  let buildContentToRender\n  if (!this.state.isEditing && !this.state.fileOptions.cannotOverwrite) {\n    buildContentToRender = (\n      <div ref=\"bodyContent\">\n        <p id=\"renameFileMessage\">\n          {I18n.t(\n            'An item named \"%{name}\" already exists in this location. Do you want to replace the existing file?',\n            {name: nameToUse}\n          )}\n        </p>\n      </div>\n    )\n  } else {\n    let renameMessage\n    if (this.state.fileOptions.cannotOverwrite) {\n      renameMessage = I18n.t(\n        'A locked item named \"%{name}\" already exists in this location. Please enter a new name.',\n        {name: nameToUse}\n      )\n    } else {\n      renameMessage = I18n.t('Change \"%{name}\" to', {name: nameToUse})\n    }\n\n    buildContentToRender = (\n      <div ref=\"bodyContent\">\n        <p>{renameMessage}</p>\n        <form onSubmit={this.handleFormSubmit}>\n          <label className=\"file-rename-form__form-label\">{I18n.t('Name')}</label>\n          <input className=\"input-block-level\" type=\"text\" defaultValue={nameToUse} ref=\"newName\" />\n        </form>\n      </div>\n    )\n  }\n\n  return buildContentToRender\n}\n\nFileRenameForm.buildButtons = function() {\n  let buildButtonsToRender\n  if (this.state.fileOptions.cannotOverwrite) {\n    buildButtonsToRender = [\n      <button\n        key=\"commitChangeBtn\"\n        ref=\"commitChangeBtn\"\n        className=\"btn btn-primary\"\n        onClick={this.handleChangeClick}\n      >\n        {I18n.t('Change')}\n      </button>\n    ]\n  } else if (!this.state.isEditing) {\n    buildButtonsToRender = [\n      <button\n        key=\"renameBtn\"\n        ref=\"renameBtn\"\n        className=\"btn btn-default\"\n        onClick={this.handleRenameClick}\n      >\n        {I18n.t('Change Name')}\n      </button>,\n      <button\n        key=\"replaceBtn\"\n        ref=\"replaceBtn\"\n        className=\"btn btn-primary\"\n        onClick={this.handleReplaceClick}\n      >\n        {I18n.t('Replace')}\n      </button>\n    ]\n  } else {\n    buildButtonsToRender = [\n      <button\n        key=\"backBtn\"\n        ref=\"backBtn\"\n        className=\"btn btn-default\"\n        onClick={this.handleBackClick}\n      >\n        {I18n.t('Back')}\n      </button>,\n      <button\n        key=\"commitChangeBtn\"\n        ref=\"commitChangeBtn\"\n        className=\"btn btn-primary\"\n        onClick={this.handleChangeClick}\n      >\n        {I18n.t('Change')}\n      </button>\n    ]\n  }\n\n  return buildButtonsToRender\n}\n\nFileRenameForm.render = function() {\n  return (\n    <div>\n      <Modal\n        className=\"ReactModal__Content--canvas ReactModal__Content--mini-modal\"\n        ref=\"canvasModal\"\n        isOpen={this.props.fileOptions}\n        title={I18n.t('Copy')}\n        onRequestClose={this.props.onClose}\n        closeWithX={this.props.closeWithX}\n      >\n        <ModalContent>\n          {this.buildContent()}\n          <ModalButtons>{this.buildButtons()}</ModalButtons>\n        </ModalContent>\n      </Modal>\n    </div>\n  )\n}\n\nexport default createReactClass(FileRenameForm)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport $ from 'jquery'\nimport FileRenameForm from 'jsx/files/FileRenameForm'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nfunction moveItem(item, destinationFolder, options = {}) {\n  const dfd = $.Deferred()\n  item.moveTo(destinationFolder, options).then(\n    // success\n    data => dfd.resolve(data),\n    // failure\n    (jqXHR, textStatus, errorThrown) => {\n      if (jqXHR.status === 409) {\n        // file already exists: prompt and retry\n        ReactDOM.render(\n          React.createFactory(FileRenameForm)({\n            onClose() {},\n            closeWithX() {\n              return dfd.reject()\n            },\n            closeOnResolve: true,\n            fileOptions: {name: item.attributes.display_name},\n            onNameConflictResolved: opts =>\n              moveItem(item, destinationFolder, opts).then(\n                data => dfd.resolve(data),\n                () => dfd.reject()\n              )\n          }),\n          $('<div>').appendTo('body')[0]\n        )\n      } else {\n        // some other error: fail\n        return dfd.reject()\n      }\n    }\n  )\n  return dfd\n}\n\nexport default function moveStuff(filesAndFolders, destinationFolder) {\n  const promises = filesAndFolders.map(item => moveItem(item, destinationFolder))\n  return $.when(...promises).then(() => {\n    $.flashMessage(\n      I18n.t(\n        'move_success',\n        {\n          one: '%{item} moved to %{destinationFolder}',\n          other: '%{count} items moved to %{destinationFolder}'\n        },\n        {\n          count: filesAndFolders.length,\n          item: filesAndFolders[0] && filesAndFolders[0].displayName(),\n          destinationFolder: destinationFolder.displayName()\n        }\n      )\n    )\n  })\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport DragFeedback from 'jsx/files/DragFeedback'\nimport moveStuff from '../utils/moveStuff'\nimport $ from 'jquery'\nimport _ from 'underscore'\n\nexport default {\n  itemsToDrag() {\n    return this.state.selectedItems\n  },\n  renderDragFeedback({pageX, pageY}) {\n    if (!this.dragHolder) {\n      this.dragHolder = $('<div>').appendTo(document.body)\n    }\n    // This should be in JSX, but /o\\\n    ReactDOM.render(\n      <DragFeedback pageX={pageX} pageY={pageY} itemsToDrag={this.itemsToDrag()} />,\n      this.dragHolder[0]\n    )\n  },\n\n  removeDragFeedback() {\n    $(document).off('.MultiDraggableMixin')\n    if (this.dragHolder) {\n      ReactDOM.unmountComponentAtNode(this.dragHolder[0])\n    }\n    this.dragHolder = null\n  },\n\n  onItemDragStart(event) {\n    // IE 10 can't do this stuff:\n    try {\n      // make it so you can drag stuff to other apps and it will at least copy a list of urls\n      // see: https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types#link\n      const itemsToDrag = this.itemsToDrag()\n      if (itemsToDrag.length && _.isArray(itemsToDrag)) {\n        event.dataTransfer.setData(\n          'text/uri-list',\n          itemsToDrag.map(item => item.get('url')).join('\\n')\n        )\n      }\n\n      // replace the default ghost dragging element with a transparent gif\n      // since we are going to use our own custom drag image\n      const img = new Image()\n      img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n      event.dataTransfer.setDragImage(img, 150, 150)\n    } catch (error) {}\n\n    this.renderDragFeedback(event)\n    event.dataTransfer.effectAllowed = 'move'\n    event.dataTransfer.setData('Text', 'in_a_dndMixin_drag')\n\n    return $(document).on({\n      'dragover.MultiDraggableMixin': event => this.renderDragFeedback(event.originalEvent),\n      'dragend.MultiDraggableMixin': this.removeDragFeedback\n    })\n  },\n\n  onItemDragEnterOrOver(event, callback) {\n    const types = event.dataTransfer.types || []\n    if (!types.includes('Text') && !types.includes('text/plain')) return\n    event.preventDefault()\n    if (callback) return callback(event)\n  },\n\n  onItemDragLeaveOrEnd(event, callback) {\n    const types = event.dataTransfer.types || []\n    if (!types.includes('Text') && !types.includes('text/plain')) return\n    if (callback) return callback(event)\n  },\n\n  onItemDrop(event, destinationFolder, callback) {\n    if (\n      (event.dataTransfer.getData('Text') || event.dataTransfer.getData('text/plain')) !==\n      'in_a_dndMixin_drag'\n    ) {\n      return\n    }\n    event.preventDefault()\n    return moveStuff(this.itemsToDrag(), destinationFolder)\n      .then(\n        () => {\n          if (callback) {\n            return callback({success: true, event})\n          }\n        },\n        () => {\n          if (callback) {\n            return callback({success: false, event})\n          }\n        }\n      )\n      .done(this.clearSelectedItems)\n  }\n}\n//      @clearSelectedItems()\n//      callback(event) if callback\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport MultiselectableMixin from '../mixins/MultiselectableMixin'\nimport dndMixin from '../mixins/dndMixin'\nimport filesEnv from '../modules/filesEnv'\n\nexport default {\n  displayName: 'FilesApp',\n\n  onResolvePath({\n    currentFolder,\n    rootTillCurrentFolder,\n    showingSearchResults,\n    searchResultCollection\n  }) {\n    const {updatedModels} = this.state\n\n    if (currentFolder && !showingSearchResults) {\n      updatedModels.forEach((model, index, models) => {\n        let removedModel\n        if (\n          currentFolder.id.toString() !== model.get('folder_id') &&\n          (removedModel = currentFolder.files.findWhere({id: model.get('id')}))\n        ) {\n          currentFolder.files.remove(removedModel)\n          models.splice(index, 1)\n        }\n      })\n    }\n\n    return this.setState({\n      currentFolder,\n      rootTillCurrentFolder,\n      showingSearchResults,\n      selectedItems: [],\n      searchResultCollection,\n      updatedModels\n    })\n  },\n\n  getInitialState() {\n    return {\n      updatedModels: [],\n      currentFolder: null,\n      rootTillCurrentFolder: null,\n      showingSearchResults: false,\n      showingModal: false,\n      modalContents: null // This should be a React Component to render in the modal container.\n    }\n  },\n\n  mixins: [MultiselectableMixin, dndMixin],\n\n  // for MultiselectableMixin\n  selectables() {\n    if (this.state.showingSearchResults) {\n      return this.state.searchResultCollection.models\n    } else {\n      return this.state.currentFolder.children(this.props.query)\n    }\n  },\n\n  onMove(modelsToMove) {\n    const updatedModels = _.uniq(this.state.updatedModels.concat(modelsToMove), 'id')\n    this.setState({updatedModels})\n  },\n\n  getPreviewQuery() {\n    const retObj = {\n      preview: (this.state.selectedItems[0] && this.state.selectedItems[0].id) || true\n    }\n    if (this.state.selectedItems.length > 1) {\n      retObj.only_preview = this.state.selectedItems.map(item => item.id).join(',')\n    }\n    if (this.props.query && this.props.query.search_term) {\n      retObj.search_term = this.props.query.search_term\n    }\n    if (this.props.query && this.props.query.sort) {\n      retObj.sort = this.props.query.sort\n    }\n    if (this.props.query && this.props.query.order) {\n      retObj.order = this.props.query.order\n    }\n    return retObj\n  },\n\n  openModal(contents, afterClose) {\n    this.setState({\n      modalContents: contents,\n      showingModal: true,\n      afterModalClose: afterClose\n    })\n  },\n\n  closeModal() {\n    this.setState({showingModal: false}, () => this.state.afterModalClose())\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport customPropTypes from '../modules/customPropTypes'\n\nconst MAX_CRUMB_WIDTH = 500\nconst MIN_CRUMB_WIDTH = 80\n\nexport default {\n  displayName: 'Breadcrumbs',\n\n  propTypes: {\n    rootTillCurrentFolder: PropTypes.arrayOf(customPropTypes.folder),\n    contextAssetString: PropTypes.string.isRequired\n  },\n\n  getInitialState() {\n    return {\n      maxCrumbWidth: MAX_CRUMB_WIDTH,\n      availableWidth: 200000\n    }\n  },\n\n  componentWillMount() {\n    // Get the existing Canvas breadcrumbs, store them, and remove them\n    this.fixOldCrumbs()\n  },\n\n  componentDidMount() {\n    // Attach the resize listener to dynamically change the components\n    // involved in the breadcrumb trail.\n    $(window).on('resize', this.handleResize)\n    this.handleResize()\n  },\n\n  componentWillUnmount() {\n    $(window).off('resize', this.handleResize)\n  },\n\n  fixOldCrumbs() {\n    const $oldCrumbs = $('#breadcrumbs')\n    const heightOfOneBreadcrumb = $oldCrumbs.find('li:visible:first').height() * 1.5\n    const homeName = $oldCrumbs.find('.home').text()\n    const $a = $oldCrumbs\n      .find('li')\n      .eq(1)\n      .find('a')\n    const contextUrl = $a.attr('href')\n    const contextName = $a.text()\n    $('.ic-app-nav-toggle-and-crumbs').remove()\n\n    this.setState({homeName, contextUrl, contextName, heightOfOneBreadcrumb})\n  },\n\n  handleResize() {\n    this.startRecalculating(window.innerWidth)\n  },\n\n  startRecalculating(newAvailableWidth) {\n    this.setState(\n      {\n        availableWidth: newAvailableWidth,\n        maxCrumbWidth: MAX_CRUMB_WIDTH\n      },\n      this.checkIfCrumbsFit\n    )\n  },\n\n  componentWillReceiveProps() {\n    setTimeout(this.startRecalculating)\n  },\n\n  checkIfCrumbsFit() {\n    if (!this.state.heightOfOneBreadcrumb) return\n\n    const breadcrumbHeight = $(ReactDOM.findDOMNode(this.refs.breadcrumbs)).height()\n    if (\n      breadcrumbHeight > this.state.heightOfOneBreadcrumb &&\n      this.state.maxCrumbWidth > MIN_CRUMB_WIDTH\n    ) {\n      const maxCrumbWidth = Math.max(MIN_CRUMB_WIDTH, this.state.maxCrumbWidth - 20)\n      this.setState({maxCrumbWidth}, this.checkIfCrumbsFit)\n    }\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\n\nclass BreadcrumbCollapsedContainer extends React.Component {\n  static displayName = 'BreadcrumbCollapsedContainer'\n\n  static propTypes = {\n    foldersToContain: PropTypes.arrayOf(customPropTypes.folder).isRequired\n  }\n\n  state = {\n    open: false\n  }\n\n  open = () => {\n    window.clearTimeout(this.timeout)\n    this.setState({\n      open: true\n    })\n  }\n\n  close = () => {\n    this.timeout = window.setTimeout(() => {\n      this.setState({\n        open: false\n      })\n    }, 100)\n  }\n\n  render() {\n    const divClasses = classnames({\n      open: this.state.open,\n      closed: !this.state.open,\n      popover: true,\n      bottom: true,\n      'ef-breadcrumb-popover': true\n    })\n\n    return (\n      <li\n        href=\"#\"\n        onMouseEnter={this.open}\n        onMouseLeave={this.close}\n        onFocus={this.open}\n        onBlur={this.close}\n        style={{position: 'relative'}}\n      >\n        <a href=\"#\"></a>\n        <div className={divClasses}>\n          <div className=\"arrow\" />\n          <div className=\"popover-content\">\n            <ul>\n              {this.props.foldersToContain.map(folder => (\n                <li key={folder.cid}>\n                  <a\n                    href={\n                      folder.urlPath()\n                        ? `${filesEnv.baseUrl}/folder/${folder.urlPath()}`\n                        : filesEnv.baseUrl\n                    }\n                    activeClassName=\"active\"\n                    className=\"ellipsis\"\n                  >\n                    <i className=\"ef-big-icon icon-folder\" />\n                    <span>{folder.get('name')}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </li>\n    )\n  }\n}\n\nexport default BreadcrumbCollapsedContainer\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport I18n from 'i18n!react_files'\nimport Breadcrumbs from 'compiled/react_files/components/Breadcrumbs'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport BreadcrumbCollapsedContainer from './BreadcrumbCollapsedContainer'\nimport splitAssetString from 'compiled/str/splitAssetString'\n\nconst MAX_CRUMB_WIDTH = 500\nconst MIN_CRUMB_WIDTH = 80\n\nBreadcrumbs.renderSingleCrumb = function(folder, isLastCrumb, isRootCrumb) {\n  const [contextType, contextId] = splitAssetString(this.props.contextAssetString, false)\n  const isContextRoot =\n    !folder ||\n    !!(\n      folder &&\n      (folder.get('context_type') || '').toLowerCase() === contextType &&\n      (folder.get('context_id') || -1).toString() === contextId\n    )\n  const name =\n    isRootCrumb && isContextRoot\n      ? I18n.t('files', 'Files')\n      : folder && (folder.get('custom_name') || folder.get('name'))\n\n  return (\n    <li key={name}>\n      <a\n        href={\n          isRootCrumb && isContextRoot\n            ? filesEnv.baseUrl\n            : `${filesEnv.baseUrl}/folder/${folder ? folder.urlPath() : null}`\n        }\n        // only add title tooltips if there's a chance they could be ellipsized\n        title={this.state.maxCrumbWidth < 500 ? name : null}\n      >\n        <span\n          className=\"ellipsis\"\n          style={{maxWidth: isLastCrumb ? null : this.state.maxCrumbWidth}}\n        >\n          {name}\n        </span>\n      </a>\n    </li>\n  )\n}\n\nBreadcrumbs.renderDynamicCrumbs = function() {\n  if (this.props.showingSearchResults) {\n    return [\n      this.renderSingleCrumb(null, !'isLastCrumb', !!'isRootCrumb'),\n      <li key=\"searchLink\">\n        <a href=\"/search\">\n          <span className=\"ellipsis\">\n            {this.props.query.search_term &&\n              I18n.t('search_results_for', 'search results for \"%{search_term}\"', {\n                search_term: this.props.query.search_term\n              })}\n          </span>\n        </a>\n      </li>\n    ]\n  } else {\n    if (!this.props.rootTillCurrentFolder || !this.props.rootTillCurrentFolder.length) {\n      return []\n    }\n    // Formerly, in CoffeeScript [...foldersInMiddle, lastFolder] = this.props.rootTillCurrentFolder\n    const foldersInMiddle = this.props.rootTillCurrentFolder.slice(\n      0,\n      this.props.rootTillCurrentFolder.length - 1\n    )\n    const lastFolder = this.props.rootTillCurrentFolder[this.props.rootTillCurrentFolder.length - 1]\n\n    if (this.state.maxCrumbWidth > MIN_CRUMB_WIDTH) {\n      return this.props.rootTillCurrentFolder.map((folder, i) => {\n        return this.renderSingleCrumb(folder, folder === lastFolder, i === 0)\n      })\n    } else {\n      return [\n        <BreadcrumbCollapsedContainer foldersToContain={foldersInMiddle} />,\n        this.renderSingleCrumb(lastFolder, true)\n      ]\n    }\n  }\n}\n\nBreadcrumbs.render = function() {\n  return (\n    <nav aria-label=\"breadcrumbs\" role=\"navigation\" id=\"breadcrumbs\" ref=\"breadcrumbs\">\n      <ul>\n        <li className=\"home\">\n          <a href=\"/\">\n            <i className=\"icon-home standalone-icon\" title={this.state.homeName}>\n              <span className=\"screenreader-only\">{this.state.homeName}</span>\n            </i>\n          </a>\n        </li>\n        <li>\n          <a href={this.state.contextUrl}>\n            <span className=\"ellipsible\">{this.state.contextName}</span>\n          </a>\n        </li>\n        {this.renderDynamicCrumbs()}\n      </ul>\n    </nav>\n  )\n}\n\nexport default createReactClass(Breadcrumbs)\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"   \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"      .\\\"},\\\"cy\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Rhestr Ffeiliau wedii diweddaru\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Maer ffolder hon wedii chloi ar hyn o bryd, a does dim modd ei gweld.\\\"},\\\"da\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Filliste opdateret\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Denne mappe er lst p nuvrende tidspunkt og kan ikke vises.\\\"},\\\"da-x-k12\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Filliste opdateret\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Denne mappe er lst p nuvrende tidspunkt og kan ikke vises.\\\"},\\\"de\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Dateiliste aktualisiert\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Dieser Ordner ist derzeit gesperrt und kann nicht angezeigt werden.\\\"},\\\"el\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"   \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"            .\\\"},\\\"en-AU\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"File list updated\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"This folder is currently locked and unavailable to view.\\\"},\\\"en-CA\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"File list updated\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"This folder is currently locked and unavailable to view.\\\"},\\\"en-GB\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"File list updated\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"This folder is currently locked and unavailable to view.\\\"},\\\"es\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Se ha actualizado la lista de archivos\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Esta carpeta est bloqueada actualmente y no se puede ver.\\\"},\\\"fa\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"    \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"            .\\\"},\\\"fi\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Tiedostoluettelo pivitetty\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Tm tiedosto on parhaillaan lukittuna eik sit voi tarkastella.\\\"},\\\"fr\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Liste de fichiers mise  jour\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Ce dossier est actuellement verrouill et non consultable.\\\"},\\\"fr-CA\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Liste de fichiers mise  jour\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Ce dossier est actuellement verrouill et non consultable.\\\"},\\\"he\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"  \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"      \\\"},\\\"ht\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Lis Fichye aktyalize\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Dosye sa a bloke e li pa disponib pou afiche.\\\"},\\\"hu\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fjllista frisstve\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"A mappa jelenleg zrolva van, nem megtekinthet.\\\"},\\\"hy\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"   \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"          :\\\"},\\\"is\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Skralisti uppfrur\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"essi mappa er lst og ekki hgt a skoa eins og er.\\\"},\\\"it\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Elenco file aggiornato\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Questa cartella  attualmente bloccata e non disponibile per la visualizzazione.\\\"},\\\"ja\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\" \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"\\\"},\\\"mi\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Whakahoutia rrangi Knae\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Ko kiia tnei w, me te wtea ki tnei kpaki.\\\"},\\\"nb\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fillisten oppdatert\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Denne mappen er lst og utilgjengelig for visning.\\\"},\\\"nb-x-k12\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fillisten oppdatert\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Denne mappen er lst og utilgjengelig for visning.\\\"},\\\"nl\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"List met bestanden bijgewerkt\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Deze map is momenteel vergrendeld en kan niet bekeken worden.\\\"},\\\"nn\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fillista er oppdatert\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Denne mappa er lst og kan ikkje visast.\\\"},\\\"pl\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Zaktualizowano list plikw\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Ten folder jest aktualnie zablokowany i niedostpny do wywietlenia.\\\"},\\\"pt\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Lista de ficheiros atualizada\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Esta pasta est bloqueada e no est disponvel para visualizao.\\\"},\\\"pt-BR\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Lista de arquivo atualizada\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Esta pasta est atualmente bloqueada e indisponvel para exibio.\\\"},\\\"ru\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"  \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"         .\\\"},\\\"sl\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Posodobljeni seznam datotek\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Ta mapa je trenutno zaklenjena in ni na voljo za ogled.\\\"},\\\"sv\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fillistan uppdaterad\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Mappen r fr tillfllet lst och kan inte visas.\\\"},\\\"sv-x-k12\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Fillistan uppdaterad\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Mappen r fr tillfllet lst och kan inte visas.\\\"},\\\"tr\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"Dosya listesi gncellendi\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"Bu klasr u anda kilitli ve grntlenemez.\\\"},\\\"uk\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"  \\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"        .\\\"},\\\"zh-Hans\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"file_list_updated_38e2a5ad\\\":\\\"\\\",\\\"this_folder_is_currently_locked_and_unavailable_to_f85c451\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/folder_tree';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('folder_tree');\n  ","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport TreeBrowserView from '../../views/TreeBrowserView'\n\nexport default class BBTreeBrowserView {\n  static create(bbOptions, options = {}) {\n    if (!options.render) {\n      options.render = false\n    }\n    const view = new TreeBrowserView(bbOptions)\n    const viewObj = {view, viewOptions: bbOptions, renderOptions: options}\n    const length = this.views.push(viewObj)\n    const index = length - 1\n    this.set(index, {index})\n\n    if (options.render) {\n      if (options.element == null) {\n        console.error(\n          \"`element` option missing error: An element to attach the TreeBrowserView to must be specified when setting the render option to 'true' for BBTreeBrowserView\"\n        )\n      }\n      if (options.element) {\n        this.render(index, options.element, options.callback)\n      }\n    }\n\n    return this.get(index)\n  }\n\n  static set(index, newValues = {}) {\n    let currentValues\n    if ((currentValues = this.get(index))) {\n      const values = $.extend(currentValues, newValues)\n      return (currentValues = values)\n    }\n  }\n\n  static get(index) {\n    return this.views[index] || null\n  }\n\n  static getView(index) {\n    return (this.get(index) && this.get(index).view) || null\n  }\n\n  static remove(index) {\n    this.views.splice(index, 1)\n    return this.refresh()\n  }\n\n  static getViews() {\n    return this.views\n  }\n\n  static render(index, element, callback) {\n    setTimeout(() => {\n      const view = this.getView(index)\n      if (view) {\n        const res = view.render()\n        res && res.$el && res.$el.appendTo(element)\n      }\n    }, 0)\n    if (typeof callback === 'function') return callback()\n  }\n\n  static refresh() {\n    return this.views.map(item => {\n      const {index} = item\n      const previous = this.get(index)\n      this.remove(index)\n      item.view.destroyView()\n      const refreshed = this.create(previous.viewOptions, previous.renderOptions)\n      if (!previous.renderOptions.render) {\n        this.render(\n          refreshed.index,\n          refreshed.renderOptions.element,\n          refreshed.renderOptions.callback\n        )\n      }\n      return refreshed\n    })\n  }\n}\nBBTreeBrowserView.views = []\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\"\\\"}},\\\"cy\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Ffeiliau cwrs\\\",\\\"group_files\\\":\\\"Ffeiliau grp\\\",\\\"my_files\\\":\\\"Fy ffeiliau\\\"}},\\\"da\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Fagets filer\\\",\\\"group_files\\\":\\\"Gruppefiler\\\",\\\"my_files\\\":\\\"Mine filer\\\"}},\\\"da-x-k12\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Fagets filer\\\",\\\"group_files\\\":\\\"Gruppefiler\\\",\\\"my_files\\\":\\\"Mine filer\\\"}},\\\"de\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Kursdateien\\\",\\\"group_files\\\":\\\"Gruppendateien\\\",\\\"my_files\\\":\\\"Meine Dateien\\\"}},\\\"el\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\"  \\\"}},\\\"en-AU\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Course files\\\",\\\"group_files\\\":\\\"Group files\\\",\\\"my_files\\\":\\\"My files\\\"}},\\\"en-CA\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Course files\\\",\\\"group_files\\\":\\\"Group files\\\",\\\"my_files\\\":\\\"My files\\\"}},\\\"en-GB\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Course files\\\",\\\"group_files\\\":\\\"Group files\\\",\\\"my_files\\\":\\\"My files\\\"}},\\\"es\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Archivos del curso\\\",\\\"group_files\\\":\\\"Archivos del grupo\\\",\\\"my_files\\\":\\\"Mis archivos\\\"}},\\\"fa\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"  \\\",\\\"group_files\\\":\\\"  \\\",\\\"my_files\\\":\\\"  \\\"}},\\\"fi\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Kurssitiedostot\\\",\\\"group_files\\\":\\\"Ryhmn tiedostot\\\",\\\"my_files\\\":\\\"Omat tiedostot\\\"}},\\\"fr\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Fichiers du cours\\\",\\\"group_files\\\":\\\"Fichiers du groupe\\\",\\\"my_files\\\":\\\"Mes fichiers\\\"}},\\\"fr-CA\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Fichiers du cours\\\",\\\"group_files\\\":\\\"Fichiers du groupe\\\",\\\"my_files\\\":\\\"Mes fichiers\\\"}},\\\"he\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"ht\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Fichye kou\\\",\\\"group_files\\\":\\\"Gwoup fichye\\\",\\\"my_files\\\":\\\"Fichye Mwen\\\"}},\\\"hu\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Kurzusfjlok\\\",\\\"group_files\\\":\\\"Csoportfjlok\\\",\\\"my_files\\\":\\\"Fjljaim\\\"}},\\\"hy\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"is\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Nmskeisskrr\\\",\\\"group_files\\\":\\\"Hpskrr\\\",\\\"my_files\\\":\\\"Mnar skrr\\\"}},\\\"it\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"File corso\\\",\\\"group_files\\\":\\\"File gruppo\\\",\\\"my_files\\\":\\\"I miei file\\\"}},\\\"ja\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"ko\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"mi\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Ng knae akoranga\\\",\\\"group_files\\\":\\\"Ng knae rp\\\",\\\"my_files\\\":\\\"Aku knae\\\"}},\\\"nb\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Filer for emne\\\",\\\"group_files\\\":\\\"Gruppefiler\\\",\\\"my_files\\\":\\\"Mine filer\\\"}},\\\"nb-x-k12\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Filer for fag\\\",\\\"group_files\\\":\\\"Gruppefiler\\\",\\\"my_files\\\":\\\"Mine filer\\\"}},\\\"nl\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Cursusbestanden\\\",\\\"group_files\\\":\\\"Groepsbestanden\\\",\\\"my_files\\\":\\\"Mijn bestanden\\\"}},\\\"nn\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Emnefiler\\\",\\\"group_files\\\":\\\"Gruppefiler\\\",\\\"my_files\\\":\\\"Mine filer\\\"}},\\\"pl\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Pliki kursu\\\",\\\"group_files\\\":\\\"Pliki grupy\\\",\\\"my_files\\\":\\\"Moje pliki\\\"}},\\\"pt\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Ficheiros de disciplina\\\",\\\"group_files\\\":\\\"Ficheiros de grupo\\\",\\\"my_files\\\":\\\"Os meus ficheiros\\\"}},\\\"pt-BR\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Arquivos do curso\\\",\\\"group_files\\\":\\\"Arquivos de grupo\\\",\\\"my_files\\\":\\\"Meus arquivos\\\"}},\\\"ru\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"sl\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Datoteke predmeta\\\",\\\"group_files\\\":\\\"Datoteke skupine\\\",\\\"my_files\\\":\\\"Moje datoteke\\\"}},\\\"sv\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Kursfiler\\\",\\\"group_files\\\":\\\"Gruppfiler\\\",\\\"my_files\\\":\\\"Mina filer\\\"}},\\\"sv-x-k12\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Kursfiler\\\",\\\"group_files\\\":\\\"Gruppfiler\\\",\\\"my_files\\\":\\\"Mina filer\\\"}},\\\"tr\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"Ders dosyalar\\\",\\\"group_files\\\":\\\"Grup dosyalar\\\",\\\"my_files\\\":\\\"Dosyalarm\\\"}},\\\"uk\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\" \\\",\\\"group_files\\\":\\\" \\\",\\\"my_files\\\":\\\" \\\"}},\\\"zh-Hans\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"\\\",\\\"group_files\\\":\\\"\\\",\\\"my_files\\\":\\\"\\\"}},\\\"zh-Hant\\\":{\\\"rootFoldersFinder\\\":{\\\"course_files\\\":\\\"\\\",\\\"group_files\\\":\\\"\\\",\\\"my_files\\\":\\\"\\\"}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/rootFoldersFinder';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('rootFoldersFinder');\n  ","#\n# Copyright (C) 2014 - present Instructure, Inc.\n#\n# This file is part of Canvas.\n#\n# Canvas is free software: you can redistribute it and/or modify it under\n# the terms of the GNU Affero General Public License as published by the Free\n# Software Foundation, version 3 of the License.\n#\n# Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n# A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n# details.\n#\n# You should have received a copy of the GNU Affero General Public License along\n# with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport I18n from 'i18n!rootFoldersFinder'\nimport Folder from '../models/Folder'\nimport splitAssetString from '../str/splitAssetString'\n\nexport default class RootFoldersFinder\n  constructor: (opts) ->\n    @rootFoldersToShow = opts.rootFoldersToShow\n    @contentTypes = opts.contentTypes\n    @useVerifiers = opts.useVerifiers\n\n  find: ->\n    return @rootFoldersToShow if @rootFoldersToShow\n    # purposely sharing these across instances of RootFoldersFinder\n    # use a 'custom_name' to set I18n'd names for the root folders (the actual names are hard-coded)\n    RootFoldersFinder.rootFolders ||= do =>\n      contextFiles = null\n      contextTypeAndId = splitAssetString(ENV.context_asset_string || '')\n      if contextTypeAndId && contextTypeAndId.length == 2 && (contextTypeAndId[0] == 'courses' || contextTypeAndId[0] == 'groups')\n        contextFiles = new Folder({contentTypes: @contentTypes})\n        contextFiles.set 'custom_name', if contextTypeAndId[0] is 'courses' then I18n.t('course_files', 'Course files') else I18n.t('group_files', 'Group files')\n        contextFiles.url = \"/api/v1/#{contextTypeAndId[0]}/#{contextTypeAndId[1]}/folders/root\"\n        contextFiles.fetch()\n\n      myFiles = new Folder({contentTypes: @contentTypes, useVerifiers: @useVerifiers})\n      myFiles.set 'custom_name', I18n.t('my_files', 'My files')\n      myFiles.url = '/api/v1/users/self/folders/root'\n      myFiles.fetch()\n\n      result = []\n      result.push contextFiles if contextFiles\n      result.push myFiles\n      result\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport I18n from 'i18n!folder_tree'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport BBTreeBrowserView from '../modules/BBTreeBrowserView'\nimport RootFoldersFinder from '../../views/RootFoldersFinder'\nimport customPropTypes from '../modules/customPropTypes'\nimport filesEnv from '../modules/filesEnv'\nimport page from 'page'\nimport '../../jquery.rails_flash_notifications'\n\nexport default {\n  displayName: 'FolderTree',\n\n  propTypes: {\n    rootFoldersToShow: PropTypes.arrayOf(customPropTypes.folder).isRequired,\n    rootTillCurrentFolder: PropTypes.arrayOf(customPropTypes.folder)\n  },\n\n  componentDidMount() {\n    const rootFoldersFinder = new RootFoldersFinder({\n      rootFoldersToShow: this.props.rootFoldersToShow\n    })\n\n    this.treeBrowserId = BBTreeBrowserView.create(\n      {\n        onlyShowSubtrees: true,\n        rootModelsFinder: rootFoldersFinder,\n        onClick: this.onClick,\n        dndOptions: this.props.dndOptions,\n        href: this.hrefFor,\n        focusStyleClass: this.focusStyleClass,\n        selectedStyleClass: this.selectedStyleClass,\n        autoFetch: true,\n        fetchItAll: 'to heck'\n      },\n      {\n        render: true,\n        element: ReactDOM.findDOMNode(this.refs.FolderTreeHolder)\n      }\n    ).index\n\n    this.expandTillCurrentFolder(this.props)\n  },\n\n  componentWillUnmount() {\n    BBTreeBrowserView.remove(this.treeBrowserViewId)\n  },\n\n  componentWillReceiveProps(newProps) {\n    this.expandTillCurrentFolder(newProps)\n  },\n\n  onClick(event, folder) {\n    event.preventDefault()\n    $(ReactDOM.findDOMNode(this.refs.FolderTreeHolder))\n      .find(`.${this.focusStyleClass}`)\n      .each((key, value) => $(value).removeClass(this.focusStyleClass))\n    $(ReactDOM.findDOMNode(this.refs.FolderTreeHolder))\n      .find(`.${this.selectedStyleClass}`)\n      .each((key, value) => $(value).removeClass(this.selectedStyleClass))\n    if (folder.get('locked_for_user')) {\n      const message = I18n.t('This folder is currently locked and unavailable to view.')\n      $.flashError(message)\n      $.screenReaderFlashMessage(message)\n    } else {\n      $.screenReaderFlashMessageExclusive(I18n.t('File list updated'))\n      page(`${filesEnv.baseUrl}/folder/${folder.urlPath()}`)\n    }\n  },\n\n  hrefFor(folder) {},\n  // @makeHref (if folder.urlPath() then 'folder' else 'rootFolder'), splat: folder.urlPath()\n\n  focusStyleClass: 'FolderTree__folderItem--focused',\n  selectedStyleClass: 'FolderTree__folderItem--selected',\n\n  expandTillCurrentFolder(props) {\n    function expandFolder(folderIndex) {\n      const folder = props.rootTillCurrentFolder && props.rootTillCurrentFolder[folderIndex]\n      if (!folder) return\n      return folder\n        .expand(false, {onlyShowSubtrees: true})\n        .then(() => expandFolder(folderIndex + 1))\n    }\n\n    return expandFolder(0)\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport FolderTree from 'compiled/react_files/components/FolderTree'\n\nFolderTree.render = function() {\n  return <div className=\"ef-folder-list\" ref=\"FolderTreeHolder\" />\n}\n\nexport default createReactClass(FolderTree)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport customPropTypes from '../modules/customPropTypes'\n\nexport default {\n  displayName: 'FilesUsage',\n  url() {\n    return `/api/v1/${this.props.contextType}/${this.props.contextId}/files/quota`\n  },\n\n  propTypes: {\n    contextType: customPropTypes.contextType.isRequired,\n    contextId: customPropTypes.contextId.isRequired\n  },\n\n  update() {\n    return $.get(this.url(), data => {\n      this.setState(data)\n    })\n  },\n\n  componentDidMount() {\n    this.update()\n    this.interval = setInterval(this.update, 1000 * 60 * 5)\n  }, // refresh every 5 minutes\n\n  componentWillUnmount() {\n    clearInterval(this.interval)\n  }\n}\n","//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport I18n from 'i18nObj'\n\nconst units = ['byte', 'bytes', 'KB', 'MB', 'GB', 'TB']\n\n// converts bytes into a nice representation with unit. e.g. 13661855 -> 13.7 MB, 825399 -> 825 KB, 1396 -> 1 KB\nexport default function friendlyBytes(value) {\n  let resInt, resValue\n  const bytes = parseInt(value, 10)\n  if (bytes.toString() === 'NaN') return '--'\n\n  if (bytes === 0) {\n    resInt = resValue = 0\n  } else {\n    resInt = Math.floor(Math.log(bytes) / Math.log(1000)) // base 10 (rather than 1024) matches Mac OS X\n    resValue = (bytes / Math.pow(1000, Math.floor(resInt))).toFixed(resInt < 2 ? 0 : 1) // no decimals for anything smaller than 1 MB\n    if (bytes === 1) resInt = -1 // 1 byte special case\n  }\n\n  return `${I18n.n(resValue)} ${units[resInt + 1]}`\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport I18n from 'i18n!react_files'\nimport FilesUsage from 'compiled/react_files/components/FilesUsage'\nimport friendlyBytes from 'compiled/util/friendlyBytes'\n\nFilesUsage.render = function() {\n  if (this.state) {\n    const percentUsed = Math.round((this.state.quota_used / this.state.quota) * 100)\n    const label = I18n.t('%{percentUsed} of %{bytesAvailable} used', {\n      percentUsed: I18n.n(percentUsed, {percentage: true}),\n      bytesAvailable: friendlyBytes(this.state.quota)\n    })\n    const srLabel = I18n.t('Files Quota: %{percentUsed} of %{bytesAvailable} used', {\n      percentUsed: I18n.n(percentUsed, {percentage: true}),\n      bytesAvailable: friendlyBytes(this.state.quota)\n    })\n    return (\n      <div className=\"grid-row ef-quota-usage\">\n        <div className=\"col-xs-3\">\n          <div ref=\"container\" className=\"progress-bar__bar-container\" aria-hidden>\n            <div\n              ref=\"bar\"\n              className=\"progress-bar__bar\"\n              style={{\n                width: Math.min(percentUsed, 100) + '%'\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"col-xs-9\" style={{paddingLeft: '0px'}} aria-hidden>\n          {label}\n        </div>\n        <div className=\"screenreader-only\">{srLabel}</div>\n      </div>\n    )\n  } else {\n    return <div />\n  }\n}\n\nexport default createReactClass(FilesUsage)\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n  _itemToFocus: null,\n\n  setItemToFocus(DOMNode) {\n    return (this._itemToFocus = DOMNode)\n  },\n\n  getItemToFocus() {\n    return this._itemToFocus\n  },\n\n  setFocusToItem() {\n    if (this._itemToFocus) {\n      return this._itemToFocus.focus()\n    } else {\n      throw new Error('FocusStore has not been set.')\n    }\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport PropTypes from 'prop-types'\nimport customPropTypes from '../modules/customPropTypes'\nimport moveStuff from '../utils/moveStuff'\nimport splitAssetString from '../../str/splitAssetString'\n\nexport default {\n  displayName: 'MoveDialog',\n\n  propTypes: {\n    rootFoldersToShow: PropTypes.arrayOf(customPropTypes.folder).isRequired,\n    thingsToMove: PropTypes.arrayOf(customPropTypes.filesystemObject).isRequired,\n    onClose: PropTypes.func.isRequired,\n    onMove: PropTypes.func.isRequired\n  },\n\n  getInitialState() {\n    return {\n      destinationFolder: null,\n      isOpen: true\n    }\n  },\n\n  contextsAreEqual(destination = {}, sources = []) {\n    const contextsAreEqual = sources.filter(source => {\n      const assetString = source.get('context_asset_string')\n      const [contextType, contextId] = assetString\n        ? splitAssetString(assetString, false)\n        : [\n            (source.collection &&\n              source.collection.parentFolder &&\n              source.collection.parentFolder.get('context_type')) ||\n              source.get('context_type'),\n            (source.collection &&\n              source.collection.parentFolder &&\n              source.collection.parentFolder.get('context_id') &&\n              source.collection.parentFolder.get('context_id').toString()) ||\n              source.get('context_id').toString()\n          ]\n\n      return (\n        contextType.toLowerCase() === destination.get('context_type').toLowerCase() &&\n        contextId === (destination.get('context_id') && destination.get('context_id').toString())\n      )\n    })\n\n    return !!contextsAreEqual.length\n  },\n\n  onSelectFolder(event, folder) {\n    event.preventDefault()\n    if (folder.get('for_submissions')) {\n      this.setState({destinationFolder: null})\n    } else {\n      this.setState({\n        destinationFolder: folder,\n        isCopyingFile: !this.contextsAreEqual(folder, this.props.thingsToMove)\n      })\n    }\n  },\n\n  submit() {\n    const modelsBeingMoved = this.props.thingsToMove\n    const promise = moveStuff(modelsBeingMoved, this.state.destinationFolder)\n    return promise.then(() => {\n      this.props.onMove(modelsBeingMoved)\n      this.closeDialog()\n    })\n  },\n\n  closeDialog() {\n    this.setState({isOpen: false}, function() {\n      this.props.onClose()\n    })\n  },\n\n  getTitle() {\n    return I18n.t(\n      'move_question',\n      {\n        one: 'Where would you like to move %{item}?',\n        other: 'Where would you like to move these %{count} items?'\n      },\n      {\n        count: this.props.thingsToMove.length,\n        item: this.props.thingsToMove[0] && this.props.thingsToMove[0].displayName()\n      }\n    )\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport I18n from 'i18n!react_files'\nimport BBTreeBrowserView from 'compiled/react_files/modules/BBTreeBrowserView'\nimport RootFoldersFinder from 'compiled/views/RootFoldersFinder'\n\nclass BBTreeBrowser extends React.Component {\n  static displayName = 'BBTreeBrowser'\n\n  static propTypes = {\n    rootFoldersToShow: PropTypes.arrayOf(customPropTypes.folder).isRequired,\n    onSelectFolder: PropTypes.func.isRequired\n  }\n\n  componentDidMount() {\n    const rootFoldersFinder = new RootFoldersFinder({\n      rootFoldersToShow: this.props.rootFoldersToShow\n    })\n\n    this.treeBrowserViewId = BBTreeBrowserView.create(\n      {\n        onlyShowSubtrees: true,\n        rootModelsFinder: rootFoldersFinder,\n        rootFoldersToShow: this.props.rootFoldersToShow,\n        onClick: this.props.onSelectFolder,\n        focusStyleClass: 'MoveDialog__folderItem--focused',\n        selectedStyleClass: 'MoveDialog__folderItem--selected'\n      },\n      {\n        element: ReactDOM.findDOMNode(this.refs.FolderTreeHolder)\n      }\n    ).index\n\n    window.setTimeout(() => {\n      BBTreeBrowserView.getView(this.treeBrowserViewId)\n        .render()\n        .$el.appendTo(ReactDOM.findDOMNode(this.refs.FolderTreeHolder))\n        .find(':tabbable:first')\n        .focus()\n    }, 0)\n  }\n\n  componentWillUnmount() {\n    BBTreeBrowserView.remove(this.treeBrowserViewId)\n  }\n\n  render() {\n    return (\n      <aside role=\"region\" aria-label={I18n.t('folder_browsing_tree', 'Folder Browsing Tree')}>\n        <div ref=\"FolderTreeHolder\" />\n      </aside>\n    )\n  }\n}\n\nexport default BBTreeBrowser\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport MoveDialog from 'compiled/react_files/components/MoveDialog'\nimport Modal from '../shared/modal'\nimport ModalContent from '../shared/modal-content'\nimport ModalButtons from '../shared/modal-buttons'\nimport BBTreeBrowser from './BBTreeBrowser'\nimport classnames from 'classnames'\n\nMoveDialog.renderMoveButton = function() {\n  const buttonClassNames = classnames({\n    disabled: !this.state.destinationFolder,\n    btn: true,\n    'btn-primary': true\n  })\n  if (this.state.isCopyingFile) {\n    return (\n      <button\n        type=\"submit\"\n        aria-disabled={!this.state.destinationFolder}\n        className={buttonClassNames}\n        data-text-while-loading={I18n.t('Copying...')}\n      >\n        {I18n.t('Copy to Folder')}\n      </button>\n    )\n  } else {\n    return (\n      <button\n        type=\"submit\"\n        aria-disabled={!this.state.destinationFolder}\n        className={buttonClassNames}\n        data-text-while-loading={I18n.t('Moving...')}\n      >\n        {I18n.t('Move')}\n      </button>\n    )\n  }\n}\n\nMoveDialog.render = function() {\n  return (\n    <Modal\n      className=\"ReactModal__Content--canvas ReactModal__Content--mini-modal\"\n      overlayClassName=\"ReactModal__Overlay--canvas\"\n      ref=\"canvasModal\"\n      isOpen={this.state.isOpen}\n      title={this.getTitle()}\n      onRequestClose={this.closeDialog}\n      onSubmit={this.submit}\n    >\n      <ModalContent>\n        <BBTreeBrowser\n          rootFoldersToShow={this.props.rootFoldersToShow}\n          onSelectFolder={this.onSelectFolder}\n        />\n      </ModalContent>\n      <ModalButtons>\n        <button type=\"button\" className=\"btn\" onClick={this.closeDialog}>\n          {I18n.t('Cancel')}\n        </button>\n        {this.renderMoveButton()}\n      </ModalButtons>\n    </Modal>\n  )\n}\n\nexport default createReactClass(MoveDialog)\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport MoveDialog from '../MoveDialog'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport $ from 'jquery'\n\nfunction openMoveDialog(\n  thingsToMove,\n  {contextType, contextId, returnFocusTo, clearSelectedItems, onMove}\n) {\n  const rootFolderToShow = _.find(filesEnv.rootFolders, folder => {\n    return (\n      `${folder.get('context_type').toLowerCase()}s` === contextType &&\n      String(folder.get('context_id')) === String(contextId)\n    )\n  })\n\n  const $moveDialog = $('<div>').appendTo(document.body)\n\n  const handleClose = () => {\n    ReactDOM.unmountComponentAtNode($moveDialog[0])\n    $moveDialog.remove()\n    $(returnFocusTo).focus()\n  }\n\n  const handleMove = models => {\n    onMove(models) && clearSelectedItems()\n  }\n\n  ReactDOM.render(\n    <MoveDialog\n      thingsToMove={thingsToMove}\n      rootFoldersToShow={filesEnv.showingAllContexts ? filesEnv.rootFolders : [rootFolderToShow]}\n      onClose={handleClose}\n      onMove={handleMove}\n    />,\n    $moveDialog[0]\n  )\n}\n\nexport default openMoveDialog\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport $ from 'jquery'\n\nexport default function deleteStuff(filesAndFolders, args) {\n  const isDeletingAnUnemptyFolder = filesAndFolders.some(\n    item => item.get('folders_count') || item.get('files_count')\n  )\n  const message = isDeletingAnUnemptyFolder\n    ? I18n.t(\n        'confirm_delete_with_contents',\n        {\n          one:\n            'Are you sure you want to delete %{name}? It is not empty, anything inside it will be deleted too.',\n          other: 'Are you sure you want to delete these %{count} items and everything inside them?'\n        },\n        {\n          count: filesAndFolders.length,\n          name: filesAndFolders[0] && filesAndFolders[0].displayName()\n        }\n      )\n    : I18n.t(\n        {\n          one: 'Are you sure you want to delete %{name}?',\n          other: 'Are you sure you want to delete these %{count} items?'\n        },\n        {\n          count: filesAndFolders.length,\n          name: filesAndFolders[0] && filesAndFolders[0].displayName()\n        }\n      )\n  if (!confirm(message)) return\n\n  const promises = filesAndFolders.map(item =>\n    item.destroy({\n      emulateHTTP: true,\n      emulateJSON: true,\n      data: {\n        force: 'true'\n      },\n      wait: true,\n      error(model, response, options) {\n        const reason = (() => {\n          try {\n            const json = $.parseJSON(response.responseText)\n            return json && json.message\n          } catch (error) {}\n        })()\n\n        return $.flashError(\n          I18n.t('Error deleting %{name}: %{reason}', {\n            name: item.displayName(),\n            reason\n          })\n        )\n      }\n    })\n  )\n\n  return $.when(...Array.from(promises || [])).then(() => {\n    $.flashMessage(\n      I18n.t(\n        {\n          one: '%{name} deleted successfully.',\n          other: '%{count} items deleted successfully.'\n        },\n        {\n          count: filesAndFolders.length,\n          name: filesAndFolders[0] && filesAndFolders[0].displayName()\n        }\n      )\n    )\n    if (args && args.returnFocusTo) {\n      $(args.returnFocusTo).focus()\n    }\n  })\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"cy\\\":{\\\"upload_8b403d05\\\":\\\"Llwytho i fyny\\\"},\\\"da\\\":{\\\"upload_8b403d05\\\":\\\"Upload\\\"},\\\"da-x-k12\\\":{\\\"upload_8b403d05\\\":\\\"Upload\\\"},\\\"de\\\":{\\\"upload_8b403d05\\\":\\\"Hochladen\\\"},\\\"el\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"en-AU\\\":{\\\"upload_8b403d05\\\":\\\"Upload\\\"},\\\"en-CA\\\":{\\\"upload_8b403d05\\\":\\\"Upload\\\"},\\\"en-GB\\\":{\\\"upload_8b403d05\\\":\\\"Upload\\\"},\\\"es\\\":{\\\"upload_8b403d05\\\":\\\"Cargar\\\"},\\\"fa\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"fi\\\":{\\\"upload_8b403d05\\\":\\\"Lataa\\\"},\\\"fr\\\":{\\\"upload_8b403d05\\\":\\\"Tlcharger\\\"},\\\"fr-CA\\\":{\\\"upload_8b403d05\\\":\\\"Tlversement\\\"},\\\"he\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"ht\\\":{\\\"upload_8b403d05\\\":\\\"Chajman\\\"},\\\"hu\\\":{\\\"upload_8b403d05\\\":\\\"Feltlts\\\"},\\\"hy\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"is\\\":{\\\"upload_8b403d05\\\":\\\"Hlaa upp\\\"},\\\"it\\\":{\\\"upload_8b403d05\\\":\\\"Carica\\\"},\\\"ja\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"ko\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"mi\\\":{\\\"upload_8b403d05\\\":\\\"Tukuake\\\"},\\\"nb\\\":{\\\"upload_8b403d05\\\":\\\"Last opp\\\"},\\\"nb-x-k12\\\":{\\\"upload_8b403d05\\\":\\\"Last opp\\\"},\\\"nl\\\":{\\\"upload_8b403d05\\\":\\\"Uploaden\\\"},\\\"nn\\\":{\\\"upload_8b403d05\\\":\\\"Last opp\\\"},\\\"pl\\\":{\\\"upload_8b403d05\\\":\\\"Przelij\\\"},\\\"pt\\\":{\\\"upload_8b403d05\\\":\\\"Carregar\\\"},\\\"pt-BR\\\":{\\\"upload_8b403d05\\\":\\\"Carregar\\\"},\\\"ru\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"sl\\\":{\\\"upload_8b403d05\\\":\\\"Naloi\\\"},\\\"sv\\\":{\\\"upload_8b403d05\\\":\\\"Ladda upp\\\"},\\\"sv-x-k12\\\":{\\\"upload_8b403d05\\\":\\\"Ladda upp\\\"},\\\"tr\\\":{\\\"upload_8b403d05\\\":\\\"Ykle\\\"},\\\"uk\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"zh-Hans\\\":{\\\"upload_8b403d05\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"upload_8b403d05\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/upload_button';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('upload_button');\n  ","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"\\\",\\\"message\\\":\\\"    \\\\\\\"%{fileName}\\\\\\\"       zip  \\\",\\\"upload\\\":\\\"\\\",\\\"zip_options\\\":\\\"  Zip\\\"}},\\\"cy\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Ehangu\\\",\\\"message\\\":\\\"Ydych chi am ehangu cynnwys \\\\\\\"%{fileName}\\\\\\\" ir ffolder bresennol, neu lwythor ffeil zip i fyny ar ei ffurf bresennol?\\\",\\\"upload\\\":\\\"Llwytho i fyny\\\",\\\"zip_options\\\":\\\"Opsiynau ffeil zip\\\"}},\\\"da\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Udvid den\\\",\\\"message\\\":\\\"Kunne du tnke dig at udvide indholdet af \\\\\\\"%{fileName}\\\\\\\" i den aktuelle mappe eller uploade zip-filen, som den er?\\\",\\\"upload\\\":\\\"Upload den\\\",\\\"zip_options\\\":\\\"Indstillinger til zip-fil\\\"}},\\\"da-x-k12\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Udvid den\\\",\\\"message\\\":\\\"Kunne du tnke dig at udvide indholdet af \\\\\\\"%{fileName}\\\\\\\" i den aktuelle mappe eller uploade zip-filen, som den er?\\\",\\\"upload\\\":\\\"Upload den\\\",\\\"zip_options\\\":\\\"Indstillinger til zip-fil\\\"}},\\\"de\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Erweitern\\\",\\\"message\\\":\\\"Mchten Sie die Inhalte von %{fileName} in den aktuellen Ordner entpacken oder die ZIP-Datei nur hochladen?\\\",\\\"upload\\\":\\\"Hochladen\\\",\\\"zip_options\\\":\\\"ZIP-Dateioptionen\\\"}},\\\"el\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\" \\\",\\\"message\\\":\\\"       %{fileName}          zip  ;\\\",\\\"upload\\\":\\\" \\\",\\\"zip_options\\\":\\\"   Zip\\\"}},\\\"en-AU\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expand It\\\",\\\"message\\\":\\\"Would you like to expand the contents of \\\\\\\"%{fileName}\\\\\\\" into the current folder, or upload the zip file as is?\\\",\\\"upload\\\":\\\"Upload It\\\",\\\"zip_options\\\":\\\"Zip file options\\\"}},\\\"en-CA\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expand It\\\",\\\"message\\\":\\\"Would you like to expand the contents of \\\\\\\"%{fileName}\\\\\\\" into the current folder, or upload the zip file as is?\\\",\\\"upload\\\":\\\"Upload It\\\",\\\"zip_options\\\":\\\"Zip file options\\\"}},\\\"en-GB\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expand it\\\",\\\"message\\\":\\\"Would you like to expand the contents of \\\\\\\"%{fileName}\\\\\\\" into the current folder, or upload the zip file as is?\\\",\\\"upload\\\":\\\"Upload it\\\",\\\"zip_options\\\":\\\"Zip file options\\\"}},\\\"es\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expandirlo\\\",\\\"message\\\":\\\"Desea expandir el contenido de \\\\\\\"%{fileName}\\\\\\\" en la carpeta actual o cargar el archivo zip como est?\\\",\\\"upload\\\":\\\"Cargarlo\\\",\\\"zip_options\\\":\\\"Opciones de archivo zip\\\"}},\\\"fa\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"  \\\",\\\"message\\\":\\\"    \\\\\\\"%{fileName}\\\\\\\"         zip       \\\",\\\"upload\\\":\\\" \\\",\\\"zip_options\\\":\\\"   Zip\\\"}},\\\"fi\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Laajenna sit\\\",\\\"message\\\":\\\"Haluaisitko laajentaa \\\\\\\"%{fileName}\\\\\\\" sislt nykyiseen kansioon tai ladata zip-tiedoston sellaisenaan?\\\",\\\"upload\\\":\\\"Lataa se\\\",\\\"zip_options\\\":\\\"Zip-tiedoston asetukset\\\"}},\\\"fr\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Dvelopper\\\",\\\"message\\\":\\\"Voulez-vous dvelopper le contenu de %{fileName} dans le dossier actuel ou mettre en ligne le fichier Zip tel quel ?\\\",\\\"upload\\\":\\\"Mettre en ligne\\\",\\\"zip_options\\\":\\\"Options du fichier Zip\\\"}},\\\"fr-CA\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Dvelopper\\\",\\\"message\\\":\\\"Voulez-vous dvelopper le contenu de %{fileName} dans le dossier actuel ou mettre en ligne le fichier Zip tel quel?\\\",\\\"upload\\\":\\\"Mettre en ligne\\\",\\\"zip_options\\\":\\\"Options du fichier Zip\\\"}},\\\"he\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"/ \\\",\\\"message\\\":\\\"       \\\\\\\"%{fileName}\\\\\\\"   ,       ?\\\",\\\"upload\\\":\\\"/ \\\",\\\"zip_options\\\":\\\"  \\\"}},\\\"ht\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Elaji Li\\\",\\\"message\\\":\\\"ske w ta renmen elaji the kontni \\\\\\\"%{fileName}\\\\\\\" an dosye reyl, oswa transfere fichye zip la jan li ye a?\\\",\\\"upload\\\":\\\"Transfere Li\\\",\\\"zip_options\\\":\\\"Opsyon fichye zip\\\"}},\\\"hu\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Kicsomagols\\\",\\\"message\\\":\\\"Ki szeretn csomagolni a \\\\\\\"%{fileName}\\\\\\\" tartalmt a jelenlegi mappba, vagy tltsk fel a zip fjlt, ahogy van?\\\",\\\"upload\\\":\\\"Feltlts\\\",\\\"zip_options\\\":\\\"Zip fjl belltsok\\\"}},\\\"hy\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\" \\\",\\\"message\\\":\\\" \\\\\\\"%{fileName}\\\\\\\" -       zip    :\\\",\\\"upload\\\":\\\"\\\",\\\"zip_options\\\":\\\"Zip  \\\"}},\\\"is\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Vkka\\\",\\\"message\\\":\\\"Viltu fra efni \\\\\\\"%{fileName}\\\\\\\"  nverandi mppu ea hlaa upp zip-skrnni eins og  hn er?\\\",\\\"upload\\\":\\\"Hlaa upp\\\",\\\"zip_options\\\":\\\"Valkostir zip-skrr\\\"}},\\\"it\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Espandilo\\\",\\\"message\\\":\\\"Desideri espandere i contenuti di \\\\\\\"%{fileName}\\\\\\\" nella cartella corrente o caricare il file zip cos com'?\\\",\\\"upload\\\":\\\"Caricalo\\\",\\\"zip_options\\\":\\\"Opzioni file zip\\\"}},\\\"ja\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"\\\",\\\"message\\\":\\\"\\\\\\\"%{fileName}\\\\\\\" ?  ZIP ?\\\",\\\"upload\\\":\\\"\\\",\\\"zip_options\\\":\\\"ZIP \\\"}},\\\"mi\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Whakawhnuitia\\\",\\\"message\\\":\\\"E hiahia ana koe ki te whakawhnui i te tirotiro o \\\\\\\"%{fileName}\\\\\\\" ki te kpaki o nianei, tukuake te knae ktui i te mea he rnei?\\\",\\\"upload\\\":\\\"Tonohia\\\",\\\"zip_options\\\":\\\"Huarahi knae ktui\\\"}},\\\"nb\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Utvid Den\\\",\\\"message\\\":\\\"Har du lyst til  utvide innholdet av \\\\\\\"%{fileName}\\\\\\\" inn i den aktuelle mappen, eller laste ned zip filen som den er?\\\",\\\"upload\\\":\\\"Last den opp\\\",\\\"zip_options\\\":\\\"Zip fil alternativer\\\"}},\\\"nb-x-k12\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Utvid Den\\\",\\\"message\\\":\\\"Har du lyst til  utvide innholdet av \\\\\\\"%{fileName}\\\\\\\" inn i den aktuelle mappen, eller laste ned zip filen som den er?\\\",\\\"upload\\\":\\\"Last den opp\\\",\\\"zip_options\\\":\\\"Zip fil alternativer\\\"}},\\\"nl\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Het uitvouwen\\\",\\\"message\\\":\\\"Wil je de inhoud van \\\\\\\"%{fileName}\\\\\\\" in de huidige map uitvouwen, of wil je het zip-bestand uploaden zoals het is?\\\",\\\"upload\\\":\\\"Uploaden\\\",\\\"zip_options\\\":\\\"Zip-bestand opties\\\"}},\\\"nn\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Utvid\\\",\\\"message\\\":\\\"Vil du utvide innhaldet i \\\\\\\"%{fileName}\\\\\\\" til gjeldande mappe eller laste opp ZIP-fila som ho er?\\\",\\\"upload\\\":\\\"Last ho opp\\\",\\\"zip_options\\\":\\\"Alternativ for ZIP-fil\\\"}},\\\"pl\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Rozwi to\\\",\\\"message\\\":\\\"Czy chcesz rozwin zawarto \\\\\\\"%{fileName}\\\\\\\" do obecnego folderu, czy przekaza plik zip w biecej formie?\\\",\\\"upload\\\":\\\"Przeka go\\\",\\\"zip_options\\\":\\\"Opcje dotyczce pliku w formacie zip\\\"}},\\\"pt\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expandir\\\",\\\"message\\\":\\\"Deseja expandir os contedos de \\\\\\\"%{fileName}\\\\\\\" para a pasta atual ou pretende carregar o ficheiro zip como est?\\\",\\\"upload\\\":\\\"Carregar\\\",\\\"zip_options\\\":\\\"Opes de ficheiro zip\\\"}},\\\"pt-BR\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Expandir\\\",\\\"message\\\":\\\"Deseja expandir o contedo de \\\\\\\"%{fileName}\\\\\\\" na pasta atual, ou fazer upload do arquivo zip como est?\\\",\\\"upload\\\":\\\"Fazer upload\\\",\\\"zip_options\\\":\\\"Opes do arquivo zip\\\"}},\\\"ru\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\" \\\",\\\"message\\\":\\\"    \\\\\\\"%{fileName}\\\\\\\"      zip-  ?\\\",\\\"upload\\\":\\\" \\\",\\\"zip_options\\\":\\\" zip-\\\"}},\\\"sl\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Raziri jo\\\",\\\"message\\\":\\\"Ali bi eleli raziriti vsebino datoteke %{fileName} v trenutno mapo ali naloiti datoteko .zip v obliki, v kakrni je?\\\",\\\"upload\\\":\\\"Naloi jo\\\",\\\"zip_options\\\":\\\"Monosti datoteke .zip\\\"}},\\\"sv\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Packa upp\\\",\\\"message\\\":\\\"Vill du packa upp innehllet i \\\\\\\"%{fileName}\\\\\\\" till nuvarande mapp, eller ladda upp zip-filen som den r?\\\",\\\"upload\\\":\\\"Ladda upp\\\",\\\"zip_options\\\":\\\"Zipfil-alternativ\\\"}},\\\"sv-x-k12\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Packa upp\\\",\\\"message\\\":\\\"Vill du packa upp innehllet i \\\\\\\"%{fileName}\\\\\\\" till nuvarande mapp, eller ladda upp zip-filen som den r?\\\",\\\"upload\\\":\\\"Ladda upp\\\",\\\"zip_options\\\":\\\"Zipfil-alternativ\\\"}},\\\"tr\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"Bunu Genilet\\\",\\\"message\\\":\\\"\\\\\\\"%{fileName}\\\\\\\" nn ieriini mevcut klasrde amak m istersiniz yoksa zip li dosyay olduu gibi yklemek mi?\\\",\\\"upload\\\":\\\"Bunu Ykle\\\",\\\"zip_options\\\":\\\"Zip dosyas ayarlar\\\"}},\\\"uk\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\" \\\",\\\"message\\\":\\\"    \\\\\\\"%{fileName}\\\\\\\"   ,    zip  ?\\\",\\\"upload\\\":\\\" \\\",\\\"zip_options\\\":\\\" Zip-\\\"}},\\\"zh-Hans\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"\\\",\\\"message\\\":\\\" \\\\\\\"%{fileName}\\\\\\\"  zip \\\",\\\"upload\\\":\\\"\\\",\\\"zip_options\\\":\\\"Zip \\\"}},\\\"zh-Hant\\\":{\\\"zip_file_options_form\\\":{\\\"expand\\\":\\\"\\\",\\\"message\\\":\\\"%{fileName}\\\",\\\"upload\\\":\\\"\\\",\\\"zip_options\\\":\\\"\\\"}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/zip_file_options_form';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('zip_file_options_form');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!zip_file_options_form'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Modal from '../shared/modal'\nimport ModalContent from '../shared/modal-content'\nimport ModalButtons from '../shared/modal-buttons'\n\nclass ZipFileOptionsForm extends React.Component {\n  static displayName = 'ZipFileOptionsForm'\n\n  static propTypes = {\n    onZipOptionsResolved: PropTypes.func.isRequired\n  }\n\n  handleExpandClick = () => {\n    this.props.onZipOptionsResolved({file: this.props.fileOptions.file, expandZip: true})\n  }\n\n  handleUploadClick = () => {\n    this.props.onZipOptionsResolved({file: this.props.fileOptions.file, expandZip: false})\n  }\n\n  buildMessage = fileOptions => {\n    let message\n    if (this.props.fileOptions) {\n      const name = this.props.fileOptions.file.name\n      message = I18n.t(\n        'message',\n        'Would you like to expand the contents of \"%{fileName}\" into the current folder, or upload the zip file as is?',\n        {fileName: name}\n      )\n    }\n    return message\n  }\n\n  render() {\n    return (\n      <Modal\n        className=\"ReactModal__Content--canvas ReactModal__Content--mini-modal\"\n        isOpen={!!this.props.fileOptions}\n        ref=\"canvasModal\"\n        title={I18n.t('zip_options', 'Zip file options')}\n        onRequestClose={this.props.onClose}\n      >\n        <ModalContent>\n          <p className=\"modalMessage\">{this.buildMessage()}</p>\n        </ModalContent>\n        <ModalButtons>\n          <button className=\"btn\" onClick={this.handleExpandClick}>\n            {I18n.t('expand', 'Expand It')}\n          </button>\n          <button className=\"btn btn-primary\" onClick={this.handleUploadClick}>\n            {I18n.t('upload', 'Upload It')}\n          </button>\n        </ModalButtons>\n      </Modal>\n    )\n  }\n}\n\nexport default ZipFileOptionsForm\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Base uploader with common api between File and Zip uploads\n// (where zip is expanded)\nimport $ from 'jquery'\nimport {completeUpload} from 'jsx/shared/upload_file'\nimport 'jquery.ajaxJSON'\n\nexport default class BaseUploader {\n  constructor(fileOptions, folder) {\n    this.file = fileOptions.file\n    this.options = fileOptions\n    this.folder = folder\n    this.progress = 0\n  }\n\n  onProgress(percentComplete, file) {}\n  // noop will be set up a level\n\n  createPreFlightParams() {\n    let params\n    return (params = {\n      name: this.options.name || this.file.name,\n      size: this.file.size,\n      content_type: this.file.type,\n      on_duplicate: this.options.dup || 'rename',\n      parent_folder_id: this.folder.id,\n      no_redirect: true\n    })\n  }\n\n  getPreflightUrl() {\n    return `/api/v1/folders/${this.folder.id}/files`\n  }\n\n  onPreflightComplete = data => {\n    this.uploadData = data\n    return this._actualUpload()\n  }\n\n  // kickoff / preflight upload process\n  upload() {\n    this.deferred = $.Deferred()\n    this.deferred.fail(failReason => {\n      this.error = failReason\n      if (this.error && this.error.message) $.screenReaderFlashError(this.error.message)\n    })\n\n    $.ajaxJSON(\n      this.getPreflightUrl(),\n      'POST',\n      this.createPreFlightParams(),\n      this.onPreflightComplete,\n      this.deferred.reject\n    )\n    return this.deferred.promise()\n  }\n\n  // actual upload based on kickoff / preflight\n  _actualUpload() {\n    return completeUpload(this.uploadData, this.file, {onProgress: this.trackProgress})\n      .then(this.onUploadPosted)\n      .catch(this.deferred.reject)\n  }\n\n  onUploadPosted = event => {}\n\n  // should be implemented in extensions\n\n  trackProgress = e => {\n    this.progress = e.loaded / e.total\n    return this.onProgress(this.progress, this.file)\n  }\n\n  getProgress() {\n    return this.progress\n  }\n\n  roundProgress() {\n    const value = this.getProgress() || 0\n    return Math.min(Math.round(value * 100), 100)\n  }\n\n  getFileName() {\n    return this.options.name || this.file.name\n  }\n\n  abort() {\n    this._xhr.abort()\n    return this.deferred.reject('user_aborted_upload')\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BBFile from '../../models/File'\nimport BaseUploader from './BaseUploader'\nimport 'jquery.ajaxJSON'\n\nexport default class FileUploader extends BaseUploader {\n  onUploadPosted = fileJson => {\n    const file = this.addFileToCollection(fileJson)\n    return this.deferred.resolve(file)\n  }\n\n  addFileToCollection = attrs => {\n    const uploadedFile = new BBFile(attrs, 'no/url/needed/') // we've already done the upload, no preflight needed\n\n    this.folder.files.add(uploadedFile)\n    // remove old version if it was just overwritten\n    if (this.options.dup === 'overwrite') {\n      const name = this.options.name || this.file.name\n      const previous = this.folder.files.findWhere({display_name: name})\n      if (previous) {\n        this.folder.files.remove(previous)\n      }\n    }\n    return uploadedFile\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Zips that are to be expanded take a different upload workflow\nimport $ from 'jquery'\nimport BaseUploader from './BaseUploader'\n\nexport default class ZipUploader extends BaseUploader {\n  constructor(fileOptions, folder, contextId, contextType) {\n    super(fileOptions, folder)\n\n    this.contextId = contextId\n    this.contextType = contextType\n    this.migrationProgress = 0\n  }\n\n  createPreFlightParams() {\n    let params\n    return (params = {\n      migration_type: 'zip_file_importer',\n      settings: {\n        folder_id: this.folder.id\n      },\n      pre_attachment: {\n        name: this.options.name || this.file.name,\n        size: this.file.size,\n        content_type: this.file.type,\n        on_duplicate: this.options.dup || 'rename',\n        no_redirect: true\n      }\n    })\n  }\n\n  getPreflightUrl() {\n    return `/api/v1/${this.contextType}/${this.contextId}/content_migrations`\n  }\n\n  onPreflightComplete = data => {\n    this.uploadData = data.pre_attachment\n    this.contentMigrationId = data.id\n    return this._actualUpload()\n  }\n\n  onUploadPosted = () => {\n    return this.getContentMigration()\n  }\n\n  // get the content migration when ready and use progress api to pull migration progress\n  getContentMigration = () => {\n    return $.getJSON(\n      `/api/v1/${this.contextType}/${this.contextId}/content_migrations/${this.contentMigrationId}`\n    ).then(results => {\n      if (!results.progress_url) {\n        return setTimeout(() => this.getContentMigration(), 500)\n      } else {\n        return this.pullMigrationProgress(results.progress_url)\n      }\n    })\n  }\n\n  pullMigrationProgress = url => {\n    return $.getJSON(url).then(results => {\n      this.trackMigrationProgress(results.completion || 0)\n      if (results.workflow_state === 'failed') {\n        return this.deferred.reject()\n      } else if (results.completion < 100) {\n        // The progress bar defaults to 50% complete to account for the actual\n        // file upload. When we start polling the progress and the job hasn't\n        // been worked, the completion is 0. So without this check, the progress\n        // bar would start at 50%, then render to 0%, then render to 50% once\n        // the job starts getting worked.\n        if (results.completion > 0) {\n          const progress = {\n            loaded: results.completion,\n            total: 100\n          }\n          this.trackProgress(progress)\n        }\n        setTimeout(() => {\n          this.pullMigrationProgress(url)\n        }, 1000)\n      } else {\n        return this.onMigrationComplete()\n      }\n    })\n  }\n\n  onMigrationComplete() {\n    // reload to get new files to appear\n    return this.folder.folders\n      .fetch({reset: true})\n      .then(() => this.folder.files.fetch({reset: true}).then(() => this.deferred.resolve()))\n  }\n\n  trackProgress = e => {\n    this.progress = e.loaded / e.total\n    return this.onProgress(this.progress, this.file)\n  }\n\n  // migration progress is [0..100]\n  trackMigrationProgress(value) {\n    return (this.migrationProgress = value / 100)\n  }\n\n  // progress counts for halp, migragtion for the other\n  getProgress() {\n    return (this.progress + this.migrationProgress) / 2\n  }\n\n  roundProgress() {\n    const value = this.getProgress() || 0\n    return Math.min(Math.round(value * 100), 100)\n  }\n\n  getFileName() {\n    return this.options.name || this.file.name\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport FileUploader from './FileUploader'\nimport ZipUploader from './ZipUploader'\n\nclass UploadQueue {\n  length() {\n    return this._queue.length\n  }\n\n  flush() {\n    return (this._queue = [])\n  }\n\n  getAllUploaders() {\n    let all = this._queue.slice()\n    if (this.currentUploader) {\n      all = all.concat(this.currentUploader)\n    }\n    return all.reverse()\n  }\n\n  getCurrentUploader() {\n    return this.currentUploader\n  }\n\n  onChange() {}\n  // noop, set by components who care about it\n\n  createUploader(fileOptions, folder, contextId, contextType) {\n    const uploader = fileOptions.expandZip\n      ? new ZipUploader(fileOptions, folder, contextId, contextType)\n      : new FileUploader(fileOptions, folder)\n    uploader.onProgress = () => {\n      this.onChange()\n    }\n    uploader.cancel = () => {\n      if (uploader._xhr != null) {\n        uploader._xhr.abort()\n      }\n      this._queue = _.without(this._queue, uploader)\n      if (this.currentUploader === uploader) this.currentUploader = null\n      return this.onChange()\n    }\n\n    return uploader\n  }\n\n  enqueue(fileOptions, folder, contextId, contextType) {\n    const uploader = this.createUploader(fileOptions, folder, contextId, contextType)\n    this._queue.push(uploader)\n    return this.attemptNextUpload()\n  }\n\n  dequeue() {\n    const firstNonErroredUpload = _.find(this._queue, upload => !upload.error)\n    this._queue = _.without(this._queue, firstNonErroredUpload)\n    return firstNonErroredUpload\n  }\n\n  pageChangeWarning() {\n    return 'You currently have uploads in progress. If you leave this page, the uploads will stop.'\n  }\n\n  attemptNextUpload() {\n    let uploader\n    this.onChange()\n    if (this._uploading || this._queue.length === 0) return\n    this.currentUploader = uploader = this.dequeue()\n    if (uploader) {\n      this.onChange()\n      this._uploading = true\n      $(window).on('beforeunload', this.pageChangeWarning)\n\n      const promise = uploader.upload()\n      promise.fail(failReason => {\n        // put it back in the queue unless the user aborted it\n        if (failReason !== 'user_aborted_upload') {\n          return this._queue.unshift(uploader)\n        }\n      })\n\n      return promise.always(() => {\n        this._uploading = false\n        this.currentUploader = null\n        $(window).off('beforeunload', this.pageChangeWarning)\n        this.onChange()\n        return this.attemptNextUpload()\n      })\n    }\n  }\n}\nUploadQueue.prototype._uploading = false\nUploadQueue.prototype._queue = []\n\nexport default new UploadQueue()\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport UploadQueue from './UploadQueue'\nimport ReactDOM from 'react-dom'\n\n/*\nManages buckets of FileOptions (resolved, nameCollisions, zipOptions)\n\nFileOption:\n  file: <File>\n  dup: how to handle duplicate names rename || overwrite (used in api call)\n  name: name by which to upload the file\n  expandZip: (bool) upload the zip or expand it to current directory\n*/\nclass FileOptionsCollection {\n  constructor() {\n    this.state = this.buildDefaultState()\n  }\n\n  buildDefaultState() {\n    return {\n      resolvedNames: [],\n      nameCollisions: [],\n      zipOptions: [],\n      newOptions: false\n    }\n  }\n\n  queueUploads(contextId, contextType) {\n    this.state.resolvedNames.forEach(f => {\n      UploadQueue.enqueue(f, this.folder, contextId, contextType)\n    })\n    this.setState({newOptions: false})\n  }\n\n  toFilesOptionArray(fList) {\n    return [].slice.call(fList, 0).map(file => ({file}))\n  }\n\n  findMatchingFile(name) {\n    return _.find(this.folder.files.models, f => f.get('display_name') === name)\n  }\n\n  isZipFile(file) {\n    return !!(file.type != null ? file.type.match(/zip/) : undefined)\n  }\n\n  // divide into existing naming collisions and resolved ones\n  segregateOptionBuckets(selectedFiles) {\n    const [collisions, resolved, zips] = [[], [], []]\n    selectedFiles.forEach(file => {\n      if (this.isZipFile(file.file) && typeof file.expandZip === 'undefined') {\n        zips.push(file)\n        // only mark as collision if it is a collision that hasn't been resolved, or is is a zip that will be expanded\n      } else {\n        const nameToTest = file.name || file.file.name\n        const matchingFile = this.findMatchingFile(nameToTest)\n        if (\n          matchingFile &&\n          (file.dup !== 'overwrite' && (file.expandZip == null || file.expandZip === false))\n        ) {\n          if (matchingFile.get('restricted_by_master_course')) {\n            file.cannotOverwrite = true\n          }\n          collisions.push(file)\n        } else {\n          resolved.push(file)\n        }\n      }\n    })\n\n    return {collisions, resolved, zips}\n  }\n\n  handleAddFilesClick() {\n    return ReactDOM.findDOMNode(this.refs.addFileInput).click()\n  }\n\n  handleFilesInputChange(e) {\n    const selectedFiles = this.toFilesOptionArray(\n      ReactDOM.findDOMNode(this.refs.addFileInput).files\n    )\n    const {resolved, collisions, zips} = this.segregateOptionBuckets(selectedFiles)\n    this.setState({nameCollisions: collisions, resolvedNames: resolved, zipOptions: zips})\n  }\n\n  onNameConflictResolved(fileNameOptions) {\n    let collisions, resolved\n    const {nameCollisions} = this.state\n    const {resolvedNames} = this.state\n    let zips = this.state.zipOptions\n\n    resolvedNames.push(fileNameOptions)\n    // TODO: only difference is that we remove the first nameCollision here\n    nameCollisions.shift()\n\n    // redo conflict resolution, new name from user could still conflict\n    const allOptions = resolvedNames.concat(nameCollisions).concat(zips)\n    ;({resolved, collisions, zips} = this.segregateOptionBuckets(allOptions))\n    this.setState({nameCollisions: collisions, resolvedNames: resolved, zipOptions: zips})\n  }\n\n  onZipOptionsResolved(fileNameOptions) {\n    let collisions, resolved\n    const {nameCollisions} = this.state\n    const {resolvedNames} = this.state\n    let zips = this.state.zipOptions\n\n    resolvedNames.push(fileNameOptions)\n    // TODO: only difference is that we remove the first zip here\n    zips.shift()\n\n    // redo conflict resolution, new name from user could still conflict\n    const allOptions = resolvedNames.concat(nameCollisions).concat(zips)\n    ;({resolved, collisions, zips} = this.segregateOptionBuckets(allOptions))\n    this.setState({nameCollisions: collisions, resolvedNames: resolved, zipOptions: zips})\n  }\n\n  setOptionsFromFiles(files, notifyChange) {\n    const allOptions = this.toFilesOptionArray(files)\n    const {resolved, collisions, zips} = this.segregateOptionBuckets(allOptions)\n    this.setState({\n      nameCollisions: collisions,\n      resolvedNames: resolved,\n      zipOptions: zips,\n      newOptions: true\n    })\n    if (notifyChange && this.onChange) {\n      return this.onChange()\n    }\n  }\n\n  hasNewOptions() {\n    return this.state.newOptions\n  }\n\n  setFolder(folder) {\n    return (this.folder = folder)\n  }\n\n  getFolder() {\n    return this.folder\n  }\n\n  setState(options) {\n    return (this.state = _.defaults(options, this.state))\n  }\n\n  getState() {\n    return this.state\n  }\n\n  resetState() {\n    return (this.state = this.buildDefaultState())\n  }\n\n  // noop\n  onChange() {}\n}\n\nexport default new FileOptionsCollection()\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport customPropTypes from '../modules/customPropTypes'\nimport FileOptionsCollection from '../modules/FileOptionsCollection'\n\nlet resolvedUserAction = false\n\nexport default {\n  displayName: 'UploadButton',\n\n  propTypes: {\n    currentFolder: customPropTypes.folder, // not required as we don't have it on the first render\n    contextId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    contextType: PropTypes.string\n  },\n\n  getInitialState() {\n    return FileOptionsCollection.getState()\n  },\n\n  queueUploads() {\n    ReactDOM.findDOMNode(this.refs.form).reset()\n    return FileOptionsCollection.queueUploads(this.props.contextId, this.props.contextType)\n  },\n\n  handleAddFilesClick() {\n    return ReactDOM.findDOMNode(this.refs.addFileInput).click()\n  },\n\n  handleFilesInputChange(e) {\n    resolvedUserAction = false\n    const {files} = ReactDOM.findDOMNode(this.refs.addFileInput)\n    FileOptionsCollection.setFolder(this.props.currentFolder)\n    FileOptionsCollection.setOptionsFromFiles(files)\n    this.setState(FileOptionsCollection.getState())\n  },\n\n  onNameConflictResolved(fileNameOptions) {\n    FileOptionsCollection.onNameConflictResolved(fileNameOptions)\n    resolvedUserAction = true\n    this.setState(FileOptionsCollection.getState())\n  },\n\n  onZipOptionsResolved(fileNameOptions) {\n    FileOptionsCollection.onZipOptionsResolved(fileNameOptions)\n    resolvedUserAction = true\n    this.setState(FileOptionsCollection.getState())\n  },\n\n  onClose() {\n    ReactDOM.findDOMNode(this.refs.form).reset()\n    if (!resolvedUserAction) {\n      // user dismissed zip or name conflict modal without resolving things\n      // reset state to dump previously selected files\n      FileOptionsCollection.resetState()\n      this.setState(FileOptionsCollection.getState())\n    }\n    resolvedUserAction = false\n  },\n\n  componentDidUpdate(prevState) {\n    if (\n      this.state.zipOptions.length === 0 &&\n      this.state.nameCollisions.length === 0 &&\n      this.state.resolvedNames.length > 0 &&\n      FileOptionsCollection.hasNewOptions()\n    ) {\n      this.queueUploads()\n    } else {\n      resolvedUserAction = false\n    }\n  },\n\n  componentWillMount() {\n    FileOptionsCollection.onChange = this.setStateFromOptions\n  },\n\n  componentWillUnMount() {\n    FileOptionsCollection.onChange = null\n  },\n\n  setStateFromOptions() {\n    this.setState(FileOptionsCollection.getState())\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!upload_button'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport FileRenameForm from './FileRenameForm'\nimport ZipFileOptionsForm from './ZipFileOptionsForm'\nimport UploadButton from 'compiled/react_files/components/UploadButton'\n\nUploadButton.buildPotentialModal = function() {\n  if (this.state.zipOptions.length) {\n    return (\n      <ZipFileOptionsForm\n        fileOptions={this.state.zipOptions[0]}\n        onZipOptionsResolved={this.onZipOptionsResolved}\n        onClose={this.onClose}\n      />\n    )\n  } else if (this.state.nameCollisions.length) {\n    return (\n      <FileRenameForm\n        fileOptions={this.state.nameCollisions[0]}\n        onNameConflictResolved={this.onNameConflictResolved}\n        onClose={this.onClose}\n      />\n    )\n  }\n}\n\nUploadButton.hiddenPhoneClassname = function() {\n  if (this.props.showingButtons) {\n    return 'hidden-phone'\n  }\n}\n\nUploadButton.render = function() {\n  return (\n    <span>\n      <form ref=\"form\" className=\"hidden\">\n        <input type=\"file\" ref=\"addFileInput\" onChange={this.handleFilesInputChange} multiple />\n      </form>\n      <button\n        type=\"button\"\n        className=\"btn btn-primary btn-upload\"\n        onClick={this.handleAddFilesClick}\n      >\n        <i className=\"icon-upload\" aria-hidden />\n        &nbsp;\n        <span className={this.hiddenPhoneClassname()}>{I18n.t('Upload')}</span>\n      </button>\n      {this.buildPotentialModal()}\n    </span>\n  )\n}\n\nexport default createReactClass(UploadButton)\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} \\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"  %{items}  \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"     .\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"      .\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"   .\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"       :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"     :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"    .\\\"},\\\"cy\\\":{\\\"and_count_more_43eae021\\\":\\\"a %{count} arall\\\",\\\"cancel_caeb1e68\\\":\\\"Canslo\\\",\\\"close_d634289d\\\":\\\"Cau\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} eitem wedii dewis\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Mae gan yr eitemau sydd wediu dewis hawliau defnyddio gwahanol.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Rheoli Hawliau Defnyddio\\\",\\\"save_11a80ec3\\\":\\\"Cadw\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Gwall wrth osod hawliau defnyddio.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Mae hawliau defnyddio wediu gosod.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Bydd hawliau defnyddion cael eu gosod ar gyfer yr holl ffeiliau yn:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Fe allwch chi hefyd reoli mynediad ar hyn o bryd:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Maen rhaid i chi nodi hawl defnyddio.\\\"},\\\"da\\\":{\\\"and_count_more_43eae021\\\":\\\"og %{count} mere\\\",\\\"cancel_caeb1e68\\\":\\\"Annuller\\\",\\\"close_d634289d\\\":\\\"Luk\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementer valgt\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"De valgte elementer har forskellige brugsrettigheder.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrering af brugsrettigheder\\\",\\\"save_11a80ec3\\\":\\\"Gem\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Der opstod en fejl ved indstilling af brugsrettigheder.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Brugsrettighederne er blevet indstillet.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Brugsrettighederne indstilles for alle filerne i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ogs administrere adgang p dette tidspunkt:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du skal specificere en brugsrettighed.\\\"},\\\"da-x-k12\\\":{\\\"and_count_more_43eae021\\\":\\\"og %{count} mere\\\",\\\"cancel_caeb1e68\\\":\\\"Annuller\\\",\\\"close_d634289d\\\":\\\"Luk\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementer valgt\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"De valgte elementer har forskellige brugsrettigheder.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrering af brugsrettigheder\\\",\\\"save_11a80ec3\\\":\\\"Gem\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Der opstod en fejl ved indstilling af brugsrettigheder.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Brugsrettighederne er blevet indstillet.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Brugsrettighederne indstilles for alle filerne i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ogs administrere adgang p dette tidspunkt:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du skal specificere en brugsrettighed.\\\"},\\\"de\\\":{\\\"and_count_more_43eae021\\\":\\\"und %{count} mehr \\\",\\\"cancel_caeb1e68\\\":\\\"Abbrechen\\\",\\\"close_d634289d\\\":\\\"Schlieen\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} Elemente ausgewhlt\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Die Nutzungsrechte fr die ausgewhlten Elemente sind unterschiedlich.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Nutzungsrechte verwalten\\\",\\\"save_11a80ec3\\\":\\\"Speichern\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Beim Festlegen der Nutzungsrechte ist ein Fehler aufgetreten.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Nutzungsrechte wurden festgelegt.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Nutzungsrechte werden festgelegt fr alle Dateien in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Sie knnen jetzt auch Zugriffe steuern:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Sie mssen ein Nutzungsrecht festlegen.\\\"},\\\"el\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} ...\\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"      .\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"       .\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"   \\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"          :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"  , , ,    :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"     .\\\"},\\\"en-AU\\\":{\\\"and_count_more_43eae021\\\":\\\"and %{count} more\\\",\\\"cancel_caeb1e68\\\":\\\"Cancel\\\",\\\"close_d634289d\\\":\\\"Close\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} items selected\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Items selected have different usage rights.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Manage Usage Rights\\\",\\\"save_11a80ec3\\\":\\\"Save\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"There was an error setting usage rights.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Usage rights have been set.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Usage rights will be set for all of the files contained in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"You can also manage access at this time:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"You must specify a usage right.\\\"},\\\"en-CA\\\":{\\\"and_count_more_43eae021\\\":\\\"and %{count} more\\\",\\\"cancel_caeb1e68\\\":\\\"Cancel\\\",\\\"close_d634289d\\\":\\\"Close\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} items selected\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Items selected have different usage rights.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Manage Usage Rights\\\",\\\"save_11a80ec3\\\":\\\"Save\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"There was an error setting usage rights.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Usage rights have been set.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Usage rights will be set for all of the files contained in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"You can also manage access at this time:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"You must specify a usage right.\\\"},\\\"en-GB\\\":{\\\"and_count_more_43eae021\\\":\\\"and %{count} more\\\",\\\"cancel_caeb1e68\\\":\\\"Cancel\\\",\\\"close_d634289d\\\":\\\"Close\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} items selected\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Items selected have different usage rights.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Manage usage rights\\\",\\\"save_11a80ec3\\\":\\\"Save\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"There was an error setting usage rights.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Usage rights have been set.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Usage rights will be set for all of the files contained in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"You can also manage access at this time:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"You must specify a usage right.\\\"},\\\"es\\\":{\\\"and_count_more_43eae021\\\":\\\"y %{count} ms\\\",\\\"cancel_caeb1e68\\\":\\\"Cancelar\\\",\\\"close_d634289d\\\":\\\"Cerrar\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} items seleccionados\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Los items seleccionados tienen derechos de uso diferentes\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrar derechos de uso\\\",\\\"save_11a80ec3\\\":\\\"Guardar\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Se ha producido un error al configurar los derechos de uso.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Se han configurado los derechos de uso\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Se configurarn los derechos de uso de todos los archivos que estn incluidos:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Tambin puede administrar el acceso en este momento:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Debe especificar un derecho de uso.\\\"},\\\"fa\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} ...\\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items}   \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"       .\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\" \\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"       .\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"    .\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"           :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"         :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"     .\\\"},\\\"fi\\\":{\\\"and_count_more_43eae021\\\":\\\"ja %{count} lis\\\",\\\"cancel_caeb1e68\\\":\\\"Peruuta\\\",\\\"close_d634289d\\\":\\\"Sulje\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} kohdetta valittu\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Valituilla kohteilla on erilaiset kyttoikeudet.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Hallitse kyttoikeuksia\\\",\\\"save_11a80ec3\\\":\\\"Tallenna\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Kyttoikeuksien mrityksess ilmeni virhe.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Kyttoikeudet on mritetty\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Kyttoikeudet mritetn kaikille tiedostoille, jotka ovat kohteessa:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Voit mys hallita kyttoikeutta tll kertaa:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Sinun tytyy pivitt kyttoikeus.\\\"},\\\"fr\\\":{\\\"and_count_more_43eae021\\\":\\\"et %{count} de plus...\\\",\\\"cancel_caeb1e68\\\":\\\"Annuler\\\",\\\"close_d634289d\\\":\\\"Fermer\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} lments slectionns\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Les lments slectionns ont des droits dutilisation diffrents.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Grer les droits dutilisation\\\",\\\"save_11a80ec3\\\":\\\"Enregistrer\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Une erreur sest produite lors de la dfinition des droits dutilisation.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Les droits dutilisation ont t dfinis.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Les droits dutilisation seront dfinis pour tous les fichiers contenus dans :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Vous pouvez galement grer l'accs  ce moment :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Vous devez spcifier un droit dutilisation.\\\"},\\\"fr-CA\\\":{\\\"and_count_more_43eae021\\\":\\\"et %{count} de plus...\\\",\\\"cancel_caeb1e68\\\":\\\"Annuler\\\",\\\"close_d634289d\\\":\\\"Fermer\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} lments slectionns\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Les lments slectionns ont des droits dutilisation diffrents.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Grer les droits dutilisation\\\",\\\"save_11a80ec3\\\":\\\"Enregistrer\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Une erreur sest produite lors de la dfinition des droits dutilisation.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Les droits dutilisation ont t dfinis.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Les droits dutilisation seront dfinis pour tous les fichiers contenus dans :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Vous pouvez galement grer l'accs  ce moment :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Vous devez spcifier un droit dutilisation.\\\"},\\\"he\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} ...\\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items}  \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"     \\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"     \\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"  \\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"      :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"      .\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"   \\\"},\\\"ht\\\":{\\\"and_count_more_43eae021\\\":\\\"e %{count} plis\\\",\\\"cancel_caeb1e68\\\":\\\"Anile\\\",\\\"close_d634289d\\\":\\\"Fmen\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} eleman seleksyone\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Eleman seleksyone yo gen dwa itilizasyon diferan.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Jere Dwa Itilizasyon\\\",\\\"save_11a80ec3\\\":\\\"Anrejistre\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Gen yon er nan konfigirasyon dwa itilizasyon yo.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Dwa itilizasyon yo defini.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Dwa Itilizasyon yo ap defini pou tout fichye ki nan:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Ou ka jere aks tou pou kounye a:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Ou dwe bay presize yon dwa itilizasyon.\\\"},\\\"hu\\\":{\\\"and_count_more_43eae021\\\":\\\"s  tovbbi %{count}...\\\",\\\"cancel_caeb1e68\\\":\\\"Mgse\\\",\\\"close_d634289d\\\":\\\"Bezrs\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elem kivlasztva\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"A kivlasztott elemekhez ms-ms felhasznlsi jogok ktdnek.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Felhasznli jogosultsgok kezelse\\\",\\\"save_11a80ec3\\\":\\\"Ments\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Hiba trtnt a felhasznlsi jogok belltsa kzben.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Felhasznlsi jogok belltva.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Felhasznlsi jogok belltsa az sszes fjlra, ami ebben van:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Kezelheti a hozzfrst ekkor:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Hatrozza meg a felhasznli jogokat. \\\"},\\\"hy\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count}  ... \\\",\\\"cancel_caeb1e68\\\":\\\" \\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items}   \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"     :\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"      :\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"   :\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"       ,    \\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"       \\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"     :\\\"},\\\"is\\\":{\\\"and_count_more_43eae021\\\":\\\"og %{count} meira\\\",\\\"cancel_caeb1e68\\\":\\\"Htta vi\\\",\\\"close_d634289d\\\":\\\"Loka\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} atrii valin\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Valin atrii hafa mismunandi notkunarrttindi.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Umsjn me notkunarrttindum\\\",\\\"save_11a80ec3\\\":\\\"Vista\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Villa var vi a stilla notkunarrttindi.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Notkunarrttindi hafa veri kvein.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Notkunarrttindi vera kvein fyrir allar skr :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\" getur lka stjrna agangi  essum tma:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Tilgreindu notkunarrttindi.\\\"},\\\"it\\\":{\\\"and_count_more_43eae021\\\":\\\"e altri %{count}\\\",\\\"cancel_caeb1e68\\\":\\\"Annulla\\\",\\\"close_d634289d\\\":\\\"Chiudi\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementi selezionati\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Gli elementi selezionati hanno diversi diritti di utilizzo.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Gestisci diritti di utilizzo\\\",\\\"save_11a80ec3\\\":\\\"Salva\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Si  verificato un errore durante l'impostazione dei diritti di utilizzo.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"I diritti di utilizzo sono stati impostati.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"I diritti di utilizzo verranno impostati per tutti i file contenuti in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Al momento puoi anche gestire l'accesso:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Devi specificare un diritto di utilizzo.\\\"},\\\"ja\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} ...\\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"\\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\":\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\":\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"\\\"},\\\"ko\\\":{\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items}  \\\",\\\"save_11a80ec3\\\":\\\"\\\"},\\\"mi\\\":{\\\"and_count_more_43eae021\\\":\\\"me te %{count} atu ...\\\",\\\"cancel_caeb1e68\\\":\\\"Whakakore\\\",\\\"close_d634289d\\\":\\\"Katia\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} ng temi tpakohia\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Ng temi kua tpakohia i rerek mtika whakamahi.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Whakahaere Raihana Tika\\\",\\\"save_11a80ec3\\\":\\\"Tiaki\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"I hapa te whakanho mtika.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Kua whakaturia Raihana.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Ka Raihana hei whakanoho ki katoa o te knae i roto i roto i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Ka taea hoki te whakahaere i te uru i tnei wa:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Me whakapt e koe he tika te whakamahinga.\\\"},\\\"nb\\\":{\\\"and_count_more_43eae021\\\":\\\"og %{count} mer...\\\",\\\"cancel_caeb1e68\\\":\\\"Avbryt\\\",\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementer valgt\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Elementer som er valgt har ulike brukerrettigheter.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrer brukerrettigheter\\\",\\\"save_11a80ec3\\\":\\\"Lagre\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Det oppstod en feil innstilling bruksrettigheter.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Brukerrettigheter har blitt satt.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Brukerrettigheter vil bli satt for alle filene som er inneholdt i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ogs administrere tilgangen p denne tiden:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du m spesifisere brukerrettigheter.\\\"},\\\"nb-x-k12\\\":{\\\"and_count_more_43eae021\\\":\\\"og %{count} mer...\\\",\\\"cancel_caeb1e68\\\":\\\"Avbryt\\\",\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementer valgt\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Elementer som er valgt har ulike brukerrettigheter.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrer brukerrettigheter\\\",\\\"save_11a80ec3\\\":\\\"Lagre\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Det oppstod en feil innstilling bruksrettigheter.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Brukerrettigheter har blitt satt.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Brukerrettigheter vil bli satt for alle filene som er inneholdt i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ogs administrere tilgangen p denne tiden:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du m spesifisere brukerrettigheter.\\\"},\\\"nl\\\":{\\\"and_count_more_43eae021\\\":\\\"en %{count} meer...\\\",\\\"cancel_caeb1e68\\\":\\\"Annuleren\\\",\\\"close_d634289d\\\":\\\"Sluiten\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} geselecteerde items\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Geselecteerde items hebben verschillende gebruiksrechten.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Gebruiksrechten beheren\\\",\\\"save_11a80ec3\\\":\\\"Opslaan\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Er is een fout opgetreden bij het instellen van gebruiksrechten.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Gebruiksrechten zijn ingesteld.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Gebruiksrechten zullen ingesteld worden voor alle bestanden opgenomen in:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Je kunt ook toegang beheren op dit moment:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Je moet een gebruiksrecht aangeven.\\\"},\\\"nn\\\":{\\\"and_count_more_43eae021\\\":\\\"and %{count} more\\\",\\\"cancel_caeb1e68\\\":\\\"Avbryt\\\",\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Valde element har ulike bruksrettar.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Administrere bruksrettar\\\",\\\"save_11a80ec3\\\":\\\"Lagre\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Det oppstod ein feil under fastsetjinga av bruksrettar.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Bruksrettar er fastsette.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Bruksrettar vil bli sett for alle filene i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ogs administrere tilgangen:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du m spesifisere ein bruksrett.\\\"},\\\"pl\\\":{\\\"and_count_more_43eae021\\\":\\\"i %{count} wicej...\\\",\\\"cancel_caeb1e68\\\":\\\"Anuluj\\\",\\\"close_d634289d\\\":\\\"Zamknij\\\",\\\"items_items_selected_5b55e566\\\":\\\"Wybrano elementy %{items}\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Wybrane elementy maj rne prawa uytkowania.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Zarzdzaj prawami uytkowania\\\",\\\"save_11a80ec3\\\":\\\"Zapisz\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Wystpi bd podczas nadawania praw uytkowania\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Prawa uytkowania zostay nadane.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Prawa uytkowania zostan nadane dla wszystkich plikw zawartych w:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Moesz rwnie w tym czasie zarzdza dostpem:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Musisz okreli prawo uytkowania.\\\"},\\\"pt\\\":{\\\"and_count_more_43eae021\\\":\\\"e mais %{count}\\\",\\\"cancel_caeb1e68\\\":\\\"Cancelar\\\",\\\"close_d634289d\\\":\\\"Fechar\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} itens selecionados\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Os itens selecionados tm direitos de utilizao diferentes.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Gerir direitos de utilizao\\\",\\\"save_11a80ec3\\\":\\\"Guardar\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Ocorreu um erro ao definir direitos de utilizao.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Foram definidos direitos de utilizao.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Sero definidos direitos de utilizao para todos os ficheiros contidos em:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Tambm pode gerir acesso nesta altura:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\" necessrio especificar um direito de utilizao.\\\"},\\\"pt-BR\\\":{\\\"and_count_more_43eae021\\\":\\\"e %{count} mais...\\\",\\\"cancel_caeb1e68\\\":\\\"Cancelar\\\",\\\"close_d634289d\\\":\\\"Fechar\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} itens selecionados\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Itens selecionados possuem diferentes direitos de uso.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Gerenciar direitos de uso\\\",\\\"save_11a80ec3\\\":\\\"Salvar\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Ocorreu um erro ao configurar os direitos de uso\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Os direitos de uso foram definidos.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Os direitos de uso sero definidos para todos os arquivos contidos em:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Voc tambm pode gerenciar acesso nesse momento:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Voc deve especificar um direito de uso\\\"},\\\"ru\\\":{\\\"and_count_more_43eae021\\\":\\\"  %{count}\\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\" %{items} \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"      .\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"   \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"      .\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"    .\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"       ,  :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"       :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"     \\\"},\\\"sl\\\":{\\\"and_count_more_43eae021\\\":\\\"in %{count} ve \\\",\\\"cancel_caeb1e68\\\":\\\"Preklii\\\",\\\"close_d634289d\\\":\\\"Zapri\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} elementov izbranih\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Izbrani elementi imajo razline pravice uporabe.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Urejaj pravice uporabe\\\",\\\"save_11a80ec3\\\":\\\"Shrani\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Prilo je do napake pri nastavljanju pravic uporabe.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Pravice uporabe so nastavljene.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Pravice uporabe bodo nastavljene za vse datoteke, ki jih vsebuje:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Dostop lahko urejate tudi ob tem asu:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Doloiti morate pravico uporabe.\\\"},\\\"sv\\\":{\\\"and_count_more_43eae021\\\":\\\"och %{count} mer ...\\\",\\\"cancel_caeb1e68\\\":\\\"Avbryt\\\",\\\"close_d634289d\\\":\\\"Stng\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} objekt valda\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"De valda objekten har olika anvndningsrttigheter.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Hantera anvndningsrttigheter\\\",\\\"save_11a80ec3\\\":\\\"Spara\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Ett fel uppstod nr anvndningsrttigheterna skulle stllas in.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Anvndningsrttigheter har stllts in.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Anvndningsrttigheter kommer inte att stllas in fr alla filerna i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ven hantera tkomst vid denna tidpunkt:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du mste specificera en anvndningsrttighet.\\\"},\\\"sv-x-k12\\\":{\\\"and_count_more_43eae021\\\":\\\"och %{count} mer ...\\\",\\\"cancel_caeb1e68\\\":\\\"Avbryt\\\",\\\"close_d634289d\\\":\\\"Stng\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} objekt valda\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"De valda objekten har olika anvndningsrttigheter.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Hantera anvndningsrttigheter\\\",\\\"save_11a80ec3\\\":\\\"Spara\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Ett fel uppstod nr anvndningsrttigheterna skulle stllas in.\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Anvndningsrttigheter har stllts in.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"Anvndningsrttigheter kommer inte att stllas in fr alla filerna i:\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"Du kan ven hantera tkomst vid denna tidpunkt:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Du mste specificera en anvndningsrttighet.\\\"},\\\"tr\\\":{\\\"and_count_more_43eae021\\\":\\\"ve %{count} fazlas... \\\",\\\"cancel_caeb1e68\\\":\\\"ptal\\\",\\\"close_d634289d\\\":\\\"Kapat\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} e seildi\\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"Seili elerin farkl kullanm haklar var.\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"Kullanm artlarn Ynet\\\",\\\"save_11a80ec3\\\":\\\"Kaydet\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"Kullanm haklarn ayarlamada hata olutu\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"Kullanm haklar belirlendi.\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"uradaki dosyalarn tamam iin kullanm haklar ayarlanacak:\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"Bir kullanm hakk belirtmelisiniz.\\\"},\\\"uk\\\":{\\\"and_count_more_43eae021\\\":\\\"  %{count} \\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items}  \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"     .\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"  \\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"     .\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"   .\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"      ,   :\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"       :\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"    .\\\"},\\\"zh-Hans\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} \\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\"%{items} \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"\\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"and_count_more_43eae021\\\":\\\" %{count} \\\",\\\"cancel_caeb1e68\\\":\\\"\\\",\\\"close_d634289d\\\":\\\"\\\",\\\"items_items_selected_5b55e566\\\":\\\" %{items} \\\",\\\"items_selected_have_different_usage_rights_52b325cc\\\":\\\"\\\",\\\"manage_usage_rights_c5a8c216\\\":\\\"\\\",\\\"save_11a80ec3\\\":\\\"\\\",\\\"there_was_an_error_setting_usage_rights_53739e1d\\\":\\\"\\\",\\\"usage_rights_have_been_set_d1b433c7\\\":\\\"\\\",\\\"usage_rights_will_be_set_for_all_of_the_files_cont_b192336a\\\":\\\"\\\",\\\"you_can_also_manage_access_at_this_time_105a2530\\\":\\\"\\\",\\\"you_must_specify_a_usage_right_5eb57f87\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/usage_rights_modal';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('usage_rights_modal');\n  ","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport PropTypes from 'prop-types'\nimport I18n from 'i18n!usage_rights_modal'\nimport customPropTypes from '../modules/customPropTypes'\nimport filesEnv from '../modules/filesEnv'\nimport setUsageRights from '../utils/setUsageRights'\nimport updateModelsUsageRights from '../utils/updateModelsUsageRights'\nimport '../../jquery.rails_flash_notifications'\nimport 'jquery.instructure_forms'\n\nexport default {\n  displayName: 'ManageUsageRightsModal',\n\n  propTypes: {\n    isOpen: PropTypes.bool,\n    closeModal: PropTypes.func,\n    itemsToManage: PropTypes.arrayOf(customPropTypes.filesystemObject).isRequired\n  },\n\n  componentWillMount() {\n    this.copyright = this.defaultCopyright()\n    this.use_justification = this.defaultSelectedRight()\n    return (this.cc_value = this.defaultCCValue())\n  },\n\n  apiUrl: `/api/v1/${filesEnv.contextType}/${filesEnv.contextId}/usage_rights`,\n\n  copyright: null,\n  use_justification: null,\n\n  submit() {\n    const values = this.usageSelection.getValues()\n\n    // They didn't choose a copyright\n    if (values.use_justification === 'choose') {\n      $(this.usageSelection.usageRightSelection).errorBox(I18n.t('You must specify a usage right.'))\n      return false\n    }\n\n    const usageRightValue = {\n      use_justification: values.use_justification,\n      legal_copyright: values.copyright,\n      license: values.cc_license\n    }\n\n    const afterSet = (success, data) => {\n      if (success) {\n        updateModelsUsageRights(data, this.props.itemsToManage)\n        $.flashMessage(I18n.t('Usage rights have been set.'))\n        this.setRestrictedAccess(this.restrictedSelection.extractFormValues())\n      } else {\n        $.flashError(I18n.t('There was an error setting usage rights.'))\n      }\n      return this.props.closeModal()\n    }\n\n    return setUsageRights(this.props.itemsToManage, usageRightValue, afterSet)\n  },\n\n  setRestrictedAccess(attributes) {\n    return this.props.itemsToManage.every(item => item.save({}, {attrs: attributes}))\n  },\n\n  // Determines the default usage right to be selected\n  defaultSelectedRight() {\n    const useJustification =\n      this.props.itemsToManage[0].get('usage_rights') &&\n      this.props.itemsToManage[0].get('usage_rights').use_justification\n\n    if (\n      this.props.itemsToManage.every(\n        item =>\n          (item.get('usage_rights') && item.get('usage_rights').use_justification) ===\n          useJustification\n      )\n    ) {\n      return useJustification\n    } else {\n      return 'choose'\n    }\n  },\n\n  defaultCopyright() {\n    const copyright =\n      (this.props.itemsToManage[0].get('usage_rights') &&\n        this.props.itemsToManage[0].get('usage_rights').legal_copyright) ||\n      ''\n    if (\n      this.props.itemsToManage.every(\n        item =>\n          (item.get('usage_rights') && item.get('usage_rights').legal_copyright) === copyright ||\n          (item.get('usage_rights') && item.get('usage_rights').license) === copyright\n      )\n    ) {\n      return copyright\n    } else {\n      return null\n    }\n  },\n\n  defaultCCValue() {\n    if (this.use_justification === 'creative_commons') {\n      return (\n        this.props.itemsToManage[0].get('usage_rights') &&\n        this.props.itemsToManage[0].get('usage_rights').license\n      )\n    } else {\n      return null\n    }\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport UsageRightsDialog from 'compiled/react_files/components/UsageRightsDialog'\nimport I18n from 'i18n!usage_rights_modal'\nimport UsageRightsSelectBox from './UsageRightsSelectBox'\nimport RestrictedRadioButtons from './RestrictedRadioButtons'\nimport DialogPreview from './DialogPreview'\nimport Folder from 'compiled/models/Folder'\nimport {Modal} from '@instructure/ui-overlays'\nimport {CloseButton, Button} from '@instructure/ui-buttons'\nimport {Heading} from '@instructure/ui-elements'\nimport htmlEscape from 'str/htmlEscape'\n\nconst MAX_FOLDERS_TO_SHOW = 2\n\nUsageRightsDialog.renderFileName = function() {\n  const textToShow =\n    this.props.itemsToManage.length > 1\n      ? I18n.t('%{items} items selected', {items: this.props.itemsToManage.length})\n      : this.props.itemsToManage[0].displayName()\n\n  return (\n    <span ref={e => (this.fileName = e)} className=\"UsageRightsDialog__fileName\">\n      {textToShow}\n    </span>\n  )\n}\n\nUsageRightsDialog.renderFolderList = function(folders) {\n  if (folders.length) {\n    const foldersToShow = folders.slice(0, MAX_FOLDERS_TO_SHOW)\n    return (\n      <div>\n        <span>{I18n.t('Usage rights will be set for all of the files contained in:')}</span>\n        <ul ref={e => (this.folderBulletList = e)} className=\"UsageRightsDialog__folderBulletList\">\n          {foldersToShow.map(item => (\n            <li key={item.cid}>{item.displayName()}</li>\n          ))}\n        </ul>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nUsageRightsDialog.renderFolderTooltip = function(folders) {\n  const toolTipFolders = folders.slice(MAX_FOLDERS_TO_SHOW)\n\n  if (toolTipFolders.length) {\n    const renderItems = toolTipFolders.map(item => ({\n      cid: item.cid,\n      displayName: htmlEscape(item.displayName()).toString()\n    }))\n    // Doing it this way so commas, don't show up when rendering the list out in the tooltip.\n    const renderedNames = renderItems.map(item => item.displayName).join('<br />')\n\n    return (\n      <span\n        className=\"UsageRightsDialog__andMore\"\n        tabIndex=\"0\"\n        ref={e => (this.folderTooltip = e)}\n        data-html-tooltip-title={renderedNames}\n        data-tooltip=\"right\"\n        data-tooltip-class=\"UsageRightsDialog__tooltip\"\n      >\n        {I18n.t('and %{count} more', {count: toolTipFolders.length})}\n        <span className=\"screenreader-only\">\n          <ul>\n            {renderItems.map((item, i) => (\n              <li key={item.cid} ref={e => (this[`displayNameTooltip${i}-screenreader`] = e)}>\n                {' '}\n                {item.displayName}\n              </li>\n            ))}\n          </ul>\n        </span>\n      </span>\n    )\n  } else {\n    return null\n  }\n}\n\nUsageRightsDialog.renderFolderMessage = function() {\n  const folders = this.props.itemsToManage.filter(item => item instanceof Folder)\n\n  return (\n    <div>\n      {this.renderFolderList(folders)}\n      {this.renderFolderTooltip(folders)}\n      <hr aria-hidden=\"true\" />\n    </div>\n  )\n}\n\nUsageRightsDialog.renderDifferentRightsMessage = function() {\n  if (\n    (this.copyright == null || this.use_justification === 'choose') &&\n    this.props.itemsToManage.length > 1\n  ) {\n    return (\n      <span\n        ref={e => (this.differentRightsMessage = e)}\n        className=\"UsageRightsDialog__differentRightsMessage alert\"\n      >\n        <i className=\"icon-warning UsageRightsDialog__warning\" />\n        {I18n.t('Items selected have different usage rights.')}\n      </span>\n    )\n  }\n}\n\nUsageRightsDialog.renderAccessManagement = function() {\n  if (this.props.userCanRestrictFilesForContext) {\n    return (\n      <div>\n        <hr aria-hidden=\"true\" />\n        <div className=\"form-horizontal\">\n          <p className=\"manage-access\">{I18n.t('You can also manage access at this time:')}</p>\n          <RestrictedRadioButtons\n            ref={e => (this.restrictedSelection = e)}\n            models={this.props.itemsToManage}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nUsageRightsDialog.render = function() {\n  return (\n    <Modal\n      ref={e => (this.usageRightsDialog = e)}\n      open={this.props.isOpen}\n      onDismiss={this.props.closeModal}\n      label={I18n.t('Manage Usage Rights')}\n      shouldCloseOnDocumentClick={false} // otherwise clicking in the datepicker will dismiss the modal underneath it\n    >\n      <Modal.Header>\n        <CloseButton\n          buttonRef={e => (this.cancelXButton = e)}\n          className=\"Button Button--icon-action\"\n          placement=\"end\"\n          offset=\"medium\"\n          variant=\"icon\"\n          onClick={this.props.closeModal}\n        >\n          {I18n.t('Close')}\n        </CloseButton>\n        <Heading level=\"h4\">{I18n.t('Manage Usage Rights')}</Heading>\n      </Modal.Header>\n      <Modal.Body>\n        <div ref={e => (this.form = e)} className=\"UsageRightsDialog__Content\">\n          <div>\n            <div className=\"UsageRightsDialog__paddingFix grid-row\">\n              <div className=\"UsageRightsDialog__previewColumn col-xs-3\">\n                <DialogPreview itemsToShow={this.props.itemsToManage} />\n              </div>\n              <div className=\"UsageRightsDialog__contentColumn off-xs-1 col-xs-8\">\n                {this.renderDifferentRightsMessage()}\n                {this.renderFileName()}\n                {this.renderFolderMessage()}\n                <UsageRightsSelectBox\n                  ref={e => (this.usageSelection = e)}\n                  use_justification={this.use_justification}\n                  copyright={this.copyright || ''}\n                  cc_value={this.cc_value}\n                />\n                {this.renderAccessManagement()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <span className=\"UsageRightsDialog__Footer-Actions\">\n          <Button buttonRef={e => (this.cancelButton = e)} onClick={this.props.closeModal}>\n            {I18n.t('Cancel')}\n          </Button>\n          &nbsp;\n          <Button\n            buttonRef={e => (this.saveButton = e)}\n            variant=\"primary\"\n            type=\"submit\"\n            onClick={this.submit}\n          >\n            {I18n.t('Save')}\n          </Button>\n        </span>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\nexport default createReactClass(UsageRightsDialog)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport I18n from 'i18n!react_files'\nimport $ from 'jquery'\nimport Progress from '../../models/Progress'\nimport Folder from '../../models/Folder'\n\nexport default function downloadStuffAsAZip(filesAndFolders, {contextType, contextId}) {\n  let promptBeforeLeaving\n  const files = []\n  const folders = []\n  filesAndFolders.forEach(item => {\n    if (item instanceof Folder) {\n      folders.push(item.id)\n    } else {\n      files.push(item.id)\n    }\n  })\n\n  const url = `/api/v1/${contextType}/${contextId}/content_exports`\n\n  // This gives at least 2.5 seconds between updates of the status for screenreaders,\n  // this should allow them to get the full message before it triggers another\n  // reading of the message.  Technically, if the screenreader read speed is set\n  // such that this is slower it won't work as intended.  But, most experienced\n  // SR users set it much higher speed (300 wpm according to http://webaim.org/techniques/screenreader/)\n  // This works well for the default read speed which is around 180 wpm.\n  const screenreaderMessageWaitTimeMS = 2500\n  const throttledSRMessage = _.throttle(\n    $.screenReaderFlashMessageExclusive,\n    screenreaderMessageWaitTimeMS,\n    {leading: false}\n  )\n\n  // TODO: handle progress events with nicer UI\n  const $progressIndicator = $(\n    '<div style=\"position: fixed; top: 4px; left: 50%; margin-left: -120px; width: 240px; z-index: 11; text-align: center; box-sizing: border-box; padding: 8px;\" class=\"alert alert-info\">'\n  )\n\n  function onProgress(progessAPIResponse) {\n    const message = I18n.t('progress_message', 'Preparing download: %{percent}% complete', {\n      percent: progessAPIResponse.completion\n    })\n    $progressIndicator.appendTo('body').text(message)\n    return throttledSRMessage(message)\n  }\n\n  const data = {\n    export_type: 'zip',\n    select: {\n      files,\n      folders\n    }\n  }\n\n  $(window).on(\n    'beforeunload',\n    (promptBeforeLeaving = () =>\n      I18n.t('If you leave, the zip file download currently being prepared will be canceled.'))\n  )\n\n  return $.post(url, data)\n    .pipe(progressObject =>\n      new Progress({url: progressObject.progress_url}).poll().progress(onProgress)\n    )\n    .pipe(progressObject => {\n      const contentExportId = progressObject.context_id\n      return $.getJSON(`${url}/${contentExportId}`)\n    })\n    .pipe(response => {\n      $(window).off('beforeunload', promptBeforeLeaving)\n      if (response.workflow_state === 'exported') {\n        window.location = response.attachment.url\n      } else {\n        $.flashError(I18n.t('An error occurred trying to prepare download, please try again.'))\n      }\n    })\n    .fail(() =>\n      $.flashError(I18n.t('An error occurred trying to prepare download, please try again.'))\n    )\n    .always(() => {\n      $(window).off('beforeunload', promptBeforeLeaving)\n      $progressIndicator.remove()\n    })\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport page from 'page'\nimport FocusStore from 'compiled/react_files/modules/FocusStore'\nimport openMoveDialog from './utils/openMoveDialog'\nimport deleteStuff from 'compiled/react_files/utils/deleteStuff'\nimport UploadButton from './UploadButton'\nimport classnames from 'classnames'\nimport preventDefault from 'compiled/fn/preventDefault'\nimport Folder from 'compiled/models/Folder'\nimport PropTypes from 'prop-types'\nimport UsageRightsDialog from './UsageRightsDialog'\nimport downloadStuffAsAZip from 'compiled/react_files/utils/downloadStuffAsAZip'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport RestrictedDialogForm from './RestrictedDialogForm'\nimport 'compiled/jquery.rails_flash_notifications'\nimport ContentTypeExternalToolTray from 'jsx/shared/ContentTypeExternalToolTray'\nimport {ltiState} from '../../../public/javascripts/lti/post_message/handleLtiPostMessage'\n\nexport default class Toolbar extends React.Component {\n  static propTypes = {\n    currentFolder: customPropTypes.folder, // not required as we don't have it on the first render\n    contextType: customPropTypes.contextType.isRequired,\n    contextId: customPropTypes.contextId.isRequired,\n    showingSearchResults: PropTypes.bool\n  }\n\n  componentWillMount() {\n    this.downloadTitle = I18n.t('Download as Zip')\n    this.tabIndex = null\n  }\n\n  addFolder() {\n    return this.props.currentFolder.folders.add({})\n  }\n\n  getItemsToDownload() {\n    return this.props.selectedItems.filter(item => !item.get('locked_for_user'))\n  }\n\n  downloadSelectedAsZip() {\n    if (!this.getItemsToDownload().length) return\n\n    return downloadStuffAsAZip(this.getItemsToDownload(), {\n      contextType: this.props.contextType,\n      contextId: this.props.contextId\n    })\n  }\n\n  componentWillUpdate(nextProps) {\n    this.showingButtons = nextProps.selectedItems.length\n  }\n\n  // Function Summary\n  // Create a blank dialog window via jQuery, then dump the RestrictedDialogForm into that\n  // dialog window. This allows us to do react things inside of this already rendered\n  // jQueryUI widget\n  openRestrictedDialog() {\n    const $dialog = $('<div>').dialog({\n      title: I18n.t(\n        {\n          one: 'Edit permissions for: %{itemName}',\n          other: 'Edit permissions for %{count} items'\n        },\n        {\n          count: this.props.selectedItems.length,\n          itemName: this.props.selectedItems[0].displayName()\n        }\n      ),\n\n      width: 800,\n      minHeight: 400,\n      close() {\n        ReactDOM.unmountComponentAtNode(this)\n        $(this).remove()\n      }\n    })\n\n    ReactDOM.render(\n      <RestrictedDialogForm\n        models={this.props.selectedItems}\n        usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        closeDialog={() => $dialog.dialog('close')}\n      />,\n      $dialog[0]\n    )\n  }\n\n  openUsageRightsDialog() {\n    const contents = (\n      <UsageRightsDialog\n        isOpen\n        closeModal={this.props.modalOptions.closeModal}\n        itemsToManage={this.props.selectedItems}\n        userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n      />\n    )\n\n    return this.props.modalOptions.openModal(contents, () => this.refs.usageRightsBtn.focus())\n  }\n\n  openPreview() {\n    FocusStore.setItemToFocus(this.refs.previewLink)\n    const queryString = $.param(this.props.getPreviewQuery())\n    page(`${this.props.getPreviewRoute()}?${queryString}`)\n  }\n\n  onSubmitSearch() {\n    const searchTerm = this.refs.searchTerm.value\n    page(`/search?search_term=${searchTerm}`)\n  }\n\n  renderTrayToolsMenu = () => {\n    if (this.props.indexExternalToolsForContext?.length > 0) {\n      return (\n        <div className=\"inline-block\">\n          <a\n            className=\"al-trigger btn\"\n            id=\"file_menu_link\"\n            role=\"button\"\n            tabIndex=\"0\"\n            title={I18n.t('Files Menu')}\n            aria-label={I18n.t('Files Menu')}\n          >\n            <i className=\"icon-more\" aria-hidden=\"true\" />\n            <span className=\"screenreader-only\">{I18n.t('Files Menu')}</span>\n          </a>\n          <ul className=\"al-options\" role=\"menu\">\n            {this.props.indexExternalToolsForContext.map(tool => (\n              <li key={tool.id} role=\"menuitem\">\n                <a aria-label={tool.title} href=\"#\" onClick={this.onLaunchTrayTool(tool)}>\n                  {this.iconForTrayTool(tool)}\n                  {tool.title}\n                </a>\n              </li>\n            ))}\n          </ul>\n          <div id=\"external-tool-mount-point\" />\n        </div>\n      )\n    }\n  }\n\n  iconForTrayTool(tool) {\n    if (tool.canvas_icon_class) {\n      return <i className={tool.canvas_icon_class} />\n    } else if (tool.icon_url) {\n      return <img className=\"icon\" alt=\"\" src={tool.icon_url} />\n    }\n  }\n\n  onLaunchTrayTool = tool => e => {\n    if (e != null) {\n      e.preventDefault()\n    }\n    this.setExternalToolTray(tool, document.getElementById('file_menu_link'))\n  }\n\n  setExternalToolTray(tool, returnFocusTo) {\n    const handleDismiss = () => {\n      this.setExternalToolTray(null)\n      returnFocusTo.focus()\n      if (ltiState?.tray?.refreshOnClose) {\n        window.location.reload()\n      }\n    }\n    ReactDOM.render(\n      <ContentTypeExternalToolTray\n        tool={tool}\n        placement=\"file_index_menu\"\n        acceptedResourceTypes={['audio', 'document', 'image', 'video']}\n        targetResourceType=\"document\" // maybe this isn't what we want but it's my best guess\n        allowItemSelection={false}\n        selectableItems={[]}\n        onDismiss={handleDismiss}\n        open={tool !== null}\n      />,\n      document.getElementById('external-tool-mount-point')\n    )\n  }\n\n  renderUploadAddFolderButtons(canManage) {\n    if (this.props.showingSearchResults) {\n      return null\n    }\n    const phoneHiddenSet = classnames({\n      'hidden-phone': this.showingButtons\n    })\n    if (canManage) {\n      return (\n        <div className=\"ef-actions\">\n          <button\n            type=\"button\"\n            onClick={() => this.addFolder()}\n            className=\"btn btn-add-folder\"\n            aria-label={I18n.t('Add Folder')}\n          >\n            <i className=\"icon-plus\" />\n            &nbsp;\n            <span className={phoneHiddenSet}>{I18n.t('Folder')}</span>\n          </button>\n\n          <UploadButton\n            currentFolder={this.props.currentFolder}\n            showingButtons={this.showingButtons}\n            contextId={this.props.contextId}\n            contextType={this.props.contextType}\n          />\n          {this.renderTrayToolsMenu()}\n        </div>\n      )\n    }\n  }\n\n  renderDeleteButton(canManage) {\n    if (canManage) {\n      return (\n        <button\n          type=\"button\"\n          disabled={!this.showingButtons}\n          className=\"ui-button btn-delete\"\n          onClick={() => {\n            this.props.clearSelectedItems()\n            deleteStuff(this.props.selectedItems)\n          }}\n          title={I18n.t('Delete')}\n          aria-label={I18n.t('Delete')}\n          data-tooltip=\"\"\n        >\n          <i className=\"icon-trash\" />\n        </button>\n      )\n    }\n  }\n\n  renderManageUsageRightsButton() {\n    if (this.props.userCanManageFilesForContext && this.props.usageRightsRequiredForContext) {\n      return (\n        <button\n          ref=\"usageRightsBtn\"\n          type=\"button\"\n          disabled={!this.showingButtons}\n          className=\"Toolbar__ManageUsageRights ui-button btn-rights\"\n          onClick={() => this.openUsageRightsDialog()}\n          title={I18n.t('Manage Usage Rights')}\n          aria-label={I18n.t('Manage Usage Rights')}\n          data-tooltip=\"\"\n        >\n          <i className=\"icon-files-copyright\" />\n        </button>\n      )\n    }\n  }\n\n  renderCopyCourseButton(canManage) {\n    if (canManage) {\n      return (\n        <button\n          type=\"button\"\n          disabled={!this.showingButtons}\n          className=\"ui-button btn-move\"\n          onClick={event => {\n            openMoveDialog(this.props.selectedItems, {\n              contextType: this.props.contextType,\n              contextId: this.props.contextId,\n              returnFocusTo: event.target,\n              clearSelectedItems: this.props.clearSelectedItems,\n              onMove: this.props.onMove\n            })\n          }}\n          title={I18n.t('Move')}\n          aria-label={I18n.t('Move')}\n          data-tooltip=\"\"\n        >\n          <i className=\"icon-updown\" />\n        </button>\n      )\n    }\n  }\n\n  renderDownloadButton() {\n    if (this.getItemsToDownload().length) {\n      if (this.props.selectedItems.length === 1 && this.props.selectedItems[0].get('url')) {\n        return (\n          <a\n            className=\"ui-button btn-download\"\n            href={this.props.selectedItems[0].get('url')}\n            download\n            title={this.downloadTitle}\n            aria-label={this.downloadTitle}\n            data-tooltip=\"\"\n          >\n            <i className=\"icon-download\" />\n          </a>\n        )\n      } else {\n        return (\n          <button\n            type=\"button\"\n            disabled={!this.showingButtons}\n            className=\"ui-button btn-download\"\n            onClick={() => this.downloadSelectedAsZip()}\n            title={this.downloadTitle}\n            aria-label={this.downloadTitle}\n            data-tooltip=\"\"\n          >\n            <i className=\"icon-download\" />\n          </button>\n        )\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedItems.length !== this.props.selectedItems.length) {\n      $.screenReaderFlashMessageExclusive(\n        I18n.t(\n          {one: '%{count} item selected', other: '%{count} items selected'},\n          {count: this.props.selectedItems.length}\n        )\n      )\n    }\n  }\n\n  renderRestrictedAccessButtons(canManage) {\n    if (canManage) {\n      return (\n        <button\n          type=\"button\"\n          disabled={!this.showingButtons}\n          className=\"ui-button btn-restrict\"\n          onClick={() => this.openRestrictedDialog()}\n          title={I18n.t('Manage Access')}\n          aria-label={I18n.t('Manage Access')}\n          data-tooltip=\"\"\n        >\n          <i className=\"icon-cloud-lock\" />\n        </button>\n      )\n    }\n  }\n\n  render() {\n    const selectedItemIsFolder = this.props.selectedItems.every(item => item instanceof Folder)\n    let submissionsFolderSelected =\n      this.props.currentFolder && this.props.currentFolder.get('for_submissions')\n    submissionsFolderSelected =\n      submissionsFolderSelected ||\n      this.props.selectedItems.some(item => item.get('for_submissions'))\n    const restrictedByMasterCourse = this.props.selectedItems.some(\n      item => item.get('restricted_by_master_course') && item.get('is_master_course_child_content')\n    )\n    const canManage =\n      this.props.userCanManageFilesForContext &&\n      !submissionsFolderSelected &&\n      !restrictedByMasterCourse\n\n    this.showingButtons = this.props.selectedItems.length\n\n    if (this.showingButtons === 1) this.downloadTitle = I18n.t('Download')\n\n    const formClassName = classnames({\n      'ic-Input-group': true,\n      'ef-search-form': true,\n      'ef-search-form--showing-buttons': this.showingButtons\n    })\n\n    const buttonSetClasses = classnames({\n      'ui-buttonset': true,\n      'screenreader-only': !this.showingButtons\n    })\n\n    const viewBtnClasses = classnames({\n      'ui-button': true,\n      'btn-view': true,\n      'Toolbar__ViewBtn--onlyfolders': selectedItemIsFolder\n    })\n    const label = selectedItemIsFolder ? I18n.t('Viewing folders is not available') : I18n.t('View')\n\n    return (\n      <header className=\"ef-header\" role=\"region\" aria-label={I18n.t('Files Toolbar')}>\n        <form className={formClassName} onSubmit={preventDefault(() => this.onSubmitSearch())}>\n          <input\n            placeholder={I18n.t('Search for files')}\n            aria-label={I18n.t('Search for files')}\n            type=\"search\"\n            ref=\"searchTerm\"\n            role=\"textbox\"\n            className=\"ic-Input\"\n            defaultValue={this.props.query.search_term}\n          />\n          <button className=\"Button\" type=\"submit\">\n            <i className=\"icon-search\" />\n            <span className=\"screenreader-only\">{I18n.t('Search for files')}</span>\n          </button>\n        </form>\n\n        <div className=\"ef-header__secondary\">\n          <div className={buttonSetClasses}>\n            <a\n              ref=\"previewLink\"\n              href=\"#\"\n              onClick={!selectedItemIsFolder ? preventDefault(() => this.openPreview()) : () => {}}\n              className={viewBtnClasses}\n              title={label}\n              role=\"button\"\n              aria-label={label}\n              data-tooltip=\"\"\n              disabled={!this.showingButtons || selectedItemIsFolder}\n              tabIndex={selectedItemIsFolder ? -1 : 0}\n            >\n              <i className=\"icon-eye\" />\n            </a>\n\n            {this.renderRestrictedAccessButtons(\n              canManage && this.props.userCanRestrictFilesForContext\n            )}\n            {this.renderDownloadButton()}\n            {this.renderCopyCourseButton(canManage)}\n            {this.renderManageUsageRightsButton(canManage)}\n            {this.renderDeleteButton(canManage)}\n          </div>\n          <span className=\"ef-selected-count hidden-tablet hidden-phone\">\n            {I18n.t(\n              {one: '%{count} item selected', other: '%{count} items selected'},\n              {count: this.props.selectedItems.length}\n            )}\n          </span>\n          {this.renderUploadAddFolderButtons(canManage)}\n        </div>\n      </header>\n    )\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport page from 'page'\nimport FilesApp from 'compiled/react_files/components/FilesApp'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport I18n from 'i18n!react_files'\nimport Breadcrumbs from './Breadcrumbs'\nimport FolderTree from './FolderTree'\nimport FilesUsage from './FilesUsage'\nimport Toolbar from './Toolbar'\n\nFilesApp.previewItem = function(item) {\n  this.clearSelectedItems(() => {\n    this.toggleItemSelected(item, null, () => {\n      const queryString = $.param(this.getPreviewQuery())\n      page(`${this.getPreviewRoute()}?${queryString}`)\n    })\n  })\n}\n\nFilesApp.getPreviewRoute = function() {\n  if (this.props.query && this.props.query.search_term) {\n    return '/search'\n  } else if (this.props.splat) {\n    return `/folder/${this.props.splat}`\n  } else {\n    return ''\n  }\n}\n\nFilesApp.render = function() {\n  let contextType\n  let contextId\n\n  // when showing a folder\n  if (this.state.currentFolder) {\n    contextType = `${this.state.currentFolder.get('context_type').toLowerCase()}s`\n    contextId = this.state.currentFolder.get('context_id')\n  } else {\n    // when showing search results\n    contextType = filesEnv.contextType\n    contextId = filesEnv.contextId\n  }\n\n  const userCanManageFilesForContext = filesEnv.userHasPermission(\n    {contextType, contextId},\n    'manage_files'\n  )\n  const userCanRestrictFilesForContext = userCanManageFilesForContext && contextType !== 'groups'\n  const usageRightsRequiredForContext = filesEnv.contextsDictionary[`${contextType}_${contextId}`]\n    ? filesEnv.contextsDictionary[`${contextType}_${contextId}`].usage_rights_required\n    : false\n  const externalToolsForContext = filesEnv.contextFor({contextType, contextId})\n    ? filesEnv.contextFor({contextType, contextId}).file_menu_tools\n    : []\n  const indexExternalToolsForContext = filesEnv.contextFor({contextType, contextId})\n    ? filesEnv.contextFor({contextType, contextId}).file_index_menu_tools\n    : []\n\n  return (\n    <div>\n      {/* For whatever reason, VO in Safari didn't like just the h1 tag.\n            Sometimes it worked, others it didn't, this makes it work always */}\n      <header>\n        <h1 className=\"screenreader-only\">{I18n.t('Files')}</h1>\n      </header>\n      <div className=\"ic-app-nav-toggle-and-crumbs ic-app-nav-toggle-and-crumbs--files no-print\">\n        <button\n          className=\"Button Button--link ic-app-course-nav-toggle\"\n          type=\"button\"\n          id=\"courseMenuToggle\"\n          title={I18n.t('Show and hide courses menu')}\n          aria-hidden\n        >\n          <i className=\"icon-hamburger\" aria-hidden=\"true\" />\n        </button>\n        <div className=\"TutorialToggleHolder\" />\n      </div>\n      <div className=\"ic-app-crumbs\">\n        <Breadcrumbs\n          rootTillCurrentFolder={this.state.rootTillCurrentFolder}\n          showingSearchResults={this.state.showingSearchResults}\n          query={this.props.query}\n          contextAssetString={this.props.contextAssetString}\n        />\n      </div>\n      <Toolbar\n        currentFolder={this.state.currentFolder}\n        query={this.props.query}\n        selectedItems={this.state.selectedItems}\n        clearSelectedItems={this.clearSelectedItems}\n        onMove={this.onMove}\n        contextType={contextType}\n        contextId={contextId}\n        userCanManageFilesForContext={userCanManageFilesForContext}\n        usageRightsRequiredForContext={usageRightsRequiredForContext}\n        userCanRestrictFilesForContext={userCanRestrictFilesForContext}\n        indexExternalToolsForContext={indexExternalToolsForContext}\n        getPreviewQuery={this.getPreviewQuery}\n        getPreviewRoute={this.getPreviewRoute}\n        modalOptions={{\n          isOpen: this.state.showingModal,\n          openModal: this.openModal,\n          closeModal: this.closeModal\n        }}\n        showingSearchResults={this.state.showingSearchResults}\n      />\n      <div className=\"ef-main\">\n        <aside\n          className=\"visible-desktop ef-folder-content\"\n          role=\"region\"\n          aria-label={I18n.t('Folder Browsing Tree')}\n        >\n          <FolderTree\n            rootTillCurrentFolder={this.state.rootTillCurrentFolder}\n            rootFoldersToShow={filesEnv.rootFolders}\n            dndOptions={{\n              onItemDragEnterOrOver: this.onItemDragEnterOrOver,\n              onItemDragLeaveOrEnd: this.onItemDragLeaveOrEnd,\n              onItemDrop: this.onItemDrop\n            }}\n          />\n        </aside>\n        <div className=\"ef-directory\" role=\"region\" aria-label={I18n.t('File List')}>\n          {React.cloneElement(this.props.children, {\n            key: this.state.key,\n            pathname: this.props.pathname,\n            splat: this.props.splat,\n            query: this.props.query,\n            params: this.props.params,\n            onResolvePath: this.onResolvePath,\n            currentFolder: this.state.currentFolder,\n            contextType,\n            contextId,\n            selectedItems: this.state.selectedItems,\n            toggleItemSelected: this.toggleItemSelected,\n            toggleAllSelected: this.toggleAllSelected,\n            areAllItemsSelected: this.areAllItemsSelected,\n            userCanManageFilesForContext,\n            userCanRestrictFilesForContext,\n            usageRightsRequiredForContext,\n            externalToolsForContext,\n            previewItem: this.previewItem,\n            onMove: this.onMove,\n            modalOptions: {\n              isOpen: this.state.showingModal,\n              openModal: this.openModal,\n              closeModal: this.closeModal\n            },\n            dndOptions: {\n              onItemDragStart: this.onItemDragStart,\n              onItemDragEnterOrOver: this.onItemDragEnterOrOver,\n              onItemDragLeaveOrEnd: this.onItemDragLeaveOrEnd,\n              onItemDrop: this.onItemDrop\n            },\n            clearSelectedItems: this.clearSelectedItems\n          })}\n        </div>\n      </div>\n      <div className=\"ef-footer grid-row\">\n        {userCanManageFilesForContext && (\n          <div className=\"col-xs-6\">\n            <FilesUsage className=\"col-xs-4\" contextType={contextType} contextId={contextId} />\n          </div>\n        )}\n        {!filesEnv.showingAllContexts && (\n          <div className=\"col-xs-6\">\n            <div>\n              <a className=\"pull-right\" href=\"/files\">\n                {I18n.t('All My Files')}\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n      {this.state.showingModal && this.state.modalContents}\n    </div>\n  )\n}\n\nexport default createReactClass(FilesApp)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// TODO: don't use this and use scroll position to only load the pages we need\nexport default function getAllPages(modelOrCollection, onUpdate) {\n  if (modelOrCollection.loadedAll) return\n\n  const promise = modelOrCollection.fetch({page: 'next'})\n  promise.then(onUpdate)\n  return promise.pipe(() => getAllPages(modelOrCollection, onUpdate))\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// if you change which column to order by or wheather to to sort asc or desc,\n// use this to change the api url of the collection\nimport _ from 'underscore'\nimport {param} from 'jquery'\nimport deparam from '../../util/deparam'\n\nexport default function updateAPIQuerySortParams(collection, queryParams) {\n  const newParams = {\n    include: ['user', 'usage_rights', 'enhanced_preview_url', 'context_asset_string'],\n    per_page: 20,\n    sort: queryParams.sort || '',\n    order: queryParams.order || ''\n  }\n\n  const oldUrl = collection.url\n  const [baseUrl, search] = oldUrl.split('?')\n  const params = _.extend(deparam(search), newParams)\n  const newUrl = `${baseUrl}?${param(params)}`\n  collection.url = newUrl\n  if (newUrl !== oldUrl && !collection.loadedAll) return collection.reset()\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport page from 'page'\nimport _ from 'underscore'\nimport I18n from 'i18n!react_files'\nimport filesEnv from '../modules/filesEnv'\nimport getAllPages from '../utils/getAllPages'\nimport updateAPIQuerySortParams from '../utils/updateAPIQuerySortParams'\nimport Folder from '../../models/Folder'\n\nconst LEADING_SLASH_TILL_BUT_NOT_INCLUDING_NEXT_SLASH = /^\\/[^\\/]*/\n\nexport default {\n  displayName: 'ShowFolder',\n\n  debouncedForceUpdate: _.debounce(function() {\n    if (this.isMounted()) this.forceUpdate()\n  }, 0),\n\n  previousIdentifier: '',\n\n  registerListeners(props) {\n    if (!props.currentFolder) return\n    props.currentFolder.folders.on('all', this.debouncedForceUpdate, this)\n    props.currentFolder.files.on('all', this.debouncedForceUpdate, this)\n  },\n\n  unregisterListeners() {\n    // Ensure that we clean up any dangling references when the component is destroyed.\n    this.props.currentFolder && this.props.currentFolder.off(null, null, this)\n  },\n\n  getCurrentFolder(options = {}) {\n    let contextId, contextType\n    let path = `/${options.splat || ''}`\n\n    if (filesEnv.showingAllContexts) {\n      const pluralAssetString = path.split('/')[1]\n      const context = filesEnv.contextsDictionary[pluralAssetString] || filesEnv.contexts[0]\n      ;({contextType, contextId} = context)\n      path = path.replace(LEADING_SLASH_TILL_BUT_NOT_INCLUDING_NEXT_SLASH, '')\n    } else {\n      ;({contextType, contextId} = filesEnv)\n    }\n\n    return Folder.resolvePath(contextType, contextId, path).then(\n      rootTillCurrentFolder => {\n        const currentFolder = rootTillCurrentFolder[rootTillCurrentFolder.length - 1]\n        this.props.onResolvePath({\n          currentFolder,\n          rootTillCurrentFolder,\n          showingSearchResults: false\n        })\n\n        return [currentFolder.folders, currentFolder.files].forEach(collection => {\n          updateAPIQuerySortParams(collection, this.props.query)\n          // TODO: use scroll position to only fetch the pages we need\n          return getAllPages(collection, this.debouncedForceUpdate)\n        })\n      },\n      jqXHR => {\n        let parsedResponse\n        try {\n          parsedResponse = $.parseJSON(jqXHR.responseText)\n        } catch (error) {}\n        if (parsedResponse) {\n          this.setState({errorMessages: parsedResponse.errors})\n          if (this.props.query.preview != null) {\n            return this.redirectToCourseFiles()\n          }\n        }\n      }\n    )\n  },\n\n  componentWillMount() {\n    this.registerListeners(this.props)\n    this.getCurrentFolder(this.props)\n  },\n\n  componentWillUnmount() {\n    this.unregisterListeners()\n  },\n\n  componentDidUpdate() {\n    if (\n      this.props.currentFolder == null ||\n      (this.props.currentFolder && this.props.currentFolder.get('locked_for_user'))\n    ) {\n      return this.redirectToCourseFiles()\n    }\n  },\n\n  componentWillReceiveProps(newProps) {\n    this.unregisterListeners()\n    if (!newProps.currentFolder) return\n    if (this.props.pathname !== newProps.pathname) {\n      this.getCurrentFolder(newProps)\n    }\n    this.registerListeners(newProps)\n    ;[newProps.currentFolder.folders, newProps.currentFolder.files].forEach(collection => {\n      updateAPIQuerySortParams(collection, this.props.query)\n    })\n  },\n\n  redirectToCourseFiles() {\n    const isntPreviousFolder =\n      this.props.currentFolder != null &&\n      (this.previousIdentifier != null) !== this.props.currentFolder.get('id').toString()\n    const isPreviewForFile =\n      window.location.pathname !== filesEnv.baseUrl &&\n      this.props.query.preview != null &&\n      this.previousIdentifier !== this.props.query.preview\n\n    if (isntPreviousFolder || isPreviewForFile) {\n      this.previousIdentifier =\n        (this.props.currentFolder && this.props.currentFolder.get('id').toString()) ||\n        this.props.query.preview.toString()\n\n      if (!isPreviewForFile) {\n        const message = I18n.t('This folder is currently locked and unavailable to view.')\n        $.flashError(message)\n        $.screenReaderFlashMessage(message)\n      }\n\n      return setTimeout(() => page(`${filesEnv.baseUrl}?${$.param(this.props.query)}`), 0)\n    }\n  }\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"    \\\",\\\"file_preview_eedb43f2\\\":\\\" \\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"  \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"  \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"  \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"    \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"cy\\\":{\\\"close_d634289d\\\":\\\"Cau\\\",\\\"date_created_87e265bc\\\":\\\"Dyddiad Creu\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dyddiad Addasu\\\",\\\"download_c7ffdfb9\\\":\\\"Llwytho i Lawr\\\",\\\"file_not_found_9eec054c\\\":\\\"Heb ddod o hyd i ffeil\\\",\\\"file_preview_eedb43f2\\\":\\\"Rhagolwg or Ffeil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Gorchuddio Rhagolwg Ffeil\\\",\\\"info_8f47054a\\\":\\\"Gwybodaeth\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panel gwybodaeth yn ymddangos\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Panel gwybodaeth wedii guddio\\\",\\\"kind_7f0a88c4\\\":\\\"Caredig\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Addaswyd ddiwethaf gan\\\",\\\"name_1aed4a1b\\\":\\\"Enw\\\",\\\"size_b30e1077\\\":\\\"Maint\\\",\\\"status_e7fdbe06\\\":\\\"Statws\\\",\\\"usage_rights_f0960ad6\\\":\\\"Hawliau Defnyddio\\\",\\\"view_next_file_a8a4a885\\\":\\\"Gweld y ffeil nesaf\\\",\\\"view_previous_file_b846db4f\\\":\\\"Gweld y ffeil flaenorol\\\"},\\\"da\\\":{\\\"close_d634289d\\\":\\\"Luk\\\",\\\"date_created_87e265bc\\\":\\\"Oprettelsesdato\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dato modificeret\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"Fil ikke fundet\\\",\\\"file_preview_eedb43f2\\\":\\\"Filvisning\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Forhndsvisning af fil-overlay\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopanel vist\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopanel skjult\\\",\\\"kind_7f0a88c4\\\":\\\"Type\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sidst modificeret af\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"size_b30e1077\\\":\\\"Strrelse\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Brugsrettigheder\\\",\\\"view_next_file_a8a4a885\\\":\\\"Vis nste fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vis forrige fil\\\"},\\\"da-x-k12\\\":{\\\"close_d634289d\\\":\\\"Luk\\\",\\\"date_created_87e265bc\\\":\\\"Oprettelsesdato\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dato modificeret\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"Fil ikke fundet\\\",\\\"file_preview_eedb43f2\\\":\\\"Filvisning\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Forhndsvisning af fil-overlay\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopanel vist\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopanel skjult\\\",\\\"kind_7f0a88c4\\\":\\\"Type\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sidst modificeret af\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"size_b30e1077\\\":\\\"Strrelse\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Brugsrettigheder\\\",\\\"view_next_file_a8a4a885\\\":\\\"Vis nste fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vis forrige fil\\\"},\\\"de\\\":{\\\"close_d634289d\\\":\\\"Schlieen\\\",\\\"date_created_87e265bc\\\":\\\"Erstellungsdatum\\\",\\\"date_modified_e1c8ac8f\\\":\\\"nderungsdatum\\\",\\\"download_c7ffdfb9\\\":\\\"Herunterladen\\\",\\\"file_not_found_9eec054c\\\":\\\"Datei nicht gefunden\\\",\\\"file_preview_eedb43f2\\\":\\\"Dateivorschau\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"berblendung des Dateivorschaubilds\\\",\\\"info_8f47054a\\\":\\\"Informationen\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Schwarzes Brett gezeigt\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Schwarzes Brett ausgeblendet\\\",\\\"kind_7f0a88c4\\\":\\\"Art\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Zuletzt gendert von\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"size_b30e1077\\\":\\\"Gre\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Nutzungsrechte\\\",\\\"view_next_file_a8a4a885\\\":\\\"Nchste Datei anzeigen\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vorherige Dateien anzeigen\\\"},\\\"el\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"   \\\",\\\"file_preview_eedb43f2\\\":\\\" \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"    \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"    \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"  \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"en-AU\\\":{\\\"close_d634289d\\\":\\\"Close\\\",\\\"date_created_87e265bc\\\":\\\"Date Created\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Date Modified\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"File not found\\\",\\\"file_preview_eedb43f2\\\":\\\"File Preview\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"File Preview Overlay\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Info panel displayed\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Info panel hidden\\\",\\\"kind_7f0a88c4\\\":\\\"Kind\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Last Modified By\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"size_b30e1077\\\":\\\"Size\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Usage Rights\\\",\\\"view_next_file_a8a4a885\\\":\\\"View next file\\\",\\\"view_previous_file_b846db4f\\\":\\\"View previous file\\\"},\\\"en-CA\\\":{\\\"close_d634289d\\\":\\\"Close\\\",\\\"date_created_87e265bc\\\":\\\"Date Created\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Date Modified\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"File not found\\\",\\\"file_preview_eedb43f2\\\":\\\"File Preview\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"File Preview Overlay\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Info panel displayed\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Info panel hidden\\\",\\\"kind_7f0a88c4\\\":\\\"Kind\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Last Modified By\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"size_b30e1077\\\":\\\"Size\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Usage Rights\\\",\\\"view_next_file_a8a4a885\\\":\\\"View next file\\\",\\\"view_previous_file_b846db4f\\\":\\\"View previous file\\\"},\\\"en-GB\\\":{\\\"close_d634289d\\\":\\\"Close\\\",\\\"date_created_87e265bc\\\":\\\"Date created\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Date modified\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"File not found\\\",\\\"file_preview_eedb43f2\\\":\\\"File preview\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"File Preview Overlay\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Info panel displayed\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Info panel hidden\\\",\\\"kind_7f0a88c4\\\":\\\"Kind\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Last Modified by\\\",\\\"name_1aed4a1b\\\":\\\"Name\\\",\\\"size_b30e1077\\\":\\\"Size\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Usage rights\\\",\\\"view_next_file_a8a4a885\\\":\\\"View next file\\\",\\\"view_previous_file_b846db4f\\\":\\\"View previous file\\\"},\\\"es\\\":{\\\"close_d634289d\\\":\\\"Cerrar\\\",\\\"date_created_87e265bc\\\":\\\"Fecha de creacin\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Fecha de modificacin\\\",\\\"download_c7ffdfb9\\\":\\\"Descargar\\\",\\\"file_not_found_9eec054c\\\":\\\"Archivo no encontrado\\\",\\\"file_preview_eedb43f2\\\":\\\"Vista previa del archivo\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Superposicin de vista previa del archivo\\\",\\\"info_8f47054a\\\":\\\"Informacin\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Se muestra el panel de informacin\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"El panel de informacin est escondido\\\",\\\"kind_7f0a88c4\\\":\\\"Tipo\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"ltima modificacin hecha por\\\",\\\"name_1aed4a1b\\\":\\\"Nombre\\\",\\\"size_b30e1077\\\":\\\"Tamao\\\",\\\"status_e7fdbe06\\\":\\\"Estado\\\",\\\"usage_rights_f0960ad6\\\":\\\"Derechos de uso\\\",\\\"view_next_file_a8a4a885\\\":\\\"Ver el archivo siguiente\\\",\\\"view_previous_file_b846db4f\\\":\\\"Ver el archivo anterior\\\"},\\\"fa\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\"  \\\",\\\"date_modified_e1c8ac8f\\\":\\\"  \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"  \\\",\\\"file_preview_eedb43f2\\\":\\\"  \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"    \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"    \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"  \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"fi\\\":{\\\"close_d634289d\\\":\\\"Sulje\\\",\\\"date_created_87e265bc\\\":\\\"Luontipiv\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Muokkauspiv\\\",\\\"download_c7ffdfb9\\\":\\\"Lataa\\\",\\\"file_not_found_9eec054c\\\":\\\"Tiedostoa ei lytynyt\\\",\\\"file_preview_eedb43f2\\\":\\\"Tiedoston esikatselu\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Tiedoston esikatselun pllekkisyys\\\",\\\"info_8f47054a\\\":\\\"Tiedot\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Tietopaneeli nkyviss\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Tietopaneeli piiotettu\\\",\\\"kind_7f0a88c4\\\":\\\"Tyyppi\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Viimeinen muokkaaja\\\",\\\"name_1aed4a1b\\\":\\\"Nimi\\\",\\\"size_b30e1077\\\":\\\"Koko\\\",\\\"status_e7fdbe06\\\":\\\"Tila\\\",\\\"usage_rights_f0960ad6\\\":\\\"Kyttoikeudet\\\",\\\"view_next_file_a8a4a885\\\":\\\"Nyt seuraava tiedosto\\\",\\\"view_previous_file_b846db4f\\\":\\\"Nyt edellinen tiedosto\\\"},\\\"fr\\\":{\\\"close_d634289d\\\":\\\"Fermer\\\",\\\"date_created_87e265bc\\\":\\\"Date de cration\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Date de modification\\\",\\\"download_c7ffdfb9\\\":\\\"Tlcharger\\\",\\\"file_not_found_9eec054c\\\":\\\"Fichier introuvable\\\",\\\"file_preview_eedb43f2\\\":\\\"Aperu du fichier\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Aperu de fichier en surimpression\\\",\\\"info_8f47054a\\\":\\\"Informations\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panneau d'informations affich\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Panneau d'informations masqu\\\",\\\"kind_7f0a88c4\\\":\\\"Type\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Dernire modification effectue par\\\",\\\"name_1aed4a1b\\\":\\\"Nom\\\",\\\"size_b30e1077\\\":\\\"Taille\\\",\\\"status_e7fdbe06\\\":\\\"Statut\\\",\\\"usage_rights_f0960ad6\\\":\\\"Droits dutilisation\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visualiser le fichier suivant\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visualiser le fichier prcdent\\\"},\\\"fr-CA\\\":{\\\"close_d634289d\\\":\\\"Fermer\\\",\\\"date_created_87e265bc\\\":\\\"Date cre\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Date modifie\\\",\\\"download_c7ffdfb9\\\":\\\"Tlcharger\\\",\\\"file_not_found_9eec054c\\\":\\\"Fichier introuvable\\\",\\\"file_preview_eedb43f2\\\":\\\"Aperu du fichier\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Superposition de prvisualisation du fichier\\\",\\\"info_8f47054a\\\":\\\"Informations\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panneau d'informations affich\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Panneau d'informations masqu\\\",\\\"kind_7f0a88c4\\\":\\\"Type\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Dernire modification effectue par\\\",\\\"name_1aed4a1b\\\":\\\"Nom\\\",\\\"size_b30e1077\\\":\\\"Taille\\\",\\\"status_e7fdbe06\\\":\\\"Statut\\\",\\\"usage_rights_f0960ad6\\\":\\\"Droits dutilisation\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visualiser le fichier suivant\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visualiser le fichier prcdent\\\"},\\\"he\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"  \\\",\\\"file_preview_eedb43f2\\\":\\\"   \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"  \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"  \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\" \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"ht\\\":{\\\"close_d634289d\\\":\\\"Fmen\\\",\\\"date_created_87e265bc\\\":\\\"Dat Kreye\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dat Modifye\\\",\\\"download_c7ffdfb9\\\":\\\"Telechaje\\\",\\\"file_not_found_9eec054c\\\":\\\"Fichye entwouvab\\\",\\\"file_preview_eedb43f2\\\":\\\"Apsi Fichye\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Apsi Fichye Sippoze\\\",\\\"info_8f47054a\\\":\\\"Enfo\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panl enfmasyon afiche\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Panl enfmasyon kache\\\",\\\"kind_7f0a88c4\\\":\\\"Janti\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Dnye Modifikasyon Pa:\\\",\\\"name_1aed4a1b\\\":\\\"Non\\\",\\\"size_b30e1077\\\":\\\"Dimansyon\\\",\\\"status_e7fdbe06\\\":\\\"Estati\\\",\\\"usage_rights_f0960ad6\\\":\\\"Dwa Itilizasyon\\\",\\\"view_next_file_a8a4a885\\\":\\\"Afichaj pwochen fichye\\\",\\\"view_previous_file_b846db4f\\\":\\\"Afichaj fichye anvan\\\"},\\\"hu\\\":{\\\"close_d634289d\\\":\\\"Bezrs\\\",\\\"date_created_87e265bc\\\":\\\"Ltrehozs dtuma\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Mdosts dtuma\\\",\\\"download_c7ffdfb9\\\":\\\"Letlts\\\",\\\"file_not_found_9eec054c\\\":\\\"Fjl nem tallhat\\\",\\\"file_preview_eedb43f2\\\":\\\"Fjl elnzete\\\",\\\"info_8f47054a\\\":\\\"Inf\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopanel megjelentve\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopanel elrejtve\\\",\\\"kind_7f0a88c4\\\":\\\"Tpus\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Utoljra mdostotta\\\",\\\"name_1aed4a1b\\\":\\\"Nv\\\",\\\"size_b30e1077\\\":\\\"Mret\\\",\\\"status_e7fdbe06\\\":\\\"Sttusz\\\",\\\"usage_rights_f0960ad6\\\":\\\"Felhasznlsi jogok\\\",\\\"view_next_file_a8a4a885\\\":\\\"Kvetkez fjl megtekintse\\\",\\\"view_previous_file_b846db4f\\\":\\\"Elz fjl megtekintse\\\"},\\\"hy\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"  \\\",\\\"file_preview_eedb43f2\\\":\\\"   \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"  \\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"     \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"is\\\":{\\\"close_d634289d\\\":\\\"Loka\\\",\\\"date_created_87e265bc\\\":\\\"Stofndagur\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Breytingadagur\\\",\\\"download_c7ffdfb9\\\":\\\"Hlaa niur\\\",\\\"file_not_found_9eec054c\\\":\\\"Skr fannst ekki\\\",\\\"file_preview_eedb43f2\\\":\\\"Forskoun skrr\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Forskoun skrar yfirlgn\\\",\\\"info_8f47054a\\\":\\\"Upplsingar\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Upplsingabor snt\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Upplsingabor fali\\\",\\\"kind_7f0a88c4\\\":\\\"Tegund\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sast breytt af\\\",\\\"name_1aed4a1b\\\":\\\"Nafn\\\",\\\"size_b30e1077\\\":\\\"Str\\\",\\\"status_e7fdbe06\\\":\\\"Staa\\\",\\\"usage_rights_f0960ad6\\\":\\\"Notkunarrttindi\\\",\\\"view_next_file_a8a4a885\\\":\\\"Skoa nstu skr\\\",\\\"view_previous_file_b846db4f\\\":\\\"Skoa fyrri skr\\\"},\\\"it\\\":{\\\"close_d634289d\\\":\\\"Chiudi\\\",\\\"date_created_87e265bc\\\":\\\"Data creazione\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Data di modifica\\\",\\\"download_c7ffdfb9\\\":\\\"Download\\\",\\\"file_not_found_9eec054c\\\":\\\"File non trovato\\\",\\\"file_preview_eedb43f2\\\":\\\"Anteprima file\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Sovrimpressione anteprima file\\\",\\\"info_8f47054a\\\":\\\"Informazioni\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panello informazioni visualizzato\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Pannello informazioni nascosto\\\",\\\"kind_7f0a88c4\\\":\\\"Tipo\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Ultima modifica da\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"size_b30e1077\\\":\\\"Dimensioni\\\",\\\"status_e7fdbe06\\\":\\\"Stato\\\",\\\"usage_rights_f0960ad6\\\":\\\"Diritti di utilizzo\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visualizza file successivo\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visualizza file precedente\\\"},\\\"ja\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\"\\\",\\\"date_modified_e1c8ac8f\\\":\\\"\\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"\\\",\\\"file_preview_eedb43f2\\\":\\\"\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"\\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"\\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\"\\\",\\\"view_next_file_a8a4a885\\\":\\\"\\\",\\\"view_previous_file_b846db4f\\\":\\\"\\\"},\\\"ko\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\"\\\",\\\"date_modified_e1c8ac8f\\\":\\\"\\\",\\\"file_preview_eedb43f2\\\":\\\"  \\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"  \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\"},\\\"mi\\\":{\\\"close_d634289d\\\":\\\"Katia\\\",\\\"date_created_87e265bc\\\":\\\"R I Waihangatia\\\",\\\"date_modified_e1c8ac8f\\\":\\\"R I Whakaktia\\\",\\\"download_c7ffdfb9\\\":\\\"Tikiake\\\",\\\"file_not_found_9eec054c\\\":\\\"E kore e kitea te knae\\\",\\\"file_preview_eedb43f2\\\":\\\"Arokitenga Knae\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Arokite Knae Whakakrua\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Whakaaturanga rp Info\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Huna rp Info\\\",\\\"kind_7f0a88c4\\\":\\\"atawhai\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Whakaktia Whakamutunga Na\\\",\\\"name_1aed4a1b\\\":\\\"Ingoa\\\",\\\"size_b30e1077\\\":\\\"Rahi\\\",\\\"status_e7fdbe06\\\":\\\"tnga\\\",\\\"usage_rights_f0960ad6\\\":\\\"Raihana Tika\\\",\\\"view_next_file_a8a4a885\\\":\\\"Tirohia knae muri\\\",\\\"view_previous_file_b846db4f\\\":\\\"Tirohia te knae o mua\\\"},\\\"nb\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"date_created_87e265bc\\\":\\\"Dato opprettet\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dato redigert\\\",\\\"download_c7ffdfb9\\\":\\\"Last ned\\\",\\\"file_not_found_9eec054c\\\":\\\"Finner ikke filen\\\",\\\"file_preview_eedb43f2\\\":\\\"Forhndsvis fil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Forhndsvisning av filoverlegg\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Info-panel vises\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Info-panel skjult\\\",\\\"kind_7f0a88c4\\\":\\\"Slag\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sist redigert av\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"size_b30e1077\\\":\\\"Strrelse\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Brukerrettigheter:\\\",\\\"view_next_file_a8a4a885\\\":\\\"Vis neste fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vis forrige fil\\\"},\\\"nb-x-k12\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"date_created_87e265bc\\\":\\\"Dato opprettet\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dato redigert\\\",\\\"download_c7ffdfb9\\\":\\\"Last ned\\\",\\\"file_not_found_9eec054c\\\":\\\"Finner ikke filen\\\",\\\"file_preview_eedb43f2\\\":\\\"Forhndsvis fil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Forhndsvisning av filoverlegg\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Info-panel vises\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Info-panel skjult\\\",\\\"kind_7f0a88c4\\\":\\\"Slag\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sist redigert av\\\",\\\"name_1aed4a1b\\\":\\\"Navn\\\",\\\"size_b30e1077\\\":\\\"Strrelse\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Brukerrettigheter:\\\",\\\"view_next_file_a8a4a885\\\":\\\"Vis neste fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vis forrige fil\\\"},\\\"nl\\\":{\\\"close_d634289d\\\":\\\"Sluiten\\\",\\\"date_created_87e265bc\\\":\\\"Datum aangemaakt\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Datum gewijzigd\\\",\\\"download_c7ffdfb9\\\":\\\"Downloaden\\\",\\\"file_not_found_9eec054c\\\":\\\"Functie niet gevonden\\\",\\\"file_preview_eedb43f2\\\":\\\"Bestandsvoorbeeld\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Overlay voorbeeldweergave van bestand\\\",\\\"info_8f47054a\\\":\\\"Informatie\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopaneel weergegeven\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopaneel verborgen\\\",\\\"kind_7f0a88c4\\\":\\\"Soort\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Laatst gewijzigd door\\\",\\\"name_1aed4a1b\\\":\\\"Naam\\\",\\\"size_b30e1077\\\":\\\"Grootte\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Gebruiksrechten\\\",\\\"view_next_file_a8a4a885\\\":\\\"Volgende bestand weergeven\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vorige bestand weergeven\\\"},\\\"nn\\\":{\\\"close_d634289d\\\":\\\"Lukk\\\",\\\"date_created_87e265bc\\\":\\\"Dato oppretta\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Dato endra\\\",\\\"download_c7ffdfb9\\\":\\\"Last ned\\\",\\\"file_not_found_9eec054c\\\":\\\"Finn ikkje fil\\\",\\\"file_preview_eedb43f2\\\":\\\"Frehandsvising av fil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Lag med frehandsvising av fil\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Informasjonspanel viser\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Informasjonspanel skjult\\\",\\\"kind_7f0a88c4\\\":\\\"Type\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Sist endra av\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"size_b30e1077\\\":\\\"Storleik\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Bruksrettar\\\",\\\"view_next_file_a8a4a885\\\":\\\"Vis neste fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Vis frre fil\\\"},\\\"pl\\\":{\\\"close_d634289d\\\":\\\"Zamknij\\\",\\\"date_created_87e265bc\\\":\\\"Data utworzenia\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Data modyfikacji\\\",\\\"download_c7ffdfb9\\\":\\\"Pobierz\\\",\\\"file_not_found_9eec054c\\\":\\\"Nie znaleziono pliku\\\",\\\"file_preview_eedb43f2\\\":\\\"Podgld pliku\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Nakadka podgldu pliku\\\",\\\"info_8f47054a\\\":\\\"Informacje\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Panel informacyjny wywietlony\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Panel informacyjny ukryty\\\",\\\"kind_7f0a88c4\\\":\\\"Typ\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Ostatnio zmodyfikowane przez\\\",\\\"name_1aed4a1b\\\":\\\"Nazwa\\\",\\\"size_b30e1077\\\":\\\"Rozmiar\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Prawa uytkowania\\\",\\\"view_next_file_a8a4a885\\\":\\\"Wywietl kolejny plik\\\",\\\"view_previous_file_b846db4f\\\":\\\"Wywietl poprzedni plik\\\"},\\\"pt\\\":{\\\"close_d634289d\\\":\\\"Fechar\\\",\\\"date_created_87e265bc\\\":\\\"Data de criao\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Data de modificao\\\",\\\"download_c7ffdfb9\\\":\\\"Descarregar\\\",\\\"file_not_found_9eec054c\\\":\\\"Ficheiro no encontrado\\\",\\\"file_preview_eedb43f2\\\":\\\"Pr-visualizao do ficheiro\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Sobreposio de visualizao de arquivo\\\",\\\"info_8f47054a\\\":\\\"Informaes\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Painel de Informao apresentada\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Painel de Informao escondido\\\",\\\"kind_7f0a88c4\\\":\\\"Tipo\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"ltima modificao por\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"size_b30e1077\\\":\\\"Tamanho\\\",\\\"status_e7fdbe06\\\":\\\"Estado\\\",\\\"usage_rights_f0960ad6\\\":\\\"Direitos de utilizao\\\",\\\"view_next_file_a8a4a885\\\":\\\"Ver o prximo ficheiro\\\",\\\"view_previous_file_b846db4f\\\":\\\"Exibir ficheiros anteriores\\\"},\\\"pt-BR\\\":{\\\"close_d634289d\\\":\\\"Fechar\\\",\\\"date_created_87e265bc\\\":\\\"Data criada\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Data de modificao\\\",\\\"download_c7ffdfb9\\\":\\\"Baixar\\\",\\\"file_not_found_9eec054c\\\":\\\"Arquivo no localizado\\\",\\\"file_preview_eedb43f2\\\":\\\"Pr-visualizao do arquivo\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Sobreposio da pr-visualizao do arquivo\\\",\\\"info_8f47054a\\\":\\\"Informaes\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Painel de informaes exibido\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Painel de informaes escondido\\\",\\\"kind_7f0a88c4\\\":\\\"Tipo\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"ltima Modificao por\\\",\\\"name_1aed4a1b\\\":\\\"Nome\\\",\\\"size_b30e1077\\\":\\\"Tamanho\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Direitos de uso\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visualizar prximo arquivo\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visualizar arquivo anterior\\\"},\\\"ru\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"  \\\",\\\"file_preview_eedb43f2\\\":\\\"  \\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"   \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"  \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"  \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"    \\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\"  \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"sl\\\":{\\\"close_d634289d\\\":\\\"Zapri\\\",\\\"date_created_87e265bc\\\":\\\"Datum ustvarjanja\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Datum je spremenjen.\\\",\\\"download_c7ffdfb9\\\":\\\"Prenesi\\\",\\\"file_not_found_9eec054c\\\":\\\"Datoteke ni bilo mogoe najti.\\\",\\\"file_preview_eedb43f2\\\":\\\"Predogled datoteke\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"Prekrivanje predogleda datoteke\\\",\\\"info_8f47054a\\\":\\\"Informacije\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Ploa z informacijami je prikazana.\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Ploa z informacijami je skrita.\\\",\\\"kind_7f0a88c4\\\":\\\"Vrsta\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Nazadnje prilagodil:\\\",\\\"name_1aed4a1b\\\":\\\"Ime\\\",\\\"size_b30e1077\\\":\\\"Velikost\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Pravice uporabe\\\",\\\"view_next_file_a8a4a885\\\":\\\"Ogled naslednje datoteke\\\",\\\"view_previous_file_b846db4f\\\":\\\"Ogled prejnje datoteke\\\"},\\\"sv\\\":{\\\"close_d634289d\\\":\\\"Stng\\\",\\\"date_created_87e265bc\\\":\\\"Skapad den\\\",\\\"date_modified_e1c8ac8f\\\":\\\"ndrad den\\\",\\\"download_c7ffdfb9\\\":\\\"Ladda ned\\\",\\\"file_not_found_9eec054c\\\":\\\"Filen hittades inte\\\",\\\"file_preview_eedb43f2\\\":\\\"Frhandsvisning av fil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"verlgg fr frhandsvisning av fil\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopanel visas\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopanel dold\\\",\\\"kind_7f0a88c4\\\":\\\"Sort\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Senast ndrad av\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"size_b30e1077\\\":\\\"Storlek\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Anvndningsrttigheter\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visa nsta fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visa fregende fil\\\"},\\\"sv-x-k12\\\":{\\\"close_d634289d\\\":\\\"Stng\\\",\\\"date_created_87e265bc\\\":\\\"Skapad den\\\",\\\"date_modified_e1c8ac8f\\\":\\\"ndrad den\\\",\\\"download_c7ffdfb9\\\":\\\"Ladda ned\\\",\\\"file_not_found_9eec054c\\\":\\\"Filen hittades inte\\\",\\\"file_preview_eedb43f2\\\":\\\"Frhandsvisning av fil\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"verlgg fr frhandsvisning av fil\\\",\\\"info_8f47054a\\\":\\\"Info\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Infopanel visas\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Infopanel dold\\\",\\\"kind_7f0a88c4\\\":\\\"Sort\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Senast ndrad av\\\",\\\"name_1aed4a1b\\\":\\\"Namn\\\",\\\"size_b30e1077\\\":\\\"Storlek\\\",\\\"status_e7fdbe06\\\":\\\"Status\\\",\\\"usage_rights_f0960ad6\\\":\\\"Anvndningsrttigheter\\\",\\\"view_next_file_a8a4a885\\\":\\\"Visa nsta fil\\\",\\\"view_previous_file_b846db4f\\\":\\\"Visa fregende fil\\\"},\\\"tr\\\":{\\\"close_d634289d\\\":\\\"Kapat\\\",\\\"date_created_87e265bc\\\":\\\"Oluturulma Tarihi\\\",\\\"date_modified_e1c8ac8f\\\":\\\"Deitirilme Tarihi\\\",\\\"download_c7ffdfb9\\\":\\\"ndir\\\",\\\"file_not_found_9eec054c\\\":\\\"Dosya bulunamad\\\",\\\"file_preview_eedb43f2\\\":\\\"Dosya n izleme\\\",\\\"info_8f47054a\\\":\\\"Bilgi\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"Bilgi Paneli gsteriliyor\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"Bilgi Paneli gizli\\\",\\\"kind_7f0a88c4\\\":\\\"Tr\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"Son Dzenleme\\\",\\\"name_1aed4a1b\\\":\\\"sim\\\",\\\"size_b30e1077\\\":\\\"Boyut\\\",\\\"status_e7fdbe06\\\":\\\"Durum\\\",\\\"usage_rights_f0960ad6\\\":\\\"Kullanm artlar\\\",\\\"view_next_file_a8a4a885\\\":\\\"Sonraki dosyay gr\\\",\\\"view_previous_file_b846db4f\\\":\\\"nceki dosyay gr\\\"},\\\"uk\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\" \\\",\\\"date_modified_e1c8ac8f\\\":\\\" \\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"  \\\",\\\"file_preview_eedb43f2\\\":\\\"  \\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"  \\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"  \\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\" \\\",\\\"name_1aed4a1b\\\":\\\"'\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\" \\\",\\\"view_next_file_a8a4a885\\\":\\\"  \\\",\\\"view_previous_file_b846db4f\\\":\\\"  \\\"},\\\"zh-Hans\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\"\\\",\\\"date_modified_e1c8ac8f\\\":\\\"\\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"\\\",\\\"file_preview_eedb43f2\\\":\\\"\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"\\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"\\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\"\\\",\\\"view_next_file_a8a4a885\\\":\\\"\\\",\\\"view_previous_file_b846db4f\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"close_d634289d\\\":\\\"\\\",\\\"date_created_87e265bc\\\":\\\"\\\",\\\"date_modified_e1c8ac8f\\\":\\\"\\\",\\\"download_c7ffdfb9\\\":\\\"\\\",\\\"file_not_found_9eec054c\\\":\\\"\\\",\\\"file_preview_eedb43f2\\\":\\\"\\\",\\\"file_preview_overlay_87f7e5f\\\":\\\"\\\",\\\"info_8f47054a\\\":\\\"\\\",\\\"info_panel_displayed_51d481cc\\\":\\\"\\\",\\\"info_panel_hidden_bf7c3b7b\\\":\\\"\\\",\\\"kind_7f0a88c4\\\":\\\"\\\",\\\"last_modified_by_ca4bb5e1\\\":\\\"\\\",\\\"name_1aed4a1b\\\":\\\"\\\",\\\"size_b30e1077\\\":\\\"\\\",\\\"status_e7fdbe06\\\":\\\"\\\",\\\"usage_rights_f0960ad6\\\":\\\"\\\",\\\"view_next_file_a8a4a885\\\":\\\"\\\",\\\"view_previous_file_b846db4f\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/file_preview';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('file_preview');\n  ","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\".   \\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\"  %{from_date}  %{until_date}\\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"cy\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Wedi cuddio. Ar gael gyda dolen\\\",\\\"published_status\\\":\\\"Wedi cyhoeddi\\\",\\\"restricted_status\\\":\\\"Ar gael o %{from_date} tan %{until_date}\\\",\\\"unpublished_status\\\":\\\"Heb gyhoeddi\\\"}},\\\"da\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skjult. Tilgngelig med et link\\\",\\\"published_status\\\":\\\"Offentliggjort\\\",\\\"restricted_status\\\":\\\"Tilgngelig fra %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ikke offentliggjort\\\"}},\\\"da-x-k12\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skjult. Tilgngelig med et link\\\",\\\"published_status\\\":\\\"Offentliggjort\\\",\\\"restricted_status\\\":\\\"Tilgngelig fra %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ikke offentliggjort\\\"}},\\\"de\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Ausgeblendet. ber einen Link verfgbar\\\",\\\"published_status\\\":\\\"Verffentlicht\\\",\\\"restricted_status\\\":\\\"Verfgbar von %{from_date} bis %{until_date}\\\",\\\"unpublished_status\\\":\\\"Nicht verffentlicht\\\"}},\\\"el\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"\\\\u003cmrk mid=\\\\\\\"6970\\\\\\\" mtype=\\\\\\\"seg\\\\\\\"\\\\u003e.\\\\u003c/mrk\\\\u003e \\\\u003cmrk mid=\\\\\\\"6971\\\\\\\" mtype=\\\\\\\"seg\\\\\\\"\\\\u003e  \\\\u003c/mrk\\\\u003e\\\",\\\"published_status\\\":\\\"/\\\",\\\"restricted_status\\\":\\\"  %{from_date}  %{until_date}\\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"en-AU\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Hidden. Available with a link\\\",\\\"published_status\\\":\\\"Published\\\",\\\"restricted_status\\\":\\\"Available from %{from_date} until %{until_date}\\\",\\\"unpublished_status\\\":\\\"Unpublished\\\"}},\\\"en-CA\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Hidden. Available with a link\\\",\\\"published_status\\\":\\\"Published\\\",\\\"restricted_status\\\":\\\"Available from %{from_date} until %{until_date}\\\",\\\"unpublished_status\\\":\\\"Unpublished\\\"}},\\\"en-GB\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Hidden. Available with a link\\\",\\\"published_status\\\":\\\"Published\\\",\\\"restricted_status\\\":\\\"Available from %{from_date} until %{until_date}\\\",\\\"unpublished_status\\\":\\\"Unpublished\\\"}},\\\"es\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Oculto. Disponible con un vnculo\\\",\\\"published_status\\\":\\\"Publicado\\\",\\\"restricted_status\\\":\\\"Disponible desde el %{from_date} hasta el %{until_date}\\\",\\\"unpublished_status\\\":\\\"No publicado\\\"}},\\\"fa\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\".       \\\",\\\"published_status\\\":\\\" \\\",\\\"restricted_status\\\":\\\" %{from_date}  %{until_date}  \\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"fi\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Piilotettu. Saatavissa linkill\\\",\\\"published_status\\\":\\\"Julkaistu\\\",\\\"restricted_status\\\":\\\"Saatavissa lhtien %{from_date} asti %{until_date}\\\",\\\"unpublished_status\\\":\\\"Julkaisematon\\\"}},\\\"fr\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Masqu. Disponible via un lien\\\",\\\"published_status\\\":\\\"Publi\\\",\\\"restricted_status\\\":\\\"Disponible du %{from_date} au %{until_date}\\\",\\\"unpublished_status\\\":\\\"Non publi\\\"}},\\\"fr-CA\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Masqu. Disponible via un lien\\\",\\\"published_status\\\":\\\"Date de publication\\\",\\\"restricted_status\\\":\\\"Disponible du %{from_date} au %{until_date}\\\",\\\"unpublished_status\\\":\\\"Non publi\\\"}},\\\"he\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\".     .\\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\"  %{from_date}  %{until_date}\\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"ht\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Kache. Disponib avk yon lyen\\\",\\\"published_status\\\":\\\"Pibliye\\\",\\\"restricted_status\\\":\\\"Disponib depi %{from_date} rive %{until_date}\\\",\\\"unpublished_status\\\":\\\"Pa Pibliye\\\"}},\\\"hu\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Rejtett. Hivatkozssal elrhet\\\",\\\"published_status\\\":\\\"Publiklt\\\",\\\"restricted_status\\\":\\\"Elrhet ettl - eddig: %{from_date} - %{until_date}\\\",\\\"unpublished_status\\\":\\\"Nem publikus\\\"}},\\\"hy\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\":    \\\",\\\"published_status\\\":\\\" \\\",\\\"restricted_status\\\":\\\"  %{from_date}-  %{until_date}\\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"is\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Fali. Tiltkt me tengli\\\",\\\"published_status\\\":\\\"Birt\\\",\\\"restricted_status\\\":\\\"Tiltkt fr %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"birt\\\"}},\\\"it\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Nascosto. Disponibile con un link\\\",\\\"published_status\\\":\\\"Pubblicato\\\",\\\"restricted_status\\\":\\\"Disponibile dal %{from_date} fino al %{until_date}\\\",\\\"unpublished_status\\\":\\\"Non pubblicato\\\"}},\\\"ja\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"\\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\"%{from_date}  %{until_date} \\\",\\\"unpublished_status\\\":\\\"\\\"}},\\\"ko\\\":{\\\"file_status\\\":{\\\"published_status\\\":\\\"\\\",\\\"unpublished_status\\\":\\\"  \\\"}},\\\"mi\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Hunahuna. Wtea ki te hono\\\",\\\"published_status\\\":\\\"I whakaputaina\\\",\\\"restricted_status\\\":\\\"Wtea i %{from_date} noa %{until_date}\\\",\\\"unpublished_status\\\":\\\"Kaore i pnuitia\\\"}},\\\"nb\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skjult. Tilgjengelig med en lenke\\\",\\\"published_status\\\":\\\"Publisert\\\",\\\"restricted_status\\\":\\\"Tilgjengelig fra %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ikke publisert\\\"}},\\\"nb-x-k12\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skjult. Tilgjengelig med en lenke\\\",\\\"published_status\\\":\\\"Publisert\\\",\\\"restricted_status\\\":\\\"Tilgjengelig fra %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ikke publisert\\\"}},\\\"nl\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Verborgen. Beschikbaar met een koppeling\\\",\\\"published_status\\\":\\\"Gepubliceerd\\\",\\\"restricted_status\\\":\\\"Beschikbaar van %{from_date}tot en met %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ongepubliceerd\\\"}},\\\"nn\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skjult. Tilgjengeleg gjennom lenke\\\",\\\"published_status\\\":\\\"Publisert\\\",\\\"restricted_status\\\":\\\"Tilgjengeleg fr %{from_date} til %{until_date}\\\",\\\"unpublished_status\\\":\\\"Ikkje publisert\\\"}},\\\"pl\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Ukryte. Dostpne za pomoc cza\\\",\\\"published_status\\\":\\\"Opublikowano\\\",\\\"restricted_status\\\":\\\"Dostpne od %{from_date} do %{until_date}\\\",\\\"unpublished_status\\\":\\\"Nieopublikowano\\\"}},\\\"pt\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Oculto. Disponvel com uma ligao\\\",\\\"published_status\\\":\\\"Publicado\\\",\\\"restricted_status\\\":\\\"Disponvel de %{from_date} at %{until_date}\\\",\\\"unpublished_status\\\":\\\"Publicao anulada\\\"}},\\\"pt-BR\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Oculto. Disponvel em um link.\\\",\\\"published_status\\\":\\\"Publicado\\\",\\\"restricted_status\\\":\\\"Disponvel de %{from_date} at %{until_date}\\\",\\\"unpublished_status\\\":\\\"No publicado\\\"}},\\\"ru\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\".   \\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\"  %{from_date}  %{until_date}\\\",\\\"unpublished_status\\\":\\\" \\\"}},\\\"sl\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Skrito. Na voljo s povezavo.\\\",\\\"published_status\\\":\\\"Objavljeno\\\",\\\"restricted_status\\\":\\\"Na voljo od %{from_date} do %{until_date}\\\",\\\"unpublished_status\\\":\\\"Neobjavljeno\\\"}},\\\"sv\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Dold. Tillgnglig via lnk\\\",\\\"published_status\\\":\\\"Publicerad\\\",\\\"restricted_status\\\":\\\"Tillgnglig frn %{from_date} till %{until_date}\\\",\\\"unpublished_status\\\":\\\"Avpublicerad\\\"}},\\\"sv-x-k12\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Dold. Tillgnglig via lnk\\\",\\\"published_status\\\":\\\"Publicerad\\\",\\\"restricted_status\\\":\\\"Tillgnglig frn %{from_date} till %{until_date}\\\",\\\"unpublished_status\\\":\\\"Avpublicerad\\\"}},\\\"tr\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"Gizli. Bir balant ile kullanlabilir\\\",\\\"published_status\\\":\\\"Yaynland\\\",\\\"restricted_status\\\":\\\"%{from_date} tarihinden %{until_date} tarihine kadar geerli\\\",\\\"unpublished_status\\\":\\\"Yaynlanmad\\\"}},\\\"uk\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\".   \\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\"  %{from_date}  %{until_date}\\\",\\\"unpublished_status\\\":\\\"\\\"}},\\\"zh-Hans\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"\\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\" %{from_date}  %{until_date} \\\",\\\"unpublished_status\\\":\\\"\\\"}},\\\"zh-Hant\\\":{\\\"file_status\\\":{\\\"hidden_status\\\":\\\"\\\",\\\"published_status\\\":\\\"\\\",\\\"restricted_status\\\":\\\" %{from_date}  %{until_date} \\\",\\\"unpublished_status\\\":\\\"\\\"}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/file_status';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('file_status');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport I18n from 'i18n!file_preview'\nimport FriendlyDatetime from '../shared/FriendlyDatetime'\nimport friendlyBytes from 'compiled/util/friendlyBytes'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport getFileStatus from 'compiled/react_files/utils/getFileStatus'\nimport mimeClass from 'compiled/util/mimeClass'\n\nclass FilePreviewInfoPanel extends React.Component {\n  static displayName = 'FilePreviewInfoPanel'\n\n  static propTypes = {\n    displayedItem: customPropTypes.filesystemObject.isRequired,\n    usageRightsRequiredForContext: PropTypes.bool\n  }\n\n  render() {\n    return (\n      <div className=\"ef-file-preview-information-container\">\n        <table className=\"ef-file-preview-infotable\">\n          <tbody>\n            <tr>\n              <th scope=\"row\">{I18n.t('Name')}</th>\n              <td ref=\"displayName\">{this.props.displayedItem.displayName()}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">{I18n.t('Status')}</th>\n              <td ref=\"status\">{getFileStatus(this.props.displayedItem)}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">{I18n.t('Kind')}</th>\n              <td ref=\"contentType\">\n                {mimeClass.displayName(this.props.displayedItem.get('content-type'))}\n              </td>\n            </tr>\n            <tr>\n              <th scope=\"row\">{I18n.t('Size')}</th>\n              <td ref=\"size\">{friendlyBytes(this.props.displayedItem.get('size'))}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">{I18n.t('Date Modified')}</th>\n              <td id=\"dateModified\" ref=\"dateModified\">\n                <FriendlyDatetime dateTime={this.props.displayedItem.get('updated_at')} />\n              </td>\n            </tr>\n            {this.props.displayedItem.get('user') && (\n              <tr>\n                <th scope=\"row\">{I18n.t('Last Modified By')}</th>\n                <td ref=\"modifedBy\">\n                  <a href={this.props.displayedItem.get('user').html_url}>\n                    {this.props.displayedItem.get('user').display_name}\n                  </a>\n                </td>\n              </tr>\n            )}\n            <tr>\n              <th scope=\"row\">{I18n.t('Date Created')}</th>\n              <td id=\"dateCreated\">\n                <FriendlyDatetime dateTime={this.props.displayedItem.get('created_at')} />\n              </td>\n            </tr>\n            {this.props.usageRightsRequiredForContext && (\n              <tr className=\"FilePreviewInfoPanel__usageRights\">\n                <th scope=\"row\">{I18n.t('Usage Rights')}</th>\n                <td>\n                  {this.props.displayedItem &&\n                    this.props.displayedItem.get('usage_rights') &&\n                    this.props.displayedItem.get('usage_rights').license_name && (\n                      <div ref=\"licenseName\">\n                        {this.props.displayedItem.get('usage_rights').license_name}\n                      </div>\n                    )}\n                  {this.props.displayedItem &&\n                    this.props.displayedItem.get('usage_rights') &&\n                    this.props.displayedItem.get('usage_rights').legal_copyright && (\n                      <div ref=\"legalCopyright\">\n                        {this.props.displayedItem.get('usage_rights').legal_copyright}\n                      </div>\n                    )}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default FilePreviewInfoPanel\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'Backbone'\nimport I18n from 'i18n!file_status'\n\n// Handles getting the status for a file.\n//\n// Returns an internationalized string describing the status of a file.\n//\n// model is a Backbone file model.\nexport default function getFileStatus(model) {\n  // Error handling to return an empty string should a Backbone model not\n  // be provided, or if it is currently undefined/null.\n  if (model == null || !(model instanceof Backbone.Model)) return ''\n\n  // Determine what the file status is\n  const status = {\n    published: !model.get('locked'),\n    restricted: !!model.get('lock_at') || !!model.get('unlock_at'),\n    hidden: !!model.get('hidden')\n  }\n\n  if (status.published && status.restricted) {\n    return I18n.t('restricted_status', 'Available from %{from_date} until %{until_date}', {\n      from_date: $.datetimeString(model.get('unlock_at')),\n      until_date: $.datetimeString(model.get('lock_at'))\n    })\n  } else if (status.published && status.hidden) {\n    return I18n.t('hidden_status', 'Hidden. Available with a link')\n  } else if (status.published) {\n    return I18n.t('published_status', 'Published')\n  } else {\n    return I18n.t('unpublished_status', 'Unpublished')\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Handles navigation through a collection.\nimport Backbone from 'Backbone'\n\nexport default {\n  isBackboneCollection(collection) {\n    return collection instanceof Backbone.Collection\n  },\n\n  // Get the previous item in a collection.\n  getPreviousInRelationTo(collection, collectionItem) {\n    const isBackbone = this.isBackboneCollection(collection)\n\n    const itemIndex = collection.indexOf(collectionItem)\n\n    // Return null if the item wasn't found.\n    if (!(itemIndex >= 0)) {\n      return null\n    }\n\n    const nextIndex = itemIndex - 1\n\n    // Return the last item if we were at the first.\n    if (nextIndex < 0) {\n      if (isBackbone) {\n        return collection.at(collection.length - 1)\n      } else {\n        return collection[collection.length - 1]\n      }\n    }\n\n    // Otherwise let's just return the previous item.\n    if (isBackbone) {\n      return collection.at(nextIndex)\n    } else {\n      return collection[nextIndex]\n    }\n  },\n\n  // Get the next item in a collection.\n  getNextInRelationTo(collection, collectionItem) {\n    const isBackbone = this.isBackboneCollection(collection)\n\n    const itemIndex = collection.indexOf(collectionItem)\n\n    // Return null if the item wasn't found.\n    if (!(itemIndex >= 0)) return null\n\n    const nextIndex = itemIndex + 1\n\n    // Return the first item if we were at the last.\n    if (nextIndex > collection.length - 1) {\n      if (isBackbone) {\n        return collection.at(0)\n      } else {\n        return collection[0]\n      }\n    }\n    // Otherwise let's just return the next item.\n    if (isBackbone) {\n      return collection.at(nextIndex)\n    } else {\n      return collection[nextIndex]\n    }\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\n/* This file contains code specific to weird edge cases that can be removed later. For instance, if you\n * are writing some weird code around something that is broken in Jaws, it can live here\n */\n\nconst codeToRemoveLater = {\n  hideFileTreeFromPreviewInJaws() {\n    $(\"aside ul[role='tree']\").attr('role', 'presentation')\n  },\n  revertJawsChangesBackToNormal() {\n    $(\"aside ul[role='presentation']\").attr('role', 'tree')\n  }\n}\n\nexport default codeToRemoveLater\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport page from 'page'\nimport $ from 'jquery'\nimport classnames from 'classnames'\nimport {Mask, Overlay} from '@instructure/ui-overlays'\nimport FilePreviewInfoPanel from './FilePreviewInfoPanel'\nimport CollectionHandler from 'compiled/react_files/utils/collectionHandler'\nimport preventDefault from 'compiled/fn/preventDefault'\n\nimport _ from 'underscore'\nimport PropTypes from 'prop-types'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport I18n from 'i18n!file_preview'\nimport File from 'compiled/models/File'\nimport FilesystemObject from 'compiled/models/FilesystemObject'\nimport codeToRemoveLater from './codeToRemoveLater'\nimport 'compiled/jquery.rails_flash_notifications'\n\nexport default class FilePreview extends React.PureComponent {\n  static propTypes = {\n    currentFolder: customPropTypes.folder,\n    query: PropTypes.object,\n    collection: PropTypes.object,\n    params: PropTypes.object,\n    isOpen: PropTypes.bool,\n    closePreview: PropTypes.func,\n    splat: PropTypes.string,\n    usageRightsRequiredForContext: PropTypes.bool\n  }\n\n  state = {\n    showInfoPanel: false,\n    displayedItem: null\n  }\n\n  componentWillMount() {\n    if (this.props.isOpen) {\n      this.getItemsToView(this.props, items => this.setState(this.stateProperties(items)))\n    }\n  }\n\n  componentDidMount() {\n    return codeToRemoveLater.hideFileTreeFromPreviewInJaws()\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.isOpen) {\n      this.getItemsToView(newProps, items => this.setState(this.stateProperties(items)))\n    }\n  }\n\n  componentWillUnmount() {\n    $(this.previewOverlay).on('keydown', this.handleKeyboardNavigation)\n    return codeToRemoveLater.revertJawsChangesBackToNormal()\n  }\n\n  getRouteIdentifier = () => {\n    if (this.props.query && this.props.query.search_term) {\n      return '/search'\n    } else if (this.props.splat) {\n      return `/folder/${this.props.splat}`\n    } else {\n      return ''\n    }\n  }\n\n  getNavigationParams = (opts = {id: null, except: []}) => {\n    const obj = {\n      preview: opts && opts.id,\n      search_term: this.props.query.search_term || undefined,\n      only_preview: this.props.query.only_preview || undefined,\n      sort: this.props.query.sort || undefined,\n      order: this.props.query.order || undefined\n    }\n\n    _.each(obj, (v, k) => {\n      if (\n        !v ||\n        (opts.except && opts.except.length && (opts.except === k || opts.except.includes(k)))\n      ) {\n        delete obj[k]\n      }\n    })\n\n    return obj\n  }\n\n  getItemsToView = (props, cb) => {\n    if (typeof cb !== 'function')\n      throw new Error(\n        'getItemsToView(props: obj, callback: fn) requires `callback` to be a function'\n      )\n    // Sets up our collection that we will be using.\n    let initialItem = null\n    const onlyIdsToPreview = props.query.only_preview && props.query.only_preview.split(',')\n    const files = props.query.search_term\n      ? props.collection.models\n      : props.currentFolder.files.models\n\n    const otherItems = files.filter(file => {\n      if (!onlyIdsToPreview) return true\n      return onlyIdsToPreview.includes(file.id)\n    })\n\n    const visibleFile = props.query.preview && _.findWhere(files, {id: props.query.preview})\n\n    if (!visibleFile) {\n      const responseDataRequested = ['enhanced_preview_url']\n      if (props.usageRightsRequiredForContext) {\n        responseDataRequested.push('usage_rights')\n      }\n      new File({id: props.query.preview}, {preflightUrl: 'no/url/needed'})\n        .fetch({data: $.param({include: responseDataRequested})})\n        .success(file => {\n          initialItem = new FilesystemObject(file)\n          return cb({initialItem, otherItems})\n        })\n    } else {\n      initialItem = visibleFile || (files.length ? files[0] : undefined)\n\n      cb({initialItem, otherItems})\n    }\n  }\n\n  setUpOtherItemsQuery = otherItems => otherItems.map(item => item.id).join(',')\n\n  toggle = key => {\n    const newState = {}\n    newState[key] = !this.state[key]\n    return () => {\n      this.setState(newState, function() {\n        if (key === 'showInfoPanel' && this.state.showInfoPanel) {\n          $.screenReaderFlashMessage(I18n.t('Info panel displayed'))\n        } else {\n          $.screenReaderFlashMessage(I18n.t('Info panel hidden'))\n        }\n      })\n    }\n  }\n\n  handleKeyboardNavigation = event => {\n    if (!(event.keyCode === $.ui.keyCode.LEFT || event.keyCode === $.ui.keyCode.RIGHT)) {\n      return null\n    }\n    let nextItem = null\n    if (event.keyCode === $.ui.keyCode.LEFT) {\n      nextItem = CollectionHandler.getPreviousInRelationTo(\n        this.state.otherItems,\n        this.state.displayedItem\n      )\n    }\n    if (event.keyCode === $.ui.keyCode.RIGHT) {\n      nextItem = CollectionHandler.getNextInRelationTo(\n        this.state.otherItems,\n        this.state.displayedItem\n      )\n    }\n\n    page(`${this.getRouteIdentifier()}?${$.param(this.getNavigationParams({id: nextItem.id}))}`)\n  }\n\n  closeModal = () => {\n    this.props.closePreview(\n      `${this.getRouteIdentifier()}?${$.param(this.getNavigationParams({except: 'only_preview'}))}`\n    )\n  }\n\n  stateProperties = items => ({\n    initialItem: items.initialItem,\n    displayedItem: items.initialItem,\n    otherItems: items.otherItems\n  })\n\n  renderArrowLink = direction => {\n    const nextItem =\n      direction === 'left'\n        ? CollectionHandler.getPreviousInRelationTo(this.state.otherItems, this.state.displayedItem)\n        : CollectionHandler.getNextInRelationTo(this.state.otherItems, this.state.displayedItem)\n    if (!nextItem) {\n      return null\n    }\n\n    const linkText = direction === 'left' ? I18n.t('View previous file') : I18n.t('View next file')\n    const baseUrl = page.base()\n    return (\n      <div className=\"col-xs-1 ef-file-arrow_container\">\n        <a\n          href={`${baseUrl}${this.getRouteIdentifier()}?${$.param(\n            this.getNavigationParams({id: nextItem.id})\n          )}`}\n          className=\"ef-file-preview-container-arrow-link\"\n          onClick={e => page.clickHandler(e.nativeEvent)}\n        >\n          <div className=\"ef-file-preview-arrow-link\">\n            <span className=\"screenreader-only\">{linkText}</span>\n            <i aria-hidden=\"true\" className={`icon-arrow-open-${direction}`} />\n          </div>\n        </a>\n      </div>\n    )\n  }\n\n  renderPreview = () => {\n    if (this.state.displayedItem && this.state.displayedItem.get('preview_url')) {\n      const html = this.state.displayedItem.get('content-type') === 'text/html'\n      const iFrameClasses = classnames({\n        'ef-file-preview-frame': true,\n        'ef-file-preview-frame-html': html,\n        'attachment-html-iframe': html\n      })\n\n      return (\n        <iframe\n          allowFullScreen\n          title={I18n.t('File Preview')}\n          src={this.state.displayedItem.get('preview_url')}\n          className={iFrameClasses}\n        />\n      )\n    } else {\n      return (\n        <div className=\"ef-file-not-found ef-file-preview-frame\">\n          <i className=\"media-object ef-not-found-icon FilesystemObjectThumbnail mimeClass-file\" />\n          {I18n.t('File not found')}\n        </div>\n      )\n    }\n  }\n\n  render() {\n    const showInfoPanelClasses = classnames({\n      'ef-file-preview-header-info': true,\n      'ef-file-preview-button': true,\n      'ef-file-preview-button--active': this.state.showInfoPanel\n    })\n\n    return (\n      <Overlay\n        ref={e => (this.previewOverlay = e)}\n        open={this.props.isOpen}\n        onDismiss={this.closeModal}\n        onKeyDown={this.handleKeyboardNavigation}\n        label={I18n.t('File Preview Overlay')}\n        defaultFocusElement={() => this.closeButton}\n        shouldContainFocus\n        shouldReturnFocus\n        unmountOnExit\n      >\n        <Mask theme={{background: 'rgba(0, 0, 0, 0.75)'}}>\n          <div className=\"ef-file-preview-overlay\">\n            <div className=\"ef-file-preview-header\">\n              <h1 className=\"ef-file-preview-header-filename\">\n                {this.state.initialItem ? this.state.initialItem.displayName() : ''}\n              </h1>\n              <div className=\"ef-file-preview-header-buttons\">\n                {this.state.displayedItem && !this.state.displayedItem.get('locked_for_user') && (\n                  <a\n                    href={this.state.displayedItem.get('url')}\n                    download\n                    className=\"ef-file-preview-header-download ef-file-preview-button\"\n                  >\n                    <i className=\"icon-download\" />\n                    <span className=\"hidden-phone\">{` ${I18n.t('Download')}`}</span>\n                  </a>\n                )}\n                <button\n                  type=\"button\"\n                  className={showInfoPanelClasses}\n                  ref={e => (this.infoButton = e)}\n                  onClick={this.toggle('showInfoPanel')}\n                >\n                  {/* Wrap content in a div because firefox doesn't support display: flex on buttons */}\n                  <div>\n                    <i className=\"icon-info\" />\n                    <span className=\"hidden-phone\">{` ${I18n.t('Info')}`}</span>\n                  </div>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={preventDefault(this.closeModal)}\n                  ref={e => (this.closeButton = e)}\n                  className=\"ef-file-preview-header-close ef-file-preview-button\"\n                >\n                  <i className=\"icon-end\" />\n                  <span className=\"hidden-phone\">{` ${I18n.t('Close')}`}</span>\n                </button>\n              </div>\n            </div>\n            <div className=\"ef-file-preview-stretch\">\n              {this.state.otherItems &&\n                this.state.otherItems.length &&\n                this.renderArrowLink('left')}\n              {this.renderPreview()}\n              {this.state.otherItems &&\n                this.state.otherItems.length &&\n                this.renderArrowLink('right')}\n              {this.state.showInfoPanel && (\n                <FilePreviewInfoPanel\n                  displayedItem={this.state.displayedItem}\n                  getStatusMessage={this.getStatusMessage}\n                  usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n                />\n              )}\n            </div>\n          </div>\n        </Mask>\n      </Overlay>\n    )\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport ReactDOM from 'react-dom'\nimport BackboneMixin from '../mixins/BackboneMixin'\nimport Folder from '../../models/Folder'\nimport FocusStore from '../modules/FocusStore'\nimport classnames from 'classnames'\nimport '../../jquery.rails_flash_notifications'\n\nexport default {\n  displayName: 'FolderChild',\n\n  mixins: [BackboneMixin('model')],\n\n  getInitialState() {\n    return {\n      editing: this.props.model.isNew(),\n      hideKeyboardCheck: true,\n      isSelected: this.props.isSelected\n    }\n  },\n\n  componentDidMount() {\n    if (this.state.editing) this.focusNameInput()\n  },\n\n  startEditingName() {\n    this.setState({editing: true}, this.focusNameInput)\n  },\n\n  focusPreviousElement() {\n    if (this.previouslyFocusedElement != null) {\n      this.previouslyFocusedElement.focus()\n    }\n    if (document.activeElement === this.previouslyFocusedElement) return\n    this.focusNameLink()\n  },\n\n  focusNameInput() {\n    // If the activeElement is currently the \"body\" that means they clicked on some type of cog to enable this state.\n    // This is an edge case that ensures focus remains in context of whats being edited, in this case, the nameLink\n    this.previouslyFocusedElement =\n      document.activeElement.nodeName === 'BODY'\n        ? ReactDOM.findDOMNode(this.refs.nameLink)\n        : document.activeElement\n\n    setTimeout(() => {\n      const input = this.refs.newName\n      if (input) {\n        const ext = input.value.lastIndexOf('.')\n        input.setSelectionRange(0, ext < 0 ? input.value.length : ext)\n        input.focus()\n      }\n    }, 0)\n  },\n\n  focusNameLink() {\n    setTimeout(() => {\n      const ref = ReactDOM.findDOMNode(this.refs.nameLink)\n      if (ref) ref.focus()\n    }, 100)\n  },\n\n  saveNameEdit() {\n    this.setState({editing: false}, this.focusNameLink)\n    const newName = ReactDOM.findDOMNode(this.refs.newName).value\n    return this.props.model.save(\n      {name: newName},\n      {\n        success: () => {\n          this.focusNameLink()\n        },\n        error: (model, response) => {\n          if (response.status === 409)\n            $.flashError(\n              I18n.t('A file named %{itemName} already exists in this folder.', {itemName: newName})\n            )\n        }\n      }\n    )\n  },\n\n  cancelEditingName() {\n    if (this.props.model.isNew()) this.props.model.collection.remove(this.props.model)\n    this.setState({editing: false}, this.focusPreviousElement)\n  },\n\n  getAttributesForRootNode() {\n    const classNameString = classnames({\n      'ef-item-row': true,\n      'ef-item-selected': this.props.isSelected,\n      activeDragTarget: this.state.isActiveDragTarget\n    })\n\n    const attrs = {\n      onClick: this.props.toggleSelected,\n      className: classNameString,\n      role: 'row',\n      'aria-selected': this.props.isSelected,\n      draggable: !this.state.editing,\n      ref: 'FolderChild',\n      onDragStart: event => {\n        if (!this.props.isSelected) {\n          this.props.toggleSelected()\n        }\n        return this.props.dndOptions.onItemDragStart(event)\n      }\n    }\n\n    if (this.props.model instanceof Folder && !this.props.model.get('for_submissions')) {\n      const toggleActive = setActive => {\n        if (this.state.isActiveDragTarget !== setActive)\n          this.setState({isActiveDragTarget: setActive})\n      }\n      attrs.onDragEnter = attrs.onDragOver = event =>\n        this.props.dndOptions.onItemDragEnterOrOver(event, toggleActive(true))\n\n      attrs.onDragLeave = attrs.onDragEnd = event =>\n        this.props.dndOptions.onItemDragLeaveOrEnd(event, toggleActive(false))\n\n      attrs.onDrop = event =>\n        this.props.dndOptions.onItemDrop(event, this.props.model, ({success, event}) => {\n          toggleActive(false)\n          if (success)\n            ReactDOM.unmountComponentAtNode(ReactDOM.findDOMNode(this.refs.FolderChild).parentNode)\n        })\n    }\n    return attrs\n  },\n\n  checkForAccess(event) {\n    if (this.props.model.get('locked_for_user')) {\n      event.preventDefault()\n      const message = I18n.t('This folder is currently locked and unavailable to view.')\n      $.flashError(message)\n      $.screenReaderFlashMessage(message)\n      return false\n    }\n  },\n\n  handleFileLinkClick() {\n    FocusStore.setItemToFocus(ReactDOM.findDOMNode(this.refs.nameLink))\n    return this.props.previewItem()\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport preventDefault from 'compiled/fn/preventDefault'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport File from 'compiled/models/File'\nimport Folder from 'compiled/models/Folder'\nimport UsageRightsDialog from './UsageRightsDialog'\nimport openMoveDialog from './utils/openMoveDialog'\nimport downloadStuffAsAZip from 'compiled/react_files/utils/downloadStuffAsAZip'\nimport deleteStuff from 'compiled/react_files/utils/deleteStuff'\nimport $ from 'jquery'\n\nclass ItemCog extends React.Component {\n  static displayName = 'ItemCog'\n\n  static propTypes = {\n    model: customPropTypes.filesystemObject,\n    modalOptions: PropTypes.object.isRequired,\n    externalToolsForContext: PropTypes.arrayOf(PropTypes.object),\n    userCanManageFilesForContext: PropTypes.bool,\n    userCanRestrictFilesForContext: PropTypes.bool.isRequired,\n    usageRightsRequiredForContext: PropTypes.bool\n  }\n\n  isMasterCourseRestricted = () =>\n    this.props.model.get('is_master_course_child_content') &&\n    this.props.model.get('restricted_by_master_course')\n\n  downloadFile = (file, args) => {\n    window.location = file[0].get('url')\n    $(args.returnFocusTo).focus()\n  }\n\n  downloadZip = (folder, args) => {\n    downloadStuffAsAZip(folder, args)\n    $(args.returnFocusTo).focus()\n  }\n\n  deleteItem = (item, args) => {\n    // Unfortunately, ars.returnFocusTo isn't really the one we want to focus,\n    // because we want the previous one or the +Folder button\n    // Also unfortunately, our state management in this app is a bit terrible\n    // so we'll just handle all that via jQuery right here for now.\n    // TODO: Make this less terrible when we have sane state management\n    const allTriggers = $('.al-trigger').toArray()\n    const hasMoreTriggers = allTriggers.length - 1 > 0\n    const toFocus = hasMoreTriggers\n      ? allTriggers[allTriggers.indexOf(args.returnFocusTo) - 1]\n      : $('.ef-name-col a').first()\n    args.returnFocusTo = toFocus\n    deleteStuff(item, args)\n  }\n\n  openUsageRightsDialog = event => {\n    const contents = (\n      <UsageRightsDialog\n        isOpen\n        closeModal={this.props.modalOptions.closeModal}\n        itemsToManage={[this.props.model]}\n        userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n      />\n    )\n\n    this.props.modalOptions.openModal(contents, () => {\n      ReactDOM.findDOMNode(this.refs.settingsCogBtn).focus()\n    })\n  }\n\n  render() {\n    let externalToolMenuItems\n    if (this.props.model instanceof File) {\n      externalToolMenuItems = this.props.externalToolsForContext.map(tool => {\n        if (this.props.model.externalToolEnabled(tool)) {\n          return (\n            <li key={tool.title} role=\"presentation\">\n              <a\n                href={`${tool.base_url}&files[]=${this.props.model.id}`}\n                role=\"menuitem\"\n                tabIndex=\"-1\"\n              >\n                {tool.title}\n              </a>\n            </li>\n          )\n        } else {\n          return (\n            <li key={tool.title} role=\"presentation\">\n              <a href=\"#\" className=\"disabled\" role=\"menuitem\" tabIndex=\"-1\" aria-disabled=\"true\">\n                {tool.title}\n              </a>\n            </li>\n          )\n        }\n      })\n    } else {\n      externalToolMenuItems = []\n    }\n\n    const wrap = (fn, params = {}) =>\n      preventDefault(event => {\n        const singularContextType =\n          this.props.model.collection && this.props.model.collection.parentFolder\n            ? this.props.model.collection.parentFolder.get('context_type').toLowerCase()\n            : null\n        const pluralContextType = singularContextType ? `${singularContextType}s` : null\n        const contextType = pluralContextType || filesEnv.contextType\n        const contextId =\n          this.props.model.collection && this.props.model.collection.parentFolder\n            ? this.props.model.collection.parentFolder.get('context_id')\n            : filesEnv.contextId\n        let args = {\n          contextType,\n          contextId,\n          returnFocusTo: ReactDOM.findDOMNode(this.refs.settingsCogBtn)\n        }\n\n        args = $.extend(args, params)\n        return fn([this.props.model], args)\n      })\n\n    const menuItems = []\n\n    // Download Link\n    if (this.props.model instanceof Folder) {\n      menuItems.push(\n        <li key=\"folderDownload\" role=\"presentation\">\n          <a href=\"#\" onClick={wrap(this.downloadZip)} ref=\"download\" role=\"menuitem\" tabIndex=\"-1\">\n            {I18n.t('Download')}\n          </a>\n        </li>\n      )\n    } else {\n      menuItems.push(\n        <li key=\"download\" role=\"presentation\">\n          <a\n            onClick={wrap(this.downloadFile)}\n            href={this.props.model.get('url')}\n            ref=\"download\"\n            role=\"menuitem\"\n            tabIndex=\"-1\"\n          >\n            {I18n.t('Download')}\n          </a>\n        </li>\n      )\n    }\n\n    if (this.props.userCanManageFilesForContext && !this.isMasterCourseRestricted()) {\n      // Rename Link\n      menuItems.push(\n        <li key=\"rename\" role=\"presentation\">\n          <a\n            href=\"#\"\n            onClick={preventDefault(this.props.startEditingName)}\n            ref=\"editName\"\n            role=\"menuitem\"\n            tabIndex=\"-1\"\n          >\n            {I18n.t('Rename')}\n          </a>\n        </li>\n      )\n      // Move Link\n      menuItems.push(\n        <li key=\"move\" role=\"presentation\">\n          <a\n            href=\"#\"\n            onClick={wrap(openMoveDialog, {\n              clearSelectedItems: this.props.clearSelectedItems,\n              onMove: this.props.onMove\n            })}\n            ref=\"move\"\n            role=\"menuitem\"\n            tabIndex=\"-1\"\n          >\n            {I18n.t('Move')}\n          </a>\n        </li>\n      )\n\n      if (this.props.usageRightsRequiredForContext) {\n        // Manage Usage Rights Link\n        menuItems.push(\n          <li key=\"manageUsageRights\" className=\"ItemCog__OpenUsageRights\" role=\"presentation\">\n            <a\n              href=\"#\"\n              onClick={preventDefault(this.openUsageRightsDialog)}\n              ref=\"usageRights\"\n              role=\"menuitem\"\n              tabIndex=\"-1\"\n            >\n              {I18n.t('Manage Usage Rights')}\n            </a>\n          </li>\n        )\n      }\n\n      // Delete Link\n      menuItems.push(\n        <li key=\"delete\" role=\"presentation\">\n          <a\n            href=\"#\"\n            onClick={wrap(this.deleteItem)}\n            ref=\"deleteLink\"\n            role=\"menuitem\"\n            tabIndex=\"-1\"\n          >\n            {I18n.t('Delete')}\n          </a>\n        </li>\n      )\n    }\n\n    return (\n      // without the stopPropagation(), using the cog menu causes the file's invisible selection checkbox to be toggled as well\n      <div\n        className=\"al-dropdown__container\"\n        style={{minWidth: '45px', display: 'inline-block'}}\n        onClick={e => e.stopPropagation()}\n      >\n        <button\n          type=\"button\"\n          ref=\"settingsCogBtn\"\n          className=\"al-trigger al-trigger-gray btn btn-link\"\n          aria-label={I18n.t('Actions')}\n          data-popup-within=\"#application\"\n          data-append-to-body\n        >\n          <i className=\"icon-more\" />\n        </button>\n        <ul\n          className=\"al-options\"\n          role=\"menu\"\n          aria-hidden=\"true\"\n          aria-expanded=\"false\"\n          tabIndex=\"0\"\n        >\n          {menuItems.concat(externalToolMenuItems)}\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport default ItemCog\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"       \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   -  \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}    -  \\\",\\\"locked_762f138b\\\":\\\" \\\",\\\"this_file_16b24f02\\\":\\\" \\\",\\\"this_file_9443cda1\\\":\\\" \\\",\\\"unlocked_beee43de\\\":\\\" \\\"},\\\"cy\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Gwall wrth newid cyflwr cloi \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  wedi Cloi - Cliciwch i addasu\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  wedi Ddatgloi - Cliciwch i addasu\\\",\\\"locked_762f138b\\\":\\\"Wedi Cloi\\\",\\\"this_file_16b24f02\\\":\\\"y ffeil hon\\\",\\\"this_file_9443cda1\\\":\\\"Maer ffeil hon\\\",\\\"unlocked_beee43de\\\":\\\"Wedi Datgloi\\\"},\\\"da\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Der opstod en fejl under ndring af lsestatus for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  er lst, klik for at ndre\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  er lst op, klik for at ndre\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"denne fil\\\",\\\"this_file_9443cda1\\\":\\\"Denne fil\\\",\\\"unlocked_beee43de\\\":\\\"Lst op\\\"},\\\"da-x-k12\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Der opstod en fejl under ndring af lsestatus for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  er lst, klik for at ndre\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  er lst op, klik for at ndre\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"denne fil\\\",\\\"this_file_9443cda1\\\":\\\"Denne fil\\\",\\\"unlocked_beee43de\\\":\\\"Lst op\\\"},\\\"de\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Fehler beim ndern des Sperrstatus fr %{fileName}\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  ist gesperrt  zum ndern anklicken\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  ist entsperrt  zum ndern anklicken\\\",\\\"locked_762f138b\\\":\\\"Gesperrt\\\",\\\"this_file_16b24f02\\\":\\\"diese Datei\\\",\\\"this_file_9443cda1\\\":\\\"Diese Datei\\\",\\\"unlocked_beee43de\\\":\\\"Entsperrt\\\"},\\\"el\\\":{\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_9443cda1\\\":\\\"  \\\"},\\\"en-AU\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"An error occurred changing the lock state for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  is Locked - Click to modify\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  is Unlocked - Click to modify\\\",\\\"locked_762f138b\\\":\\\"Locked\\\",\\\"this_file_16b24f02\\\":\\\"this file\\\",\\\"this_file_9443cda1\\\":\\\"This file\\\",\\\"unlocked_beee43de\\\":\\\"Unlocked\\\"},\\\"en-CA\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"An error occurred changing the lock state for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  is Locked - Click to modify\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  is Unlocked - Click to modify\\\",\\\"locked_762f138b\\\":\\\"Locked\\\",\\\"this_file_16b24f02\\\":\\\"this file\\\",\\\"this_file_9443cda1\\\":\\\"This file\\\",\\\"unlocked_beee43de\\\":\\\"Unlocked\\\"},\\\"en-GB\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"An error occurred changing the lock state for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  is Locked - Click to modify\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  is Unlocked - Click to modify\\\",\\\"locked_762f138b\\\":\\\"Locked\\\",\\\"this_file_16b24f02\\\":\\\"this file\\\",\\\"this_file_9443cda1\\\":\\\"This file\\\",\\\"unlocked_beee43de\\\":\\\"Unlocked\\\"},\\\"es\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Se produjo un error al cambiar el estado de bloqueo de \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName} est bloqueado: Haga clic para modificar\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName} est desbloqueado: Haga clic para modificar\\\",\\\"locked_762f138b\\\":\\\"Bloqueado\\\",\\\"this_file_16b24f02\\\":\\\"este archivo\\\",\\\"this_file_9443cda1\\\":\\\"Este archivo\\\",\\\"unlocked_beee43de\\\":\\\"Desbloqueado\\\"},\\\"fa\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"       %{fileName}   \\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   -     \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   -     \\\",\\\"locked_762f138b\\\":\\\" \\\",\\\"this_file_16b24f02\\\":\\\" \\\",\\\"this_file_9443cda1\\\":\\\" \\\",\\\"unlocked_beee43de\\\":\\\"  \\\"},\\\"fi\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Ilmeni virhe vaihdettaessa lukitustila kohteelle \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  on lukittu - Napsauta muokkaa\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  lukitus on poistettu - Napsauta muokkaa\\\",\\\"locked_762f138b\\\":\\\"Lukittu\\\",\\\"this_file_16b24f02\\\":\\\"tm tiedosto\\\",\\\"this_file_9443cda1\\\":\\\"Tm tiedosto\\\",\\\"unlocked_beee43de\\\":\\\"Lukitus poistettu\\\"},\\\"fr\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Une erreur est survenue lors du changement de ltat de verrouillage de  %{fileName} \\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  est verrouill  Cliquez pour modifier\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  est dverrouill  Cliquez pour modifier\\\",\\\"locked_762f138b\\\":\\\"Verrouill(e)\\\",\\\"this_file_16b24f02\\\":\\\"ce fichier\\\",\\\"this_file_9443cda1\\\":\\\"Ce fichier\\\",\\\"unlocked_beee43de\\\":\\\"Dverrouill\\\"},\\\"fr-CA\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Une erreur sest produite lors du changement dtat de verrouillage pour  %{fileName} \\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  Est verrouill - Cliquez pour modifier\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  Est dverrouill - Cliquez pour modifier\\\",\\\"locked_762f138b\\\":\\\"Verrouill\\\",\\\"this_file_16b24f02\\\":\\\"ce fichier\\\",\\\"this_file_9443cda1\\\":\\\"Ce fichier\\\",\\\"unlocked_beee43de\\\":\\\"Dverrouill\\\"},\\\"he\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"        \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   - /  \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}    - /  \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_9443cda1\\\":\\\" \\\"},\\\"ht\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Gen yon er ki ft nan chanjman estati \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  Bloke - Klike pou modifye\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  Debloke - Klike pou modifye\\\",\\\"locked_762f138b\\\":\\\"Bloke\\\",\\\"this_file_16b24f02\\\":\\\"fichye sa a\\\",\\\"this_file_9443cda1\\\":\\\"Fichye sa a\\\",\\\"unlocked_beee43de\\\":\\\"Debloke\\\"},\\\"hu\\\":{\\\"locked_762f138b\\\":\\\"Zrolt\\\",\\\"this_file_16b24f02\\\":\\\"ez a fjl\\\",\\\"this_file_9443cda1\\\":\\\"Ez a fjl\\\",\\\"unlocked_beee43de\\\":\\\"Zrols feloldva\\\"},\\\"hy\\\":{\\\"locked_762f138b\\\":\\\" \\\",\\\"this_file_9443cda1\\\":\\\" \\\"},\\\"is\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Villa kom upp vi breytingu  lstri stu \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName} er lst - Smelltu til a breyta\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  er lst - Smelltu til a breyta\\\",\\\"locked_762f138b\\\":\\\"Lst \\\",\\\"this_file_16b24f02\\\":\\\"essi skr\\\",\\\"this_file_9443cda1\\\":\\\"essi skr\\\",\\\"unlocked_beee43de\\\":\\\"Aflst\\\"},\\\"it\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Si  verificato un errore durante la modifica dello stato di blocco per \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   bloccato - Fai clic per modificare\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   sbloccato - Fai clic per modificare\\\",\\\"locked_762f138b\\\":\\\"Bloccato\\\",\\\"this_file_16b24f02\\\":\\\"questo file\\\",\\\"this_file_9443cda1\\\":\\\"Questo file\\\",\\\"unlocked_beee43de\\\":\\\"Sbloccato\\\"},\\\"ja\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"\\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   - \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   - \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_16b24f02\\\":\\\"\\\",\\\"this_file_9443cda1\\\":\\\"\\\",\\\"unlocked_beee43de\\\":\\\"\\\"},\\\"mi\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"I puta he hapa i te w e huri ana te hua o te raka m \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName} Kei te raka - Pwhiritia ki te whakarerek\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName} Kua huakina - Pwhiritia ki te whakarerek\\\",\\\"locked_762f138b\\\":\\\"Kua rakaina\\\",\\\"this_file_16b24f02\\\":\\\"Tnei knae\\\",\\\"this_file_9443cda1\\\":\\\"tnei knae\\\",\\\"unlocked_beee43de\\\":\\\"Kua Weterakaina\\\"},\\\"nb\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Det oppstod en feil ved endring av lsestatus for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  er lst - Klikk for  endre\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  er ulst - Klikk for  endre\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"denne filen\\\",\\\"this_file_9443cda1\\\":\\\"denne filen\\\",\\\"unlocked_beee43de\\\":\\\"Lst opp\\\"},\\\"nb-x-k12\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Det oppstod en feil ved endring av lsestatus for \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  er lst - Klikk for  endre\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  er ulst - Klikk for  endre\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"denne filen\\\",\\\"this_file_9443cda1\\\":\\\"denne filen\\\",\\\"unlocked_beee43de\\\":\\\"Lst opp\\\"},\\\"nl\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Er is een fout opgetreden bij het wijzigen van de vergrendelingsstatus voor \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  is vergrendeld - Klik om te wijzigen\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  is ontgrendeld - Klik om te wijzigen\\\",\\\"locked_762f138b\\\":\\\"Vergrendeld\\\",\\\"this_file_16b24f02\\\":\\\"dit bestand\\\",\\\"this_file_9443cda1\\\":\\\"Dit bestand\\\",\\\"unlocked_beee43de\\\":\\\"Ontgrendeld\\\"},\\\"nn\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Det oppstod ein feil ved endring av lsestatus for\\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName} er lst - klikk for  endre\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName} er ulst - klikk for  endre\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"denne fila\\\",\\\"this_file_9443cda1\\\":\\\"Denne fila\\\",\\\"unlocked_beee43de\\\":\\\"Ulst\\\"},\\\"pl\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Wystpi bd podczas zmiany stanu blokady dla \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  jest zablokowany  kliknij, aby zmieni.\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  jest odblokowany  kliknij, aby zmieni.\\\",\\\"locked_762f138b\\\":\\\"Zablokowany\\\",\\\"this_file_16b24f02\\\":\\\"ten plik\\\",\\\"this_file_9443cda1\\\":\\\"Ten plik\\\",\\\"unlocked_beee43de\\\":\\\"Odblokowane\\\"},\\\"pt\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Ocorreu um erro ao alterar o estado de bloqueio para \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  Est bloqueado - Clique para modificar\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  Est desbloqueado - Clique para modificar\\\",\\\"locked_762f138b\\\":\\\"Travada\\\",\\\"this_file_16b24f02\\\":\\\"este ficheiro\\\",\\\"this_file_9443cda1\\\":\\\"Este ficheiro\\\",\\\"unlocked_beee43de\\\":\\\"Desbloqueado\\\"},\\\"pt-BR\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Um erro ocorreu ao alterar o estado bloqueado para \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  est bloqueado - Clique para modificar\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  est desbloqueado - Clique para modificar\\\",\\\"locked_762f138b\\\":\\\"Bloqueado(a)\\\",\\\"this_file_16b24f02\\\":\\\"este arquivo\\\",\\\"this_file_9443cda1\\\":\\\"Este arquivo\\\",\\\"unlocked_beee43de\\\":\\\"Desbloqueado\\\"},\\\"ru\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\" ,        \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   -   \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   -   \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_16b24f02\\\":\\\" \\\",\\\"this_file_9443cda1\\\":\\\" \\\",\\\"unlocked_beee43de\\\":\\\"\\\"},\\\"sl\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Med spreminjanjem stanja zaklepa datotek %{fileName} je prilo do napake.\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName} je zaklenjeno  kliknite, da prilagodite.\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName} je odklenjeno  kliknite, da prilagodite.\\\",\\\"locked_762f138b\\\":\\\"Zaklenjeno\\\",\\\"this_file_16b24f02\\\":\\\"ta datoteka\\\",\\\"this_file_9443cda1\\\":\\\"Ta datoteka\\\",\\\"unlocked_beee43de\\\":\\\"Odklenjeno\\\"},\\\"sv\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Ett fel uppstod vid ndring av lsstatusen fr \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  r lst  klicka fr att modifiera\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  r olst  klicka fr att modifiera\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"den hr filen\\\",\\\"this_file_9443cda1\\\":\\\"Den hr filen\\\",\\\"unlocked_beee43de\\\":\\\"Olst\\\"},\\\"sv-x-k12\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"Ett fel uppstod vid ndring av lsstatusen fr \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}  r lst  klicka fr att modifiera\\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}  r olst  klicka fr att modifiera\\\",\\\"locked_762f138b\\\":\\\"Lst\\\",\\\"this_file_16b24f02\\\":\\\"den hr filen\\\",\\\"this_file_9443cda1\\\":\\\"Den hr filen\\\",\\\"unlocked_beee43de\\\":\\\"Olst\\\"},\\\"tr\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"\\\\\\\"%{fileName}\\\\\\\" iin kilitleme durumunu deitirirken bir hata olutu.\\\",\\\"locked_762f138b\\\":\\\"Kilitli\\\",\\\"this_file_9443cda1\\\":\\\"Bu dosya\\\"},\\\"uk\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"       \\\\\\\"%{fileName}\\\\\\\"\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   - ,  \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   - ,  \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_16b24f02\\\":\\\" \\\",\\\"this_file_9443cda1\\\":\\\" \\\",\\\"unlocked_beee43de\\\":\\\"\\\"},\\\"zh-Hans\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\"%{fileName}\\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   - \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   - \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_16b24f02\\\":\\\"\\\",\\\"this_file_9443cda1\\\":\\\"\\\",\\\"unlocked_beee43de\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"an_error_occurred_changing_the_lock_state_for_file_77443f15\\\":\\\" \\\\\\\"%{fileName}\\\\\\\" \\\",\\\"filename_is_locked_click_to_modify_bf711763\\\":\\\"%{fileName}   - \\\",\\\"filename_is_unlocked_click_to_modify_99e847be\\\":\\\"%{fileName}   - \\\",\\\"locked_762f138b\\\":\\\"\\\",\\\"this_file_16b24f02\\\":\\\"\\\",\\\"this_file_9443cda1\\\":\\\"\\\",\\\"unlocked_beee43de\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/MasterCourseLock';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('MasterCourseLock');\n  ","/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport I18n from 'i18n!MasterCourseLock'\nimport FilesystemObject from 'compiled/models/FilesystemObject'\nimport {showFlashError} from './FlashAlert'\n\nclass MasterCourseLock extends React.Component {\n  static propTypes = {\n    model: PropTypes.instanceOf(FilesystemObject).isRequired,\n    canManage: PropTypes.bool.isRequired\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = this.extractStateFromModel(props.model)\n  }\n\n  componentWillMount() {\n    const setState = model => this.setState(this.extractStateFromModel(model))\n    this.props.model.on('change', setState, this)\n  }\n\n  componentWillUnmount() {\n    this.props.model.off(null, null, this)\n  }\n\n  /* == Custom Functions == */\n  setLocked(locked) {\n    if (this.props.model) {\n      this.props.model.set('restricted_by_master_course', locked)\n    }\n  }\n\n  isLocked() {\n    return !!(this.props.model && this.props.model.get('restricted_by_master_course'))\n  }\n\n  canLockUnlock() {\n    return this.props.canManage && this.props.model.get('is_master_course_master_content')\n  }\n\n  // Function Summary\n  // extractStateFromModel expects a backbone model wtih the follow attributes\n  // * hidden, lock_at, unlock_at\n  //\n  // It takes those attributes and returns an object that can be used to set the\n  // components internal state\n  //\n  // returns object\n  extractStateFromModel(model) {\n    return {\n      locked: !!model.get('restricted_by_master_course')\n    }\n  }\n\n  // Function Summary\n  // allow locking/unlocking in this component.\n  toggleLockedState = () => {\n    const fileName = (this.props.model && this.props.model.displayName()) || I18n.t('this file')\n    axios\n      .put(`/api/v1/courses/${ENV.COURSE_ID}/blueprint_templates/default/restrict_item`, {\n        content_type: 'attachment',\n        content_id: this.props.model.id,\n        restricted: !this.isLocked()\n      })\n      .then((/* response */) => {\n        this.setLocked(!this.isLocked())\n      })\n      .catch(\n        showFlashError(\n          I18n.t('An error occurred changing the lock state for \"%{fileName}\"', {fileName})\n        )\n      )\n  }\n\n  // modeled after PUblishCloud to implement the adjacent lock icon|button\n  render() {\n    const locked = this.isLocked()\n    const fileName = (this.props.model && this.props.model.displayName()) || I18n.t('This file')\n    const wrapperClass = classnames('lock-icon', {\n      disabled: !this.canLockUnlock(),\n      'lock-icon-locked': this.isLocked()\n    })\n    const buttonClass = `btn-link ${locked ? 'locked-status locked' : 'unlocked-status unlocked'}`\n    const iconClass = locked ? 'icon-blueprint-lock' : 'icon-blueprint'\n    const title = locked ? I18n.t('Locked') : I18n.t('Unlocked')\n    const label = locked\n      ? I18n.t('%{fileName}  is Locked - Click to modify', {fileName})\n      : I18n.t('%{fileName}  is Unlocked - Click to modify', {fileName})\n    return (\n      <span className={wrapperClass}>\n        {this.canLockUnlock() ? (\n          <button\n            type=\"button\"\n            data-tooltip=\"left\"\n            onClick={this.toggleLockedState}\n            className={buttonClass}\n            title={title}\n            aria-label={label}\n          >\n            <i className={iconClass} />\n          </button>\n        ) : (\n          <i className={iconClass} data-tooltip=\"left\" title={title}>\n            <span className=\"lock-text screenreader-only\">{title}</span>\n          </i>\n        )}\n      </span>\n    )\n  }\n}\n\nexport default MasterCourseLock\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport customPropTypes from 'compiled/react_files/modules/customPropTypes'\nimport Folder from 'compiled/models/Folder'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport UsageRightsDialog from './UsageRightsDialog'\n\nexport default class UsageRightsIndicator extends React.Component {\n  warningMessage = I18n.t('Before publishing this file, you must specify usage rights.')\n\n  static propTypes = {\n    model: customPropTypes.filesystemObject.isRequired,\n    userCanManageFilesForContext: PropTypes.bool.isRequired,\n    userCanRestrictFilesForContext: PropTypes.bool.isRequired,\n    usageRightsRequiredForContext: PropTypes.bool.isRequired,\n    modalOptions: PropTypes.object.isRequired\n  }\n\n  handleClick = event => {\n    event.preventDefault()\n    const contents = (\n      <UsageRightsDialog\n        isOpen\n        closeModal={this.props.modalOptions.closeModal}\n        itemsToManage={[this.props.model]}\n        userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n      />\n    )\n    this.props.modalOptions.openModal(contents, () => {\n      ReactDOM.findDOMNode(this).focus()\n    })\n  }\n\n  getIconData = useJustification => {\n    switch (useJustification) {\n      case 'own_copyright':\n        return {iconClass: 'icon-files-copyright', text: I18n.t('Own Copyright')}\n      case 'public_domain':\n        return {iconClass: 'icon-files-public-domain', text: I18n.t('Public Domain')}\n      case 'used_by_permission':\n        return {iconClass: 'icon-files-obtained-permission', text: I18n.t('Used by Permission')}\n      case 'fair_use':\n        return {iconClass: 'icon-files-fair-use', text: I18n.t('Fair Use')}\n      case 'creative_commons':\n        return {iconClass: 'icon-files-creative-commons', text: I18n.t('Creative Commons')}\n    }\n  }\n\n  render() {\n    if (\n      this.props.model instanceof Folder ||\n      (!this.props.usageRightsRequiredForContext && !this.props.model.get('usage_rights'))\n    ) {\n      return null\n    } else if (this.props.usageRightsRequiredForContext && !this.props.model.get('usage_rights')) {\n      if (this.props.userCanManageFilesForContext) {\n        return (\n          <button\n            className=\"UsageRightsIndicator__openModal btn-link\"\n            onClick={this.handleClick}\n            title={this.warningMessage}\n            data-tooltip=\"top\"\n          >\n            <span className=\"screenreader-only\">{this.warningMessage}</span>\n            <i className=\"UsageRightsIndicator__warning icon-warning\" />\n          </button>\n        )\n      } else {\n        return null\n      }\n    } else {\n      const useJustification = this.props.model.get('usage_rights').use_justification\n      const iconData = this.getIconData(useJustification)\n\n      return (\n        <button\n          className=\"UsageRightsIndicator__openModal btn-link\"\n          onClick={this.handleClick}\n          disabled={!this.props.userCanManageFilesForContext}\n          title={this.props.model.get('usage_rights').license_name}\n          data-tooltip=\"top\"\n        >\n          <span ref=\"screenreaderText\" className=\"screenreader-only\">\n            {iconData.text}\n          </span>\n          <span className=\"screenreader-only\">\n            {this.props.model.get('usage_rights').license_name}\n          </span>\n          <i ref=\"icon\" className={iconData.iconClass} />\n        </button>\n      )\n    }\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport FolderChild from 'compiled/react_files/components/FolderChild'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport classnames from 'classnames'\nimport ItemCog from './ItemCog'\nimport PublishCloud from '../shared/PublishCloud'\nimport MasterCourseLock from '../shared/MasterCourseLock'\nimport FilesystemObjectThumbnail from './FilesystemObjectThumbnail'\nimport UsageRightsIndicator from './UsageRightsIndicator'\nimport Folder from 'compiled/models/Folder'\nimport preventDefault from 'compiled/fn/preventDefault'\nimport FriendlyDatetime from '../shared/FriendlyDatetime'\nimport friendlyBytes from 'compiled/util/friendlyBytes'\n\nFolderChild.isFolder = function() {\n  return this.props.model instanceof Folder\n}\n\nFolderChild.renderItemCog = function(canManage) {\n  if (!this.props.model.isNew() || this.props.model.get('locked_for_user')) {\n    return (\n      <ItemCog\n        model={this.props.model}\n        startEditingName={this.startEditingName}\n        userCanManageFilesForContext={canManage}\n        userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n        usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        externalToolsForContext={this.props.externalToolsForContext}\n        modalOptions={this.props.modalOptions}\n        clearSelectedItems={this.props.clearSelectedItems}\n        onMove={this.props.onMove}\n      />\n    )\n  }\n}\nFolderChild.renderPublishCloud = function(canManage) {\n  if (!this.props.model.isNew()) {\n    return (\n      <PublishCloud\n        model={this.props.model}\n        ref=\"publishButton\"\n        userCanManageFilesForContext={canManage}\n        usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n      />\n    )\n  }\n}\nFolderChild.renderMasterCourseIcon = function(canManage) {\n  // never show if not involved in blueprint courses\n  if (\n    !(\n      this.props.model.get('is_master_course_master_content') ||\n      this.props.model.get('is_master_course_child_content')\n    )\n  ) {\n    return null\n  }\n  // Never show the lock on master course folders\n  // because we don't always have it's children to know if any are locked\n  if (this.isFolder()) {\n    if (\n      this.props.model.get('is_master_course_master_content') ||\n      !this.props.model.get('restricted_by_master_course')\n    ) {\n      return null\n    }\n  }\n\n  return <MasterCourseLock model={this.props.model} canManage={canManage} />\n}\n\nFolderChild.renderEditingState = function() {\n  if (this.state.editing) {\n    return (\n      <form className=\"ef-edit-name-form\" onSubmit={preventDefault(this.saveNameEdit)}>\n        <div className=\"ic-Input-group\">\n          <input\n            type=\"text\"\n            ref=\"newName\"\n            className=\"ic-Input ef-edit-name-form__input\"\n            placeholder={I18n.t('name', 'Name')}\n            aria-label={\n              this.isFolder() ? I18n.t('folder_name', 'Folder Name') : I18n.t('File Name')\n            }\n            defaultValue={this.props.model.displayName()}\n            maxLength=\"255\"\n            onKeyUp={event => {\n              if (event.keyCode === 27) {\n                this.cancelEditingName()\n              }\n            }}\n          />\n          <button\n            type=\"button\"\n            className=\"Button ef-edit-name-form__button ef-edit-name-accept\"\n            onClick={this.saveNameEdit}\n          >\n            <i className=\"icon-check\" aria-hidden />\n            <span className=\"screenreader-only\">{I18n.t('accept', 'Accept')}</span>\n          </button>\n          <button\n            type=\"button\"\n            className=\"Button ef-edit-name-form__button ef-edit-name-cancel\"\n            onClick={this.cancelEditingName}\n          >\n            <i className=\"icon-x\" aria-hidden />\n            <span className=\"screenreader-only\">{I18n.t('cancel', 'Cancel')}</span>\n          </button>\n        </div>\n      </form>\n    )\n  } else if (this.isFolder()) {\n    return (\n      <a\n        ref=\"nameLink\"\n        href={`${filesEnv.baseUrl}/folder/${this.props.model.urlPath()}`}\n        className=\"ef-name-col__link\"\n        params={{splat: this.props.model.urlPath()}}\n        role=\"button\"\n      >\n        {/* we use an internal click wrapper span and handle a native js click event so we can\n              intercept the link click event before page.js gets it. We want to prevent page.js from\n              getting the click event if there is an error and we don't actually want to navigate.\n              React's simulated events happen after the native event has been fully dispatched, so\n              we can't use react events to intercept the event before page.js processes it. */}\n        <span\n          className=\"ef-name-col__click-wrapper\"\n          ref={elt => {\n            if (elt) elt.addEventListener('click', this.checkForAccess)\n          }}\n        >\n          <span className=\"ef-big-icon-container\">\n            <FilesystemObjectThumbnail model={this.props.model} />\n          </span>\n          <span className=\"ef-name-col__text\">{this.props.model.displayName()}</span>\n        </span>\n      </a>\n    )\n  } else {\n    return (\n      <a\n        href={this.props.model.get('url')}\n        onClick={preventDefault(this.handleFileLinkClick)}\n        className=\"ef-name-col__link\"\n        ref=\"nameLink\"\n        role=\"button\"\n      >\n        <span className=\"ef-big-icon-container\">\n          <FilesystemObjectThumbnail model={this.props.model} />\n        </span>\n        <span className=\"ef-name-col__text\">{this.props.model.displayName()}</span>\n      </a>\n    )\n  }\n}\n\nFolderChild.renderUsageRightsIndicator = function() {\n  if (this.props.usageRightsRequiredForContext) {\n    return (\n      <div className=\"ef-usage-rights-col\" role=\"gridcell\">\n        <UsageRightsIndicator\n          model={this.props.model}\n          userCanManageFilesForContext={this.props.userCanManageFilesForContext}\n          userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n          usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n          modalOptions={this.props.modalOptions}\n        />\n      </div>\n    )\n  }\n}\n\nFolderChild.render = function() {\n  const user = this.props.model.get('user') || {}\n  const selectCheckboxLabel = I18n.t('Select %{itemName}', {\n    itemName: this.props.model.displayName()\n  })\n  const keyboardCheckboxClass = classnames({\n    'screenreader-only': this.state.hideKeyboardCheck,\n    'multiselectable-toggler': true\n  })\n  const keyboardLabelClass = classnames({\n    'screenreader-only': !this.state.hideKeyboardCheck\n  })\n  const parentFolder = this.props.model.collection && this.props.model.collection.parentFolder\n  const canManage =\n    this.props.userCanManageFilesForContext &&\n    (!parentFolder || !parentFolder.get('for_submissions')) &&\n    !this.props.model.get('for_submissions')\n\n  return (\n    <div {...this.getAttributesForRootNode()}>\n      <label className={keyboardCheckboxClass}>\n        <input\n          type=\"checkbox\"\n          onFocus={() => {\n            this.setState({hideKeyboardCheck: false})\n          }}\n          onBlur={() => {\n            this.setState({hideKeyboardCheck: true})\n          }}\n          className={keyboardCheckboxClass}\n          checked={this.props.isSelected}\n          onChange={() => {}}\n        />\n        <span className={keyboardLabelClass}>{selectCheckboxLabel}</span>\n      </label>\n\n      <div className=\"ef-name-col\" role=\"rowheader\">\n        {this.renderEditingState()}\n      </div>\n\n      <div className=\"ef-date-created-col\" role=\"gridcell\">\n        <FriendlyDatetime dateTime={this.props.model.get('created_at')} />\n      </div>\n\n      <div className=\"ef-date-modified-col\" role=\"gridcell\">\n        {!this.isFolder() && <FriendlyDatetime dateTime={this.props.model.get('modified_at')} />}\n      </div>\n\n      <div className=\"ef-modified-by-col ellipsis\" role=\"gridcell\">\n        <a href={user.html_url} className=\"ef-plain-link\">\n          {user.display_name}\n        </a>\n      </div>\n\n      <div className=\"ef-size-col\" role=\"gridcell\">\n        {friendlyBytes(this.props.model.get('size'))}\n      </div>\n\n      {this.renderUsageRightsIndicator()}\n\n      <div className=\"ef-links-col\" role=\"gridcell\">\n        {this.renderMasterCourseIcon(canManage)}\n        {this.renderPublishCloud(canManage && this.props.userCanRestrictFilesForContext)}\n        {this.renderItemCog(canManage)}\n      </div>\n    </div>\n  )\n}\n\nexport default createReactClass(FolderChild)\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"  \\\"}},\\\"cy\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Gollwng eitemau iw llwytho i fyny\\\"}},\\\"da\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slip elementer, som skal indlses\\\"}},\\\"da-x-k12\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slip elementer, som skal indlses\\\"}},\\\"de\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Elemente zum Hochladen ablegen\\\"}},\\\"el\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"   \\\"}},\\\"en-AU\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Drop items to upload\\\"}},\\\"en-CA\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Drop items to upload\\\"}},\\\"en-GB\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Drop items to upload\\\"}},\\\"es\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Soltar los items que desea cargar\\\"}},\\\"fa\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"   \\\"}},\\\"fi\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Pudota ladattavat kohteet\\\"}},\\\"fr\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Dposer les lments  mettre en ligne\\\"}},\\\"fr-CA\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Dposer les lments  mettre en ligne\\\"}},\\\"he\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"  \\\"}},\\\"ht\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Mete eleman pou transfere yo\\\"}},\\\"hu\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Fjlok idehzsa a feltltshez\\\"}},\\\"hy\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"   \\\"}},\\\"is\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slepptu atrium sem  a hlaa upp\\\"}},\\\"it\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Rilascia elementi da caricare\\\"}},\\\"ja\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"\\\"}},\\\"mi\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Maturuturu temi ki te tukuake\\\"}},\\\"nb\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slippe elementer for  laste opp\\\"}},\\\"nb-x-k12\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slippe elementer for  laste opp\\\"}},\\\"nl\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Items neerzetten om te uploaden\\\"}},\\\"nn\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slepp element for opplasting\\\"}},\\\"pl\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Upu elementy, aby przekaza\\\"}},\\\"pt\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Largar itens para carregar\\\"}},\\\"pt-BR\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Soltar os itens para enviar\\\"}},\\\"ru\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"   \\\"}},\\\"sl\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Spusti elemente za nalaganje\\\"}},\\\"sv\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slpp objekt fr att ladda upp\\\"}},\\\"sv-x-k12\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Slpp objekt fr att ladda upp\\\"}},\\\"tr\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"Yklemek istediiniz eyi srkleyiniz\\\"}},\\\"uk\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"    \\\"}},\\\"zh-Hans\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"\\\"}},\\\"zh-Hant\\\":{\\\"upload_drop_zone\\\":{\\\"drop_to_upload\\\":\\\"\\\"}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/upload_drop_zone';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('upload_drop_zone');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport I18n from 'i18n!upload_drop_zone'\nimport FileOptionsCollection from 'compiled/react_files/modules/FileOptionsCollection'\nimport Folder from 'compiled/models/Folder'\nimport 'compiled/jquery.rails_flash_notifications'\n\nclass UploadDropZone extends React.Component {\n  static displayName = 'UploadDropZone'\n\n  static propTypes = {\n    currentFolder: PropTypes.instanceOf(Folder)\n  }\n\n  state = {active: false}\n\n  componentDidMount() {\n    this.getParent().addEventListener('dragenter', this.onParentDragEnter)\n    document.addEventListener('dragenter', this.killWindowDropDisplay)\n    document.addEventListener('dragover', this.killWindowDropDisplay)\n    document.addEventListener('drop', this.killWindowDrop)\n  }\n\n  componentWillUnmount() {\n    this.getParent().removeEventListener('dragenter', this.onParentDragEnter)\n    document.removeEventListener('dragenter', this.killWindowDropDisplay)\n    document.removeEventListener('dragover', this.killWindowDropDisplay)\n    document.removeEventListener('drop', this.killWindowDrop)\n  }\n\n  onDragEnter = e => {\n    if (this.shouldAcceptDrop(e.dataTransfer)) {\n      this.setState({active: true})\n      e.dataTransfer.dropEffect = 'copy'\n      e.preventDefault()\n      e.stopPropagation() // keep event from getting to document\n      return false\n    } else {\n      return true\n    }\n  }\n\n  onDragLeave = e => {\n    this.setState({active: false})\n  }\n\n  onDrop = e => {\n    this.setState({active: false})\n    FileOptionsCollection.setFolder(this.props.currentFolder)\n    FileOptionsCollection.setOptionsFromFiles(e.dataTransfer.files, true)\n    e.preventDefault()\n    e.stopPropagation()\n    return false\n  }\n\n  /* when you drag a file over the parent, make drop zone active\n  # remainder of drag-n-drop events happen on dropzone\n  */\n  onParentDragEnter = e => {\n    if (this.shouldAcceptDrop(e.dataTransfer)) {\n      if (!this.state.active) {\n        this.setState({active: true})\n      }\n    }\n  }\n\n  killWindowDropDisplay = e => {\n    if (e.target != this.getParent()) {\n      e.preventDefault()\n    }\n  }\n\n  killWindowDrop = e => {\n    e.preventDefault()\n  }\n\n  shouldAcceptDrop = dataTransfer => {\n    if (dataTransfer) {\n      return _.indexOf(dataTransfer.types, 'Files') >= 0\n    }\n  }\n\n  getParent = () =>\n    // We are actually returning the parent's parent here because that\n    // gives a much more consistently sized container to start displaying\n    // the drop zone overlay with.\n    ReactDOM.findDOMNode(this).parentElement.parentElement\n\n  buildNonActiveDropZone = () => <div className=\"UploadDropZone\" />\n\n  buildInstructions = () => (\n    <div className=\"UploadDropZone__instructions\">\n      <i className=\"icon-upload UploadDropZone__instructions--icon-upload\" />\n      <div>\n        <p className=\"UploadDropZone__instructions--drag\">\n          {I18n.t('drop_to_upload', 'Drop items to upload')}\n        </p>\n      </div>\n    </div>\n  )\n\n  buildDropZone = () => (\n    <div\n      className=\"UploadDropZone UploadDropZone__active\"\n      onDrop={this.onDrop}\n      onDragLeave={this.onDragLeave}\n      onDragOver={this.onDragEnter}\n      onDragEnter={this.onDragEnter}\n    >\n      {this.buildInstructions()}\n    </div>\n  )\n\n  render() {\n    if (this.state.active) {\n      return this.buildDropZone()\n    } else {\n      return this.buildNonActiveDropZone()\n    }\n  }\n}\n\nexport default UploadDropZone\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport _ from 'underscore'\nimport PropTypes from 'prop-types'\n\nconst columns = [\n  {\n    displayName: I18n.t('name', 'Name'),\n    property: 'name',\n    className: 'ef-name-col'\n  },\n  {\n    displayNameShort: I18n.t('created_at_short', 'Created'),\n    displayName: I18n.t('created_at', 'Date Created'),\n    property: 'created_at',\n    className: 'ef-date-created-col'\n  },\n  {\n    displayNameShort: I18n.t('updated_at_short', 'Modified'),\n    displayName: I18n.t('updated_at', 'Date Modified'),\n    property: 'modified_at',\n    className: 'ef-date-modified-col'\n  },\n  {\n    displayName: I18n.t('modified_by', 'Modified By'),\n    className: 'ef-modified-by-col',\n    property: 'user'\n  },\n  {\n    displayName: I18n.t('size', 'Size'),\n    property: 'size',\n    className: 'ef-size-col'\n  },\n  {\n    displayName: I18n.t('Usage Rights'),\n    property: 'usage_rights',\n    className: 'ef-usage-rights-col'\n  }\n]\nexport default {\n  displayName: 'ColumnHeaders',\n\n  columns,\n\n  propTypes: {\n    query: PropTypes.object.isRequired,\n    areAllItemsSelected: PropTypes.func.isRequired\n  },\n\n  getInitialState() {\n    return {\n      hideToggleAll: true\n    }\n  },\n\n  queryParamsFor(query, property) {\n    const order = (query.sort || 'name') === property && query.order === 'desc' ? 'asc' : 'desc'\n    return _.defaults({sort: property, order}, query)\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport classnames from 'classnames'\nimport ColumnHeaders from 'compiled/react_files/components/ColumnHeaders'\n\nColumnHeaders.renderColumns = function(sort, order) {\n  return this.columns.map(column => {\n    if (column.property === 'usage_rights' && !this.props.usageRightsRequiredForContext) {\n      return\n    }\n    const isSortedCol = sort === column.property\n    if (this.props.query.sort && isSortedCol && order) {\n      const direction = order === 'asc' ? 'ascending' : 'descending'\n      $.screenReaderFlashMessage(\n        I18n.t('Sorted %{direction} by %{columnName}', {direction, columnName: column.displayName})\n      )\n    }\n    const columnClassNameObj = {\n      'current-filter': isSortedCol\n    }\n    columnClassNameObj[column.className] = true\n    const columnClassName = classnames(columnClassNameObj)\n    const linkClassName = classnames({\n      'visible-desktop': column.displayNameShort,\n      'ef-usage-rights-col-offset': column.property === 'usage_rights'\n    })\n\n    const encoded_path = this.props.pathname\n      .split('/')\n      .map(part => window.encodeURIComponent(part))\n      .join('/')\n    const href = `${encoded_path}?${$.param(\n      this.queryParamsFor(this.props.query, column.property)\n    )}`\n    const linkProps = {\n      className: 'ef-plain-link',\n      href\n    }\n    let linkText\n    if (column.property === 'select') {\n      linkText = <span className=\"screenreader-only\">{column.displayName}</span>\n    } else if (column.property == 'usage_rights') {\n      linkText = (\n        <i className=\"icon-files-copyright\">\n          <span className=\"screenreader-only\">{column.displayName}</span>\n        </i>\n      )\n    } else {\n      linkText = column.displayName\n    }\n\n    return (\n      <div\n        key={column.property}\n        className={columnClassName}\n        role=\"columnheader\"\n        aria-sort={{asc: 'ascending', desc: 'descending'}[isSortedCol && order] || 'none'}\n      >\n        <a {...linkProps}>\n          <span className={linkClassName}>{linkText}</span>\n          {column.displayNameShort && (\n            <span className=\"hidden-desktop\">{column.displayNameShort}</span>\n          )}\n          {isSortedCol && order === 'asc' && (\n            <i className=\"icon-mini-arrow-up\">\n              <span className=\"screenreader-only\">\n                {I18n.t('sorted_ascending', 'Sorted Ascending')}\n              </span>\n            </i>\n          )}\n          {isSortedCol && order === 'desc' && (\n            <i className=\"icon-mini-arrow-down\">\n              <span className=\"screenreader-only\">\n                {I18n.t('sorted_desending', 'Sorted Descending')}\n              </span>\n            </i>\n          )}\n        </a>\n      </div>\n    )\n  })\n}\n\nColumnHeaders.render = function() {\n  const sort = this.props.query.sort || 'name'\n  const order = this.props.query.order || 'asc'\n\n  return (\n    <header className=\"ef-directory-header\" role=\"row\">\n      <div className=\"screenreader-only\" role=\"columnheader\">\n        {I18n.t('Select')}\n      </div>\n      {this.renderColumns(sort, order)}\n      <div className=\"ef-links-col\" role=\"columnheader\">\n        <span className=\"screenreader-only\">{I18n.t('Actions')}</span>\n      </div>\n    </header>\n  )\n}\n\nexport default createReactClass(ColumnHeaders)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport UploadQueue from '../modules/UploadQueue'\n\nexport default {\n  displayName: 'CurrentUploads',\n\n  getInitialState() {\n    return {currentUploads: []}\n  },\n\n  componentWillMount() {\n    UploadQueue.onChange = () => this.setState({currentUploads: UploadQueue.getAllUploaders()})\n  },\n\n  componentWillUnmount() {\n    // noop\n    UploadQueue.onChange = function() {}\n  }\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport PropTypes from 'prop-types'\nimport $ from 'jquery'\nimport '../../jquery.rails_flash_notifications'\n\nexport default {\n  displayName: 'UploadProgress',\n\n  propTypes: {\n    uploader: PropTypes.shape({\n      getFileName: PropTypes.func.isRequired,\n      roundProgress: PropTypes.func.isRequired,\n      cancel: PropTypes.func.isRequired,\n      file: PropTypes.instanceOf(File).isRequired\n    })\n  },\n\n  getInitialState() {\n    return {\n      progress: 0,\n      messages: {}\n    }\n  },\n\n  componentWillMount() {\n    return this.sendProgressUpdate(this.state.progress)\n  },\n\n  componentWillReceiveProps(nextProps) {\n    const newProgress = nextProps.uploader.roundProgress()\n\n    if (this.state.progress !== newProgress) {\n      return this.sendProgressUpdate(newProgress)\n    }\n  },\n\n  componentWillUnmount() {\n    return this.sendProgressUpdate(this.state.progress)\n  },\n\n  sendProgressUpdate(progress) {\n    // Track which status updates have been sent to prevent duplicate messages\n    const {messages} = this.state\n\n    if (!(progress in messages)) {\n      const fileName = this.props.uploader.getFileName()\n\n      const message =\n        progress < 100\n          ? I18n.t('%{fileName} - %{progress} percent uploaded', {fileName, progress})\n          : I18n.t('%{fileName} uploaded successfully!', {fileName})\n\n      $.screenReaderFlashMessage(message)\n      messages[progress] = true\n\n      this.setState({messages, progress})\n    }\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport I18n from 'i18n!react_files'\nimport classnames from 'classnames'\nimport UploadProgress from 'compiled/react_files/components/UploadProgress'\nimport ProgressBar from '../shared/ProgressBar'\nimport mimeClass from 'compiled/util/mimeClass'\n\nUploadProgress.renderProgressBar = function() {\n  if (this.props.uploader.error) {\n    const errorMessage = this.props.uploader.error.message\n      ? I18n.t('Error: %{message}', {message: this.props.uploader.error.message})\n      : I18n.t('Error uploading file.')\n\n    return (\n      <span>\n        {errorMessage}\n        <button type=\"button\" className=\"btn-link\" onClick={() => this.props.uploader.upload()}>\n          {I18n.t('Retry')}\n        </button>\n      </span>\n    )\n  } else {\n    return <ProgressBar progress={this.props.uploader.roundProgress()} />\n  }\n}\n\nUploadProgress.render = function() {\n  const rowClassNames = classnames({\n    'ef-item-row': true,\n    'text-error': this.props.uploader.error\n  })\n\n  return (\n    <div className={rowClassNames}>\n      <div className=\"col-xs-6\">\n        <div className=\"media ellipsis\">\n          <span className=\"pull-left\">\n            <i className={`media-object mimeClass-${mimeClass(this.props.uploader.file.type)}`} />\n          </span>\n          <span className=\"media-body\" ref=\"fileName\">\n            {this.props.uploader.getFileName()}\n          </span>\n        </div>\n      </div>\n      <div className=\"col-xs-5\">{this.renderProgressBar()}</div>\n      <button\n        type=\"button\"\n        onClick={this.props.uploader.cancel}\n        aria-label={I18n.t('Cancel')}\n        className=\"btn-link upload-progress-view__button\"\n      >\n        x\n      </button>\n    </div>\n  )\n}\n\nexport default createReactClass(UploadProgress)\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport classnames from 'classnames'\nimport CurrentUploads from 'compiled/react_files/components/CurrentUploads'\nimport UploadProgress from './UploadProgress'\n\nCurrentUploads.renderUploadProgress = function() {\n  if (this.state.currentUploads.length) {\n    const progessComponents = this.state.currentUploads.map(uploader => {\n      return <UploadProgress uploader={uploader} key={uploader.getFileName()} />\n    })\n    return <div className=\"current_uploads__uploaders\">{progessComponents}</div>\n  } else {\n    return null\n  }\n}\n\nCurrentUploads.render = function() {\n  const classes = classnames({\n    current_uploads: this.state.currentUploads.length\n  })\n\n  return <div className={classes}>{this.renderUploadProgress()}</div>\n}\n\nexport default createReactClass(CurrentUploads)\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\n\nexport default function LoadingIndicator(props) {\n  const style = {\n    display: props.isLoading ? '' : 'none'\n  }\n\n  return (\n    <div style={style} className=\"paginatedView-loading\" role=\"status\" aria-live=\"polite\">\n      {I18n.t('Loading more results...')}\n    </div>\n  )\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport _ from 'underscore'\nimport classnames from 'classnames'\nimport I18n from 'i18n!react_files'\nimport ShowFolder from 'compiled/react_files/components/ShowFolder'\nimport FilePreview from './FilePreview'\nimport FolderChild from './FolderChild'\nimport UploadDropZone from './UploadDropZone'\nimport ColumnHeaders from './ColumnHeaders'\nimport CurrentUploads from './CurrentUploads'\nimport LoadingIndicator from './LoadingIndicator'\nimport page from 'page'\nimport FocusStore from 'compiled/react_files/modules/FocusStore'\n\nShowFolder.getInitialState = function() {\n  return {\n    hideToggleAll: true\n  }\n}\n\nShowFolder.closeFilePreview = function(url) {\n  page(url)\n  FocusStore.setFocusToItem()\n}\n\nShowFolder.renderFilePreview = function() {\n  /* Prepare and render the FilePreview if needed.\n       As long as ?preview is present in the url.\n    */\n  if (this.props.query.preview != null) {\n    return (\n      <FilePreview\n        isOpen\n        usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        currentFolder={this.props.currentFolder}\n        params={this.props.params}\n        query={this.props.query}\n        pathname={this.props.pathname}\n        splat={this.props.splat}\n        closePreview={this.closeFilePreview}\n      />\n    )\n  }\n}\n\nShowFolder.renderFolderChildOrEmptyContainer = function() {\n  if (this.props.currentFolder.isEmpty()) {\n    return (\n      <div ref=\"folderEmpty\" className=\"muted\">\n        {I18n.t('this_folder_is_empty', 'This folder is empty')}\n      </div>\n    )\n  } else {\n    return this.props.currentFolder\n      .children(this.props.query)\n      .map(child => (\n        <FolderChild\n          key={child.cid}\n          model={child}\n          isSelected={_.indexOf(this.props.selectedItems, child) >= 0}\n          toggleSelected={this.props.toggleItemSelected.bind(null, child)}\n          userCanManageFilesForContext={this.props.userCanManageFilesForContext}\n          userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n          usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n          externalToolsForContext={this.props.externalToolsForContext}\n          previewItem={this.props.previewItem.bind(null, child)}\n          dndOptions={this.props.dndOptions}\n          modalOptions={this.props.modalOptions}\n          clearSelectedItems={this.props.clearSelectedItems}\n          onMove={this.props.onMove}\n        />\n      ))\n  }\n}\n\nShowFolder.render = function() {\n  const currentState = this.state || {}\n  if (currentState.errorMessages) {\n    return (\n      <div>\n        {currentState.errorMessages.map(error => {\n          ;<div className=\"muted\">{error.message}</div>\n        })}\n      </div>\n    )\n  }\n\n  if (!this.props.currentFolder) {\n    return <div ref=\"emptyDiv\" />\n  }\n\n  let folderOrRootFolder\n  if (this.props.params.splat) {\n    folderOrRootFolder = 'folder'\n  } else {\n    folderOrRootFolder = 'rootFolder'\n  }\n\n  const foldersNextPageOrFilesNextPage =\n    this.props.currentFolder.folders.fetchingNextPage ||\n    this.props.currentFolder.files.fetchingNextPage\n\n  const selectAllLabelClass = classnames({\n    'screenreader-only': this.state.hideToggleAll\n  })\n\n  // We have to put the \"select all\" checkbox out here because VO won't read the table properly\n  // if it's in the table header, and won't read it at all if it's outside the table but inside\n  // the <div role=\"grid\">.\n  return (\n    <div>\n      <input\n        id=\"selectAllCheckbox\"\n        className={selectAllLabelClass}\n        type=\"checkbox\"\n        onFocus={event => this.setState({hideToggleAll: false})}\n        onBlur={event => this.setState({hideToggleAll: true})}\n        checked={this.props.areAllItemsSelected()}\n        onChange={event => this.props.toggleAllSelected(event.target.checked)}\n      />\n      <label htmlFor=\"selectAllCheckbox\" className={selectAllLabelClass}>\n        {I18n.t('select_all', 'Select All')}\n      </label>\n      <div role=\"grid\" style={{flex: '1 1 auto'}}>\n        <div\n          ref=\"accessibilityMessage\"\n          className=\"ShowFolder__accessbilityMessage col-xs\"\n          tabIndex={0}\n        >\n          {I18n.t(\n            'Warning: For improved accessibility in moving files, please use the Move To Dialog option found in the menu.'\n          )}\n        </div>\n        <UploadDropZone currentFolder={this.props.currentFolder} />\n        <CurrentUploads />\n        <ColumnHeaders\n          ref=\"columnHeaders\"\n          query={this.props.query}\n          pathname={this.props.pathname}\n          areAllItemsSelected={this.props.areAllItemsSelected}\n          usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        />\n        {this.renderFolderChildOrEmptyContainer()}\n        <LoadingIndicator isLoading={foldersNextPageOrFilesNextPage} />\n        {this.renderFilePreview()}\n      </div>\n    </div>\n  )\n}\n\nexport default createReactClass(ShowFolder)\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport I18n from 'i18n!react_files'\nimport FilesCollection from '../../collections/FilesCollection'\nimport customPropTypes from '../modules/customPropTypes'\nimport updateAPIQuerySortParams from '../utils/updateAPIQuerySortParams'\nimport getAllPages from '../utils/getAllPages'\nimport 'location-origin'\n\nexport default {\n  displayName: 'SearchResults',\n\n  propTypes: {\n    contextType: customPropTypes.contextType,\n    contextId: customPropTypes.contextId\n  },\n\n  name: 'search',\n\n  getInitialState() {\n    return {\n      collection: new FilesCollection(),\n      errors: null\n    }\n  },\n\n  onFetchError(jqXHR, textStatus, errorThrown) {\n    let responseText\n    const message = I18n.t('An unknown server error occurred.  Please try again.')\n\n    try {\n      responseText = JSON.parse(textStatus.responseText)\n    } catch (e) {\n      responseText = {errors: [{message}]}\n    }\n\n    const errors = _.isArray(responseText.errors)\n      ? this.translateErrors(responseText.errors)\n      : responseText.errors && responseText.errors.base\n      ? [{message: `${responseText.errors.base}, ${responseText.status}`}]\n      : [{message}]\n\n    this.setState({errors})\n    $.screenReaderFlashMessageExclusive(_.map(errors, error => error.message).join(' '))\n  },\n\n  translateErrors(errors) {\n    return _.map(errors, error => {\n      if (error.message === '3 or more characters is required') {\n        return {message: I18n.t('Please enter a search term with three or more characters')}\n      } else {\n        return error\n      }\n    })\n  },\n\n  updateResults(props) {\n    const oldUrl = this.state.collection.url\n    this.state.collection.url = `${window.location.origin}/api/v1/${this.props.contextType}/${this.props.contextId}/files`\n    updateAPIQuerySortParams(this.state.collection, this.props.query)\n\n    if (this.state.collection.url === oldUrl && this.state.collection.models.length > 0) {\n      return\n    } // doesn't search for the same thing twice\n    this.setState({collection: this.state.collection})\n\n    // Refactor this when given time. Maybe even use setState instead of forceUpdate\n    if (\n      !this.state.collection.loadedAll ||\n      !_.isEqual(this.props.query.search_term, props.query && props.query.search_term)\n    ) {\n      const forceUpdate = () => {\n        if (this.isMounted()) {\n          this.setState({errors: null})\n          this.forceUpdate()\n        }\n        $.screenReaderFlashMessageExclusive(\n          I18n.t('results_count', 'Showing %{num_results} search results', {\n            num_results: this.state.collection.length\n          })\n        )\n      }\n      return (\n        this.state.collection\n          .fetch({data: props.query, error: this.onFetchError})\n          .then(forceUpdate)\n          // TODO: use scroll position to only fetch the pages we need\n          .then(getAllPages.bind(null, this.state.collection, forceUpdate))\n      )\n    }\n  },\n\n  componentWillReceiveProps(newProps) {\n    return this.updateResults(newProps)\n  },\n\n  componentDidMount() {\n    this.updateResults(this.props)\n\n    // this setTimeout is to handle a race condition with the setTimeout in the componentWillUnmount method of ShowFolder\n    setTimeout(() => {\n      this.props.onResolvePath({\n        currentFolder: null,\n        rootTillCurrentFolder: null,\n        showingSearchResults: true,\n        searchResultCollection: this.state.collection\n      })\n    })\n  }\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default function NoResults({search_term}) {\n  return (\n    <div>\n      <p>\n        {I18n.t(\n          'errors.no_match.your_search',\n          'Your search - \"%{search_term}\" - did not match any files.',\n          {search_term}\n        )}\n      </p>\n      <p>{I18n.t('errors.no_match.suggestions', 'Suggestions:')}</p>\n      <ul>\n        <li>{I18n.t('errors.no_match.spelled', 'Make sure all words are spelled correctly.')}</li>\n        <li>{I18n.t('errors.no_match.keywords', 'Try different keywords.')}</li>\n        <li>\n          {I18n.t('errors.no_match.three_chars', 'Enter at least 3 letters in the search box.')}\n        </li>\n      </ul>\n    </div>\n  )\n}\n\nNoResults.propTypes = {\n  search_term: PropTypes.string\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!react_files'\nimport _ from 'underscore'\nimport React from 'react'\nimport createReactClass from 'create-react-class'\nimport SearchResults from 'compiled/react_files/components/SearchResults'\nimport NoResults from './NoResults'\nimport ColumnHeaders from './ColumnHeaders'\nimport Folder from 'compiled/models/Folder'\nimport FolderChild from './FolderChild'\nimport LoadingIndicator from './LoadingIndicator'\nimport FilePreview from './FilePreview'\nimport page from 'page'\nimport FocusStore from 'compiled/react_files/modules/FocusStore'\n\nSearchResults.displayErrors = function(errors) {\n  let error_message = null\n\n  if (errors != null) {\n    error_message = errors.map(error => <li>{error.message}</li>)\n  }\n\n  return (\n    <div>\n      <p>\n        {I18n.t(\n          {\n            one: 'Your search encountered the following error:',\n            other: 'Your search encountered the following errors:'\n          },\n          {count: errors.length}\n        )}\n      </p>\n      <ul>{error_message}</ul>\n    </div>\n  )\n}\n\nSearchResults.closeFilePreview = function(url) {\n  page(url)\n  FocusStore.setFocusToItem()\n}\n\nSearchResults.renderFilePreview = function() {\n  if (this.props.query.preview != null && this.state.collection.length) {\n    return (\n      /*\n       * Prepare and render the FilePreview if needed.\n       * As long as ?preview is present in the url.\n       */\n      <FilePreview\n        isOpen\n        params={this.props.params}\n        query={this.props.query}\n        collection={this.state.collection}\n        usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        splat={this.props.splat}\n        closePreview={this.closeFilePreview}\n      />\n    )\n  }\n}\n\nSearchResults.render = function() {\n  if (this.state.errors) {\n    return this.displayErrors(this.state.errors)\n  } else if (this.state.collection.loadedAll && this.state.collection.length == 0) {\n    return <NoResults search_term={this.props.query.search_term} />\n  } else {\n    return (\n      <div role=\"grid\">\n        <div\n          ref=\"accessibilityMessage\"\n          className=\"SearchResults__accessbilityMessage col-xs\"\n          tabIndex=\"0\"\n        >\n          {I18n.t(\n            'Warning: For improved accessibility in moving files, please use the Move To Dialog option found in the menu.'\n          )}\n        </div>\n        <ColumnHeaders\n          to=\"search\"\n          query={this.props.query}\n          params={this.props.params}\n          pathname={this.props.pathname}\n          toggleAllSelected={this.props.toggleAllSelected}\n          areAllItemsSelected={this.props.areAllItemsSelected}\n          usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n        />\n        {this.state.collection.models\n          .sort(\n            Folder.prototype.childrenSorter.bind(\n              this.state.collection,\n              this.props.query.sort,\n              this.props.query.order\n            )\n          )\n          .map(child => (\n            <FolderChild\n              key={child.cid}\n              model={child}\n              isSelected={_.indexOf(this.props.selectedItems, child) >= 0}\n              toggleSelected={this.props.toggleItemSelected.bind(null, child)}\n              userCanManageFilesForContext={this.props.userCanManageFilesForContext}\n              userCanRestrictFilesForContext={this.props.userCanRestrictFilesForContext}\n              usageRightsRequiredForContext={this.props.usageRightsRequiredForContext}\n              externalToolsForContext={this.props.externalToolsForContext}\n              previewItem={this.props.previewItem.bind(null, child)}\n              dndOptions={this.props.dndOptions}\n              modalOptions={this.props.modalOptions}\n              clearSelectedItems={this.props.clearSelectedItems}\n              onMove={this.props.onMove}\n            />\n          ))}\n\n        <LoadingIndicator isLoading={!this.state.collection.loadedAll} />\n\n        {this.renderFilePreview()}\n      </div>\n    )\n  }\n}\n\nexport default createReactClass(SearchResults)\n","/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport page from 'page'\nimport qs from 'qs'\nimport filesEnv from 'compiled/react_files/modules/filesEnv'\nimport FilesApp from './FilesApp'\nimport ShowFolder from './ShowFolder'\nimport SearchResults from './SearchResults'\n\n/**\n * Route Handlers\n */\nfunction renderShowFolder(ctx) {\n  ReactDOM.render(\n    <FilesApp\n      query={ctx.query}\n      params={ctx.params}\n      splat={ctx.splat}\n      pathname={ctx.pathname}\n      contextAssetString={window.ENV.context_asset_string}\n    >\n      <ShowFolder />\n    </FilesApp>,\n    document.getElementById('content')\n  )\n}\n\nfunction renderSearchResults(ctx) {\n  ReactDOM.render(\n    <FilesApp\n      query={ctx.query}\n      params={ctx.params}\n      splat={ctx.splat}\n      pathname={ctx.pathname}\n      contextAssetString={window.ENV.context_asset_string}\n    >\n      <SearchResults />\n    </FilesApp>,\n    document.getElementById('content')\n  )\n}\n\n/**\n * Middlewares\n */\n\nfunction parseQueryString(ctx, next) {\n  ctx.query = qs.parse(ctx.querystring)\n  next()\n}\n\nfunction getFolderSplat(ctx, next) {\n  /* This function only gets called when hitting the /folder/*\n   * route so we make that assumption here with many of the\n   * things being done.\n   */\n  const PATH_PREFIX = '/folder/'\n  const index = ctx.pathname.indexOf(PATH_PREFIX) + PATH_PREFIX.length\n  const rawSplat = ctx.pathname.slice(index)\n  ctx.splat = rawSplat\n    .split('/')\n    .map(part => window.encodeURIComponent(part))\n    .join('/')\n  next()\n}\n\nfunction getSplat(ctx, next) {\n  ctx.splat = ''\n  next()\n}\n\n/**\n * Route Configuration\n */\npage.base(filesEnv.baseUrl)\npage('*', getSplat) // Generally this will overridden by the folder route's middleware\npage('*', parseQueryString) // Middleware to parse querystring to object\npage('/', renderShowFolder)\npage('/search', renderSearchResults)\npage('/folder', '/')\npage('/folder/*', getFolderSplat, renderShowFolder)\n\nexport default {\n  start() {\n    page.start({click: false})\n  },\n  getFolderSplat // Export getSplat for testing\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport router from '../files/router'\nimport {monitorLtiMessages} from 'lti/messages'\n\nrouter.start()\nmonitorLtiMessages()\n","/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint no-console: 0 */\n\nimport $ from 'jquery'\nimport 'compiled/jquery.rails_flash_notifications'\nimport htmlEscape from 'str/htmlEscape'\nimport ToolLaunchResizer from './tool_launch_resizer'\nimport handleLtiPostMessage from './post_message/handleLtiPostMessage'\n\nlet beforeUnloadHandler\nfunction setUnloadMessage(msg) {\n  removeUnloadMessage()\n\n  beforeUnloadHandler = function(e) {\n    return (e.returnValue = msg || '')\n  }\n  window.addEventListener('beforeunload', beforeUnloadHandler)\n}\n\nfunction removeUnloadMessage() {\n  if (beforeUnloadHandler) {\n    window.removeEventListener('beforeunload', beforeUnloadHandler)\n    beforeUnloadHandler = null\n  }\n}\n\nfunction findDomForWindow(sourceWindow) {\n  const iframes = document.getElementsByTagName('IFRAME')\n  for (let i = 0; i < iframes.length; i += 1) {\n    if (iframes[i].contentWindow === sourceWindow) {\n      return iframes[i]\n    }\n  }\n  return null\n}\n\nexport function ltiMessageHandler(e) {\n  if (e.data.messageType) {\n    handleLtiPostMessage(e)\n    return\n  }\n\n  // Legacy post message handlers\n  try {\n    const message = JSON.parse(e.data)\n    switch (message.subject) {\n      case 'lti.frameResize':\n        const toolResizer = new ToolLaunchResizer()\n        var height = message.height\n        if (height <= 0) height = 1\n\n        const container = toolResizer\n          .tool_content_wrapper(message.token || e.origin)\n          .data('height_overridden', true)\n        // If content.length is 0 then jquery didn't the tool wrapper.\n        if (container.length > 0) {\n          toolResizer.resize_tool_content_wrapper(height, container)\n        } else {\n          // Attempt to find an embedded iframe that matches the event source.\n          const iframe = findDomForWindow(e.source)\n          if (iframe) {\n            if (typeof height === 'number') {\n              height += 'px'\n            }\n            iframe.height = height\n            iframe.style.height = height\n          }\n        }\n        break\n\n      case 'lti.fetchWindowSize': {\n        const iframe = findDomForWindow(e.source)\n        if (iframe) {\n          message.height = window.innerHeight\n          message.width = window.innerWidth\n          message.offset = $('.tool_content_wrapper').offset()\n          message.footer = $('#fixed_bottom').height() || 0\n          message.scrollY = window.scrollY\n          const strMessage = JSON.stringify(message)\n\n          iframe.contentWindow.postMessage(strMessage, '*')\n        }\n        break\n      }\n\n      case 'lti.showModuleNavigation':\n        if (message.show === true || message.show === false) {\n          $('.module-sequence-footer').toggle(message.show)\n        }\n        break\n\n      case 'lti.scrollToTop':\n        $('html,body').animate(\n          {\n            scrollTop: $('.tool_content_wrapper').offset().top\n          },\n          'fast'\n        )\n        break\n\n      case 'lti.setUnloadMessage':\n        setUnloadMessage(htmlEscape(message.message))\n        break\n\n      case 'lti.removeUnloadMessage':\n        removeUnloadMessage()\n        break\n\n      case 'lti.screenReaderAlert':\n        $.screenReaderFlashMessageExclusive(message.body.html || message.body)\n        break\n      case 'lti.enableScrollEvents': {\n        const iframe = findDomForWindow(e.source)\n        if (iframe) {\n          let timeout\n          window.addEventListener(\n            'scroll',\n            () => {\n              // requesting animation frames effectively debounces the scroll messages being sent\n              if (timeout) {\n                window.cancelAnimationFrame(timeout)\n              }\n\n              timeout = window.requestAnimationFrame(() => {\n                const msg = JSON.stringify({\n                  subject: 'lti.scroll',\n                  scrollY: window.scrollY\n                })\n                iframe.contentWindow.postMessage(msg, '*')\n              })\n            },\n            false\n          )\n        }\n        break\n      }\n    }\n  } catch (err) {\n    ;(console.error || console.log).call(console, 'invalid message received from')\n  }\n}\n\nexport function monitorLtiMessages() {\n  window.addEventListener('message', e => {\n    if (e.data !== '') ltiMessageHandler(e)\n  })\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\n\nexport default class ModalContent extends React.Component {\n  static displayName = 'ModalContent'\n\n  static defaultProps = {\n    className: 'ReactModal__Body',\n    style: {}\n  }\n\n  render() {\n    return (\n      <div className={this.props.className} style={this.props.style}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {whitelist} from './messageTypes'\n\n// page-global storage for data relevant to LTI postMessage events\nconst ltiState = {}\nexport {ltiState}\n\nconst handleLtiPostMessage = async e => {\n  const {messageType, data} = e.data\n  let handler\n\n  // Enforce messageType whitelist\n  if (!whitelist.includes(messageType)) {\n    console.error(`invalid messageType: ${messageType}`)\n    return false\n  }\n\n  try {\n    const handlerModule = await import(`./${messageType}.js`)\n    handler = handlerModule.default\n    handler(data)\n    return true\n  } catch (error) {\n    console.error(`Error loading or executing message handler for \"${messageType}\"`, error)\n  }\n}\n\nexport default handleLtiPostMessage\n"],"sourceRoot":""}