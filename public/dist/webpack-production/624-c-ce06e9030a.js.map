{"version":3,"sources":["webpack:///./public/javascripts/translations/blueprint_settingsSyncHistory.js","webpack:///./public/javascripts/dummyI18nResource.js?0197","webpack:///./app/jsx/blueprint_courses/components/SyncHistory.js"],"names":["mergeI18nTranslations","JSON","parse","scoped","PropTypes","func","bool","SyncHistory","Component","constructor","props","super","this","state","associations","mapAssociations","componentDidMount","hasLoadedHistory","loadHistory","hasLoadedAssociations","loadAssociations","componentWillReceiveProps","nextProps","setState","assocs","reduce","map","asc","Object","assign","id","renderLoading","isLoadingHistory","isLoadingAssociations","title","I18n","t","style","textAlign","Spinner","renderTitle","Text","as","render","migrations","mig","changes","change","exceptions","ex","course_id","className","migration","SyncHistoryItem","defaultProps","ConnectedSyncHistory","connect","selectedChange","selectedChangeLog","changeLogs","historyState","LoadStates","hasLoaded","status","isLoading","data","select","dispatch","bindActionCreators","actions"],"mappings":";;;AAMA,OAAAA,EAAA,GAAsBC,KAAKC,MAAM;;ICEd,YAAKC,OAAO,iC;ACwBVC,IAAdC,KAAcD,IAARE;AAEE,MAAMC,UAAoBC,YAiBvCC,YAAYC,GACVC,MAAMD,GACNE,KAAKC,MAAQ,CACXC,aAAcF,KAAKG,gBAAgBL,EAAMI,eAI7CE,oBACOJ,KAAKF,MAAMO,kBACdL,KAAKF,MAAMQ,cAERN,KAAKF,MAAMS,uBACdP,KAAKF,MAAMU,mBAIfC,0BAA0BC,GACxBV,KAAKW,SAAS,CACZT,aAAcF,KAAKG,gBAAgBO,EAAUR,gBAIjDC,gBAAgBS,EAAS,IACvB,OAAOA,EAAOC,OAAO,CAACC,EAAKC,IAAQC,OAAOC,OAAOH,EAAK,CAAC,CAACC,EAAIG,IAAKH,IAAO,IAG1EI,gBACE,GAAInB,KAAKF,MAAMsB,kBAAoBpB,KAAKF,MAAMuB,sBAAuB,CACnE,MAAMC,EAAQC,EAAKC,EAAE;AACrB,OACE,mBAAKC,MAAO,CAACC,UAAW,gBAAxB,EACE,YAACC,EAAA,EAAD,CAASC,YAAaN,IACtB,YAACO,EAAA,EAAD,CAAMC,GAAG,UAAT,EAAcR,IAKpB,OAAO,KAGTS,SAEE,MAAMC,EAAahC,KAAKF,MAAMkC,WAAWlB,IAAImB,IAC3CA,EAAIC,QAAQpB,IAAIqB,IACdA,EAAOC,WAAWtB,IAAIuB,GAAMrB,OAAOC,OAAOoB,EAAIrC,KAAKC,MAAMC,aAAamC,EAAGC,YAAc,KAChFH,IAEFF;AAGT,OACE,mBAAKM,UAAU,qBAAf,EACGvC,KAAKmB,iBACJa,EAAWlB,IAAI0B,GAAa,YAACC,EAAA,EAAD,CAAoCD,UAAWA,GAAzBA,EAAUtB,OAtEjDvB,EAYZ+C,aAAe,CACpBV,WAAY,GACZ9B,aAAc;AA8DlB,MAoBayC,EAAuBC,kBApBf3C,IACnB,MAAM4C,EAAiB5C,EAAM6C,mBAAqB7C,EAAM8C,WAAW9C,EAAM6C,mBACnEE,EAAeH,EACjB,CACExC,iBAAkB4C,IAAWC,UAAUL,EAAeM,QACtD/B,iBAAkB6B,IAAWG,UAAUP,EAAeM,QACtDnB,WAAYa,EAAeQ,KAAO,CAACR,EAAeQ,MAAQ,IAE5DC,YAAOrD,EAAO,CAAC,mBAAoB,mBAAoB;AAE3D,OAAOe,OAAOC,OACZqC,YAAOrD,EAAO,CACZ,wBACA,wBACA,CAAC,uBAAwB,kBAE3B+C,IAGmBO,GAAYC,6BAAmBC,IAASF,GAC3BX,CAGlCjD","file":"624-c-ce06e9030a.js","sourcesContent":["// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"تحميل سجل المزامنة\\\"},\\\"cy\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Wrthi’n llwytho Hanes Cysoni\\\"},\\\"da\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Indlæser synkroniseringshistorik\\\"},\\\"da-x-k12\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Indlæser synkroniseringshistorik\\\"},\\\"de\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Synchronisierungsverlauf laden\\\"},\\\"en-AU\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Loading Sync History\\\"},\\\"en-CA\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Loading Sync History\\\"},\\\"en-GB\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Loading Sync History\\\"},\\\"es\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Cargando historial de sincronización\\\"},\\\"fa\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"در حال بارگذاری تاریخچه همگام‌سازی\\\"},\\\"fi\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Ladataan synkronointihistoriaa\\\"},\\\"fr\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Chargement de l’historique de synchro\\\"},\\\"fr-CA\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Historique de synchronisation en cours de chargement...\\\"},\\\"he\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"טוען את הסטורית הסינכרון\\\"},\\\"ht\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Chajman Istorik Senkwonizasyon\\\"},\\\"is\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Sæki samhæfingarsögu\\\"},\\\"it\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Caricamento cronologia sincronizzazione\\\"},\\\"ja\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"同期履歴の読み込み\\\"},\\\"mi\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"E uta ana i te tukutahi hītori\\\"},\\\"nb\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Laster synkroniseringsloggen\\\"},\\\"nb-x-k12\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Laster synkroniseringsloggen\\\"},\\\"nl\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Synchronisatiegeschiedenis laden\\\"},\\\"nn\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Lastar synkroniseringshistorikk\\\"},\\\"pl\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Wczytywanie historii synchronizacji\\\"},\\\"pt\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"A carregar o histórico de sincronização\\\"},\\\"pt-BR\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Carregando histórico de sincronização\\\"},\\\"ru\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Загрузка истории синхр.\\\"},\\\"sl\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Nalaganje zgodovine sinhronizacije\\\"},\\\"sv\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Läser in synkroniseringshistorik\\\"},\\\"sv-x-k12\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Läser in synkroniseringshistorik\\\"},\\\"uk\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"Завантаження історії синхронізації\\\"},\\\"zh-Hans\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"正在加载同步历史记录\\\"},\\\"zh-Hant\\\":{\\\"loading_sync_history_9f342cbf\\\":\\\"載入同步歷史\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/blueprint_settingsSyncHistory';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('blueprint_settingsSyncHistory');\n  ","/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport I18n from 'i18n!blueprint_settingsSyncHistory'\nimport select from '../../shared/select'\n\nimport {Text, Spinner} from '@instructure/ui-elements'\nimport SyncHistoryItem from './SyncHistoryItem'\n\nimport actions from '../actions'\nimport propTypes from '../propTypes'\nimport LoadStates from '../loadStates'\n\nconst {func, bool} = PropTypes\n\nexport default class SyncHistory extends Component {\n  static propTypes = {\n    migrations: propTypes.migrationList,\n    loadHistory: func.isRequired,\n    isLoadingHistory: bool.isRequired,\n    hasLoadedHistory: bool.isRequired,\n    associations: propTypes.courseList,\n    loadAssociations: func.isRequired,\n    isLoadingAssociations: bool.isRequired,\n    hasLoadedAssociations: bool.isRequired\n  }\n\n  static defaultProps = {\n    migrations: [],\n    associations: []\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      associations: this.mapAssociations(props.associations)\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.hasLoadedHistory) {\n      this.props.loadHistory()\n    }\n    if (!this.props.hasLoadedAssociations) {\n      this.props.loadAssociations()\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      associations: this.mapAssociations(nextProps.associations)\n    })\n  }\n\n  mapAssociations(assocs = []) {\n    return assocs.reduce((map, asc) => Object.assign(map, {[asc.id]: asc}), {})\n  }\n\n  renderLoading() {\n    if (this.props.isLoadingHistory || this.props.isLoadingAssociations) {\n      const title = I18n.t('Loading Sync History')\n      return (\n        <div style={{textAlign: 'center'}}>\n          <Spinner renderTitle={title} />\n          <Text as=\"p\">{title}</Text>\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  render() {\n    // inject course data into exceptions\n    const migrations = this.props.migrations.map(mig => {\n      mig.changes.map(change => {\n        change.exceptions.map(ex => Object.assign(ex, this.state.associations[ex.course_id] || {}))\n        return change\n      })\n      return mig\n    })\n\n    return (\n      <div className=\"bcs__history\">\n        {this.renderLoading() ||\n          migrations.map(migration => <SyncHistoryItem key={migration.id} migration={migration} />)}\n      </div>\n    )\n  }\n}\n\nconst connectState = state => {\n  const selectedChange = state.selectedChangeLog && state.changeLogs[state.selectedChangeLog]\n  const historyState = selectedChange\n    ? {\n        hasLoadedHistory: LoadStates.hasLoaded(selectedChange.status),\n        isLoadingHistory: LoadStates.isLoading(selectedChange.status),\n        migrations: selectedChange.data ? [selectedChange.data] : []\n      }\n    : select(state, ['hasLoadedHistory', 'isLoadingHistory', 'migrations'])\n\n  return Object.assign(\n    select(state, [\n      'hasLoadedAssociations',\n      'isLoadingAssociations',\n      ['existingAssociations', 'associations']\n    ]),\n    historyState\n  )\n}\nconst connectActions = dispatch => bindActionCreators(actions, dispatch)\nexport const ConnectedSyncHistory = connect(\n  connectState,\n  connectActions\n)(SyncHistory)\n"],"sourceRoot":""}