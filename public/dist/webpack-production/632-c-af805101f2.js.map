{"version":3,"sources":["webpack:///./public/javascripts/lti/post_message/requestFullWindowLaunch.js"],"names":["handler","data","context","ENV","context_asset_string","replace","startsWith","DOMAIN_ROOT_ACCOUNT_ID","tool_launch_url","URL","searchParams","append","window","location","launch_url","origin","encodeURIComponent","toString","assign"],"mappings":";AAAA;AAqCeA,UAnBCC,IACd,IAAIC,EAAUC,IAAIC,qBAAqBC,QAAQ,IAAK;AAC9CH,EAAQI,WAAW,YAAcJ,EAAQI,WAAW,YACxDJ,EAAU,YAAcC,IAAII;AAG9B,MAAMC,EAAkB,IAAIC,IAAIR;AAChCO,EAAgBE,aAAaC,OAAO,4BAA6B,KAEjEH,EAAgBE,aAAaC,OAAO,wBAAyBC,OAAOC;AAEpE,MAAMC,EAAa,GAAH,OACdF,OAAOC,SAASE,OADF,YAEZb,EAFY,2DAE8Cc,mBAC5DR,EAAgBS;AAElBL,OAAOC,SAASK,OAAOJ","file":"632-c-af805101f2.js","sourcesContent":["/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst handler = data => {\n  let context = ENV.context_asset_string.replace('_', 's/')\n  if (!(context.startsWith('account') || context.startsWith('course'))) {\n    context = 'accounts/' + ENV.DOMAIN_ROOT_ACCOUNT_ID\n  }\n\n  const tool_launch_url = new URL(data)\n  tool_launch_url.searchParams.append('full_win_launch_requested', '1')\n  // xsslint safeString.property window.location\n  tool_launch_url.searchParams.append('platform_redirect_url', window.location)\n\n  const launch_url = `${\n    window.location.origin\n  }/${context}/external_tools/retrieve?display=borderless&url=${encodeURIComponent(\n    tool_launch_url.toString()\n  )}`\n  window.location.assign(launch_url)\n}\n\nexport default handler\n"],"sourceRoot":""}