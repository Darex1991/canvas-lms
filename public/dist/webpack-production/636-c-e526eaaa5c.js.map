{"version":3,"sources":["webpack:///./packages/canvas-media/es/shared/CanvasSelect.js","webpack:///./packages/canvas-media/es/ClosedCaptionCreator/ClosedCaptionCreatorRow.js","webpack:///./packages/canvas-media/es/shared/shortid.js","webpack:///./packages/canvas-media/es/ClosedCaptionCreator/index.js"],"names":["CanvasSelectOption","createElement","CanvasSelectGroup","propTypes","id","isRequired","value","label","Component","props","super","this","backupKey","handleBlur","event","setState","highlightedOptionId","announcement","onBlur","handleShowOptions","isShowingOptions","handleHideOptions","_event","state","inputValue","getOptionLabelById","selectedOptionId","handleHighlightOption","text","nowOpen","translatedStrings","LIST_EXPANDED","type","concat","handleSelectOption","LIST_COLLAPSED","prevSelection","OPTION_SELECTED","option","getOptionByFieldValue","onChange","_option","children","prevProps","_this$props","otherProps","noOptionsLabel","Fragment","Select","Object","assign","renderLabel","assistiveText","USE_ARROWS","onRequestShowOptions","onRequestHideOptions","onRequestHighlightOption","onRequestSelectOption","renderChildren","Alert","liveRegion","liveRegionPoliteness","screenReaderOnly","Array","isArray","matchComponentTypes","renderOption","renderGroup","renderNoOptionsOption","opts","map","child","filter","length","_option$props","optionProps","Option","key","isHighlighted","isSelected","group","_group$props","Group","c","oid","field","options","foundOpt","i","o","groupOptions","j","o2","defaultProps","args","handleLanguageChange","selectedLang","onLanguageSelected","languages","find","l","handleDeleteRow","_e","onDeleteRow","rowId","selectedFile","selectedLanguage","Flex","as","wrap","justifyItems","alignItems","renderSelectLanguage","renderChooseFile","_this$props$selectedL","CLOSED_CAPTIONS_SELECT_LANGUAGE","uploadMediaTranslations","UploadMediaStrings","Item","margin","ScreenReaderContent","placeholder","SelectStrings","_this$props$uploadMed","NO_FILE_CHOSEN","SUPPORTED_FILE_TYPES","CLOSED_CAPTIONS_CHOOSE_FILE","accept","ref","element","fileInput","e","onFileSelected","target","files","style","display","View","Text","Button","onClick","click","attachmentFileButton","name","color","REMOVE_FILE","borderWidth","padding","borderRadius","width","weight","IconButton","withBackground","withBorder","screenReaderLabel","lang","IconTrashLine","isReadonly","renderChosen","renderChoosing","shortId","String","fromCharCode","Math","floor","random","toString","substring","addingNewClosedCaption","newSelectedFile","newSelectedLanguage","subtitles","newButtonClick","newFile","prevState","language","file","isNew","updateSubtitles","ADDED_CAPTION","onRowDelete","subtitle","deletedLang","s","DELETED_CAPTION","_addButtonRef","window","setTimeout","focus","ADD_NEW_CAPTION_OR_SUBTITLE","isLiveRegionAtomic","cc","position","textAlign","elementRef","el","shape","IconAddLine"],"mappings":"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","file":"636-c-e526eaaa5c.js","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\n/*\n * Copyright (C) 2020 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/*\n---\n  CanvasSelect is a wrapper on the new (as of instui 5 or 6 or so) controlled-only Select\n  While CanvasSelect is also controlled-only, it has a simpler api and is almost a drop-in\n  replacement for the old instui Select used throughout canvas at this time. One big difference\n  is the need to pass in an options property rather than rendering <Options> children\n\n  It does not currently support old-Select's allowCustom property\n  (see https://instructure.design/#DeprecatedSelect)\n\n  It only handles single-select. Multi-select will likely have to be in a separate component\n\n  <CanvasSelect\n    id=\"your-id\"\n    label=\"select's label\"\n    value={value}             // should match the ID of the selected option\n    onChange={handleChange}   // function(event, selectedOption)\n    {...otherPropsPassedToTheUnderlyingSelect}  // if you need to (width=\"100%\" is a popular one)\n  >\n    <CanvasSelect.Option key=\"1\" id=\"1\" value=\"1\">one</CanvasSelect.Option>\n    <CanvasSelect.Option key=\"2\" id=\"2\" value=\"2\">two</CanvasSelect.Option>\n    <CanvasSelect.Option key=\"3\" id=\"3\" value=\"3\">three</CanvasSelect.Option>\n  </CanvasSelect>\n---\n*/\n\n/*\n *  this file is a copy of canvas-lms/packages/canvas-planner/src/CanvasSelect.js\n *  but with strings passed in, rather then formatMessage'd here.\n */\nimport React from 'react';\nimport { func, node, string, shape, oneOfType } from 'prop-types';\nimport { compact, castArray, isEqual } from 'lodash';\nimport formatMessage from 'format-message';\nimport { Select } from '@instructure/ui-select';\nimport { Alert } from '@instructure/ui-alerts';\nimport { matchComponentTypes } from '@instructure/ui-react-utils';\nconst noOptionsOptionId = '_noOptionsOption'; // CanvasSelectOption and CanvasSelectGroup are components our client can create thru CanvasSelect\n// to pass us our options. They are never rendered themselves, but get transformed into INSTUI's\n// Select.Option and Select.Group on rendering CanvasSelect. See renderChildren below.\n\nfunction CanvasSelectOption() {\n  return /*#__PURE__*/React.createElement(\"div\", null);\n}\n\nCanvasSelectOption.propTypes = {\n  id: string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  value: string.isRequired // eslint-disable-line react/no-unused-prop-types\n\n};\n\nfunction CanvasSelectGroup() {\n  return /*#__PURE__*/React.createElement(\"div\", null);\n}\n\nCanvasSelectGroup.propTypes = {\n  label: string.isRequired // eslint-disable-line react/no-unused-prop-types\n\n};\nexport default class CanvasSelect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.backupKey = 0;\n\n    this.handleBlur = event => {\n      this.setState({\n        highlightedOptionId: null,\n        announcement: null\n      });\n\n      if (this.props.onBlur) {\n        this.props.onBlur(event);\n      }\n    };\n\n    this.handleShowOptions = () => {\n      this.setState({\n        isShowingOptions: true\n      });\n    };\n\n    this.handleHideOptions = _event => {\n      this.setState(state => {\n        const text = this.getOptionLabelById(state.selectedOptionId);\n        return {\n          isShowingOptions: false,\n          highlightedOptionId: null,\n          inputValue: text\n        };\n      });\n    };\n\n    this.handleHighlightOption = (event, {\n      id\n    }) => {\n      if (id === noOptionsOptionId) return;\n      const text = this.getOptionLabelById(id);\n      const nowOpen = this.state.isShowingOptions ? '' : this.props.translatedStrings.LIST_EXPANDED;\n      const inputValue = event.type === 'keydown' ? text : this.state.inputValue;\n      this.setState({\n        highlightedOptionId: id,\n        inputValue,\n        announcement: \"\".concat(text, \" \").concat(nowOpen)\n      });\n    };\n\n    this.handleSelectOption = (event, {\n      id\n    }) => {\n      if (id === noOptionsOptionId) {\n        this.setState({\n          isShowingOptions: false,\n          announcement: this.props.translatedStrings.LIST_COLLAPSED\n        });\n      } else {\n        const text = this.getOptionLabelById(id);\n        const prevSelection = this.state.selectedOptionId;\n        this.setState({\n          selectedOptionId: id,\n          inputValue: text,\n          isShowingOptions: false,\n          announcement: formatMessage(this.props.translatedStrings.OPTION_SELECTED, {\n            option: text\n          })\n        });\n        const option = this.getOptionByFieldValue('id', id);\n\n        if (prevSelection !== id) {\n          this.props.onChange(event, option.props.value);\n        }\n      }\n    };\n\n    const _option = this.getOptionByFieldValue('value', props.value);\n\n    this.state = {\n      inputValue: _option ? _option.props.children : '',\n      isShowingOptions: false,\n      highlightedOptionId: null,\n      selectedOptionId: _option ? _option.props.id : null,\n      announcement: null\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.value !== prevProps.value || !isEqual(this.props.children, prevProps.children)) {\n      const option = this.getOptionByFieldValue('value', this.props.value); // eslint-disable-next-line react/no-did-update-set-state\n\n      this.setState({\n        inputValue: option ? option.props.children : '',\n        selectedOptionId: option ? option.props.id : ''\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          id = _this$props.id,\n          label = _this$props.label,\n          value = _this$props.value,\n          onChange = _this$props.onChange,\n          children = _this$props.children,\n          noOptionsLabel = _this$props.noOptionsLabel,\n          otherProps = _objectWithoutProperties(_this$props, [\"id\", \"label\", \"value\", \"onChange\", \"children\", \"noOptionsLabel\"]);\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, Object.assign({\n      id: id,\n      renderLabel: () => label,\n      assistiveText: this.props.translatedStrings.USE_ARROWS,\n      inputValue: this.state.inputValue,\n      isShowingOptions: this.state.isShowingOptions,\n      onBlur: this.handleBlur,\n      onRequestShowOptions: this.handleShowOptions,\n      onRequestHideOptions: this.handleHideOptions,\n      onRequestHighlightOption: this.handleHighlightOption,\n      onRequestSelectOption: this.handleSelectOption\n    }, otherProps), this.renderChildren(children)), /*#__PURE__*/React.createElement(Alert, {\n      liveRegion: this.props.liveRegion,\n      liveRegionPoliteness: \"assertive\",\n      screenReaderOnly: true\n    }, this.state.announcement));\n  }\n\n  renderChildren(children) {\n    if (!Array.isArray(children)) {\n      // children is 1 child\n      if (matchComponentTypes(children, [CanvasSelectOption])) {\n        return this.renderOption(children);\n      } else if (matchComponentTypes(children, [CanvasSelectGroup])) {\n        return this.renderGroup(children);\n      } else {\n        return this.renderNoOptionsOption();\n      }\n    }\n\n    const opts = children.map(child => {\n      if (Array.isArray(child)) {\n        return this.renderChildren(child);\n      } else if (matchComponentTypes(child, [CanvasSelectOption])) {\n        return this.renderOption(child);\n      } else if (matchComponentTypes(child, [CanvasSelectGroup])) {\n        return this.renderGroup(child);\n      }\n\n      return null;\n    }).filter(child => !!child); // instui Select blows up on undefined options\n\n    if (opts.length === 0) {\n      return this.renderNoOptionsOption();\n    }\n\n    return opts;\n  }\n\n  renderOption(option) {\n    const _option$props = option.props,\n          id = _option$props.id,\n          children = _option$props.children,\n          optionProps = _objectWithoutProperties(_option$props, [\"id\", \"children\"]);\n\n    return /*#__PURE__*/React.createElement(Select.Option, Object.assign({\n      id: id,\n      key: option.key || id || ++this.backupKey,\n      isHighlighted: id === this.state.highlightedOptionId,\n      isSelected: id === this.state.selectedOptionId\n    }, optionProps), children);\n  }\n\n  renderGroup(group) {\n    const _group$props = group.props,\n          id = _group$props.id,\n          label = _group$props.label,\n          otherProps = _objectWithoutProperties(_group$props, [\"id\", \"label\"]);\n\n    const children = compact(castArray(group.props.children));\n    return /*#__PURE__*/React.createElement(Select.Group, Object.assign({\n      \"data-testid\": \"Group:\".concat(label),\n      renderLabel: () => label,\n      key: group.key || id || ++this.backupKey\n    }, otherProps), children.map(c => this.renderOption(c)));\n  }\n\n  renderNoOptionsOption() {\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      id: noOptionsOptionId,\n      isHighlighted: false,\n      isSelected: false\n    }, this.props.noOptionsLabel);\n  }\n\n  getOptionLabelById(oid) {\n    const option = this.getOptionByFieldValue('id', oid);\n    return option ? option.props.children : '';\n  }\n\n  getOptionByFieldValue(field, value, options = castArray(this.props.children)) {\n    if (!this.props.children) return null;\n    let foundOpt = null;\n\n    for (let i = 0; i < options.length; ++i) {\n      const o = options[i];\n\n      if (Array.isArray(o)) {\n        foundOpt = this.getOptionByFieldValue(field, value, o);\n      } else if (matchComponentTypes(o, [CanvasSelectOption])) {\n        if (o.props[field] === value) {\n          foundOpt = o;\n        }\n      } else if (matchComponentTypes(o, [CanvasSelectGroup])) {\n        const groupOptions = castArray(o.props.children);\n\n        for (let j = 0; j < groupOptions.length; ++j) {\n          const o2 = groupOptions[j];\n\n          if (o2.props[field] === value) {\n            foundOpt = o2;\n            break;\n          }\n        }\n      }\n\n      if (foundOpt) {\n        break;\n      }\n    }\n\n    return foundOpt;\n  }\n\n}\nCanvasSelect.Option = CanvasSelectOption;\nCanvasSelect.Group = CanvasSelectGroup;\nCanvasSelect.propTypes = {\n  id: string,\n  label: oneOfType([node, func]).isRequired,\n  liveRegion: func,\n  value: string,\n  onChange: func.isRequired,\n  children: node,\n  noOptionsLabel: string,\n  // unselectable option to display when there are no options\n  translatedStrings: shape({\n    USE_ARROWS: string.isRequired,\n    LIST_COLLAPSED: string.isRequired,\n    LIST_EXPANDED: string.isRequired,\n    OPTION_SELECTED: string.isRequired\n  }),\n  onBlur: func\n};\nCanvasSelect.defaultProps = {\n  noOptionsLabel: '---'\n};","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nimport React, { Component } from 'react';\nimport { arrayOf, func, objectOf, shape, string } from 'prop-types';\nimport formatMessage from 'format-message';\nimport { Button, IconButton } from '@instructure/ui-buttons';\nimport { Flex } from '@instructure/ui-flex';\nimport { IconTrashLine } from '@instructure/ui-icons';\nimport { ScreenReaderContent } from '@instructure/ui-a11y';\nimport { Text } from '@instructure/ui-elements';\nimport { View } from '@instructure/ui-view';\nimport CanvasSelect from '../shared/CanvasSelect';\nexport default class ClosedCaptionCreatorRow extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLanguageChange = (event, selectedLang) => {\n      this.props.onLanguageSelected(this.props.languages.find(l => l.id === selectedLang));\n    };\n\n    this.handleDeleteRow = _e => {\n      this.props.onDeleteRow({\n        id: this.props.rowId\n      });\n    };\n  }\n\n  get isReadonly() {\n    return this.props.selectedFile && this.props.selectedLanguage;\n  }\n\n  renderChoosing() {\n    return /*#__PURE__*/React.createElement(Flex, {\n      as: \"div\",\n      wrap: \"wrap\",\n      justifyItems: \"start\",\n      alignItems: \"end\",\n      \"data-testid\": \"CC-CreatorRow-choosing\"\n    }, this.renderSelectLanguage(), this.renderChooseFile());\n  }\n\n  renderSelectLanguage() {\n    var _this$props$selectedL;\n\n    const CLOSED_CAPTIONS_SELECT_LANGUAGE = this.props.uploadMediaTranslations.UploadMediaStrings.CLOSED_CAPTIONS_SELECT_LANGUAGE;\n    return /*#__PURE__*/React.createElement(Flex.Item, {\n      margin: \"0 small small 0\"\n    }, /*#__PURE__*/React.createElement(CanvasSelect, {\n      value: (_this$props$selectedL = this.props.selectedLanguage) === null || _this$props$selectedL === void 0 ? void 0 : _this$props$selectedL.id,\n      label: /*#__PURE__*/React.createElement(ScreenReaderContent, null, CLOSED_CAPTIONS_SELECT_LANGUAGE),\n      liveRegion: this.props.liveRegion,\n      onChange: this.handleLanguageChange,\n      placeholder: CLOSED_CAPTIONS_SELECT_LANGUAGE,\n      translatedStrings: this.props.uploadMediaTranslations.SelectStrings\n    }, this.props.languages.map(o => {\n      return /*#__PURE__*/React.createElement(CanvasSelect.Option, {\n        key: o.id,\n        id: o.id,\n        value: o.id\n      }, o.label);\n    })));\n  }\n\n  renderChooseFile() {\n    const _this$props$uploadMed = this.props.uploadMediaTranslations.UploadMediaStrings,\n          NO_FILE_CHOSEN = _this$props$uploadMed.NO_FILE_CHOSEN,\n          SUPPORTED_FILE_TYPES = _this$props$uploadMed.SUPPORTED_FILE_TYPES,\n          CLOSED_CAPTIONS_CHOOSE_FILE = _this$props$uploadMed.CLOSED_CAPTIONS_CHOOSE_FILE;\n    return /*#__PURE__*/React.createElement(Flex.Item, {\n      margin: \"0 small small 0\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"attachmentFile\",\n      accept: \".vtt, .srt\",\n      ref: element => {\n        this.fileInput = element;\n      },\n      onChange: e => {\n        this.props.onFileSelected(e.target.files[0]);\n      },\n      style: {\n        display: 'none'\n      },\n      type: \"file\"\n    }), /*#__PURE__*/React.createElement(View, {\n      as: \"div\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      as: \"div\"\n    }, SUPPORTED_FILE_TYPES), /*#__PURE__*/React.createElement(Button, {\n      margin: \"xx-small 0 0 0\",\n      id: \"attachmentFileButton\",\n      onClick: () => {\n        this.fileInput.click();\n      },\n      ref: element => {\n        this.attachmentFileButton = element;\n      }\n    }, this.props.selectedFile ? this.props.selectedFile.name : CLOSED_CAPTIONS_CHOOSE_FILE), !this.props.selectedFile && /*#__PURE__*/React.createElement(View, {\n      display: \"inline-block\",\n      margin: \"0 0 0 small\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"secondary\"\n    }, NO_FILE_CHOSEN))));\n  }\n\n  renderChosen() {\n    const REMOVE_FILE = this.props.uploadMediaTranslations.UploadMediaStrings.REMOVE_FILE;\n    return /*#__PURE__*/React.createElement(Flex, {\n      as: \"div\",\n      wrap: \"wrap\",\n      justifyItems: \"start\",\n      alignItems: \"end\",\n      \"data-testid\": \"CC-CreatorRow-chosen\"\n    }, /*#__PURE__*/React.createElement(Flex.Item, {\n      margin: \"0 0 small 0\"\n    }, /*#__PURE__*/React.createElement(View, {\n      as: \"div\",\n      borderWidth: \"small\",\n      padding: \"0 0 0 small\",\n      borderRadius: \"medium\",\n      width: \"100%\"\n    }, /*#__PURE__*/React.createElement(Flex, {\n      justifyItems: \"space-between\"\n    }, /*#__PURE__*/React.createElement(Flex.Item, null, /*#__PURE__*/React.createElement(Text, {\n      weight: \"bold\"\n    }, this.props.selectedLanguage.label)), /*#__PURE__*/React.createElement(Flex.Item, {\n      margin: \"0 0 0 x-small\"\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      withBackground: false,\n      withBorder: false,\n      onClick: this.handleDeleteRow,\n      screenReaderLabel: formatMessage(REMOVE_FILE, {\n        lang: this.props.selectedLanguage.label\n      })\n    }, /*#__PURE__*/React.createElement(IconTrashLine, null)))))));\n  }\n\n  render() {\n    return this.isReadonly ? this.renderChosen() : this.renderChoosing();\n  }\n\n}\nClosedCaptionCreatorRow.propTypes = {\n  rowId: string,\n  languages: arrayOf(shape({\n    id: string,\n    label: string\n  })),\n  liveRegion: func,\n  uploadMediaTranslations: shape({\n    UploadMediaStrings: objectOf(string),\n    SelectStrings: objectOf(string)\n  }),\n  onDeleteRow: func,\n  onFileSelected: func,\n  onLanguageSelected: func,\n  selectedFile: shape({\n    name: string.isRequired\n  }),\n  // there's more, but his is all I care about\n  selectedLanguage: shape({\n    id: string.isRequired,\n    label: string.isRequired\n  })\n};","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nexport default function shortId() {\n  const prefix = String.fromCharCode(97 + Math.floor(Math.random() * 26));\n  const id = Math.random().toString(36).substring(2, 10);\n  return prefix + id;\n}","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nimport React, { Component } from 'react';\nimport { arrayOf, func, objectOf, shape, string } from 'prop-types';\nimport formatMessage from 'format-message';\nimport { Alert } from '@instructure/ui-alerts';\nimport { IconButton } from '@instructure/ui-buttons';\nimport { IconAddLine } from '@instructure/ui-icons';\nimport { View } from '@instructure/ui-view';\nimport ClosedCaptionCreatorRow from './ClosedCaptionCreatorRow';\nimport shortId from '../shared/shortid'; // TODO:\n//   - Limit file creation\n//   - Get current subtitles from API\n//   - Upload new subtitles via API\n//   - Download existing subtitles via download button\n//   - Delete existing subtitles locally and via API\n\nexport default class ClosedCaptionPanel extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      addingNewClosedCaption: true,\n      newSelectedFile: null,\n      newSelectedLanguage: null,\n      subtitles: [],\n      announcement: null\n    };\n\n    this.newButtonClick = () => {\n      this.setState({\n        addingNewClosedCaption: true,\n        newSelectedFile: null,\n        newSelectedLanguage: null,\n        announcement: null\n      });\n    };\n\n    this.onFileSelected = newFile => {\n      if (this.state.newSelectedLanguage && newFile) {\n        this.setState(prevState => {\n          const subtitles = prevState.subtitles.concat([{\n            id: shortId(),\n            language: prevState.newSelectedLanguage.id,\n            file: newFile,\n            isNew: true\n          }]);\n          this.props.updateSubtitles(subtitles);\n          return {\n            subtitles,\n            addingNewClosedCaption: false,\n            newSelectedFile: null,\n            newSelectedLanguage: null,\n            announcement: formatMessage(this.props.uploadMediaTranslations.UploadMediaStrings.ADDED_CAPTION, {\n              lang: prevState.newSelectedLanguage.label\n            })\n          };\n        });\n      } else {\n        this.setState({\n          newSelectedFile: newFile,\n          announcement: null\n        });\n      }\n    };\n\n    this.onLanguageSelected = lang => {\n      if (this.state.newSelectedFile) {\n        this.setState(prevState => {\n          const subtitles = prevState.subtitles.concat([{\n            id: shortId(),\n            language: lang.id,\n            file: prevState.newSelectedFile,\n            isNew: true\n          }]);\n          this.props.updateSubtitles(subtitles);\n          return {\n            subtitles,\n            addingNewClosedCaption: false,\n            newSelectedFile: null,\n            newSelectedLanguage: null,\n            announcement: formatMessage(this.props.uploadMediaTranslations.UploadMediaStrings.ADDED_CAPTION, {\n              lang: lang.label\n            })\n          };\n        });\n      } else {\n        this.setState({\n          newSelectedLanguage: lang,\n          announcement: null\n        });\n      }\n    };\n\n    this.onRowDelete = subtitle => {\n      if (subtitle.id) {\n        this.setState(prevState => {\n          const deletedLang = this.props.languages.find(l => l.id === subtitle.id);\n          const subtitles = prevState.subtitles.filter(s => s.id !== subtitle.id);\n          this.props.updateSubtitles(subtitles);\n          return {\n            subtitles,\n            addingNewClosedCaption: subtitles.length > 0 ? prevState.addingNewClosedCaption : true,\n            announcement: formatMessage(this.props.uploadMediaTranslations.UploadMediaStrings.DELETED_CAPTION, {\n              lang: deletedLang === null || deletedLang === void 0 ? void 0 : deletedLang.label\n            })\n          };\n        });\n      } else {\n        // should never get here\n        this.setState({\n          addingNewClosedCaption: true,\n          newSelectedFile: null,\n          newSelectedLanguage: null,\n          announcement: null\n        });\n      }\n    };\n  }\n\n  componentDidUpdate() {\n    if (this._addButtonRef) {\n      window.setTimeout(() => {\n        this._addButtonRef && this._addButtonRef.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const ADD_NEW_CAPTION_OR_SUBTITLE = this.props.uploadMediaTranslations.UploadMediaStrings.ADD_NEW_CAPTION_OR_SUBTITLE;\n    return /*#__PURE__*/React.createElement(View, {\n      display: \"inline-block\",\n      \"data-testid\": \"ClosedCaptionPanel\"\n    }, this.state.announcement && /*#__PURE__*/React.createElement(Alert, {\n      liveRegion: this.props.liveRegion,\n      screenReaderOnly: true,\n      isLiveRegionAtomic: true,\n      liveRegionPoliteness: \"assertive\"\n    }, this.state.announcement), /*#__PURE__*/React.createElement(View, {\n      display: \"inline-block\"\n    }, this.state.subtitles.map(cc => /*#__PURE__*/React.createElement(ClosedCaptionCreatorRow, {\n      key: cc.id,\n      liveRegion: this.props.liveRegion,\n      uploadMediaTranslations: this.props.uploadMediaTranslations,\n      onDeleteRow: this.onRowDelete,\n      onLanguageSelected: this.onLanguageSelected,\n      onFileSelected: this.onFileSelected,\n      languages: this.props.languages,\n      selectedLanguage: this.props.languages.find(l => l.id === cc.language),\n      selectedFile: cc.file,\n      rowId: cc.id\n    }))), this.state.addingNewClosedCaption ? /*#__PURE__*/React.createElement(View, {\n      as: \"div\"\n    }, /*#__PURE__*/React.createElement(ClosedCaptionCreatorRow, {\n      liveRegion: this.props.liveRegion,\n      uploadMediaTranslations: this.props.uploadMediaTranslations,\n      onDeleteRow: this.onRowDelete,\n      onLanguageSelected: this.onLanguageSelected,\n      onFileSelected: this.onFileSelected,\n      languages: this.props.languages,\n      selectedLanguage: this.state.newSelectedLanguage,\n      selectedFile: this.state.newSelectedFile\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'relative',\n        textAlign: 'center'\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      elementRef: el => {\n        this._addButtonRef = el;\n      },\n      shape: \"circle\",\n      color: \"primary\",\n      screenReaderLabel: ADD_NEW_CAPTION_OR_SUBTITLE,\n      onClick: this.newButtonClick,\n      margin: \"x-small auto\"\n    }, /*#__PURE__*/React.createElement(IconAddLine, null))));\n  }\n\n}\nClosedCaptionPanel.propTypes = {\n  liveRegion: func.isRequired,\n  updateSubtitles: func.isRequired,\n  uploadMediaTranslations: shape({\n    UploadMediaStrings: objectOf(string),\n    SelectStrings: objectOf(string)\n  }).isRequired,\n  languages: arrayOf(shape({\n    id: string,\n    label: string\n  })).isRequired\n};"],"sourceRoot":""}