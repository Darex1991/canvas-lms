{"version":3,"sources":["webpack:///./app/jsx/shared/ProgressBar.js","webpack:///./app/jsx/shared/helpers/createStore.js","webpack:///./app/jsx/shared/stores/ProgressStore.js","webpack:///./app/jsx/shared/ApiProgressBar.js","webpack:///./app/jsx/epub_exports/CourseStore.js","webpack:///./public/javascripts/translations/epub_exports.js","webpack:///./public/javascripts/dummyI18nResource.js?a52c","webpack:///./app/jsx/epub_exports/GenerateLink.js","webpack:///./app/jsx/epub_exports/DownloadLink.js","webpack:///./app/jsx/epub_exports/CourseListItem.js","webpack:///./app/jsx/epub_exports/CourseList.js","webpack:///./app/jsx/epub_exports/App.js","webpack:///./app/jsx/bundles/epub_exports.js","webpack:///./app/jsx/shared/FriendlyDatetime.js"],"names":["ProgressBar","props","className","classnames","progress","role","aria-valuenow","aria-valuemin","aria-valuemax","aria-label","style","width","Math","min","createStore","initialState","events","Backbone","Events","state","setState","newState","Object","assign","this","emitChange","getState","clearState","addChangeListener","listener","on","removeChangeListener","off","trigger","ProgressStore","_progresses","get","progress_id","url","$","getJSON","data","id","ApiProgressBar","React","Component","completion","workflow_state","intervalID","handleStoreChange","_","isObject","isComplete","includes","isInProgress","poll","componentDidMount","setInterval","delay","componentWillUnmount","clearInterval","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","onComplete","render","displayName","defaultProps","CourseEpubExportStore","_courses","getAll","each","courses","course","course_id","create","post","mergeI18nTranslations","JSON","parse","scoped","aria-hidden","GenerateLink","triggered","epubExport","epub_export","showGenerateLink","isEmpty","permissions","regenerate","_onClick","e","preventDefault","setTimeout","text","I18n","t","onClick","DownloadLink","showDownloadLink","download","downloadLink","attachment","message","href","epub_attachment","zip_attachment","CourseListItem","getDisplayState","getDisplayTimestamp","timestamp","updated_at","FriendlyDatetime","dateTime","_onComplete","classes","name","CourseList","map","key","EpubExportApp","CourseStore","handleCourseStoreChange","ready","_i","element","ReactDOM","memoize","showTime","timeElementProps","datetime","isDate","tz","fudged","fudgeDateForProfileTimezone","friendly","format","datetimeString","friendlyDatetime","timeProps","title","toISOString","fixedPrefix","prefix","endsWith","data-testid","ref","c","time","toLocaleDateString"],"mappings":"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","file":"epub_exports-c-8a573f8550.js","sourcesContent":["/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport {number, string} from 'prop-types'\nimport classnames from 'classnames'\n\nexport default function ProgressBar(props) {\n  return (\n    <div\n      className={classnames({\n        'progress-bar__bar-container': true,\n        'almost-done': props.progress === 100\n      })}\n    >\n      <div\n        className={classnames({\n          'progress-bar__bar': true,\n          'almost-done': props.progress === 100\n        })}\n        role=\"progressbar\"\n        aria-valuenow={props.progress}\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        aria-label={props['aria-label'] || ''}\n        style={{\n          width: `${Math.min(props.progress, 100)}%`\n        }}\n      />\n    </div>\n  )\n}\n\nProgressBar.propTypes = {\n  'aria-label': string,\n  progress: number.isRequired\n}\n","/*\n * Copyright (C) 2014 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'Backbone'\n\n/**\n * Creates a data store with some initial state.\n *\n * ```js\n * var UserStore = createStore({loaded: false, users: []});\n *\n * UserStore.load = function() {\n *   $.getJSON('/users', function(users) {\n *     UserStore.setState({loaded: true, users});\n *   });\n * };\n * ```\n *\n * Then in a component:\n *\n * ```js\n * var UsersView = React.createClass({\n *   getInitialState () {\n *     return UserStore.getState();\n *   },\n *\n *   componentDidMount () {\n *     UserStore.addChangeListener(this.handleStoreChange);\n *     UserStore.load();\n *   },\n *\n *   handleStoreChange () {\n *     this.setState(UserStore.getState());\n *   }\n * });\n * ```\n */\n\nfunction createStore(initialState) {\n  const events = {...Backbone.Events}\n  let state = initialState || {}\n\n  return {\n    setState(newState) {\n      Object.assign(state, newState)\n      this.emitChange()\n    },\n\n    getState() {\n      return state\n    },\n\n    clearState() {\n      state = {}\n      this.emitChange()\n    },\n\n    addChangeListener(listener) {\n      events.on('change', listener)\n    },\n\n    removeChangeListener(listener) {\n      events.off('change', listener)\n    },\n\n    emitChange() {\n      events.trigger('change')\n    }\n  }\n}\n\nexport default createStore\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport createStore from '../helpers/createStore'\nimport $ from 'jquery'\n\nconst ProgressStore = createStore({}),\n  _progresses = {}\n\nProgressStore.get = function(progress_id) {\n  const url = '/api/v1/progress/' + progress_id\n\n  $.getJSON(url, data => {\n    _progresses[data.id] = data\n    ProgressStore.setState(_progresses)\n  })\n}\n\nexport default ProgressStore\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'underscore'\nimport ProgressStore from './stores/ProgressStore'\nimport ProgressBar from './ProgressBar'\n\nclass ApiProgressBar extends React.Component {\n  static displayName = 'ProgressBar'\n\n  static propTypes = {\n    progress_id: PropTypes.string,\n    onComplete: PropTypes.func,\n    delay: PropTypes.number\n  }\n\n  //\n  // Preparation\n  //\n\n  static defaultProps = {\n    delay: 1000\n  }\n\n  state = {\n    completion: 0,\n    workflow_state: null\n  }\n\n  intervalID = null\n\n  //\n  // Lifecycle\n  //\n\n  componentDidMount() {\n    ProgressStore.addChangeListener(this.handleStoreChange)\n    this.intervalID = setInterval(this.poll, this.props.delay)\n  }\n\n  componentWillUnmount() {\n    ProgressStore.removeChangeListener(this.handleStoreChange)\n    if (this.intervalID !== null) {\n      clearInterval(this.intervalID)\n      this.intervalID = null\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      this.state.workflow_state != nextState.workflow_state ||\n      this.state.completion != nextState.completion ||\n      this.props.progress_id != nextProps.progress_id\n    )\n  }\n\n  componentDidUpdate() {\n    if (this.isComplete()) {\n      if (this.intervalID !== null) {\n        clearInterval(this.intervalID)\n        this.intervalID = null\n      }\n\n      if (this.props.onComplete !== undefined) {\n        this.props.onComplete()\n      }\n    }\n  }\n\n  //\n  // Custom Helpers\n  //\n\n  handleStoreChange = () => {\n    const progress = ProgressStore.getState()[this.props.progress_id]\n\n    if (_.isObject(progress)) {\n      this.setState({\n        completion: progress.completion,\n        workflow_state: progress.workflow_state\n      })\n    }\n  }\n\n  isComplete = () => ['completed', 'failed'].includes(this.state.workflow_state)\n\n  isInProgress = () => ['queued', 'running'].includes(this.state.workflow_state)\n\n  poll = () => {\n    if (this.props.progress_id !== undefined) {\n      ProgressStore.get(this.props.progress_id)\n    }\n  }\n\n  //\n  // Render\n  //\n\n  render() {\n    if (!this.isInProgress()) {\n      return null\n    }\n\n    return (\n      <div style={{width: '300px'}}>\n        <ProgressBar progress={this.state.completion} />\n      </div>\n    )\n  }\n}\n\nexport default ApiProgressBar\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore'\nimport createStore from '../shared/helpers/createStore'\nimport $ from 'jquery'\n\nconst CourseEpubExportStore = createStore({}),\n  _courses = {}\n\nCourseEpubExportStore.getAll = function() {\n  $.getJSON('/api/v1/epub_exports', data => {\n    _.each(data.courses, course => {\n      _courses[course.id] = course\n    })\n    CourseEpubExportStore.setState(_courses)\n  })\n}\n\nCourseEpubExportStore.get = function(course_id, id) {\n  const url = '/api/v1/courses/' + course_id + '/epub_exports/' + id\n  $.getJSON(url, data => {\n    _courses[data.id] = data\n    CourseEpubExportStore.setState(_courses)\n  })\n}\n\nCourseEpubExportStore.create = function(id) {\n  const url = '/api/v1/courses/' + id + '/epub_exports'\n  $.post(\n    url,\n    {},\n    data => {\n      _courses[data.id] = data\n      CourseEpubExportStore.setState(_courses)\n    },\n    'json'\n  )\n}\n\nexport default CourseEpubExportStore\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"تنزيل الملفات المرتبطة\\\",\\\"download_epub_757cf0af\\\":\\\"تنزيل ePub\\\",\\\"failed_307449e1\\\":\\\"فشل:\\\",\\\"generate_epub_80e89ea4\\\":\\\"إنشاء ePub\\\",\\\"generated_f26ee56b\\\":\\\"تم إنشاؤه:\\\",\\\"generating_5b5e20f8\\\":\\\"جارٍ الإنشاء:\\\",\\\"generating_c2aabc02\\\":\\\"جارٍ الإنشاء...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"إعادة إنشاء ePub\\\"},\\\"cy\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Llwytho Ffeiliau Cysylltiedig i lawr\\\",\\\"download_epub_757cf0af\\\":\\\"Llwytho ePub i lawr\\\",\\\"failed_307449e1\\\":\\\"Wedi methu:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Creu ePub\\\",\\\"generated_f26ee56b\\\":\\\"Wedi creu:\\\",\\\"generating_5b5e20f8\\\":\\\"Creu:\\\",\\\"generating_c2aabc02\\\":\\\"Wrthi’n creu...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Ail-greu ePub\\\"},\\\"da\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Download tilknyttede filer\\\",\\\"download_epub_757cf0af\\\":\\\"Download ePub\\\",\\\"failed_307449e1\\\":\\\"Mislykkedes:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generer ePub\\\",\\\"generated_f26ee56b\\\":\\\"Genereret:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererer:\\\",\\\"generating_c2aabc02\\\":\\\"Genererer ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Gendan ePub\\\"},\\\"da-x-k12\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Download tilknyttede filer\\\",\\\"download_epub_757cf0af\\\":\\\"Download ePub\\\",\\\"failed_307449e1\\\":\\\"Mislykkedes:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generer ePub\\\",\\\"generated_f26ee56b\\\":\\\"Genereret:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererer:\\\",\\\"generating_c2aabc02\\\":\\\"Genererer ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Gendan ePub\\\"},\\\"de\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Zugehörige Dateien herunterladen\\\",\\\"download_epub_757cf0af\\\":\\\"ePub herunterladen\\\",\\\"failed_307449e1\\\":\\\"Fehlgeschlagen:\\\",\\\"generate_epub_80e89ea4\\\":\\\"ePub erzeugen\\\",\\\"generated_f26ee56b\\\":\\\"Erzeugt:\\\",\\\"generating_5b5e20f8\\\":\\\"Wird erzeugt:\\\",\\\"generating_c2aabc02\\\":\\\"Wird erzeugt ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"ePub erneut erzeugen\\\"},\\\"el\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Λήψη Σχετιζόμενων Αρχείων\\\",\\\"download_epub_757cf0af\\\":\\\"Λήψη ePub\\\",\\\"failed_307449e1\\\":\\\"Απέτυχε:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Δημιουργία ePub\\\",\\\"generated_f26ee56b\\\":\\\"Δημιουργήθηκε:\\\",\\\"generating_5b5e20f8\\\":\\\"Δημιουργία:\\\",\\\"generating_c2aabc02\\\":\\\"Δημιουργία...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Εκ νέου δημιουργία ePub\\\"},\\\"en-AU\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Download Associated Files\\\",\\\"download_epub_757cf0af\\\":\\\"Download ePub\\\",\\\"failed_307449e1\\\":\\\"Failed:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generate ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generated:\\\",\\\"generating_5b5e20f8\\\":\\\"Generating:\\\",\\\"generating_c2aabc02\\\":\\\"Generating...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regenerate ePub\\\"},\\\"en-CA\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Download Associated Files\\\",\\\"download_epub_757cf0af\\\":\\\"Download ePub\\\",\\\"failed_307449e1\\\":\\\"Failed:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generate ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generated:\\\",\\\"generating_5b5e20f8\\\":\\\"Generating:\\\",\\\"generating_c2aabc02\\\":\\\"Generating...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regenerate ePub\\\"},\\\"en-GB\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Download associated files\\\",\\\"download_epub_757cf0af\\\":\\\"Download ePub\\\",\\\"failed_307449e1\\\":\\\"Failed:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generate ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generated:\\\",\\\"generating_5b5e20f8\\\":\\\"Generating:\\\",\\\"generating_c2aabc02\\\":\\\"Generating...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regenerate ePub\\\"},\\\"es\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Bajar los archivos asociados\\\",\\\"download_epub_757cf0af\\\":\\\"Descargar la publicación electrónica\\\",\\\"failed_307449e1\\\":\\\"Fallido:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generar publicación electrónica\\\",\\\"generated_f26ee56b\\\":\\\"Generado:\\\",\\\"generating_5b5e20f8\\\":\\\"Generando:\\\",\\\"generating_c2aabc02\\\":\\\"Generando...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regenerar publicación electrónica\\\"},\\\"fa\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"بارگیری فایل های مرتبط\\\",\\\"download_epub_757cf0af\\\":\\\"بارگیری ePub\\\",\\\"failed_307449e1\\\":\\\"انجام نشد\\\",\\\"generate_epub_80e89ea4\\\":\\\"ایجاد ePub\\\",\\\"generated_f26ee56b\\\":\\\"ایجاد شد:\\\",\\\"generating_5b5e20f8\\\":\\\"در حال ایجاد:\\\",\\\"generating_c2aabc02\\\":\\\"در حال ایجاد...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"ایجاد دوباره ePub\\\"},\\\"fi\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Lataa liitetyt tiedostot\\\",\\\"download_epub_757cf0af\\\":\\\"Lataa ePub\\\",\\\"failed_307449e1\\\":\\\"Epäonnistui:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Luo ePub\\\",\\\"generated_f26ee56b\\\":\\\"Luotu:\\\",\\\"generating_5b5e20f8\\\":\\\"Luodaan:\\\",\\\"generating_c2aabc02\\\":\\\"Luodaan...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Luo ePub uudelleen\\\"},\\\"fr\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Téléverser les fichiers associés\\\",\\\"download_epub_757cf0af\\\":\\\"Téléverser l'ePub\\\",\\\"failed_307449e1\\\":\\\"Échec :\\\",\\\"generate_epub_80e89ea4\\\":\\\"Générer au format ePub\\\",\\\"generated_f26ee56b\\\":\\\"Généré :\\\",\\\"generating_5b5e20f8\\\":\\\"Génération de :\\\",\\\"generating_c2aabc02\\\":\\\"Génération en cours...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regénérer un format ePub\\\"},\\\"fr-CA\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Télécharger les fichiers associés\\\",\\\"download_epub_757cf0af\\\":\\\"Télécharger l'ePub\\\",\\\"failed_307449e1\\\":\\\"Échec :\\\",\\\"generate_epub_80e89ea4\\\":\\\"Générer au format ePub\\\",\\\"generated_f26ee56b\\\":\\\"Généré :\\\",\\\"generating_5b5e20f8\\\":\\\"Génération de :\\\",\\\"generating_c2aabc02\\\":\\\"Génération en cours...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regénérer un format ePub\\\"},\\\"he\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"הורדת קבצים נלווים\\\",\\\"download_epub_757cf0af\\\":\\\"הורדת ePub\\\",\\\"failed_307449e1\\\":\\\"נכשל:\\\",\\\"generate_epub_80e89ea4\\\":\\\"צור/י ePub\\\",\\\"generated_f26ee56b\\\":\\\"נוצר:\\\",\\\"generating_5b5e20f8\\\":\\\"מייצר:\\\",\\\"generating_c2aabc02\\\":\\\"מייצר:\\\",\\\"regenerate_epub_395c8e56\\\":\\\"יצירה מחדש של ePub\\\"},\\\"ht\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Telechaje Fichye Asosye\\\",\\\"download_epub_757cf0af\\\":\\\"Telechaje ePub\\\",\\\"failed_307449e1\\\":\\\"Echwe:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Jenere ePub\\\",\\\"generated_f26ee56b\\\":\\\"Jenere:\\\",\\\"generating_5b5e20f8\\\":\\\"Jenerasyon:\\\",\\\"generating_c2aabc02\\\":\\\"Jenerasyon...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Rejenere ePub\\\"},\\\"hu\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Társított fájlok letöltése \\\",\\\"download_epub_757cf0af\\\":\\\"ePub letöltése\\\",\\\"failed_307449e1\\\":\\\"Sikertelen: \\\",\\\"generate_epub_80e89ea4\\\":\\\"ePub generálása\\\",\\\"generated_f26ee56b\\\":\\\"Generálva: \\\",\\\"generating_5b5e20f8\\\":\\\"Generálás: \\\",\\\"generating_c2aabc02\\\":\\\"Generálás...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"ePub újragenerálása\\\"},\\\"hy\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Ներբեռնել ասոցացված ֆայլերը\\\",\\\"download_epub_757cf0af\\\":\\\"Ներբեռնել ePub\\\",\\\"failed_307449e1\\\":\\\"Չհաջողված փորձ.\\\",\\\"generate_epub_80e89ea4\\\":\\\"Գեներացնել ePub-ը\\\",\\\"generated_f26ee56b\\\":\\\"Գեներացված.\\\",\\\"generating_5b5e20f8\\\":\\\"Գեներացվում է.\\\",\\\"generating_c2aabc02\\\":\\\"Գեներացվում է...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Կրկին գեներացնել ePub-ը\\\"},\\\"is\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Hlaða niður tengdum skrám\\\",\\\"download_epub_757cf0af\\\":\\\"Hlaða niður ePub\\\",\\\"failed_307449e1\\\":\\\"Tókst ekki:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Búa til ePub\\\",\\\"generated_f26ee56b\\\":\\\"Búið til:\\\",\\\"generating_5b5e20f8\\\":\\\"Býr til:\\\",\\\"generating_c2aabc02\\\":\\\"Mynda...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Búa aftur til ePub\\\"},\\\"it\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Scarica file associati\\\",\\\"download_epub_757cf0af\\\":\\\"Scarica ePub\\\",\\\"failed_307449e1\\\":\\\"Non riuscito:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Genera ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generato:\\\",\\\"generating_5b5e20f8\\\":\\\"Generazione:\\\",\\\"generating_c2aabc02\\\":\\\"Generazione in corso...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Rigenera ePub\\\"},\\\"ja\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"関連ファイルをダウンロード\\\",\\\"download_epub_757cf0af\\\":\\\"ePubをダウンロード\\\",\\\"failed_307449e1\\\":\\\"失敗しました:\\\",\\\"generate_epub_80e89ea4\\\":\\\"ePubを生成\\\",\\\"generated_f26ee56b\\\":\\\"生成:\\\",\\\"generating_5b5e20f8\\\":\\\"生成中:\\\",\\\"generating_c2aabc02\\\":\\\"生成しています...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"ePubを再生成\\\"},\\\"mi\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Tikiake ngā kōnae e hāngai\\\",\\\"download_epub_757cf0af\\\":\\\"Tikiake ePub\\\",\\\"failed_307449e1\\\":\\\"I rahua:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Hanga ePub\\\",\\\"generated_f26ee56b\\\":\\\"hangaia:\\\",\\\"generating_5b5e20f8\\\":\\\"Whakanao:\\\",\\\"generating_c2aabc02\\\":\\\"Whakanao ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Whakamahi ePub\\\"},\\\"nb\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Last ned tilknyttede filer\\\",\\\"download_epub_757cf0af\\\":\\\"Last ned ePub\\\",\\\"failed_307449e1\\\":\\\"Mislyktes\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generere ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generert:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererer:\\\",\\\"generating_c2aabc02\\\":\\\"Genererer...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"regenerere ePub\\\"},\\\"nb-x-k12\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Last ned tilknyttede filer\\\",\\\"download_epub_757cf0af\\\":\\\"Last ned ePub\\\",\\\"failed_307449e1\\\":\\\"Mislyktes\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generere ePub\\\",\\\"generated_f26ee56b\\\":\\\"Generert:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererer:\\\",\\\"generating_c2aabc02\\\":\\\"Genererer...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"regenerere ePub\\\"},\\\"nl\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Gekoppelde bestanden downloaden\\\",\\\"download_epub_757cf0af\\\":\\\"ePub downloaden\\\",\\\"failed_307449e1\\\":\\\"Mislukt:\\\",\\\"generate_epub_80e89ea4\\\":\\\"ePub genereren\\\",\\\"generated_f26ee56b\\\":\\\"Gegenereerd:\\\",\\\"generating_5b5e20f8\\\":\\\"Bezig met genereren:\\\",\\\"generating_c2aabc02\\\":\\\"Bezig met genereren...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"ePub opnieuw genereren\\\"},\\\"nn\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Last ned tilknytte filer\\\",\\\"download_epub_757cf0af\\\":\\\"Last ned EPUB\\\",\\\"failed_307449e1\\\":\\\"Mislukkast:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generer EPUB\\\",\\\"generated_f26ee56b\\\":\\\"Generert:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererer:\\\",\\\"generating_c2aabc02\\\":\\\"Genererer...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regenerer EPUB\\\"},\\\"pl\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Pobierz powiązane pliki\\\",\\\"download_epub_757cf0af\\\":\\\"Pobierz ePub\\\",\\\"failed_307449e1\\\":\\\"Niepowodzenie\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generuj ePub\\\",\\\"generated_f26ee56b\\\":\\\"Wygenerowano:\\\",\\\"generating_5b5e20f8\\\":\\\"Trwa generowanie:\\\",\\\"generating_c2aabc02\\\":\\\"Trwa generowanie...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regeneruj ePub\\\"},\\\"pt\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Descarregar Arquivos associados\\\",\\\"download_epub_757cf0af\\\":\\\"Descarregar ePub\\\",\\\"failed_307449e1\\\":\\\"Falhou:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Gerar ePub\\\",\\\"generated_f26ee56b\\\":\\\"Gerado:\\\",\\\"generating_5b5e20f8\\\":\\\"Gerando:\\\",\\\"generating_c2aabc02\\\":\\\"Gerando...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Voltar a Gerar ePub\\\"},\\\"pt-BR\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Baixar Arquivos Associados\\\",\\\"download_epub_757cf0af\\\":\\\"Baixar ePub\\\",\\\"failed_307449e1\\\":\\\"Falhou:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Gerar ePub\\\",\\\"generated_f26ee56b\\\":\\\"Gerado:\\\",\\\"generating_5b5e20f8\\\":\\\"Gerando:\\\",\\\"generating_c2aabc02\\\":\\\"Gerando...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Regerar ePub\\\"},\\\"ru\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Загрузить связанные файлы\\\",\\\"download_epub_757cf0af\\\":\\\"Загрузить ePub\\\",\\\"failed_307449e1\\\":\\\"Ошибка:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Создать ePub\\\",\\\"generated_f26ee56b\\\":\\\"Создано:\\\",\\\"generating_5b5e20f8\\\":\\\"Создание:\\\",\\\"generating_c2aabc02\\\":\\\"Создание...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Восстановить ePub\\\"},\\\"sl\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Prenesi povezane datoteke\\\",\\\"download_epub_757cf0af\\\":\\\"Prenesi datoteko ePub\\\",\\\"failed_307449e1\\\":\\\"Neuspelo:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generiraj datoteko ePub\\\",\\\"generated_f26ee56b\\\":\\\"Ustvarjeno:\\\",\\\"generating_5b5e20f8\\\":\\\"Generiranje:\\\",\\\"generating_c2aabc02\\\":\\\"Generiranje ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Ponovno generiraj datoteko ePub\\\"},\\\"sv\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Ladda ner associerade filer\\\",\\\"download_epub_757cf0af\\\":\\\"Ladda ner ePub\\\",\\\"failed_307449e1\\\":\\\"Misslyckades:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generera ePub\\\",\\\"generated_f26ee56b\\\":\\\"Genererat:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererar:\\\",\\\"generating_c2aabc02\\\":\\\"Genererar ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Omgenerera ePub\\\"},\\\"sv-x-k12\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Ladda ner associerade filer\\\",\\\"download_epub_757cf0af\\\":\\\"Ladda ner ePub\\\",\\\"failed_307449e1\\\":\\\"Misslyckades:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Generera ePub\\\",\\\"generated_f26ee56b\\\":\\\"Genererat:\\\",\\\"generating_5b5e20f8\\\":\\\"Genererar:\\\",\\\"generating_c2aabc02\\\":\\\"Genererar ...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Omgenerera ePub\\\"},\\\"tr\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"İlgili Dosyaları İndir\\\",\\\"download_epub_757cf0af\\\":\\\"ePub İndir\\\",\\\"failed_307449e1\\\":\\\"Başarısız:\\\",\\\"generate_epub_80e89ea4\\\":\\\"ePub Oluştur\\\",\\\"generated_f26ee56b\\\":\\\"Oluşturulan:\\\",\\\"generating_5b5e20f8\\\":\\\"Oluşturuluyor:\\\",\\\"generating_c2aabc02\\\":\\\"Oluşturuluyor...\\\"},\\\"uk\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"Завантажити пов'язані файли\\\",\\\"download_epub_757cf0af\\\":\\\"Завантажити електронну публікацію\\\",\\\"failed_307449e1\\\":\\\"Не вдалося:\\\",\\\"generate_epub_80e89ea4\\\":\\\"Згенерувати ePub\\\",\\\"generated_f26ee56b\\\":\\\"Згенеровано:\\\",\\\"generating_5b5e20f8\\\":\\\"Генерується:\\\",\\\"generating_c2aabc02\\\":\\\"Генерується...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"Відновити ePub\\\"},\\\"zh-Hans\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"下载相关文件\\\",\\\"download_epub_757cf0af\\\":\\\" 下载 ePub\\\",\\\"failed_307449e1\\\":\\\"失败：\\\",\\\"generate_epub_80e89ea4\\\":\\\"生成 ePub\\\",\\\"generated_f26ee56b\\\":\\\"已生成：\\\",\\\"generating_5b5e20f8\\\":\\\"正生成：\\\",\\\"generating_c2aabc02\\\":\\\"正生成中...\\\",\\\"regenerate_epub_395c8e56\\\":\\\"重生ePub\\\"},\\\"zh-Hant\\\":{\\\"download_associated_files_f35dcb5e\\\":\\\"下載相關文檔\\\",\\\"download_epub_757cf0af\\\":\\\"下載 ePub 文檔\\\",\\\"failed_307449e1\\\":\\\"失敗：\\\",\\\"generate_epub_80e89ea4\\\":\\\"生成 ePub 文檔\\\",\\\"generated_f26ee56b\\\":\\\"已生成:\\\",\\\"generating_5b5e20f8\\\":\\\"正在生成:\\\",\\\"generating_c2aabc02\\\":\\\"正在生成…\\\",\\\"regenerate_epub_395c8e56\\\":\\\"重新生成 ePub 文檔\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/epub_exports';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('epub_exports');\n  ","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport I18n from 'i18n!epub_exports'\nimport classnames from 'classnames'\nimport _ from 'underscore'\nimport CourseEpubExportStore from './CourseStore'\n\nclass GenerateLink extends React.Component {\n  static displayName = 'GenerateLink'\n\n  static propTypes = {\n    course: PropTypes.object.isRequired\n  }\n\n  //\n  // Preparation\n  //\n\n  state = {\n    triggered: false\n  }\n\n  epubExport = () => this.props.course.epub_export || {}\n\n  showGenerateLink = () =>\n    _.isEmpty(this.epubExport()) ||\n    (_.isObject(this.epubExport().permissions) && this.epubExport().permissions.regenerate)\n\n  //\n  // Rendering\n  //\n\n  render() {\n    const text = {}\n\n    if (!this.showGenerateLink() && !this.state.triggered) return null\n\n    text[I18n.t('Regenerate ePub')] =\n      _.isObject(this.props.course.epub_export) && !this.state.triggered\n    text[I18n.t('Generate ePub')] =\n      !_.isObject(this.props.course.epub_export) && !this.state.triggered\n    text[I18n.t('Generating...')] = this.state.triggered\n\n    if (this.state.triggered) {\n      return (\n        <span>\n          <i className=\"icon-refresh\" aria-hidden=\"true\" />\n          {classnames(text)}\n        </span>\n      )\n    } else {\n      return (\n        <button className=\"Button Button--link\" onClick={this._onClick}>\n          <i className=\"icon-refresh\" aria-hidden=\"true\" />\n          {classnames(text)}\n        </button>\n      )\n    }\n  }\n\n  //\n  // Event handling\n  //\n\n  _onClick = e => {\n    e.preventDefault()\n    this.setState({\n      triggered: true\n    })\n    setTimeout(() => {\n      this.setState({\n        triggered: false\n      })\n    }, 800)\n    CourseEpubExportStore.create(this.props.course.id)\n  }\n}\n\nexport default GenerateLink\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport I18n from 'i18n!epub_exports'\nimport _ from 'underscore'\n\nclass DownloadLink extends React.Component {\n  static displayName = 'DownloadLink'\n\n  static propTypes = {\n    course: PropTypes.object.isRequired\n  }\n\n  epubExport = () => this.props.course.epub_export || {}\n\n  showDownloadLink = () =>\n    _.isObject(this.epubExport().permissions) && this.epubExport().permissions.download\n\n  //\n  // Rendering\n  //\n\n  downloadLink = (attachment, message) => {\n    if (_.isObject(attachment)) {\n      return (\n        <a href={attachment.url} className=\"icon-download\">\n          {message}\n        </a>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    if (!this.showDownloadLink()) {\n      return null\n    }\n\n    return (\n      <span>\n        {this.downloadLink(this.epubExport().epub_attachment, I18n.t('Download ePub'))}\n        {this.downloadLink(this.epubExport().zip_attachment, I18n.t('Download Associated Files'))}\n      </span>\n    )\n  }\n}\n\nexport default DownloadLink\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'underscore'\nimport GenerateLink from './GenerateLink'\nimport DownloadLink from './DownloadLink'\nimport ApiProgressBar from '../shared/ApiProgressBar'\nimport CourseEpubExportStore from './CourseStore'\nimport I18n from 'i18n!epub_exports'\nimport FriendlyDatetime from '../shared/FriendlyDatetime'\nimport classnames from 'classnames'\n\nclass CourseListItem extends React.Component {\n  static displayName = 'CourseListItem'\n\n  static propTypes = {\n    course: PropTypes.object.isRequired\n  }\n\n  epubExport = () => this.props.course.epub_export || {}\n\n  //\n  // Rendering\n  //\n\n  getDisplayState = () => {\n    let state\n\n    if (_.isEmpty(this.epubExport())) {\n      return null\n    }\n\n    switch (this.epubExport().workflow_state) {\n      case 'generated':\n        state = I18n.t('Generated:')\n        break\n      case 'failed':\n        state = I18n.t('Failed:')\n        break\n      default:\n        state = I18n.t('Generating:')\n    }\n    return state\n  }\n\n  getDisplayTimestamp = () => {\n    let timestamp\n\n    if (_.isEmpty(this.epubExport())) {\n      return null\n    }\n    timestamp = this.epubExport().updated_at\n\n    return <FriendlyDatetime dateTime={timestamp} />\n  }\n\n  render() {\n    const course = this.props.course,\n      classes = {\n        'ig-row': true\n      }\n    classes[this.epubExport().workflow_state] = !_.isEmpty(this.epubExport())\n\n    return (\n      <li>\n        <div className={classnames(classes)}>\n          <div className=\"ig-row__layout\">\n            <span className=\"ig-title\">{course.name}</span>\n            <div className=\"ig-details\">\n              <div className=\"ellipses\">\n                {this.getDisplayState()} {this.getDisplayTimestamp()}\n              </div>\n            </div>\n            <div className=\"ig-admin epub-exports-admin-controls\">\n              <ApiProgressBar\n                progress_id={this.epubExport().progress_id}\n                onComplete={this._onComplete}\n                key={this.epubExport().progress_id}\n              />\n              <DownloadLink course={this.props.course} />\n              <GenerateLink course={this.props.course} />\n            </div>\n          </div>\n        </div>\n      </li>\n    )\n  }\n\n  //\n  // Callbacks\n  //\n\n  _onComplete = () => {\n    CourseEpubExportStore.get(this.props.course.id, this.epubExport().id)\n  }\n}\n\nexport default CourseListItem\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'underscore'\nimport CourseListItem from './CourseListItem'\n\nexport default function CourseList(props) {\n  return (\n    <ul className=\"ig-list\">\n      {_.map(props.courses, (course, key) => (\n        <CourseListItem key={key} course={course} />\n      ))}\n    </ul>\n  )\n}\n\nCourseList.propTypes = {\n  courses: PropTypes.object\n}\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport CourseStore from './CourseStore'\nimport CourseList from './CourseList'\n\nclass EpubExportApp extends React.Component {\n  static displayName = 'EpubExportApp'\n\n  //\n  // Preparation\n  //\n\n  state = CourseStore.getState()\n\n  handleCourseStoreChange = () => {\n    this.setState(CourseStore.getState())\n  }\n\n  //\n  // Lifecycle\n  //\n\n  componentDidMount() {\n    CourseStore.addChangeListener(this.handleCourseStoreChange)\n    CourseStore.getAll()\n  }\n\n  componentWillUnmount() {\n    CourseStore.removeChangeListener(this.handleCourseStoreChange)\n  }\n\n  //\n  // Rendering\n  //\n\n  render() {\n    return <CourseList courses={this.state} />\n  }\n}\n\nexport default EpubExportApp\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport EpubExportsApp from '../epub_exports/App'\nimport ready from '@instructure/ready'\n\nready(() => {\n  $('.course-epub-exports-app').each((_i, element) => {\n    ReactDOM.render(<EpubExportsApp />, element)\n  })\n})\n","/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport tz from 'timezone'\nimport _ from 'underscore'\nimport $ from 'jquery'\nimport 'jquery.instructure_date_and_time'\nimport {ScreenReaderContent} from '@instructure/ui-a11y-content'\n\nclass FriendlyDatetime extends Component {\n  static propTypes = {\n    dateTime: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]).isRequired,\n    format: PropTypes.string,\n    prefix: PropTypes.string,\n    showTime: PropTypes.bool\n  }\n\n  static defaultProps = {\n    format: null,\n    prefix: '',\n    showTime: false\n  }\n\n  // The original render function is really slow because of all\n  // tz.parse, $.fudge, $.datetimeString, etc.\n  // As long as @props.datetime stays same, we don't have to recompute our output.\n  // memoizing like this beat React.addons.PureRenderMixin 3x\n  render = _.memoize(\n    () => {\n      // Separate props not used by the `time` element\n      const {showTime, ...timeElementProps} = this.props\n\n      let datetime = this.props.dateTime\n      if (!datetime) {\n        return <time />\n      }\n      if (!_.isDate(datetime)) {\n        datetime = tz.parse(datetime)\n      }\n      const fudged = $.fudgeDateForProfileTimezone(datetime)\n      let friendly\n      if (this.props.format) {\n        friendly = tz.format(datetime, this.props.format)\n      } else if (showTime) {\n        friendly = $.datetimeString(datetime)\n      } else {\n        friendly = $.friendlyDatetime(fudged)\n      }\n\n      const timeProps = {\n        ...timeElementProps,\n        title: $.datetimeString(datetime),\n        dateTime: datetime.toISOString()\n      }\n\n      let fixedPrefix = this.props.prefix\n      if (fixedPrefix && !fixedPrefix.endsWith(' ')) {\n        fixedPrefix += ' '\n      }\n\n      return (\n        <span data-testid=\"friendly-date-time\">\n          <ScreenReaderContent>{fixedPrefix + friendly}</ScreenReaderContent>\n\n          <time\n            {...timeProps}\n            ref={c => {\n              this.time = c\n            }}\n            aria-hidden=\"true\"\n          >\n            <span className=\"visible-desktop\">\n              {/* something like: Mar 6, 2014 */}\n              {fixedPrefix + friendly}\n            </span>\n            <span className=\"hidden-desktop\">\n              {/* something like: 3/3/2014 */}\n              {fudged.toLocaleDateString()}\n            </span>\n          </time>\n        </span>\n      )\n    },\n    () => this.props.dateTime\n  )\n}\n\nexport default FriendlyDatetime\n"],"sourceRoot":""}