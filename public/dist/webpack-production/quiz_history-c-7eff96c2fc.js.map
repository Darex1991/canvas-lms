{"version":3,"sources":["webpack:///./public/javascripts/jquery.scrollToVisible.js","webpack:///./app/jsx/shared/helpers/numberHelper.js","webpack:///./public/javascripts/jquery.templateData.js","webpack:///./public/javascripts/quiz_history.js","webpack:///./app/jsx/bundles/quiz_history.js","webpack:///./public/javascripts/quiz_inputs.js","webpack:///./public/javascripts/translations/instructure_misc_plugins.js","webpack:///./public/javascripts/dummyI18nResource.js?9aa5","webpack:///./public/javascripts/jquery.instructure_misc_plugins.js","webpack:///./node_modules/parse-decimal-number/dist/parse-decimal-number.js","webpack:///./app/coffeescripts/behaviors/quiz_selectmenu.js"],"names":["$","fn","scrollToVisible","obj","options","$obj","length","innerOffset","offset","width","outerWidth","height","outerHeight","top","bottom","left","right","currentTop","this","selector","windowScrollTop","scrollTop","currentLeft","scrollLeft","currentHeight","currentWidth","outerOffset","each","e","tagName","window","helper","_parseNumber","parseNumber","parse","input","NaN","num","toString","thousands","I18n","lookup","decimal","isNaN","match","parseFloat","validate","fillTemplateData","iterator","find","andSelf","$el","i","attr","replace","id","contentChange","data","item","except","inArray","dataValues","$found_all","avoid","$found","closest","htmlValues","html","raw","hasClass","removeClass","toUpperCase","val","str","htmlEscape","hrefValues","oldHref","oldRel","oldName","hasOwnProperty","name","newHref","replaceTags","encodeURIComponent","orig","text","document","triggerHandler","defaults","getTemplateData","result","textValues","_this","forEach","$item","trim","charCodeAt","$elem","getTemplateValue","value","opts","extend","parentWindow","exists","parent","INST","respondsTo","funcName","isFunction","hasProperty","propName","set","get","_scoringSnapshot","_gradingForm","_quizNavBar","getScoringSnapshot","scoringSnapshot","snapshot","user_id","version_number","last_question_touched","question_updates","fudge_points","$quizBody","jumpPosition","question_id","$question","checkQuizBody","jumpToQuestion","stop","clearQueue","animate","jumpDirectlyToQuestion","externallySet","setSnapshot","submissionData","cancelIfAlreadyExternallySet","idx","question","ENV","GRADE_BY_QUESTION","addClass","points","end","n","comments","lastQuestionTouched","show","refreshQuizSubmissionSnapshot","update","getGradingForm","ensureSelectEventsFire","focus","select","scrollToUpdatedQuestion","event","hash","indexOf","substring","updateSnapshotFor","numberHelper","addFudgePoints","setInitialSnapshot","onScoreChanged","$total","total","Math","round","fudge","questions","map","index","el","position","toArray","onWindowResize","winHeight","innerHeight","lastHeight","fixedButtonHeight","paddingHeight","max","css","ready","gradingForm","quizNavBar","windowSize","minWidth","startingLeftPos","navItemWidth","initialize","_index","updateStatusFor","questionIndex","parseInt","questionId","Number","updateWindowSize","setScrollWindowPosition","size","tooBig","maxWidth","minPadding","itemCount","floor","actualWidth","navArrowCache","$navArrows","navWrapperCache","$navWrapper","updateArrows","hide","toggleDropShadow","toggleClass","$scoreInput","scoreValue","err","activateLink","activateCorrectLink","qNum","qArray","docScroll","$questions","t","currentQuestionNum","showQuestionsInWindow","startingIndex","_endingIndex","leftPosition","windowScrollLength","currentIndex","maxStartingIndex","endingIndex","previousQuestionBlock","nextQuestionBlock","onScroll","getQuizNavBar","scroll","click","fragmentChange","getQuizSubmissionSnapshot","SCORE_UPDATED","clearQuizSubmissionSnapshot","change","parents","parsed","hiddenVal","bind","preventDefault","resize","refreshGrades","QuizArrowApplicator","applyArrows","inputMethods","disableInputs","setWidths","inputs","$body","$inputCover","class","on","remove","$cover","clone","zIndex","background","append","mergeI18nTranslations","JSON","scoped","setOptions","prompt","opt","optHtml","ifExists","func","call","scrollbarWidth","$div","appendTo","$innerDiv","w1","innerWidth","w2","dim","speed","opacity","undim","confirmDelete","$object","$dialog","noMessage","no_message","onContinue","confirmed","url","success","fadeOut","prepareData","authenticity_token","ajaxJSON","request","status","error","unhandledXHRs","push","cancelled","message","skipConfirmations","dialog","dialog_options","confirmation_class","includes","modal","close","buttons","confirm","query","location","search","split","query_hash","$doc","found","_checkFragments","fragmentList","doc","fragment","setTimeout","list","clickLink","eq","showIf","bool","disableIf","prop","indicate","$indicator","container","createElement","display","border","backgroundColor","mouseover","singleFlash","fadeIn","hasScrollbar","clientHeight","scrollHeight","log","msg","console","fillWindowWithMe","minHeight","$this","$wrapper","$main","$not_right_side","$window","$toResize","add","alsoResize","fillWindowWithThisElement","spaceLeftForThis","newHeight","onResize","unbind","autoGrowInput","o","comfortZone","filter","testSubject","fontSize","fontFamily","fontWeight","letterSpacing","whiteSpace","insertAfter","testerWidth","newWidth","parseDecimalNumber","patterns","module","exports","inOptions","enforceGroupSize","fractionPart","groupMinSize","integerPart","pattern","patternIndex","Array","isArray","group","RegExp","newOptions","key","factoryReset","withOptions"],"mappings":"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","file":"quiz_history-c-7eff96c2fc.js","sourcesContent":["/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// Scrolls the supplied object until its visible. Call from\n// (\"html,body\") to scroll the window.\n\nimport $ from 'jquery'\nimport './vendor/jquery.scrollTo'\n\n$.fn.scrollToVisible = function(obj) {\n  const options = {}\n  const $obj = $(obj)\n\n  if ($obj.length === 0) {\n    return\n  }\n  let innerOffset = $obj.offset(),\n    width = $obj.outerWidth(),\n    height = $obj.outerHeight(),\n    top = innerOffset.top,\n    bottom = top + height,\n    left = innerOffset.left,\n    right = left + width,\n    currentTop = this.selector == 'html,body' ? $.windowScrollTop() : this.scrollTop(),\n    currentLeft = this.scrollLeft(),\n    currentHeight = this.outerHeight(),\n    currentWidth = this.outerWidth()\n\n  if (this.selector != 'html,body') {\n    let outerOffset = $('body').offset()\n    this.each(function() {\n      try {\n        outerOffset = $(this).offset()\n        return false\n      } catch (e) {}\n    })\n    top -= outerOffset.top\n    bottom -= outerOffset.top\n    left -= outerOffset.left\n    right -= outerOffset.left\n  }\n\n  if (this[0].tagName == 'HTML' || this[0].tagName == 'BODY') {\n    currentHeight = $(window).height()\n    if ($('#wizard_box:visible').length > 0) {\n      currentHeight -= $('#wizard_box:visible').height()\n    }\n    currentWidth = $(window).width()\n    top -= currentTop\n    left -= currentLeft\n    bottom -= currentTop\n    right -= currentLeft\n  }\n  if (top < 0 || (currentHeight < height && bottom > currentHeight)) {\n    options.scrollTop = top + currentTop\n  } else if (bottom > currentHeight) {\n    options.scrollTop = bottom + currentTop - currentHeight + 20\n  }\n  if (left < 0) {\n    options.scrollLeft = left + currentLeft\n  } else if (right > currentWidth) {\n    options.scrollLeft = right + currentLeft - currentWidth + 20\n  }\n  if (options.scrollTop == 1) {\n    options.scrollTop = 0\n  }\n  if (options.scrollLeft == 1) {\n    options.scrollLeft = 0\n  }\n\n  this.scrollTop(options.scrollTop)\n  this.scrollLeft(options.scrollLeft)\n\n  return this\n}\n","/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport parseNumber from 'parse-decimal-number'\nimport I18n from 'i18nObj'\n\nconst helper = {\n  _parseNumber: parseNumber,\n\n  parse(input) {\n    if (input == null) {\n      return NaN\n    } else if (typeof input === 'number') {\n      return input\n    }\n\n    let num = helper._parseNumber(input.toString(), {\n      thousands: I18n.lookup('number.format.delimiter'),\n      decimal: I18n.lookup('number.format.separator')\n    })\n\n    // fallback to default delimiters if invalid with locale specific ones\n    if (isNaN(num)) {\n      num = helper._parseNumber(input)\n    }\n\n    // final fallback to old parseFloat - this allows us to still support scientific 'e' notation\n    if (input.toString().match(/e/) && isNaN(num)) {\n      num = parseFloat(input)\n    }\n\n    return num\n  },\n\n  validate(input) {\n    return !isNaN(helper.parse(input))\n  }\n}\n\nexport default helper\n","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport htmlEscape from './str/htmlEscape'\nimport './jquery.instructure_misc_helpers' /* replaceTags */\n\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n$.fn.fillTemplateData = function(options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*')\n        .andSelf()\n        .each(function() {\n          const $el = $(this)\n          $.each(['name', 'id', 'class'], (i, attr) => {\n            if ($el.attr(attr)) {\n              $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator))\n            }\n          })\n        })\n    }\n    if (options.id) {\n      this.attr('id', options.id)\n    }\n    let contentChange = false\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && $.inArray(item, options.except) != -1) {\n          continue\n        }\n        if (options.data[item] && options.dataValues && $.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString())\n        }\n        const $found_all = this.find('.' + item)\n        var avoid = options.avoid || ''\n        $found_all.each(function() {\n          const $found = $(this)\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = ''\n            }\n            if (options.htmlValues && $.inArray(item, options.htmlValues) != -1) {\n              $found.html($.raw(options.data[item].toString()))\n              if ($found.hasClass('user_content')) {\n                contentChange = true\n                $found.removeClass('enhanced')\n                $found.data('unenhanced_content_html', options.data[item].toString())\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item])\n            } else {\n              try {\n                const str = options.data[item].toString()\n                $found.html(htmlEscape(str))\n              } catch (e) {}\n            }\n          }\n        })\n      }\n    }\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function() {\n        let $obj = $(this),\n          oldHref,\n          oldRel,\n          oldName\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue\n          }\n          const name = options.hrefValues[i]\n          if ((oldHref = $obj.attr('href'))) {\n            const newHref = $.replaceTags(oldHref, name, encodeURIComponent(options.data[name]))\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref)\n              if (orig) {\n                $obj.text(orig)\n              }\n            }\n          }\n          if ((oldRel = $obj.attr('rel'))) {\n            $obj.attr('rel', $.replaceTags(oldRel, name, options.data[name]))\n          }\n          if ((oldName = $obj.attr('name'))) {\n            $obj.attr('name', $.replaceTags(oldName, name, options.data[name]))\n          }\n        }\n      })\n    }\n    if (contentChange) {\n      $(document).triggerHandler('user_content_change')\n    }\n  }\n  return this\n}\n\n$.fn.fillTemplateData.defaults = {htmlValues: null, hrefValues: null}\n\n// Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n$.fn.getTemplateData = function(options) {\n  if (!this.length || !options) {\n    return {}\n  }\n  var result = {},\n    item,\n    val\n  if (options.textValues) {\n    const _this = this\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first')\n      val = $.trim($item.text())\n      if ($item.html() === '&nbsp;') {\n        val = ''\n      }\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = ''\n      }\n      result[item] = val\n    })\n  }\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item])\n      if (val) {\n        result[options.dataValues[item]] = val\n      }\n    }\n  }\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find(\n        '.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first'\n      )\n      val = null\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html')\n      } else {\n        val = $.trim($elem.html())\n      }\n      result[options.htmlValues[item]] = val\n    }\n  }\n  return result\n}\n\n$.fn.getTemplateValue = function(value, options) {\n  const opts = $.extend({}, options, {textValues: [value]})\n  return this.getTemplateData(opts)[value]\n}\n","/*\n * Copyright (C) 2012 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport I18n from 'i18nObj'\nimport numberHelper from 'jsx/shared/helpers/numberHelper'\nimport './jquery.instructure_misc_plugins' /* fragmentChange */\nimport './jquery.templateData'\nimport './vendor/jquery.scrollTo'\nimport 'compiled/behaviors/quiz_selectmenu'\n\nconst parentWindow = {\n  exists() {\n    return window.parent && window.parent.INST\n  },\n\n  respondsTo(funcName) {\n    return parentWindow.exists() && $.isFunction(window.parent.INST[funcName])\n  },\n\n  hasProperty(propName) {\n    return parentWindow.exists() && window.parent.INST[propName]\n  },\n\n  set(propName, value) {\n    if (parentWindow.exists()) {\n      window.parent.INST[propName] = value\n    }\n  },\n\n  get(propName) {\n    if (parentWindow.hasProperty(propName)) {\n      return window.parent.INST[propName]\n    }\n  }\n}\n// end parentWindow object\n\nlet _scoringSnapshot\nfunction getScoringSnapshot() {\n  if (_scoringSnapshot) return _scoringSnapshot\n  const data = $('#submission_details').getTemplateData({textValues: ['version_number', 'user_id']})\n\n  const scoringSnapshot = {\n    snapshot: {\n      user_id: data.user_id || null,\n      version_number: data.version_number,\n      last_question_touched: null,\n      question_updates: {},\n      fudge_points: 0\n    },\n\n    $quizBody: null,\n\n    jumpPosition(question_id) {\n      const $question = $('#question_' + question_id)\n      if ($question.length > 0) {\n        return $question.offset().top - 110\n      } else {\n        return 0\n      }\n    },\n\n    checkQuizBody() {\n      if (scoringSnapshot.$quizBody === null) {\n        scoringSnapshot.$quizBody = $('html,body')\n      }\n    },\n\n    // Animates scrolling to question if there is no page reload\n    jumpToQuestion(question_id) {\n      const top = scoringSnapshot.jumpPosition(question_id)\n      scoringSnapshot.checkQuizBody()\n      scoringSnapshot.$quizBody.stop()\n      scoringSnapshot.$quizBody.clearQueue()\n      scoringSnapshot.$quizBody.animate({scrollTop: top}, 500)\n    },\n\n    // Jumps directly to question upon a page reload\n    jumpDirectlyToQuestion(question_id) {\n      const top = scoringSnapshot.jumpPosition(question_id)\n      scoringSnapshot.checkQuizBody()\n      scoringSnapshot.$quizBody.scrollTop(top)\n    },\n\n    externallySet: false,\n\n    setSnapshot(submissionData, cancelIfAlreadyExternallySet) {\n      if (submissionData) {\n        if (cancelIfAlreadyExternallySet && scoringSnapshot.externallySet) {\n          return\n        }\n        scoringSnapshot.externallySet = true\n        scoringSnapshot.snapshot = submissionData\n        for (const idx in submissionData.question_updates) {\n          const question = submissionData.question_updates[idx]\n          const $question = $('#question_' + idx)\n          if (!ENV.GRADE_BY_QUESTION) {\n            $question.addClass('modified_but_not_saved')\n          }\n          $question\n            .find('.question_input_hidden')\n            .val(question.points)\n            .end()\n            .find('.user_points :text')\n            .val(I18n.n(question.points))\n            .end()\n            .find('.question_neutral_comment .question_comment_text textarea')\n            .val(question.comments)\n        }\n        if (parentWindow.hasProperty('lastQuestionTouched') && !ENV.GRADE_BY_QUESTION) {\n          scoringSnapshot.jumpToQuestion(window.parent.INST.lastQuestionTouched)\n        } else if (scoringSnapshot.snapshot.last_question_touched && !ENV.GRADE_BY_QUESTION) {\n          scoringSnapshot.jumpToQuestion(scoringSnapshot.snapshot.last_question_touched)\n        }\n      } else if (cancelIfAlreadyExternallySet) {\n        if (parentWindow.hasProperty('lastQuestionTouched') && !ENV.GRADE_BY_QUESTION) {\n          scoringSnapshot.jumpToQuestion(window.parent.INST.lastQuestionTouched)\n        }\n      }\n      if (scoringSnapshot.externallySet || cancelIfAlreadyExternallySet) {\n        $('#feel_free_to_toggle_message').show()\n      }\n      if (parentWindow.respondsTo('refreshQuizSubmissionSnapshot')) {\n        window.parent.INST.refreshQuizSubmissionSnapshot(scoringSnapshot.snapshot)\n      }\n    },\n\n    update(question_id, submissionData) {\n      scoringSnapshot.snapshot.question_updates[question_id] = submissionData\n      scoringSnapshot.snapshot.last_question_touched = question_id\n      scoringSnapshot.setSnapshot()\n    }\n  }\n  // end of scoringSnapshot object\n\n  return (_scoringSnapshot = scoringSnapshot)\n}\n\nlet _gradingForm\nfunction getGradingForm() {\n  if (_gradingForm) return _gradingForm\n  const scoringSnapshot = getScoringSnapshot()\n  const gradingForm = {\n    ensureSelectEventsFire() {\n      $('input[type=text]').focus(function() {\n        $(this).select()\n      })\n    },\n\n    scrollToUpdatedQuestion(event, hash) {\n      if (hash.indexOf('#question') === 0) {\n        const id = hash.substring(10)\n        scoringSnapshot.jumpToQuestion(id)\n      }\n    },\n\n    updateSnapshotFor($question) {\n      const question_id = $question.attr('id').substring(9) || null\n      if (question_id) {\n        const data = {}\n        if (!ENV.GRADE_BY_QUESTION) {\n          $question.addClass('modified_but_not_saved')\n        }\n        data.points = numberHelper.parse($question.find('.user_points :text').val())\n        data.comments =\n          $question.find('.question_neutral_comment .question_comment_text textarea').val() || ''\n        scoringSnapshot.update(question_id, data)\n      }\n      $(document).triggerHandler('score_changed')\n    },\n\n    addFudgePoints(points) {\n      if (points || points === 0) {\n        scoringSnapshot.snapshot.fudge_points = points\n        scoringSnapshot.setSnapshot()\n      }\n      $(document).triggerHandler('score_changed')\n    },\n\n    setInitialSnapshot(data) {\n      $('#feel_free_to_toggle_message').show()\n      if (data) {\n        scoringSnapshot.setSnapshot(data)\n      } else {\n        scoringSnapshot.setSnapshot(null, true)\n      }\n    },\n\n    onScoreChanged() {\n      const $total = $('#after_fudge_points_total')\n      let total = 0\n      $('.display_question .user_points:visible').each(function() {\n        let points =\n          numberHelper.parse(\n            $(this)\n              .find('input.question_input')\n              .val()\n          ) || 0\n        points = Math.round(points * 100.0) / 100.0\n        total += points\n      })\n      let fudge = numberHelper.parse($('#fudge_points_entry').val()) || 0\n      fudge = Math.round(fudge * 100.0) / 100.0\n      total += fudge\n      $total.text(I18n.n(total) || '0')\n    },\n\n    questions() {\n      return $('.question_holder')\n        .map((index, el) => $(el).position().top - 320)\n        .toArray()\n    },\n\n    onWindowResize() {\n      // Add padding to the bottom of the last question\n      const winHeight = $(window).innerHeight()\n      const lastHeight = $('div.question_holder:last-child').outerHeight()\n      const fixedButtonHeight = $('#speed_update_scores_container').outerHeight()\n      const paddingHeight = Math.max(winHeight - lastHeight - 150, fixedButtonHeight)\n      $('#update_history_form .quiz-submission.headless').css('marginBottom', paddingHeight + 'px')\n    }\n  }\n  // end of gradingForm object\n\n  return (_gradingForm = gradingForm)\n}\n\nlet _quizNavBar\nfunction getQuizNavBar() {\n  if (_quizNavBar) return _quizNavBar\n  const scoringSnapshot = getScoringSnapshot()\n  const gradingForm = getGradingForm()\n\n  const quizNavBar = {\n    index: 0,\n    windowSize: 10,\n    minWidth: 66,\n    startingLeftPos: 32,\n    navItemWidth: 34,\n\n    initialize() {\n      $('.user_points > .question_input').each(function(_index) {\n        quizNavBar.updateStatusFor($(this))\n      })\n\n      if (ENV.GRADE_BY_QUESTION) {\n        const questionIndex = parseInt(parentWindow.get('active_question_index'), 10)\n        const questionId = $('.q' + questionIndex).data('id')\n        if (!Number.isNaN(questionId)) {\n          scoringSnapshot.jumpDirectlyToQuestion(questionId)\n        }\n      }\n\n      quizNavBar.updateWindowSize()\n      quizNavBar.setScrollWindowPosition(0)\n    },\n\n    size() {\n      return $('.question-nav-link').length\n    },\n\n    tooBig() {\n      return quizNavBar.size() > quizNavBar.windowSize\n    },\n\n    updateWindowSize() {\n      const fullWidth = $('.quiz-nav, .quiz-nav-fullpage').width()\n      const minPadding = 10\n      const maxWidth = fullWidth - minPadding * 2\n      const itemCount = Math.floor((maxWidth - quizNavBar.minWidth) / quizNavBar.navItemWidth)\n      quizNavBar.windowSize = itemCount\n      const actualWidth = itemCount * quizNavBar.navItemWidth + quizNavBar.minWidth\n      $('.quiz-nav .nav, .quiz-nav-fullpage .nav').animate({width: actualWidth + 'px'}, 10)\n    },\n\n    navArrowCache: null,\n\n    $navArrows() {\n      if (quizNavBar.navArrowCache === null) {\n        quizNavBar.navArrowCache = $('.quiz-nav .nav-arrow, .quiz-nav-fullpage .nav-arrow')\n      }\n      return quizNavBar.navArrowCache\n    },\n\n    navWrapperCache: null,\n\n    $navWrapper() {\n      if (quizNavBar.navWrapperCache === null) {\n        quizNavBar.navWrapperCache = $('#quiz-nav-inner-wrapper')\n      }\n      return quizNavBar.navWrapperCache\n    },\n\n    updateArrows() {\n      if (quizNavBar.tooBig()) {\n        quizNavBar.$navArrows().show()\n        quizNavBar.$navWrapper().css({position: 'absolute'})\n      } else {\n        quizNavBar.$navArrows().hide()\n        quizNavBar.$navWrapper().css({position: 'relative'})\n      }\n    },\n\n    toggleDropShadow() {\n      // Add shadow to top bar\n      $('.quiz-nav').toggleClass('drshadow', $(document).scrollTop() > 0)\n    },\n\n    updateStatusFor($scoreInput) {\n      try {\n        const questionId = $scoreInput.attr('data-question-id')\n        const scoreValue = numberHelper.parse($scoreInput.val())\n        $('#quiz_nav_' + questionId).toggleClass('complete', !Number.isNaN(scoreValue))\n      } catch (err) {\n        // do nothing; if there's no status to update, continue with other execution\n      }\n    },\n\n    activateLink(index) {\n      $('.quiz-nav li').removeClass('active')\n      $('.q' + index).addClass('active')\n    },\n\n    activateCorrectLink() {\n      let qNum = 1\n      const qArray = gradingForm.questions()\n      const docScroll = $(document).scrollTop()\n      const $questions = $('.question')\n      for (let t = 0; t <= qArray.length; t++) {\n        const $question = $($questions[t])\n        const currentQuestionNum = t + 1\n        if (\n          (docScroll > qArray[t] && docScroll < qArray[t + 1]) ||\n          (t === qArray.length - 1 && docScroll > qArray[t])\n        ) {\n          qNum = currentQuestionNum\n          parentWindow.set('active_question_index', currentQuestionNum)\n          quizNavBar.activateLink(currentQuestionNum)\n          $question.addClass('selected_single_question')\n        } else {\n          $('.q' + currentQuestionNum).removeClass('active')\n          $question.removeClass('selected_single_question')\n        }\n      }\n      quizNavBar.setScrollWindowPosition(qNum)\n      return qNum\n    },\n\n    showQuestionsInWindow(startingIndex, _endingIndex) {\n      const $navWrapper = $('#quiz-nav-inner-wrapper')\n      const leftPosition = quizNavBar.startingLeftPos - startingIndex * quizNavBar.navItemWidth\n      const newPos = '' + leftPosition + 'px'\n      const currentPos = $navWrapper.css('left')\n      if (newPos !== currentPos) {\n        $navWrapper.stop()\n        $navWrapper.clearQueue()\n        $navWrapper.animate({left: leftPosition + 'px'}, 300)\n      }\n    },\n\n    windowScrollLength() {\n      return Math.floor(quizNavBar.windowSize / 2.0)\n    },\n\n    setScrollWindowPosition(currentIndex) {\n      if (Number.isNaN(currentIndex)) {\n        currentIndex = 0\n      }\n      quizNavBar.index = currentIndex\n      quizNavBar.updateArrows()\n      if (quizNavBar.tooBig()) {\n        let startingIndex = currentIndex - quizNavBar.windowScrollLength()\n        const maxStartingIndex = quizNavBar.size() - quizNavBar.windowSize\n\n        if (startingIndex < 0) {\n          startingIndex = 0\n          quizNavBar.index = 0\n        } else if (startingIndex > maxStartingIndex) {\n          startingIndex = maxStartingIndex\n          quizNavBar.index = maxStartingIndex + quizNavBar.windowScrollLength()\n        }\n\n        const endingIndex = startingIndex + quizNavBar.windowSize - 1\n        quizNavBar.showQuestionsInWindow(startingIndex, endingIndex)\n      }\n    },\n\n    previousQuestionBlock() {\n      quizNavBar.setScrollWindowPosition(quizNavBar.index - quizNavBar.windowSize)\n    },\n\n    nextQuestionBlock() {\n      quizNavBar.setScrollWindowPosition(quizNavBar.index + quizNavBar.windowSize)\n    },\n\n    onScroll() {\n      quizNavBar.activateCorrectLink()\n      quizNavBar.toggleDropShadow()\n    }\n  }\n  // End of quizNavBar object\n\n  return (_quizNavBar = quizNavBar)\n}\n\n$(document).ready(function() {\n  const scoringSnapshot = getScoringSnapshot()\n  const gradingForm = getGradingForm()\n  const quizNavBar = getQuizNavBar()\n\n  gradingForm.ensureSelectEventsFire()\n\n  if (ENV.GRADE_BY_QUESTION) {\n    $(document).scroll(quizNavBar.onScroll)\n    gradingForm.onWindowResize()\n\n    $('.question_holder').click(function() {\n      $('.quiz-nav li').removeClass('active')\n      $('.question').removeClass('selected_single_question')\n\n      const $questions = $('.question')\n      const $question = $(this).find('.question')\n      const questionIndex = $questions.index($question) + 1\n      parentWindow.set('active_question_index', questionIndex)\n      $('.q' + questionIndex).addClass('active')\n      $question.addClass('selected_single_question')\n    })\n  }\n\n  quizNavBar.initialize()\n\n  $(document).fragmentChange(gradingForm.scrollToUpdatedQuestion)\n\n  if (parentWindow.respondsTo('getQuizSubmissionSnapshot')) {\n    const data = window.parent.INST.getQuizSubmissionSnapshot(\n      scoringSnapshot.snapshot.user_id,\n      scoringSnapshot.snapshot.version_number\n    )\n    gradingForm.setInitialSnapshot(data)\n  }\n\n  if (ENV.SCORE_UPDATED && parentWindow.respondsTo('clearQuizSubmissionSnapshot')) {\n    window.parent.INST.clearQuizSubmissionSnapshot(scoringSnapshot.snapshot)\n  }\n\n  $(\n    '.question_holder .user_points .question_input,.question_holder .question_neutral_comment .question_comment_text textarea'\n  ).change(function() {\n    const $question = $(this).parents('.display_question')\n    gradingForm.updateSnapshotFor($question)\n    if ($(this).hasClass('question_input')) {\n      const parsed = numberHelper.parse($(this).val())\n      const hiddenVal = Number.isNaN(parsed) ? '' : parsed\n      $question.find('.question_input_hidden').val(hiddenVal)\n      quizNavBar.updateStatusFor($(this))\n    }\n  })\n\n  $('#fudge_points_entry').change(function() {\n    const points = numberHelper.parse($(this).val())\n    const parsed = numberHelper.parse($(this).val())\n    const hiddenVal = Number.isNaN(parsed) ? '' : parsed\n    $('#fudge_points_input').val(hiddenVal)\n    gradingForm.addFudgePoints(points)\n  })\n\n  $(document).bind('score_changed', gradingForm.onScoreChanged)\n\n  $('.question-nav-link').click(function(e) {\n    e.preventDefault()\n    const questionId = $(this).attr('data-id')\n    scoringSnapshot.jumpToQuestion(questionId)\n  })\n\n  $('#nav-prev').click(e => {\n    e.preventDefault()\n    quizNavBar.previousQuestionBlock()\n  })\n\n  $('#nav-next').click(e => {\n    e.preventDefault()\n    quizNavBar.nextQuestionBlock()\n  })\n\n  $(window).resize(() => {\n    quizNavBar.updateWindowSize()\n    quizNavBar.setScrollWindowPosition(quizNavBar.index)\n    gradingForm.onWindowResize()\n  })\n\n  if (ENV.SCORE_UPDATED) {\n    if (parentWindow.respondsTo('refreshGrades')) {\n      window.parent.INST.refreshGrades()\n    }\n  }\n})\n","/*\n * Copyright (C) 2012 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport QuizArrowApplicator from 'quiz_arrows'\nimport inputMethods from 'quiz_inputs'\nimport 'quiz_history'\n\n$(() => {\n  const arrowApplicator = new QuizArrowApplicator()\n  arrowApplicator.applyArrows()\n  inputMethods.disableInputs('[type=radio], [type=checkbox]')\n  inputMethods.setWidths()\n})\n","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\n\nconst inputMethods = {\n  disableInputs(inputs) {\n    const $body = $('body'),\n      $inputCover = $('<div />', {class: 'input_cover'})\n\n    $inputCover.on('mouseleave', function(e) {\n      $(this).remove()\n    })\n\n    $(inputs).on('mouseenter', function(e) {\n      const $el = $(this),\n        $cover = $inputCover.clone(true)\n\n      $cover.css({\n        height: $el.height() + 12,\n        width: $el.width() + 12,\n        position: 'absolute',\n        left: $el.offset().left - 6,\n        top: $el.offset().top - 6,\n        zIndex: 15,\n        background: 'url(/images/blank.png) 0 0 repeat'\n      })\n\n      $body.append($cover)\n    })\n  },\n\n  setWidths(selector) {\n    $(selector || '.answer input[type=text]').each(function() {\n      $(this).width($(this).val().length * 9.5)\n    })\n  }\n}\n\nexport default inputMethods\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"     \\\"}}},\\\"cy\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Canslo\\\",\\\"delete\\\":\\\"Dileu\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Ydych chin sir eich bod am ddileu hyn?\\\"}}},\\\"da\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuller\\\",\\\"delete\\\":\\\"Slet\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p, at du vil slette dette?\\\"}}},\\\"da-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuller\\\",\\\"delete\\\":\\\"Slet\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p, at du vil slette dette?\\\"}}},\\\"de\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Abbrechen\\\",\\\"delete\\\":\\\"Lschen\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Mchten Sie dies wirklich lschen?\\\"}}},\\\"el\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\" /     ;\\\"}}},\\\"en-AU\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"en-CA\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"en-GB\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancel\\\",\\\"delete\\\":\\\"Delete\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Are you sure you want to delete this?\\\"}}},\\\"es\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Eliminar\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Seguro que desea eliminarlo?\\\"}}},\\\"fa\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"       \\\"}}},\\\"fi\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Peruuta\\\",\\\"delete\\\":\\\"Poista\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Haluatko varmasti poistaa tmn?\\\"}}},\\\"fr\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuler\\\",\\\"delete\\\":\\\"Supprimer\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Voulez-vous vraiment supprimer cet lment ?\\\"}}},\\\"fr-CA\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuler\\\",\\\"delete\\\":\\\"Supprimer\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Voulez-vous vraiment supprimer cet lment?\\\"}}},\\\"he\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"/   ?\\\"}}},\\\"ht\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Anile\\\",\\\"delete\\\":\\\"Efase\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Ou kw vrman ou vle efase sa a?\\\"}}},\\\"hu\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Mgse\\\",\\\"delete\\\":\\\"Trls\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Biztos benne, hogy trli ezt?\\\"}}},\\\"hy\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\" \\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"     :\\\"}}},\\\"is\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Htta vi\\\",\\\"delete\\\":\\\"Eya\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Viltu rugglega eya essu?\\\"}}},\\\"it\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annulla\\\",\\\"delete\\\":\\\"Elimina\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vuoi eliminare questo?\\\"}}},\\\"ja\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"ko\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"mi\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Whakakore\\\",\\\"delete\\\":\\\"Muku\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"E tino hiahia ana koe ki te muku i tnei?\\\"}}},\\\"nb\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du nsker  slette dette?\\\"}}},\\\"nb-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du nsker  slette dette?\\\"}}},\\\"nl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Annuleren\\\",\\\"delete\\\":\\\"Verwijderen\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Weet je zeker dat je dit wilt verwijderen?\\\"}}},\\\"nn\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Slett\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Er du sikker p at du vil slette dette?\\\"}}},\\\"pl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Anuluj\\\",\\\"delete\\\":\\\"Usu\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Czy na pewno chcesz usun ten element?\\\"}}},\\\"pt\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Excluir\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Tem certeza de que deseja excluir isto?\\\"}}},\\\"pt-BR\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Cancelar\\\",\\\"delete\\\":\\\"Excluir\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Tem certeza que deseja excluir isto?\\\"}}},\\\"ru\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"  ?\\\"}}},\\\"sl\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Preklii\\\",\\\"delete\\\":\\\"Odstrani\\\"}},\\\"sv\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Ta bort\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vill du verkligen radera det hr?\\\"}}},\\\"sv-x-k12\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"Avbryt\\\",\\\"delete\\\":\\\"Ta bort\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Vill du verkligen radera det hr?\\\"}}},\\\"tr\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"ptal\\\",\\\"delete\\\":\\\"Sil\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"Bunu silmek istediinize emin misiniz?\\\"}}},\\\"uk\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"}},\\\"zh-Hans\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"?\\\"}}},\\\"zh-Hant\\\":{\\\"buttons\\\":{\\\"cancel\\\":\\\"\\\",\\\"delete\\\":\\\"\\\"},\\\"instructure_misc_plugins\\\":{\\\"confirms\\\":{\\\"default_delete_thing\\\":\\\"\\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/instructure_misc_plugins';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('instructure_misc_plugins');\n  ","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nimport I18n from 'i18n!instructure_misc_plugins'\nimport $ from 'jquery'\nimport htmlEscape from './str/htmlEscape'\nimport authenticity_token from 'compiled/behaviors/authenticity_token'\nimport './jquery.ajaxJSON'\nimport 'jqueryui/dialog'\nimport './jquery.scrollToVisible'\nimport './vendor/jquery.scrollTo'\n\n$.fn.setOptions = function(prompt, options) {\n  let result = prompt ? \"<option value=''>\" + htmlEscape(prompt) + '</option>' : ''\n\n  if (options == null) {\n    options = []\n  }\n\n  options.forEach(opt => {\n    const optHtml = htmlEscape(opt)\n    result += '<option value=\"' + optHtml + '\">' + optHtml + '</option>'\n  })\n\n  return this.html($.raw(result))\n}\n\n// this function is to prevent you from doing all kinds of expesive operations on a\n// jquery object that doesn't actually have any elements in it\n// it is similar and inspired by http://www.slideshare.net/paul.irish/perfcompression (slide #42)\n// to use it do something like:\n// $(\"a .bunch #of .nodes\").ifExists(function(orignalQuery){\n//   //  'this' points to the original jquery object (in this case, $(\"a .bunch #of .nodes\") );\n//   // orignalQuery is the same as 'this';\n//   this.slideUp().dialog().show();\n// });\n$.fn.ifExists = function(func) {\n  this.length && func.call(this, this)\n  return this\n}\n\n// Returns the width of the browser's scroll bars.\n$.fn.scrollbarWidth = function() {\n  const $div = $(\n      '<div style=\"width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;\"><div style=\"height:100px;\"></div>'\n    ).appendTo(this),\n    $innerDiv = $div.find('div')\n  // Append our div, do our calculation and then remove it\n  const w1 = $innerDiv.innerWidth()\n  $div.css('overflow-y', 'scroll')\n  const w2 = $innerDiv.innerWidth()\n  $div.remove()\n  return w1 - w2\n}\n\n// Simple animation for dimming an element's opacity\n$.fn.dim = function(speed) {\n  return this.animate({opacity: 0.4}, speed)\n}\n\n$.fn.undim = function(speed) {\n  return this.animate({opacity: 1.0}, speed)\n}\n\n// Helper for deleting objects from the DOM and db.\n//  url: URL to pass DELETE message.  If none provided,\n//    behaves as if the request were a success.  Useful for testing.\n//  message: Confirmation message\n//  cancelled: Function to handle cancel.\n//  confirmed: Function to handle confirm, before submit.\n//  success: What to do on success.  If none provided, fades\n//    out the element and removes it from the DOM.\n//  error: Error.\n//  dialog: If present, do a jquery.ui.dialog instead of a confirm(). If an\n//    object, it will be merged into the dialog options.\n$.fn.confirmDelete = function(options) {\n  var options = $.extend({}, $.fn.confirmDelete.defaults, options)\n  const $object = this\n  let $dialog = null\n  let result = true\n  options.noMessage = options.noMessage || options.no_message\n  const onContinue = function() {\n    if (!result) {\n      if (options.cancelled && $.isFunction(options.cancelled)) {\n        options.cancelled.call($object)\n      }\n      return\n    }\n    if (!options.confirmed) {\n      options.confirmed = function() {\n        $object.dim()\n      }\n    }\n    options.confirmed.call($object)\n    if (options.url) {\n      if (!options.success) {\n        options.success = function(data) {\n          $object.fadeOut('slow', () => {\n            $object.remove()\n          })\n        }\n      }\n      const data = options.prepareData ? options.prepareData.call($object, $dialog) : {}\n      data.authenticity_token = authenticity_token()\n      $.ajaxJSON(\n        options.url,\n        'DELETE',\n        data,\n        data => {\n          options.success.call($object, data)\n        },\n        (data, request, status, error) => {\n          if (options.error && $.isFunction(options.error)) {\n            options.error.call($object, data, request, status, error)\n          } else {\n            $.ajaxJSON.unhandledXHRs.push(request)\n          }\n        }\n      )\n    } else {\n      if (!options.success) {\n        options.success = function() {\n          $object.fadeOut('slow', () => {\n            $object.remove()\n          })\n        }\n      }\n      options.success.call($object)\n    }\n  }\n  if (options.message && !options.noMessage && !$.skipConfirmations) {\n    if (options.dialog) {\n      result = false\n      const dialog_options = typeof options.dialog === 'object' ? options.dialog : {}\n      const confirmation_class = options.url.includes('assignments') ? 'btn-danger' : 'btn-primary'\n      $dialog = $(options.message).dialog(\n        $.extend(\n          {},\n          {\n            modal: true,\n            close: onContinue,\n            buttons: [\n              {\n                text: I18n.t('#buttons.cancel', 'Cancel'),\n                click() {\n                  $(this).dialog('close')\n                } // ; onContinue();\n              },\n              {\n                text: I18n.t('#buttons.delete', 'Delete'),\n                class: confirmation_class,\n                click() {\n                  result = true\n                  $(this).dialog('close')\n                }\n              }\n            ]\n          },\n          dialog_options\n        )\n      )\n      return\n    } else {\n      result = confirm(options.message)\n    }\n  }\n  onContinue()\n}\n$.fn.confirmDelete.defaults = {\n  get message() {\n    return I18n.t('confirms.default_delete_thing', 'Are you sure you want to delete this?')\n  }\n}\n\n// Watches the given element's location.href for any changes\n// to the fragment (\"#...\") and calls the provided function\n// when there are any.\n// $(document).fragmentChange(function(event, hash) { alert(hash); });\n$.fn.fragmentChange = function(fn) {\n  if (fn && fn !== true) {\n    const query = (window.location.search || '').replace(/^\\?/, '').split('&')\n    // The URL can hard-code a hash regardless of what's\n    // actually shown in the hash by specifying a query\n    // parameter, hash=some_hash\n    let query_hash = null\n    for (var i = 0; i < query.length; i++) {\n      const item = query[i]\n      if (item && item.indexOf('hash=') === 0) {\n        query_hash = '#' + item.substring(5)\n      }\n    }\n    this.bind('document_fragment_change', fn)\n    const $doc = this\n    let found = false\n    // Can only be used on the root document,\n    // will not work on an iframe, for example.\n    for (var i = 0; i < $._checkFragments.fragmentList.length; i++) {\n      const obj = $._checkFragments.fragmentList[i]\n      if (obj.doc[0] == $doc[0]) {\n        found = true\n      }\n    }\n    if (!found) {\n      $._checkFragments.fragmentList.push({\n        doc: $doc,\n        fragment: ''\n      })\n    }\n    $(window).bind('hashchange', $._checkFragments)\n    setTimeout(() => {\n      if (query_hash && query_hash.length > 0) {\n        $doc.triggerHandler('document_fragment_change', query_hash)\n      } else if ($doc && $doc[0] && $doc[0].location && $doc[0].location.hash.length > 0) {\n        $doc.triggerHandler('document_fragment_change', $doc[0].location.hash)\n      }\n    }, 500)\n  } else {\n    this.triggerHandler('document_fragment_change', this[0].location.hash)\n  }\n  return this\n}\n$._checkFragments = function() {\n  const list = $._checkFragments.fragmentList\n  for (let idx = 0; idx < list.length; idx++) {\n    const obj = list[idx]\n    const $doc = obj.doc\n    if ($doc[0].location.hash != obj.fragment) {\n      $doc.triggerHandler('document_fragment_change', $doc[0].location.hash)\n      obj.fragment = $doc[0].location.hash\n      $._checkFragments.fragmentList[idx] = obj\n    }\n  }\n}\n$._checkFragments.fragmentList = []\n// Triggers a click only if the anchor tag isn't disabled.\n$.fn.clickLink = function() {\n  const $obj = this.eq(0)\n  if (!$obj.hasClass('disabled_link')) {\n    $obj.click()\n  }\n}\n\n// jQuery supposedly has this built-in, but I haven't\n// had much success with it.\n$.fn.showIf = function(bool) {\n  if ($.isFunction(bool)) {\n    return this.each(function(index) {\n      $(this).showIf(bool.call(this))\n    })\n  }\n  if (bool) {\n    this.show()\n  } else {\n    this.hide()\n  }\n  return this\n}\n\n$.fn.disableIf = function(bool) {\n  if ($.isFunction(bool)) {\n    bool = bool.call(this)\n  }\n  this.prop('disabled', !!bool)\n  return this\n}\n\n$.fn.indicate = function(options) {\n  options = options || {}\n  let $indicator\n  if (options == 'remove') {\n    $indicator = this.data('indicator')\n    if ($indicator) {\n      $indicator.remove()\n    }\n    return\n  }\n  $('.indicator_box').remove()\n  let offset = this.offset()\n  if (options && options.offset) {\n    offset = options.offset\n  }\n  const width = this.width()\n  const height = this.height()\n  const zIndex = (options.container || this).zIndex()\n  $indicator = $(document.createElement('div'))\n  $indicator.css({\n    width: width + 6,\n    height: height + 6,\n    top: offset.top - 3,\n    left: offset.left - 3,\n    zIndex: zIndex + 1,\n    position: 'absolute',\n    display: 'block',\n    '-moz-border-radius': 5,\n    opacity: 0.8,\n    border: '2px solid #870',\n    backgroundColor: '#fd0'\n  })\n  $indicator.addClass('indicator_box')\n  $indicator.mouseover(function() {\n    $(this)\n      .stop()\n      .fadeOut('fast', function() {\n        $(this).remove()\n      })\n  })\n  if (this.data('indicator')) {\n    this.indicate('remove')\n  }\n  this.data('indicator', $indicator)\n  $('body').append($indicator)\n  if (options && options.singleFlash) {\n    $indicator\n      .hide()\n      .fadeIn()\n      .animate({opacity: 0.8}, 500)\n      .fadeOut('slow', function() {\n        $(this).remove()\n      })\n  } else {\n    $indicator\n      .hide()\n      .fadeIn()\n      .animate({opacity: 0.8}, 500)\n      .fadeOut('slow')\n      .fadeIn('slow')\n      .animate({opacity: 0.8}, 2500)\n      .fadeOut('slow', function() {\n        $(this).remove()\n      })\n  }\n  if (options && options.scroll) {\n    $('html,body').scrollToVisible($indicator)\n  }\n}\n\n$.fn.hasScrollbar = function() {\n  return this.length && this[0].clientHeight < this[0].scrollHeight\n}\n\n$.fn.log = function(msg) {\n  console.log('%s: %o', msg, this)\n  return this\n}\n\n// this is used if you want to fill the browser window with something inside #content but you want to also leave the footer and header on the page.\n$.fn.fillWindowWithMe = function(options) {\n  const opts = $.extend({minHeight: 400}, options),\n    $this = $(this),\n    $wrapper = $('#wrapper'),\n    $main = $('#main'),\n    $not_right_side = $('#not_right_side'),\n    $window = $(window),\n    $toResize = $(this).add(opts.alsoResize)\n\n  function fillWindowWithThisElement() {\n    $toResize.height(0)\n    const spaceLeftForThis =\n        $window.height() -\n        ($wrapper.offset().top + $wrapper.outerHeight()) +\n        ($main.height() - $not_right_side.height()),\n      newHeight = Math.max(400, spaceLeftForThis)\n\n    $toResize.height(newHeight)\n    if ($.isFunction(opts.onResize)) {\n      opts.onResize.call($this, newHeight)\n    }\n  }\n  fillWindowWithThisElement()\n  $window\n    .unbind('resize.fillWindowWithMe')\n    .bind('resize.fillWindowWithMe', fillWindowWithThisElement)\n  return this\n}\n\n$.fn.autoGrowInput = function(o) {\n  o = $.extend(\n    {\n      maxWidth: 1000,\n      minWidth: 0,\n      comfortZone: 70\n    },\n    o\n  )\n\n  this.filter('input:text').each(function() {\n    let minWidth = o.minWidth || $(this).width(),\n      val = '',\n      input = $(this),\n      testSubject = $('<tester/>').css({\n        position: 'absolute',\n        top: -9999,\n        left: -9999,\n        width: 'auto',\n        fontSize: input.css('fontSize'),\n        fontFamily: input.css('fontFamily'),\n        fontWeight: input.css('fontWeight'),\n        letterSpacing: input.css('letterSpacing'),\n        whiteSpace: 'nowrap'\n      }),\n      check = function() {\n        setTimeout(() => {\n          if (val === (val = input.val())) {\n            return\n          }\n\n          // Enter new content into testSubject\n          testSubject.text(val)\n\n          // Calculate new width + whether to change\n          const testerWidth = testSubject.width(),\n            newWidth =\n              testerWidth + o.comfortZone >= minWidth ? testerWidth + o.comfortZone : minWidth,\n            currentWidth = input.width(),\n            isValidWidthChange =\n              (newWidth < currentWidth && newWidth >= minWidth) ||\n              (newWidth > minWidth && newWidth < o.maxWidth)\n\n          // Animate width\n          if (isValidWidthChange) {\n            input.width(newWidth)\n          }\n        })\n      }\n\n    testSubject.insertAfter(input)\n\n    $(this).bind('keyup keydown blur update change', check)\n  })\n\n  return this\n}\n\nexport default $\n","(function() {\n  var options, parseDecimalNumber, patterns;\n\n  patterns = [];\n\n  options = {};\n\n  module.exports = parseDecimalNumber = function(value, inOptions, enforceGroupSize) {\n    var decimal, fractionPart, groupMinSize, integerPart, number, pattern, patternIndex, result, thousands;\n    if (enforceGroupSize == null) {\n      enforceGroupSize = true;\n    }\n    if (typeof inOptions === 'string') {\n      if (inOptions.length !== 2) {\n        throw {\n          name: 'ArgumentException',\n          message: 'The format for string options is \\'<thousands><decimal>\\' (exactly two characters)'\n        };\n      }\n      thousands = inOptions[0], decimal = inOptions[1];\n    } else if (Array.isArray(inOptions)) {\n      if (inOptions.length !== 2) {\n        throw {\n          name: 'ArgumentException',\n          message: 'The format for array options is [\\'<thousands>\\',\\'[<decimal>\\'] (exactly two elements)'\n        };\n      }\n      thousands = inOptions[0], decimal = inOptions[1];\n    } else {\n      thousands = (inOptions != null ? inOptions.thousands : void 0) || (inOptions != null ? inOptions.group : void 0) || options.thousands;\n      decimal = (inOptions != null ? inOptions.decimal : void 0) || options.decimal;\n    }\n    patternIndex = \"\" + thousands + decimal + enforceGroupSize;\n    pattern = patterns[patternIndex];\n    if (pattern == null) {\n      groupMinSize = enforceGroupSize ? 3 : 1;\n      pattern = patterns[patternIndex] = new RegExp(\"^\\\\s*([+\\-]?(?:(?:\\\\d{1,3}(?:\\\\\" + thousands + \"\\\\d{\" + groupMinSize + \",3})+)|\\\\d*))(?:\\\\\" + decimal + \"(\\\\d*))?\\\\s*$\");\n    }\n    result = value.match(pattern);\n    if (!((result != null) && result.length === 3)) {\n      return 0/0;\n    }\n    integerPart = result[1].replace(new RegExp(\"\\\\\" + thousands, 'g'), '');\n    fractionPart = result[2];\n    number = parseFloat(integerPart + \".\" + fractionPart);\n    return number;\n  };\n\n  module.exports.setOptions = function(newOptions) {\n    var key, value;\n    for (key in newOptions) {\n      value = newOptions[key];\n      options[key] = value;\n    }\n  };\n\n  module.exports.factoryReset = function() {\n    options = {\n      thousands: ',',\n      decimal: '.'\n    };\n  };\n\n  module.exports.withOptions = function(options, enforceGroupSize) {\n    if (enforceGroupSize == null) {\n      enforceGroupSize = true;\n    }\n    return function(value) {\n      return parseDecimalNumber(value, options, enforceGroupSize);\n    };\n  };\n\n  module.exports.factoryReset();\n\n}).call(this);\n","//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport $ from 'jquery'\n\n// disable mousewheel in IE select menus to prevent accidental answer change\n$('.question select').bind('mousewheel', event => event.preventDefault())\n"],"sourceRoot":""}