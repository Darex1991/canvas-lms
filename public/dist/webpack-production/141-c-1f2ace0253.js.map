{"version":3,"sources":["webpack:///./node_modules/@instructure/react-crop/dist/react-crop.js","webpack:///./node_modules/crypt/crypt.js","webpack:///./node_modules/is-buffer/index.js","webpack:///./node_modules/data-uri-to-blob/index.js","webpack:///./app/coffeescripts/views/profiles/AvatarUploadBaseView.js","webpack:///./public/javascripts/translations/profiles.upload_file_view.js","webpack:///./public/javascripts/dummyI18nResource.js?ffdd","webpack:///./app/views/jst/profiles/uploadFileView.handlebars","webpack:///./app/jsx/canvas_cropper/cropper.js","webpack:///./app/jsx/canvas_cropper/cropperMaker.js","webpack:///./app/coffeescripts/views/profiles/UploadFileView.js","webpack:///./public/javascripts/translations/profiles.take_picture_view.js","webpack:///./public/javascripts/dummyI18nResource.js?0175","webpack:///./app/views/jst/profiles/takePictureView.handlebars","webpack:///./app/coffeescripts/util/BlobFactory.js","webpack:///./app/coffeescripts/views/profiles/TakePictureView.js","webpack:///./public/javascripts/translations/profiles.gravatar_view.js","webpack:///./public/javascripts/dummyI18nResource.js?efce","webpack:///./app/views/jst/profiles/gravatarView.handlebars","webpack:///./app/coffeescripts/views/profiles/GravatarView.js","webpack:///./public/javascripts/translations/profiles.avatar_dialog.js","webpack:///./public/javascripts/dummyI18nResource.js?6a69","webpack:///./app/views/jst/profiles/avatarDialog.handlebars","webpack:///./app/coffeescripts/views/profiles/AvatarDialogView.js","webpack:///./app/coffeescripts/util/AvatarWidget.js","webpack:///./node_modules/md5/md5.js","webpack:///./node_modules/charenc/charenc.js"],"names":["t","e","n","window","module","exports","o","r","i","l","call","m","c","d","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","hmr","transform","insertInto","locals","push","toString","this","map","btoa","unescape","encodeURIComponent","JSON","stringify","sources","sourceRoot","concat","join","length","a","apply","arguments","document","all","atob","querySelector","HTMLIFrameElement","contentDocument","head","u","id","refs","parts","base","css","media","sourceMap","h","Error","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","f","parentNode","removeChild","indexOf","splice","createElement","attrs","type","nonce","nc","b","keys","forEach","setAttribute","singleton","v","URL","createObjectURL","revokeObjectURL","Blob","rel","convertToAbsoluteUrls","href","styleSheet","cssText","createTextNode","DEBUG","g","filter","Boolean","childNodes","location","protocol","host","pathname","replace","trim","test","iterator","constructor","Array","isArray","next","done","return","TypeError","configurable","writable","key","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","top","left","bottom","right","width","props","height","minConstraints","Math","max","aspectRatio","touches","clientX","clientY","state","resizing","onResize","moving","eventMoveBox","stopResize","stopMove","stopPropagation","preventDefault","setState","corner","assign","constrainBoundary","calculateDimensions","preserveAspectRatio","box","parentElement","getBoundingClientRect","getClientCoordinates","resize","target","name","onChange","moveBox","shiftKey","keyCode","keyboardResize","Component","addEventListener","eventMove","eventEnd","handleKey","removeEventListener","position","ref","className","offsetXLabel","round","controlsMoveBox","tabIndex","offsetYLabel","widthLabel","controlsResize","heightLabel","style","onMouseDown","startMove","onTouchStart","children","startResize","number","isRequired","func","offset","array","node","string","y","w","R","x","L","imageLoaded","url","image","onImageLoaded","Promise","Image","onload","canvas","getContext","naturalWidth","naturalHeight","dimensions","floor","clearRect","drawImage","toDataURL","src","size","minWidth","minHeight","onLoad","center","bool","any","arrayOf","base64map","crypt","rotl","rotr","endian","Number","randomBytes","bytes","random","bytesToWords","words","wordsToBytes","bytesToHex","hex","hexToBytes","parseInt","substr","bytesToBase64","base64","triplet","j","charAt","base64ToBytes","imod4","pow","isBuffer","obj","readFloatLE","slice","isSlowBuffer","_isBuffer","hasArrayBufferView","Uint8Array","mime","uri","split","data","buf","ArrayBuffer","arr","charCodeAt","blob","webkitSlice","AvatarUploadBaseView","Backbone","View","setup","teardown","render","super","$el","mergeI18nTranslations","parse","scoped","Handlebars","template","templates","depth0","helpers","partials","compilerInfo","stack1","buffer","helperMissing","merge","escapeExpression","hasPreview","hash","inverse","program","helper","options","fn","CanvasCropper","React","wrapper","cropper","componentDidMount","focus","img","crop","cropImage","el","imgFile","defaultProps","CanvasCropperMaker","root","unmount","ReactDOM","unmountComponentAtNode","UploadFileView","BaseView","loadPreview","file","match","showPreview","alert","optionProperty","events","onChooseAvatar","openFileDialog","onSelectAvatar","files","onDragLeave","toggleOverStyle","onDragOver","originalEvent","dataTransfer","dropEffect","onFileDrop","$","click","force","toggleClass","initCropping","hidePreview","revokeURLObjects","each","attr","imageDimensions","$preview","$fullSize","heightRatio","widthRatio","currentCoords","getImage","dfd","Deferred","then","imageBlob","resolve","CropperMaker","avatarSize","trigger","toJSON","initClass","previewURL","fromCanvas","binary","codes","_","char","_newBlob","fromXHR","response","builder","_blobBuilder","append","getBlob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","TakePictureView","els","getUserMedia","navigator","mozGetUserMedia","msGetUserMedia","webkitGetUserMedia","noop","startMedia","preview","stream","stop","getTracks","track","video","displayMedia","$video","removeClass","srcObject","err","on","once","onMediaMetadata","wait","setInterval","videoHeight","clearInterval","clipSize","min","$clip","adjustment","toggleView","$captureWrapper","toggle","$previewWrapper","onSnapshot","$canvas","context","clientHeight","clientWidth","sX","sY","BlobFactory","onRetry","resetSnapshot","previewSrc","GravatarView","onPreview","_updatePreviewFromInput","onInputKeyDown","primaryEmail","ENV","PROFILE","primary_email","$gravatarPreviewInput","val","updateAvatar","updateParams","_gravatarUrl","_gravatarHashFromInput","ajaxJSON","_setGravatarPreview","email","_prepareEmail","md5","fallback","$gravatarPreviewImage","toLowerCase","hasFileReader","hasGetUserMedia","enableGravatar","AvatarDialogView","DialogBaseView","updateDomAvatar","close","checkFocusDeferred","contains","activeElement","is","AVATAR_SIZE","child","messages","selectAvatar","I18n","cancel","selectImage","selectingImage","dialogOptions","title","buttons","text","args","class","initialize","uploadFileView","takePictureView","gravatarView","show","listenTo","onReady","togglePane","enableSelectButton","currentView","disableSelectButton","viewUpdateAvatar","imageUpdateAvatar","prop","avatar_url","when","preflightRequest","onPreflight","handleErrorUpdating","errors","error","errorReducer","errorString","currentError","message","isString","reduce","flashError","post","format","no_redirect","folder_id","current_user_id","fail","xhr","responseText","preflight","completeUpload","filename","includeAvatar","resp","onUploadSuccess","catch","waitAndSaveUserAvatar","avatar","token","count","getJSON","avatarList","find","saveUserAvatar","setTimeout","ajax","dataType","partial","onNav","link","$target","parent","$content","getAttribute","siblings","addClass","ready","checkFocus","defer","FileReader","enable_gravatar","AvatarWidget","_openAvatarDialog","avatarDialog","_attachEvents","utf8","bin","String","encoding","stringToBytes","FF","_ff","GG","_gg","HH","_hh","II","_ii","aa","bb","cc","dd","_blocksize","_digestsize","digestbytes","asBytes","asString","bytesToString","charenc","str","decodeURIComponent","escape","fromCharCode"],"mappings":"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","file":"141-c-1f2ace0253.js","sourcesContent":["!function(t,e){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=e(require(\"react\"),require(\"prop-types\"),require(\"data-uri-to-blob\"));else if(\"function\"==typeof define&&define.amd)define([\"react\",\"prop-types\",\"data-uri-to-blob\"],e);else{var n=\"object\"==typeof exports?e(require(\"react\"),require(\"prop-types\"),require(\"data-uri-to-blob\")):e(t.react,t[\"prop-types\"],t[\"data-uri-to-blob\"]);for(var o in n)(\"object\"==typeof exports?exports:t)[o]=n[o]}}(window,function(t,e,n){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=8)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){var o=n(4);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(6)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,\".Cropper {\\n  position: relative;\\n  display: inline-block;\\n  max-width:100%;\\n  max-height:100%;\\n}\\n\\n.box {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n}\\n\\n.Cropper-box {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  cursor: move;\\n  border: #fff solid 1px;\\n}\\n\\n.Cropper-canvas {\\n  visibility: hidden;\\n  position: absolute;\\n}\\n\\n.Cropper-image {\\n  vertical-align: middle;\\n  max-width: 100%;\\n  position: relative;\\n  transform: translate(-50%, -50%);\\n  left: 50%;\\n}\\n\\n.resize-handle {\\n  position: absolute;\\n  background-color: #ECEEEF;\\n  border: #8295AB solid 1px;\\n  width: 13px;\\n  height: 13px;\\n  z-index: 1;\\n}\\n\\n.resize-handle-se {\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n  transform: translate(50%, 50%);\\n}\\n.resize-handle-ne {\\n  right: 0;\\n  top: 0;\\n  cursor: nesw-resize;\\n  transform: translate(50%, -50%);\\n}\\n.resize-handle-sw {\\n  bottom: 0;\\n  left: 0;\\n  cursor: nesw-resize;\\n  transform: translate(-50%, 50%);\\n}\\n.resize-handle-nw {\\n  top: 0;\\n  bottom: 0;\\n  cursor: nwse-resize;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.DraggableResizable {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.DraggableResizable-controls {\\n  border: 0;\\n  clip: rect(0 0 0 0);\\n  height: 1px;\\n  margin: -1px;\\n  overflow: hidden;\\n  padding: 0;\\n  position: absolute;\\n  width: 1px;\\n}\\n\\n.DraggableResizable-top,\\n.DraggableResizable-left,\\n.DraggableResizable-bottom,\\n.DraggableResizable-right {\\n  position: absolute;\\n  background-color: rgba(0,0,0,.7);\\n}\\n\\n.DraggableResizable-top {\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.DraggableResizable-bottom {\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.DraggableResizable-left {\\n  left: 0;\\n}\\n.DraggableResizable-right {\\n  right: 0;\\n}\\n\",\"\"])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||\"\",o=t[3];if(!o)return n;if(e&&\"function\"==typeof btoa){var r=function(t){return\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+\" */\"}(o),i=o.sources.map(function(t){return\"/*# sourceURL=\"+o.sourceRoot+t+\" */\"});return[n].concat(i).concat([r]).join(\"\\n\")}return[n].join(\"\\n\")}(e,t);return e[2]?\"@media \"+e[2]+\"{\"+n+\"}\":n}).join(\"\")},e.i=function(t,n){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];\"number\"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var a=t[r];\"number\"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]=\"(\"+a[2]+\") and (\"+n+\")\"),e.push(a))}},e}},function(t,e,n){var o={},r=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),i=function(t){var e={};return function(t,n){if(\"function\"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),a=null,s=0,l=[],u=n(7);function c(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(m(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(m(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function h(t,e){var n=i(t.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var o=l[l.length-1];if(\"top\"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if(\"bottom\"===t.insertAt)n.appendChild(e);else{if(\"object\"!=typeof t.insertAt||!t.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var r=i(t.insertAt.before,n);n.insertBefore(e,r)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function d(t){var e=document.createElement(\"style\");if(void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var l=s++;n=a||(a=d(e)),o=v.bind(null,n,l,!1),r=v.bind(null,n,l,!0)}else t.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=function(t){var e=document.createElement(\"link\");return void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),t.attrs.rel=\"stylesheet\",b(e,t.attrs),h(t,e),e}(e),o=function(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=u(o));r&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\");var a=new Blob([o],{type:\"text/css\"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),r=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute(\"media\",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){f(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(e=e||{}).attrs=\"object\"==typeof e.attrs?e.attrs:{},e.singleton||\"boolean\"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto=\"head\"),e.insertAt||(e.insertAt=\"bottom\");var n=p(t,e);return c(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&c(p(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join(\"\\n\")}}();function v(t,e,n,o){var r=n?\"\":o.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=\"undefined\"!=typeof window&&window.location;if(!e)throw new Error(\"fixUrls requires window.location\");if(!t||\"string\"!=typeof t)return t;var n=e.protocol+\"//\"+e.host,o=n+e.pathname.replace(/\\/[^\\/]*$/,\"/\");return t.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(t,e){var r,i=e.trim().replace(/^\"(.*)\"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(i)?t:(r=0===i.indexOf(\"//\")?i:0===i.indexOf(\"/\")?n+i:o+i.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(r)+\")\")})}},function(t,e,n){\"use strict\";n.r(e);var o=n(1),r=n.n(o),i=n(0),a=n.n(i);function s(t){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){function e(t,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),f(h(h(o=function(t,e){return!e||\"object\"!==s(e)&&\"function\"!=typeof e?h(t):e}(this,c(e).call(this,t,n)))),\"calculateDimensions\",function(t){var e=t.top,n=t.left,r=t.bottom,i=t.right;return{width:o.props.width-n-i,height:o.props.height-e-r}}),f(h(h(o)),\"preserveAspectRatio\",function(t,e){o.props.minConstraints&&(t=Math.max(t,o.props.minConstraints[0]),e=Math.max(e,o.props.minConstraints[1]));var n=t/e;return n<o.props.aspectRatio?[t,t/o.props.aspectRatio]:n>o.props.aspectRatio?[e*o.props.aspectRatio,e]:[t,e]}),f(h(h(o)),\"constrainBoundary\",function(t){return t<0?0:t}),f(h(h(o)),\"getClientCoordinates\",function(t){return t.touches?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}),f(h(h(o)),\"eventMove\",function(t){o.state.resizing?o.onResize(t):o.state.moving&&o.eventMoveBox(t)}),f(h(h(o)),\"eventEnd\",function(t){o.state.resizing?o.stopResize(t):o.state.moving&&o.stopMove(t)}),f(h(h(o)),\"startResize\",function(t,e){e.stopPropagation(),e.preventDefault(),o.setState({resizing:!0,corner:t})}),f(h(h(o)),\"stopResize\",function(){o.setState({resizing:!1})}),f(h(h(o)),\"nw\",function(t,e){var n=Object.assign({},o.state,{top:o.constrainBoundary(t.clientY-e.top),left:o.constrainBoundary(t.clientX-e.left)}),r=o.calculateDimensions(n),i=l(o.preserveAspectRatio(r.width,r.height),2),a=i[0],s=i[1];return n.top=o.props.height-n.bottom-s,n.left=o.props.width-n.right-a,n}),f(h(h(o)),\"ne\",function(t,e){var n=Object.assign({},o.state,{top:o.constrainBoundary(t.clientY-e.top),right:o.constrainBoundary(e.right-t.clientX)}),r=o.calculateDimensions(n),i=l(o.preserveAspectRatio(r.width,r.height),2),a=i[0],s=i[1];return n.top=o.props.height-n.bottom-s,n.right=o.props.width-n.left-a,n}),f(h(h(o)),\"se\",function(t,e){var n=Object.assign({},o.state,{bottom:o.constrainBoundary(e.bottom-t.clientY),right:o.constrainBoundary(e.right-t.clientX)}),r=o.calculateDimensions(n),i=l(o.preserveAspectRatio(r.width,r.height),2),a=i[0],s=i[1];return n.bottom=o.props.height-n.top-s,n.right=o.props.width-n.left-a,n}),f(h(h(o)),\"sw\",function(t,e){var n=Object.assign({},o.state,{bottom:o.constrainBoundary(e.bottom-t.clientY),left:o.constrainBoundary(t.clientX-e.left)}),r=o.calculateDimensions(n),i=l(o.preserveAspectRatio(r.width,r.height),2),a=i[0],s=i[1];return n.bottom=o.props.height-n.top-s,n.left=o.props.width-n.right-a,n}),f(h(h(o)),\"onResize\",function(t){var e=o.box.parentElement.parentElement.getBoundingClientRect(),n=o.getClientCoordinates(t),r=o[o.state.corner](n,e);o.resize(r,n)}),f(h(h(o)),\"controlsResize\",function(t){var e=o.box.parentElement.parentElement.getBoundingClientRect(),n=\"width\"===t.target.name?+t.target.value:+t.target.value*o.props.aspectRatio,r=\"height\"===t.target.name?+t.target.value:+t.target.value/o.props.aspectRatio,i=o.preserveAspectRatio(n,r);if(n=i[0],r=i[1],!(n>e.width-o.state.left||r>e.height-o.state.top)){var a=o.state.width-n,s=o.state.height-r,l=Object.assign({},o.state,{right:o.state.right+a,bottom:o.state.bottom+s}),u={clientX:e.right-l.right,clientY:e.bottom-l.bottom};o.resize(l,u)}}),f(h(h(o)),\"resize\",function(t,e){var n=o.calculateDimensions(t),r=n.width!==o.state.width,i=n.height!==o.state.height;(r||i)&&o.setState(Object.assign({},e,t,n),function(){o.props.onChange({top:t.top,left:t.left},n)})}),f(h(h(o)),\"startMove\",function(t){var e=o.getClientCoordinates(t),n=e.clientX,r=e.clientY;o.setState({moving:!0,clientX:n,clientY:r})}),f(h(h(o)),\"stopMove\",function(t){o.setState({moving:!1})}),f(h(h(o)),\"eventMoveBox\",function(t){t.preventDefault();var e=o.getClientCoordinates(t),n=e.clientX,r=e.clientY,i=n-o.state.clientX,a=r-o.state.clientY;o.moveBox(n,r,i,a)}),f(h(h(o)),\"controlsMoveBox\",function(t){var e=\"x\"===t.target.name?t.target.value-o.state.left:0,n=\"y\"===t.target.name?t.target.value-o.state.top:0;o.moveBox(0,0,e,n)}),f(h(h(o)),\"moveBox\",function(t,e,n,r){var i={top:o.constrainBoundary(o.state.top+r),left:o.constrainBoundary(o.state.left+n),bottom:o.constrainBoundary(o.state.bottom-r),right:o.constrainBoundary(o.state.right-n)};i.top||(i.bottom=o.props.height-o.state.height),i.bottom||(i.top=o.props.height-o.state.height),i.left||(i.right=o.props.width-o.state.width),i.right||(i.left=o.props.width-o.state.width),o.setState(Object.assign({},{clientX:t,clientY:e},i),function(){o.props.onChange({top:i.top,left:i.left},o.calculateDimensions(i))})}),f(h(h(o)),\"keyboardResize\",function(t){if(!(o.state.right-t<0||o.state.bottom-t<0)){var e=l(o.preserveAspectRatio(o.state.width+t,o.state.height+t),2),n=e[0],r=e[1],i=n-o.state.width,a=r-o.state.height;o.setState({bottom:o.state.bottom-a,right:o.state.right-i,width:n,height:r})}}),f(h(h(o)),\"handleKey\",function(t){t.shiftKey?\"ArrowUp\"===t.key||38===t.keyCode?(o.keyboardResize(-10),t.preventDefault()):\"ArrowDown\"===t.key||40===t.keyCode?(o.keyboardResize(10),t.preventDefault()):\"ArrowLeft\"===t.key||37===t.keyCode?(o.keyboardResize(-10),t.preventDefault()):\"ArrowRight\"!==t.key&&39!==t.keyCode||(o.keyboardResize(10),t.preventDefault()):\"ArrowUp\"===t.key||38===t.keyCode?(o.moveBox(o.state.clientX,o.state.clientY,0,-10),t.preventDefault()):\"ArrowDown\"===t.key||40===t.keyCode?(o.moveBox(o.state.clientX,o.state.clientY,0,10),t.preventDefault()):\"ArrowLeft\"===t.key||37===t.keyCode?(o.moveBox(o.state.clientX,o.state.clientY,-10,0),t.preventDefault()):\"ArrowRight\"!==t.key&&39!==t.keyCode||(o.moveBox(o.state.clientX,o.state.clientY,10,0),t.preventDefault())});var r=l(o.preserveAspectRatio(t.width,t.height),2),i=r[0],a=r[1],u=(t.height-a)/2,p=(t.width-i)/2;return o.state={top:u,left:p,bottom:u,right:p,width:i,height:a},o}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,a.a.Component),function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(e,[{key:\"componentDidMount\",value:function(){document.addEventListener(\"mousemove\",this.eventMove),document.addEventListener(\"mouseup\",this.eventEnd),document.addEventListener(\"touchmove\",this.eventMove),document.addEventListener(\"touchend\",this.eventEnd),document.addEventListener(\"keydown\",this.handleKey),this.props.onChange({top:this.state.top,left:this.state.left},{width:this.state.width,height:this.state.height})}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"mousemove\",this.eventMove),document.removeEventListener(\"mouseup\",this.eventEnd),document.removeEventListener(\"touchmove\",this.eventMove),document.removeEventListener(\"touchend\",this.eventEnd),document.removeEventListener(\"keydown\",this.handleKey)}},{key:\"render\",value:function(){var t=this,e={position:\"absolute\",top:this.state.top,left:this.state.left,right:this.state.right,bottom:this.state.bottom},n=this.calculateDimensions(this.state),o=n.width,r=n.height,i={height:this.state.top},s={height:this.state.bottom},l={top:this.state.top,right:o+this.state.right,bottom:this.state.bottom},u={top:this.state.top,left:o+this.state.left,bottom:this.state.bottom};return a.a.createElement(\"div\",{ref:function(e){return t.box=e},className:\"DraggableResizable\"},a.a.createElement(\"div\",{className:\"DraggableResizable-controls\"},a.a.createElement(\"label\",null,this.props.offsetXLabel,a.a.createElement(\"input\",{name:\"x\",value:Math.round(this.state.left),onChange:this.controlsMoveBox,tabIndex:\"-1\",type:\"number\"})),a.a.createElement(\"label\",null,this.props.offsetYLabel,a.a.createElement(\"input\",{name:\"y\",value:Math.round(this.state.top),onChange:this.controlsMoveBox,tabIndex:\"-1\",type:\"number\"})),a.a.createElement(\"label\",null,this.props.widthLabel,a.a.createElement(\"input\",{name:\"width\",value:Math.round(o),type:\"number\",tabIndex:\"-1\",onChange:this.controlsResize})),a.a.createElement(\"label\",null,this.props.heightLabel,a.a.createElement(\"input\",{value:Math.round(r),type:\"number\",name:\"height\",tabIndex:\"-1\",onChange:this.controlsResize}))),a.a.createElement(\"div\",{className:\"DraggableResizable-top\",style:i}),a.a.createElement(\"div\",{className:\"DraggableResizable-left\",style:l}),a.a.createElement(\"div\",{style:e,onMouseDown:this.startMove,onTouchStart:this.startMove},this.props.children,a.a.createElement(\"div\",{className:\"resize-handle resize-handle-se\",onMouseDown:this.startResize.bind(null,\"se\"),onTouchStart:this.startResize.bind(null,\"se\")}),a.a.createElement(\"div\",{className:\"resize-handle resize-handle-ne\",onMouseDown:this.startResize.bind(null,\"ne\"),onTouchStart:this.startResize.bind(null,\"ne\")}),a.a.createElement(\"div\",{className:\"resize-handle resize-handle-sw\",onMouseDown:this.startResize.bind(null,\"sw\"),onTouchStart:this.startResize.bind(null,\"sw\")}),a.a.createElement(\"div\",{className:\"resize-handle resize-handle-nw\",onMouseDown:this.startResize.bind(null,\"nw\"),onTouchStart:this.startResize.bind(null,\"nw\")})),a.a.createElement(\"div\",{className:\"DraggableResizable-right\",style:u}),a.a.createElement(\"div\",{className:\"DraggableResizable-bottom\",style:s}))}}]),e}();f(d,\"propTypes\",{aspectRatio:r.a.number.isRequired,width:r.a.number.isRequired,height:r.a.number.isRequired,onChange:r.a.func,offset:r.a.array,minConstraints:r.a.array,children:r.a.node,widthLabel:r.a.string,heightLabel:r.a.string,offsetXLabel:r.a.string,offsetYLabel:r.a.string}),f(d,\"defaultProps\",{widthLabel:\"Width\",heightLabel:\"Height\",offsetXLabel:\"Offset X\",offsetYLabel:\"Offset Y\"});var b=n(2),m=n.n(b);n(3);function g(t){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,\"default\",function(){return L});var L=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return x(R(R(n=function(t,e){return!e||\"object\"!==g(e)&&\"function\"!=typeof e?R(t):e}(this,(t=y(e)).call.apply(t,[this].concat(r))))),\"state\",{imageLoaded:!1,width:n.props.width,height:n.props.height,url:window.URL.createObjectURL(n.props.image)}),x(R(R(n)),\"onLoad\",function(t){var e=n.box.getBoundingClientRect();n.setState({imageLoaded:!0,width:e.width,height:e.height},function(){var t=n.image;n.props.onImageLoaded&&n.props.onImageLoaded(t)})}),x(R(R(n)),\"cropImage\",function(){return new Promise(function(t,e){var o=new Image;o.onload=function(){var e=n.canvas,o=n.image,r=e.getContext(\"2d\"),i=o.naturalWidth/n.state.width,a=o.naturalHeight/n.state.height,s=i<1?0:n.state.offset.left*i,l=a<1?0:n.state.offset.top*a,u=i<1?o.naturalWidth:n.state.dimensions.width*i,c=a<1?o.naturalHeight:n.state.dimensions.height*a,p=i<1?Math.floor((n.state.dimensions.width-o.naturalWidth)/2):0,h=a<1?Math.floor((n.state.dimensions.height-o.naturalHeight)/2):0,f=i<1?o.naturalWidth:n.props.width,d=a<1?o.naturalHeight:n.props.height;r.clearRect(0,0,n.props.width,n.props.height),r.drawImage(o,s,l,u,c,p,h,f,d),t(m()(e.toDataURL()))},o.src=window.URL.createObjectURL(n.props.image)})}),x(R(R(n)),\"onChange\",function(t,e){n.setState({offset:t,dimensions:e})}),n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,a.a.Component),function(t,e,n){e&&v(t.prototype,e),n&&v(t,n)}(e,[{key:\"componentWillReceiveProps\",value:function(t){this.props.image!==t.image&&this.setState({url:window.URL.createObjectURL(t.image),imageLoaded:!1})}},{key:\"shouldComponentUpdate\",value:function(t,e){var n=this.props.image;return t.image.size!==n.size||t.image.name!==n.name||t.image.type!==n.type||e.imageLoaded!==this.state.imageLoaded}},{key:\"render\",value:function(){var t=this;return a.a.createElement(\"div\",{ref:function(e){return t.box=e},className:\"Cropper\",style:{minWidth:this.props.width,minHeight:this.props.height}},a.a.createElement(\"canvas\",{className:\"Cropper-canvas\",ref:function(e){return t.canvas=e},width:this.props.width,height:this.props.height}),a.a.createElement(\"img\",{ref:function(e){return t.image=e},src:this.state.url,className:\"Cropper-image\",onLoad:this.onLoad,style:{top:this.state.height/2}}),this.state.imageLoaded&&a.a.createElement(\"div\",{className:\"box\"},a.a.createElement(d,{aspectRatio:this.props.width/this.props.height,width:this.state.width,height:this.state.height,minConstraints:this.props.minConstraints,onChange:this.onChange,widthLabel:this.props.widthLabel,heightLabel:this.props.heightLabel,offsetXLabel:this.props.offsetXLabel,offsetYLabel:this.props.offsetYLabel},a.a.createElement(\"div\",{className:\"Cropper-box\"}))))}}]),e}();x(L,\"propTypes\",{width:r.a.number.isRequired,height:r.a.number.isRequired,center:r.a.bool,image:r.a.any,widthLabel:r.a.string,heightLabel:r.a.string,offsetXLabel:r.a.string,offsetYLabel:r.a.string,onImageLoaded:r.a.func,minConstraints:r.a.arrayOf(r.a.number)}),x(L,\"defaultProps\",{center:!1,width:\"Width\",height:\"Height\",offsetXLabel:\"Offset X\",offsetYLabel:\"Offset Y\"})}])});","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","\n/**\n * Blob constructor.\n */\n\nvar Blob = window.Blob;\n\n/**\n * ArrayBufferView support.\n */\n\nvar hasArrayBufferView = new Blob([new Uint8Array(100)]).size == 100;\n\n/**\n * Return a `Blob` for the given data `uri`.\n *\n * @param {String} uri\n * @return {Blob}\n * @api public\n */\n\nmodule.exports = function(uri){\n  var data = uri.split(',')[1];\n  var bytes = atob(data);\n  var buf = new ArrayBuffer(bytes.length);\n  var arr = new Uint8Array(buf);\n  for (var i = 0; i < bytes.length; i++) {\n    arr[i] = bytes.charCodeAt(i);\n  }\n\n  if (!hasArrayBufferView) arr = buf;\n  var blob = new Blob([arr], { type: mime(uri) });\n  blob.slice = blob.slice || blob.webkitSlice;\n  return blob;\n};\n\n/**\n * Return data uri mime type.\n */\n\nfunction mime(uri) {\n  return uri.split(';')[0].slice(5);\n}\n","//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport Backbone from 'Backbone'\n\nexport default class AvatarUploadBaseView extends Backbone.View {\n  setup() {}\n\n  teardown() {}\n\n  render() {\n    super.render(...arguments)\n    this.$el.data('view', this)\n    return this\n  }\n}\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\"             shift+   .     \\\\\\\"\\\\\\\" .\\\"}}},\\\"cy\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"dewis llun\\\",\\\"crop_instructions\\\":\\\"I docior ddelwedd, llusgwch y dewis gydar llygoden neu defnyddiwch y bysellau saeth i symud y dewis a shift + bysellau saeth i newid maint y dewis. Yna cliciwch y botwm \\\\\\\"Cadw\\\\\\\" isod.\\\"}}},\\\"da\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"vlg et billede\\\",\\\"crop_instructions\\\":\\\"For at beskre billedet skal du trkke markeringen med musen eller bruge piletasterne til at flytte markeringen og shift+piletasterne for at ndre strrelsen p markeringen. Klik derefter p \\\\\\\"Gem\\\\\\\"-knappen nedenfor.\\\"}}},\\\"da-x-k12\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"vlg et billede\\\",\\\"crop_instructions\\\":\\\"For at beskre billedet skal du trkke markeringen med musen eller bruge piletasterne til at flytte markeringen og shift+piletasterne for at ndre strrelsen p markeringen. Klik derefter p \\\\\\\"Gem\\\\\\\"-knappen nedenfor.\\\"}}},\\\"de\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"Bild auswhlen\\\",\\\"crop_instructions\\\":\\\"Um das Bild zuzuschneiden, ziehen Sie die Auswahl mit der Maus oder verwenden Sie die Pfeiltasten zum Verschieben der Auswahl und Umschalt+Pfeiltasten, um die Gre der Auswahl anzupassen. Klicken Sie dann unten auf die Schaltflche Speichern.\\\"}}},\\\"el\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"  \\\",\\\"crop_instructions\\\":\\\"    ,           .\\\"}}},\\\"en-AU\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"choose a picture\\\",\\\"crop_instructions\\\":\\\"To crop the image, drag the selection with the mouse or use the arrow keys to move the selection and shift+arrow keys to resize the selection. Then click the \\\\\\\"Save\\\\\\\" button below.\\\"}}},\\\"en-CA\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"choose a picture\\\",\\\"crop_instructions\\\":\\\"To crop the image, drag the selection with the mouse or use the arrow keys to move the selection and shift+arrow keys to resize the selection. Then click the \\\\\\\"Save\\\\\\\" button below.\\\"}}},\\\"en-GB\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"choose a picture\\\",\\\"crop_instructions\\\":\\\"To crop the image, drag the selection with the mouse or use the arrow keys to move the selection and shift+arrow keys to resize the selection. Then click the \\\\\\\"save\\\\\\\" button below.\\\"}}},\\\"es\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"elegir una imagen\\\",\\\"crop_instructions\\\":\\\"Para recortar la imagen, arrastre la seleccin con el mouse o utilice las flechas de direccin para mover la seleccin y las teclas shift+flecha para cambiar el tamao de la seleccin. Luego haga clic en el botn Guardar ms abajo.\\\"}}},\\\"fa\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\"                                .      \\\\\\\"\\\\\\\"  . \\\"}}},\\\"fi\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"valitse kuva\\\",\\\"crop_instructions\\\":\\\"Jos haluat rajata kuvan, ved valintaa hiirell tai siirr valintaa nuolinppimill tai muuta valinnan kokoa shift+nuolipainikkeilla. Napsauta sitten alla Tallenna-painiketta.\\\"}}},\\\"fr\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"choisir une image\\\",\\\"crop_instructions\\\":\\\"Pour recadrer l'image, faites glisser la slection avec la souris ou utilisez les touches flches pour dplacer la slection et les touches majuscules+flches pour redimensionner la slection. Cliquez ensuite sur le bouton \\\\\\\"Enregistrer\\\\\\\" ci-dessous.\\\"}}},\\\"fr-CA\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"choisir une image\\\",\\\"crop_instructions\\\":\\\"Pour recadrer l'image, faites glisser la slection avec la souris ou utilisez les touches directionnelles pour dplacer la slection et les touches Maj + flches directionnelles pour redimensionner la slection. Cliquez ensuite sur le bouton  Enregistrer  ci-dessous.\\\"}}},\\\"he\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\"  ,         \\\\\\\"\\\\\\\" \\\"}}},\\\"ht\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"chwazi yon foto\\\",\\\"crop_instructions\\\":\\\"Pou rekadre imaj la, deplase seleksyon an ak souri a oswa itilize touch flch yo pou deplase li, epi shift+flch pou ka redimansyone seleksyon an. Apre sa klike sou bouton \\\\\\\"Anrejistre\\\\\\\" ki pi ba a.\\\"}}},\\\"hu\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"Kp kivlasztsa\\\",\\\"crop_instructions\\\":\\\"A kp szleinek levgshoz ragadja meg a kijellst, majd kattintson a \\\\\\\"Ments\\\\\\\" gombra!\\\"}}},\\\"hy\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\"          \\\\\\\"\\\\\\\" :\\\"}}},\\\"is\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"velja mynd\\\",\\\"crop_instructions\\\":\\\"Til a skera af myndinni skaltu draga vali me msinni ea nota rvalyklana til a fra vali til og shift+rvalyklana til a breyta str valsins. Smelltu san  vista hnappinn hr a nean.\\\"}}},\\\"it\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"scegli un'immagine\\\",\\\"crop_instructions\\\":\\\"Per ritagliare limmagine, trascina la sezione con il mouse o utilizza i tasti freccia per spostare la sezione e Maiusc+tasti freccia per ridimensionare la selezione. Quindi fai clic sul pulsante \\\\\\\"Salva\\\\\\\" riportato sotto.\\\"}}},\\\"ja\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"\\\",\\\"crop_instructions\\\":\\\"Shift +[]\\\"}}},\\\"ko\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\"}}},\\\"mi\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"whiriwhiri i te pikitia\\\",\\\"crop_instructions\\\":\\\"Hei motu i te hua, toia te tpakonga me te kiore ka whakamahi i ng pere k hei neke i te tpakonga me te neke + ng pere hei whakahou i te tpakonga. Ka pwhiri te \\\\\\\"Tiaki\\\\\\\" patene i raro\\\"}}},\\\"nb\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"velg et bilde\\\",\\\"crop_instructions\\\":\\\"For  beskjre bildet m delen dras med musen eller bruk piltastene for  flytte delen og shift+piltast for  g tilbake til utgangspunktet. Klikk deretter p knappen 'Lagre' under.\\\"}}},\\\"nb-x-k12\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"velg et bilde\\\",\\\"crop_instructions\\\":\\\"For  beskjre bildet, dra valget med musen eller bruk piltastene til  flytte valget og shift+piltastene til  endre strrelsen. Klikk s p Lagre nedenfor.\\\"}}},\\\"nl\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"een foto kiezen\\\",\\\"crop_instructions\\\":\\\"Je kunt de afbeelding bijsnijden door de selectie met de muisaanwijzer te slepen of door de selectie te verplaatsen met de pijltoetsen en de selectie kleiner te maken met Shift+pijltoetsen. Klik vervolgens op de knop \\\\\\\"Opslaan\\\\\\\" hieronder.\\\"}}},\\\"nn\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"vel eit bilde\\\",\\\"crop_instructions\\\":\\\"Du kan skjere til bildet ved  dra utsnittet med musepeikaren eller bruke piltastane for  flytte det. Bruk shift+piltastar for  endre storleik p utsnittet. Trykk s p Lagre-knappen nedanfor.  \\\"}}},\\\"pl\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"wybierz zdjcie\\\",\\\"crop_instructions\\\":\\\"Aby przyci obraz, przecignij zaznaczenie mysz lub uyj klawiszy strzaek w celu przeniesienia zaznaczenia oraz kombinacji klawiszy strzaek+Shift, aby zmieni rozmiar zaznaczenia. Nastpnie kliknij przycisk Zapisz poniej.\\\"}}},\\\"pt\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"escolher uma imagem\\\",\\\"crop_instructions\\\":\\\"Para cortar a imagem, arraste a seleo com o rato ou use as teclas de seta para mover a seleo e as teclas de seta + de deslocamento para redimensionar a seleo. Em seguida, clique no boto \\\\\\\"Salvar\\\\\\\" abaixo.\\\"}}},\\\"pt-BR\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"escolher uma imagem\\\",\\\"crop_instructions\\\":\\\"Para cortar a imagem, arraste a seleo com o mouse ou use as teclas de setas para mover a seleo e as teclas shift+setas para redimensionar a seleo. Depois clique no boto \\\\\\\"Salvar\\\\\\\" abaixo.\\\"}}},\\\"ru\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\"  ,                Shift +        .     .\\\"}}},\\\"sl\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"izberi sliko\\\",\\\"crop_instructions\\\":\\\"e elite obrezati sliko, povlecite izbiro z miko, premikajte jo s puinima tipkama, velikost pa ji spremenite s tipko Shift + puino tipko. Nato kliknite spodnji gumb Save.\\\"}}},\\\"sv\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"vlj en bild\\\",\\\"crop_instructions\\\":\\\"Du kan beskra bilden genom att dra urvalet med musen eller anvnda piltangenterna fr att flytta urvalet. Anvnd skift+piltangenten fr att ndra storlek p urvalet. Klicka sedan p knappen Spara nedan.\\\"}}},\\\"sv-x-k12\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"vlj en bild\\\",\\\"crop_instructions\\\":\\\"Du kan beskra bilden genom att dra urvalet med musen eller anvnda piltangenterna fr att flytta urvalet. Anvnd skift+piltangenten fr att ndra storlek p urvalet. Klicka sedan p knappen Spara nedan.\\\"}}},\\\"tr\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"bir resim sein\\\",\\\"crop_instructions\\\":\\\"Resmi krpmak iin seimi srkleyin ve aadaki ''Kaydet'' butonuna tklayn.\\\"}}},\\\"uk\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\" \\\",\\\"crop_instructions\\\":\\\" ,   ,   ,     \\\\\\\"\\\\\\\",  .\\\"}}},\\\"zh-Hans\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"\\\",\\\"crop_instructions\\\":\\\"shift+\\\"}}},\\\"zh-Hant\\\":{\\\"profiles\\\":{\\\"upload_file_view\\\":{\\\"choose_a_picture\\\":\\\"\\\",\\\"crop_instructions\\\":\\\" shift+ \\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/profiles.upload_file_view';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('profiles.upload_file_view');\n  ","\n    import _Handlebars from 'handlebars/runtime';\n    var Handlebars = _Handlebars.default;\n    import \"i18n!profiles.upload_file_view\";\nimport \"coffeescripts/handlebars_helpers.coffee\";\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = 'profiles/uploadFileView';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n  <div class=\\\"row-fluid\\\">\\n    <div class=\\\"span6\\\">\\n      <p>\\n        \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"profiles.upload_file_view\")\n  },data:data},helper ? helper.call(depth0, \"crop_instructions\", \"To crop the image, drag the selection with the mouse or use the arrow keys to move the selection and shift+arrow keys to resize the selection. Then click the \\\"Save\\\" button below.\", options) : helperMissing.call(depth0, \"t\", \"crop_instructions\", \"To crop the image, drag the selection with the mouse or use the arrow keys to move the selection and shift+arrow keys to resize the selection. Then click the \\\"Save\\\" button below.\", options)))\n    + \"\\n      </p>\\n    </div>\\n    <div class=\\\"span6 text-center avatar-preview-wrapper\\\">\\n      <div class=\\\"avatar-preview\\\" />\\n    </div>\\n  </div>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n  <a class=\\\"select-photo-link\\\" href=\\\"#\\\">\\n    <i class=\\\"icon-image icon-select-photo\\\"></i>\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"profiles.upload_file_view\")\n  },data:data},helper ? helper.call(depth0, \"choose_a_picture\", \"choose a picture\", options) : helperMissing.call(depth0, \"t\", \"choose_a_picture\", \"choose a picture\", options)))\n    + \"\\n  </a>\\n\\n  <input id=\\\"selected-photo\\\" type=\\\"file\\\" class=\\\"hidden\\\" accept=\\\"image/*\\\" />\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasPreview), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    export default templates[name];\n  ","/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Cropper from '@instructure/react-crop'\n//\n// The react-crop component requires a wrapper component for interacting\n// with the outside world.\n// The main thing you have to do is set style for .CanvasCropper\n// For example, the style for profile avatars looks like\n// .avatar-preview .CanvasCropper {\n//   max-width: 270px;\n//   max-height: 270px;\n//   overflow: hidden;\n// }\n//\nclass CanvasCropper extends React.Component {\n  static propTypes = {\n    imgFile: Cropper.propTypes.image, // selected image file object\n    width: PropTypes.number, // desired cropped width\n    height: PropTypes.number, // desired cropped height\n    onImageLoaded: PropTypes.func // if you care when the image is loaded\n  }\n\n  static defaultProps = {\n    imgFile: null,\n    width: 270,\n    height: 270,\n    onImageLoaded: null\n  }\n\n  constructor(/* props */) {\n    super()\n    this.onImageLoaded = this.imageLoaded.bind(this)\n    this.wrapper = null\n    this.cropper = null\n  }\n\n  componentDidMount() {\n    if (this.wrapper) {\n      this.wrapper.focus()\n    }\n  }\n\n  // called when the image is loaded in the DOM\n  // @param img: the img DOM element\n  imageLoaded(img) {\n    if (typeof this.props.onImageLoaded === 'function') {\n      this.props.onImageLoaded(img)\n    }\n  }\n\n  // @returns a Promise that resolves with cropped image as a blob\n  crop() {\n    return this.cropper.cropImage()\n  }\n\n  render() {\n    return (\n      <div\n        className=\"CanvasCropper\"\n        ref={el => {\n          this.wrapper = el\n        }}\n        tabIndex=\"0\"\n      >\n        {this.props.imgFile && (\n          <div>\n            <Cropper\n              ref={el => {\n                this.cropper = el\n              }}\n              image={this.props.imgFile}\n              width={this.props.width}\n              height={this.props.height}\n              minConstraints={[16, 16]}\n              onImageLoaded={this.onImageLoaded}\n            />\n          </div>\n        )}\n      </div>\n    )\n  }\n}\nexport default CanvasCropper\n","/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport CanvasCropper from './cropper'\n\n// CanvasCropperMaker is the component you'll create if injecting the cropper\n// into existing non-react UI (see UploadFileView.coffee for sample usage)\n//  let cropper = new Cropper(@$('.avatar-preview')[0], {imgFile: @file, width: @avatarSize.w, height: @avatarSize.h})\n//  cropper.render()\n//\nclass CanvasCropperMaker {\n  // @param root: DOM node where I want the cropper created\n  // @param props: properties\n  //    imgFile: the File object returned from the native file open dialog\n  //    width: desired width in px of the final cropped image\n  //    height: desired height in px of the final cropped image\n  constructor(root, props) {\n    this.root = root // DOM node we render into\n    this.imgFile = props.imgFile\n    this.onImageLoaded = props.onImageLoaded\n    this.width = props.width || 128\n    this.height = props.height || 128\n    this.cropper = null\n  }\n\n  unmount() {\n    ReactDOM.unmountComponentAtNode(this.root)\n  }\n\n  render() {\n    ReactDOM.render(\n      <CanvasCropper\n        height={this.height}\n        imgFile={this.imgFile}\n        onImageLoaded={this.onImageLoaded}\n        ref={el => {\n          this.cropper = el\n        }}\n        width={this.width}\n      />,\n      this.root\n    )\n  }\n\n  // crop the image.\n  // returns a promise that resolves with the cropped image as a blob\n  crop() {\n    return this.cropper ? this.cropper.crop() : null\n  }\n}\nexport default CanvasCropperMaker\n","//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\nimport $ from 'jquery'\nimport BaseView from './AvatarUploadBaseView'\nimport template from 'jst/profiles/uploadFileView'\nimport CropperMaker from 'jsx/canvas_cropper/cropperMaker'\n\nexport default class UploadFileView extends BaseView {\n  static initClass() {\n    this.optionProperty('avatarSize')\n\n    this.prototype.template = template\n\n    this.prototype.events = {\n      'click .select-photo-link': 'onChooseAvatar',\n      'change #selected-photo': 'onSelectAvatar',\n      'dragover .select-photo-link': 'onDragOver',\n      'dragleave .select-photo-link': 'onDragLeave',\n      'drop .select-photo-link': 'onFileDrop'\n    }\n  }\n\n  onChooseAvatar(e) {\n    e.preventDefault()\n    return this.openFileDialog()\n  }\n\n  onSelectAvatar(e) {\n    e.preventDefault()\n    return this.loadPreview(e.target.files[0])\n  }\n\n  onDragLeave(e) {\n    return this.toggleOverStyle(false)\n  }\n\n  onDragOver(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    e.originalEvent.dataTransfer.dropEffect = 'copy'\n    return this.toggleOverStyle(true)\n  }\n\n  onFileDrop(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    return this.loadPreview(e.originalEvent.dataTransfer.files[0])\n  }\n\n  openFileDialog() {\n    return this.$('#selected-photo').click()\n  }\n\n  toggleOverStyle(force) {\n    return this.$('.select-photo-link').toggleClass('over', force)\n  }\n\n  loadPreview = file => {\n    if (!file.type.match(/^image/)) {\n      alert('Invalid file type.')\n      return false\n    }\n    return this.showPreview(file)\n  }\n\n  showPreview(file) {\n    this.file = file\n    this.render()\n    return this.initCropping()\n  }\n\n  hidePreview() {\n    delete this.file\n    if (this.cropper) {\n      this.cropper.unmount()\n      delete this.cropper\n    }\n    return this.render()\n  }\n\n  render() {\n    this.revokeURLObjects()\n    return super.render(...arguments)\n  }\n\n  teardown() {\n    this.hidePreview()\n    return this.revokeURLObjects()\n  }\n\n  revokeURLObjects() {\n    return this.$('img').each(function() {\n      const src = $(this).attr('src')\n      if (src.match(/^data/)) {\n        return typeof window.URL.revokeObjectURL === 'function'\n          ? window.URL.revokeObjectURL(src)\n          : undefined\n      }\n    })\n  }\n\n  imageDimensions($preview, $fullSize) {\n    let dimensions\n    const heightRatio = $fullSize.height() / $preview.height()\n    const widthRatio = $fullSize.width() / $preview.width()\n\n    return (dimensions = {\n      heightRatio,\n      widthRatio,\n      x: Math.floor(this.currentCoords.x * widthRatio),\n      y: Math.floor(this.currentCoords.y * heightRatio),\n      w: Math.floor(this.currentCoords.w * widthRatio),\n      h: Math.floor(this.currentCoords.h * heightRatio)\n    })\n  }\n\n  getImage() {\n    // crop returns a Promise, but we exepct getImage to return a Deferred\n    const dfd = $.Deferred()\n    this.cropper.crop().then(imageBlob => dfd.resolve(imageBlob))\n    return dfd\n  }\n\n  initCropping() {\n    if (!this.cropper) {\n      this.cropper = new CropperMaker(this.$('.avatar-preview')[0], {\n        imgFile: this.file,\n        onImageLoaded: this.options.onImageLoaded,\n        width: this.avatarSize.w,\n        height: this.avatarSize.h\n      })\n    }\n    this.cropper.render()\n    return this.trigger('ready')\n  }\n\n  toJSON() {\n    return {hasPreview: !!this.file}\n  }\n}\nUploadFileView.initClass()\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\" \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"cy\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ailgynnig\\\",\\\"take_picture\\\":\\\"Tynnu Llun\\\"}}},\\\"da\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Prv igen\\\",\\\"take_picture\\\":\\\"Tag billede\\\"}}},\\\"da-x-k12\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Prv igen\\\",\\\"take_picture\\\":\\\"Tag billede\\\"}}},\\\"de\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Erneut versuchen\\\",\\\"take_picture\\\":\\\"Foto machen\\\"}}},\\\"el\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\" \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"en-AU\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Retry\\\",\\\"take_picture\\\":\\\"Take Picture\\\"}}},\\\"en-CA\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Retry\\\",\\\"take_picture\\\":\\\"Take Picture\\\"}}},\\\"en-GB\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Retry\\\",\\\"take_picture\\\":\\\"Take picture\\\"}}},\\\"es\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Reintentar\\\",\\\"take_picture\\\":\\\"Hacer foto\\\"}}},\\\"fa\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\" \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"fi\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Yrit uudelleen\\\",\\\"take_picture\\\":\\\"Ota kuva\\\"}}},\\\"fr\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ressayer\\\",\\\"take_picture\\\":\\\"Prendre une photo\\\"}}},\\\"fr-CA\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ressayer\\\",\\\"take_picture\\\":\\\"Prendre une photo\\\"}}},\\\"he\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"/ \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"ht\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Re eseye\\\",\\\"take_picture\\\":\\\"Pran Foto\\\"}}},\\\"hu\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"jra\\\",\\\"take_picture\\\":\\\"Fot ksztse\\\"}}},\\\"hy\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\" \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"is\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Reyna aftur\\\",\\\"take_picture\\\":\\\"Taka mynd\\\"}}},\\\"it\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Riprova\\\",\\\"take_picture\\\":\\\"Acquisisci immagine\\\"}}},\\\"ja\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"\\\",\\\"take_picture\\\":\\\"\\\"}}},\\\"ko\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"take_picture\\\":\\\" \\\"}}},\\\"mi\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ngana an\\\",\\\"take_picture\\\":\\\"Tangohia Pikitia\\\"}}},\\\"nb\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Forsk igjen\\\",\\\"take_picture\\\":\\\"Ta bilde\\\"}}},\\\"nb-x-k12\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Forsk igjen\\\",\\\"take_picture\\\":\\\"Ta bilde\\\"}}},\\\"nl\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Opnieuw proberen\\\",\\\"take_picture\\\":\\\"Een foto nemen\\\"}}},\\\"nn\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Prv p nytt\\\",\\\"take_picture\\\":\\\"Ta eit bile\\\"}}},\\\"pl\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ponw prb\\\",\\\"take_picture\\\":\\\"Zrb zdjcie\\\"}}},\\\"pt\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Tentar novamente\\\",\\\"take_picture\\\":\\\"Tirar fotografia\\\"}}},\\\"pt-BR\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Tentar novamente\\\",\\\"take_picture\\\":\\\"Tirar uma foto\\\"}}},\\\"ru\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\" \\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"sl\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Ponovno poskusi\\\",\\\"take_picture\\\":\\\"Fotografiraj\\\"}}},\\\"sv\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Frsk igen\\\",\\\"take_picture\\\":\\\"Ta bild\\\"}}},\\\"sv-x-k12\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Frsk igen\\\",\\\"take_picture\\\":\\\"Ta bild\\\"}}},\\\"tr\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"Tekrar\\\",\\\"take_picture\\\":\\\"Bilgisayardan Fotoraf ek\\\"}}},\\\"uk\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"\\\",\\\"take_picture\\\":\\\" \\\"}}},\\\"zh-Hans\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"\\\",\\\"take_picture\\\":\\\"\\\"}}},\\\"zh-Hant\\\":{\\\"profiles\\\":{\\\"take_picture_view\\\":{\\\"retry\\\":\\\"\\\",\\\"take_picture\\\":\\\"\\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/profiles.take_picture_view';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('profiles.take_picture_view');\n  ","\n    import _Handlebars from 'handlebars/runtime';\n    var Handlebars = _Handlebars.default;\n    import \"i18n!profiles.take_picture_view\";\nimport \"coffeescripts/handlebars_helpers.coffee\";\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = 'profiles/takePictureView';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"webcam-preview-wrapper\\\">\\n  <img src=\\\"\";\n  if (helper = helpers.previewURL) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewURL); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" alt=\\\"\\\" class=\\\"webcam-preview\\\" />\\n\\n  <button type=\\\"button\\\" class=\\\"btn retry-snapshot-btn\\\">\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"profiles.take_picture_view\")\n  },data:data},helper ? helper.call(depth0, \"retry\", \"Retry\", options) : helperMissing.call(depth0, \"t\", \"retry\", \"Retry\", options)))\n    + \"\\n  </button>\\n</div>\\n\\n<div class=\\\"webcam-capture-wrapper\\\">\\n  <div class=\\\"webcam-clip\\\">\\n    <video autoplay class=\\\"webcam-live-preview pending\\\"></video>\\n  </div>\\n\\n  <button type=\\\"button\\\" class=\\\"btn take-snapshot-btn\\\">\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"profiles.take_picture_view\")\n  },data:data},helper ? helper.call(depth0, \"take_picture\", \"Take Picture\", options) : helperMissing.call(depth0, \"t\", \"take_picture\", \"Take Picture\", options)))\n    + \"\\n  </button>\\n</div>\\n\\n<canvas class=\\\"webcam-preview-staging-area hidden\\\"></canvas>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    export default templates[name];\n  ","//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\nimport _ from 'underscore'\n\n/*\nxsslint xssable.receiver.whitelist builder\n*/\n\nexport default {\n  fromCanvas(canvas, type = 'image/jpeg') {\n    const url = canvas.toDataURL(type)\n    const binary = atob(url.split(',')[1])\n    const codes = _.map(binary, char => char.charCodeAt(0))\n    const data = new Uint8Array(codes)\n    return this._newBlob(data, type)\n  },\n\n  fromXHR(response, type = 'image/jpeg') {\n    return this._newBlob(response, type)\n  },\n\n  _newBlob(src, type) {\n    const builder = this._blobBuilder()\n    if (builder) {\n      builder.append(src)\n      return builder.getBlob(type)\n    } else {\n      return new Blob([src], {type})\n    }\n  },\n\n  _blobBuilder() {\n    if (typeof window.Blob === 'function') return null\n\n    window.BlobBuilder =\n      window.BlobBuilder ||\n      window.WebKitBlobBuilder ||\n      window.MozBlobBuilder ||\n      window.MSBlobBuilder\n    if (typeof window.BlobBuilder === 'undefined') return null\n    return new window.BlobBuilder()\n  }\n}\n","//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\nimport $ from 'jquery'\nimport _ from 'underscore'\nimport BaseView from './AvatarUploadBaseView'\nimport template from 'jst/profiles/takePictureView'\nimport BlobFactory from '../../util/BlobFactory'\n\nexport default class TakePictureView extends BaseView {\n  static initClass() {\n    this.optionProperty('avatarSize')\n\n    this.prototype.template = template\n\n    this.prototype.events = {\n      'click .take-snapshot-btn': 'onSnapshot',\n      'click .retry-snapshot-btn': 'onRetry'\n    }\n\n    this.prototype.els = {\n      '.webcam-live-preview': '$video',\n      '.webcam-clip': '$clip',\n      '.webcam-preview': '$preview',\n      '.webcam-capture-wrapper': '$captureWrapper',\n      '.webcam-preview-wrapper': '$previewWrapper',\n      '.webcam-preview-staging-area': '$canvas'\n    }\n\n    this.prototype.getUserMedia = (\n      navigator.getUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia ||\n      navigator.webkitGetUserMedia ||\n      $.noop\n    ).bind(navigator)\n  }\n\n  setup() {\n    return this.startMedia()\n  }\n\n  teardown() {\n    delete this.img\n    delete this.preview\n    if (this.stream != null ? this.stream.stop : undefined) {\n      return this.stream != null ? this.stream.stop() : undefined\n    } else if (this.stream != null ? this.stream.getTracks : undefined) {\n      // MediaStream.stop is deprecated in Chrome 45\n      return this.stream != null\n        ? this.stream.getTracks().forEach(track => track.stop())\n        : undefined\n    }\n  }\n\n  startMedia() {\n    return this.getUserMedia({video: true}, this.displayMedia.bind(this), $.noop)\n  }\n\n  displayMedia(stream) {\n    this.stream = stream\n    this.$video.removeClass('pending')\n    try {\n      this.$video.get(0).srcObject = this.stream\n    } catch (err) {\n      this.$video.attr('src', window.URL.createObjectURL(this.stream))\n    }\n    return this.$video.on(\n      'onloadedmetadata loadedmetadata',\n      _.once(this.onMediaMetadata).bind(this)\n    )\n  }\n\n  onMediaMetadata(e) {\n    let wait\n    return (wait = window.setInterval(() => {\n      if (this.$video[0].videoHeight === 0) return\n      window.clearInterval(wait)\n\n      const clipSize = _.min([this.$video.height(), this.$video.width()])\n      this.$clip.height(clipSize).width(clipSize)\n\n      if (this.$video.width() > clipSize) {\n        const adjustment = ((this.$video.width() - clipSize) / 2) * -1\n        return this.$video.css('left', adjustment)\n      }\n    }, 100))\n  }\n\n  toggleView() {\n    this.$captureWrapper.toggle()\n    this.$previewWrapper.toggle()\n    return this.trigger('ready', !!this.preview)\n  }\n\n  getImage() {\n    const dfd = $.Deferred()\n    return dfd.resolve(this.img)\n  }\n\n  onSnapshot() {\n    const canvas = this.$canvas[0]\n    const video = this.$video[0]\n    const img = new Image()\n    const context = canvas.getContext('2d')\n\n    canvas.height = video.clientHeight\n    canvas.width = video.clientWidth\n    context.drawImage(\n      // source\n      video,\n\n      // x and y coordinates of the top-left corner of the source image to draw to destination\n      0,\n      0,\n\n      // width and height of the source image to draw to the destination\n      canvas.width,\n      canvas.height\n    )\n    const url = canvas.toDataURL()\n\n    img.onload = e => {\n      const sX = (video.clientWidth - this.$clip.width()) / 2\n      const sY = (video.clientHeight - this.$clip.height()) / 2\n\n      canvas.height = this.$clip.height()\n      canvas.width = this.$clip.width()\n\n      context.drawImage(\n        // source\n        img,\n\n        // x and y coordinates of the top-left corner of the source image to draw to destination\n        sX,\n        sY,\n\n        // width and height of the source image to draw to the destination\n        this.$clip.width(),\n        this.$clip.height(),\n\n        // x and y coordinates to start drawing to in the destination\n        0,\n        0,\n\n        // width and height of the image in the destination\n        this.$clip.width(),\n        this.$clip.height()\n      )\n\n      this.preview = canvas.toDataURL()\n      this.toggleView()\n      this.$preview.attr('src', this.preview)\n      return (this.img = BlobFactory.fromCanvas(canvas))\n    }\n\n    return (img.src = url)\n  }\n\n  onRetry(e) {\n    return this.resetSnapshot()\n  }\n\n  resetSnapshot() {\n    delete this.preview\n    delete this.img\n    return this.toggleView()\n  }\n\n  previewSrc() {\n    if (!this.preview) {\n      return ''\n    }\n    return this.preview.split(',')[1]\n  }\n\n  toJSON() {\n    return {hasPreview: !!this.preview, previewURL: this.preview}\n  }\n}\nTakePictureView.initClass()\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\"      *Gravatar* \\\"}}},\\\"cy\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Rhagolwg\\\"},\\\"enter_gravatar_email_below\\\":\\\"rhowch eich cyfeiriad e-bost *Gravatar* isod\\\"}}},\\\"da\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Eksempel\\\"},\\\"enter_gravatar_email_below\\\":\\\"indtast din *Gravatar* e-mailadresse nedenfor\\\"}}},\\\"da-x-k12\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Eksempel\\\"},\\\"enter_gravatar_email_below\\\":\\\"indtast din *Gravatar* e-mailadresse nedenfor\\\"}}},\\\"de\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Vorschau\\\"},\\\"enter_gravatar_email_below\\\":\\\"Geben Sie unten Ihre E-Mail-Adresse fr *Gravatar* ein.\\\"}}},\\\"el\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\"     *Gravatar* \\\"}}},\\\"en-AU\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Preview\\\"},\\\"enter_gravatar_email_below\\\":\\\"enter your *Gravatar* email address below\\\"}}},\\\"en-CA\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Preview\\\"},\\\"enter_gravatar_email_below\\\":\\\"enter your *Gravatar* email address below\\\"}}},\\\"en-GB\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Preview\\\"},\\\"enter_gravatar_email_below\\\":\\\"enter your *Gravatar* email address below\\\"}}},\\\"es\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Vista previa\\\"},\\\"enter_gravatar_email_below\\\":\\\"Ingrese su direccin de correo electrnico de *Gravatar* a continuacin\\\"}}},\\\"fa\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\"   **       \\\"}}},\\\"fi\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Esikatsele\\\"},\\\"enter_gravatar_email_below\\\":\\\"syt *Gravatar*-shkpostiosoite alle\\\"}}},\\\"fr\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Aperu\\\"},\\\"enter_gravatar_email_below\\\":\\\"Indiquez votre adresse e-mail *Gravatar* ci-dessous\\\"}}},\\\"fr-CA\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Afficher un aperu\\\"},\\\"enter_gravatar_email_below\\\":\\\"Indiquez votre adresse courriel *Gravatar* ci-dessous\\\"}}},\\\"he\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\" \\\"},\\\"enter_gravatar_email_below\\\":\\\"  \\\\\\\" *Gravatar*  \\\"}}},\\\"ht\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Apsi\\\"},\\\"enter_gravatar_email_below\\\":\\\"antre yon adrs iml *Gravatar* pi ba a\\\"}}},\\\"hu\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Elnzet\\\"},\\\"enter_gravatar_email_below\\\":\\\"Adja meg a *Gravatar* e-mail cmt!\\\"}}},\\\"hy\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"  \\\"},\\\"enter_gravatar_email_below\\\":\\\"  *Gravatar*    \\\"}}},\\\"is\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Forskoun\\\"},\\\"enter_gravatar_email_below\\\":\\\"Skru *Gravatar* netfangi itt fyrir nean\\\"}}},\\\"it\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Anteprima\\\"},\\\"enter_gravatar_email_below\\\":\\\"inserisci il tuo indirizzo email *Gravatar* di seguito\\\"}}},\\\"ja\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\" *Gravatar*  \\\"}}},\\\"ko\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\" \\\"},\\\"enter_gravatar_email_below\\\":\\\"*Gravatar*   \\\"}}},\\\"mi\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Arokite\\\"},\\\"enter_gravatar_email_below\\\":\\\"whakauru t * Gravatar * whitau mra i raro\\\"}}},\\\"nb\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Forhndsvisning\\\"},\\\"enter_gravatar_email_below\\\":\\\"legg inn din *Gravatar* e-postadresse nedenfor:\\\"}}},\\\"nb-x-k12\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Forhndsvisning\\\"},\\\"enter_gravatar_email_below\\\":\\\"legg inn din *Gravatar* e-postadresse nedenfor:\\\"}}},\\\"nl\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Voorbeeld\\\"},\\\"enter_gravatar_email_below\\\":\\\"jouw *Gravatar* e-mailadres hieronder invoeren\\\"}}},\\\"nn\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Frehandsvising\\\"},\\\"enter_gravatar_email_below\\\":\\\"skriv inn *Gravatar*-e-postadressa nedanfor\\\"}}},\\\"pl\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Podgld\\\"},\\\"enter_gravatar_email_below\\\":\\\"Podaj adres email *Gravatara* poniej\\\"}}},\\\"pt\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Pr-visualizar\\\"},\\\"enter_gravatar_email_below\\\":\\\"introduza o endereo de e-mail do seu *Gravatar* abaixo\\\"}}},\\\"pt-BR\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Pr-visualizao\\\"},\\\"enter_gravatar_email_below\\\":\\\"insira seu endereo de e-mail *Gravatar* abaixo\\\"}}},\\\"ru\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\" \\\"},\\\"enter_gravatar_email_below\\\":\\\"    *Gravatar* \\\"}}},\\\"sl\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Predogled\\\"},\\\"enter_gravatar_email_below\\\":\\\"spodaj vnesite svoj e-potni naslov *Gravatar*\\\"}}},\\\"sv\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Frhandsgranska\\\"},\\\"enter_gravatar_email_below\\\":\\\"ange din *Gravatar*-e-postadress nedan\\\"}}},\\\"sv-x-k12\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"Frhandsgranska\\\"},\\\"enter_gravatar_email_below\\\":\\\"ange din *Gravatar*-e-postadress nedan\\\"}}},\\\"tr\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"n zleme\\\"},\\\"enter_gravatar_email_below\\\":\\\"*Gravatar* eposta adresinizi aaya girin\\\"}}},\\\"uk\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\" \\\"},\\\"enter_gravatar_email_below\\\":\\\"  *Gravatar* email  \\\"}}},\\\"zh-Hans\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\" *Gravatar* \\\"}}},\\\"zh-Hant\\\":{\\\"profiles\\\":{\\\"gravatar_view\\\":{\\\"button\\\":{\\\"preview\\\":\\\"\\\"},\\\"enter_gravatar_email_below\\\":\\\"*Gravatar*\\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/profiles.gravatar_view';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('profiles.gravatar_view');\n  ","\n    import _Handlebars from 'handlebars/runtime';\n    var Handlebars = _Handlebars.default;\n    import \"i18n!profiles.gravatar_view\";\nimport \"coffeescripts/handlebars_helpers.coffee\";\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = 'profiles/gravatarView';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<img class=\\\"content-box gravatar-preview-image\\\" aria-label=\\\"gravatar\\\"></img>\\n<div class=\\\"content-box-mini gravatar-label\\\">\\n  <label for=\\\"gravatar-preview-input\\\">\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'w0': (\"<a href=\\\"http://gravatar.com/\\\" target=\\\"_blank\\\">$1</a>\"),\n    'scope': (\"profiles.gravatar_view\")\n  },data:data},helper ? helper.call(depth0, \"enter_gravatar_email_below\", \"enter your *Gravatar* email address below\", options) : helperMissing.call(depth0, \"t\", \"enter_gravatar_email_below\", \"enter your *Gravatar* email address below\", options)))\n    + \"\\n  </label>\\n</div>\\n<div class=\\\"input-append\\\">\\n  <input type=\\\"text\\\" class=\\\"gravatar-preview-input\\\" id=\\\"gravatar-preview-input\\\" />\\n  <button class=\\\"btn gravatar-preview-btn\\\">\\n    \"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'scope': (\"profiles.gravatar_view\")\n  },data:data},helper ? helper.call(depth0, \"button.preview\", \"Preview\", options) : helperMissing.call(depth0, \"t\", \"button.preview\", \"Preview\", options)))\n    + \"\\n  </button>\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    export default templates[name];\n  ","//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\nimport $ from 'jquery'\nimport AvatarUploadBaseView from './AvatarUploadBaseView'\nimport template from 'jst/profiles/gravatarView'\nimport md5 from 'md5'\nimport 'jquery.ajaxJSON'\n\nexport default class GravatarView extends AvatarUploadBaseView {\n  static initClass() {\n    this.optionProperty('avatarSize')\n\n    this.prototype.template = template\n\n    this.prototype.events = {\n      'click .gravatar-preview-btn': 'onPreview',\n      'keydown .gravatar-preview-input': 'onInputKeyDown'\n    }\n\n    this.prototype.els = {\n      '.gravatar-preview-image': '$gravatarPreviewImage',\n      '.gravatar-preview-input': '$gravatarPreviewInput'\n    }\n  }\n\n  onPreview(e) {\n    e.preventDefault()\n    return this._updatePreviewFromInput()\n  }\n\n  onInputKeyDown(e) {\n    if (e.keyCode === 13) {\n      e.preventDefault()\n      return this._updatePreviewFromInput()\n    }\n  }\n\n  setup() {\n    const primaryEmail = ENV.PROFILE != null ? ENV.PROFILE.primary_email : undefined\n    if (primaryEmail) {\n      this.$gravatarPreviewInput.val(primaryEmail)\n      return this._updatePreviewFromInput()\n    }\n  }\n\n  updateAvatar() {\n    const url = '/api/v1/users/self'\n    const updateParams = {\n      'user[avatar][url]': this._gravatarUrl(this._gravatarHashFromInput(), this.avatarSize.w)\n    }\n    return $.ajaxJSON(url, 'PUT', updateParams)\n  }\n\n  getImage() {\n    throw 'GravatarView does not support getImage()'\n  }\n\n  _updatePreviewFromInput() {\n    const hash = this._gravatarHashFromInput()\n    return this._setGravatarPreview(this._gravatarUrl(hash))\n  }\n\n  _gravatarHashFromInput() {\n    const email = this._prepareEmail(this.$gravatarPreviewInput.val())\n    return md5(email)\n  }\n\n  _gravatarUrl(hash, size = 200, fallback = 'identicon') {\n    return `https://secure.gravatar.com/avatar/${hash}?s=${size}&d=${fallback}`\n  }\n\n  _setGravatarPreview(url) {\n    this.$gravatarPreviewImage.attr('src', url)\n    return this.trigger('ready')\n  }\n\n  _prepareEmail(email) {\n    return email.trim().toLowerCase()\n  }\n}\nGravatarView.initClass()\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"cy\\\":{\\\"from_gravatar_58372d5a\\\":\\\"O Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tynnu Llun\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Llwytho llun i fyny\\\"},\\\"da\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fra Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tag et billede\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Upload et billede\\\"},\\\"da-x-k12\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fra Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tag et billede\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Upload et billede\\\"},\\\"de\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Von Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ein Foto machen\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Ein Bild hochladen\\\"},\\\"el\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"en-AU\\\":{\\\"from_gravatar_58372d5a\\\":\\\"From Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Take a Picture\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Upload a Picture\\\"},\\\"en-CA\\\":{\\\"from_gravatar_58372d5a\\\":\\\"From Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Take a Picture\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Upload a Picture\\\"},\\\"en-GB\\\":{\\\"from_gravatar_58372d5a\\\":\\\"From Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Take a picture\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Upload a picture\\\"},\\\"es\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Desde Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Hacer una foto\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Cargar una imagen\\\"},\\\"fa\\\":{\\\"from_gravatar_58372d5a\\\":\\\" \\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"fi\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatar-sovelluksesta\\\",\\\"take_a_picture_d582acf1\\\":\\\"Kuvan ottaminen\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Lataa kuva\\\"},\\\"fr\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Depuis Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Prendre une photo\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Fournir une image\\\"},\\\"fr-CA\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Depuis Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Prendre une photo\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Fournir une image\\\"},\\\"he\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"ht\\\":{\\\"from_gravatar_58372d5a\\\":\\\"De Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Pran yon Foto\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Transfere yon Foto\\\"},\\\"hu\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatarrl szrmaz\\\",\\\"take_a_picture_d582acf1\\\":\\\"Fot ksztse\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Fot feltltse\\\"},\\\"hy\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatar-\\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"is\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fr Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Taka mynd\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Hlaa upp mynd\\\"},\\\"it\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Da Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Acquisisci un'immagine\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Carica un'immagine\\\"},\\\"ja\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatar \\\",\\\"take_a_picture_d582acf1\\\":\\\"\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"\\\"},\\\"ko\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatar \\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"mi\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Mai i Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tango he Pikitia\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Tukuake he Pikitia\\\"},\\\"nb\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fra Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ta et bilde\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Last opp et bilde\\\"},\\\"nb-x-k12\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fra Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ta et bilde\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Last opp et bilde\\\"},\\\"nl\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Van Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Een afbeelding nemen\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Een afbeelding uploaden\\\"},\\\"nn\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Fr Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ta eit bilde\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Last opp eit bilde\\\"},\\\"pl\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Z grawatara\\\",\\\"take_a_picture_d582acf1\\\":\\\"Zrb zdjcie\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Przelij zdjcie\\\"},\\\"pt\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Do Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tirar uma fotografia\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Carregar uma fotografia\\\"},\\\"pt-BR\\\":{\\\"from_gravatar_58372d5a\\\":\\\"A partir de Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Tirar uma foto\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Enviar uma foto\\\"},\\\"ru\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\" \\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\" \\\"},\\\"sl\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Iz profila Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Fotografiraj\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Naloi sliko\\\"},\\\"sv\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Frn Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ta en bild\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Ladda upp en bild\\\"},\\\"sv-x-k12\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Frn Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"Ta en bild\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Ladda upp en bild\\\"},\\\"tr\\\":{\\\"from_gravatar_58372d5a\\\":\\\"Gravatar'dan al\\\",\\\"take_a_picture_d582acf1\\\":\\\"Bilgisayardan Fotoraf ek\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"Fotoraf ykle\\\"},\\\"zh-Hans\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"\\\"},\\\"zh-Hant\\\":{\\\"from_gravatar_58372d5a\\\":\\\" Gravatar\\\",\\\"take_a_picture_d582acf1\\\":\\\"\\\",\\\"upload_a_picture_9f5f6e3c\\\":\\\"\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/profiles.avatar_dialog';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('profiles.avatar_dialog');\n  ","\n    import _Handlebars from 'handlebars/runtime';\n    var Handlebars = _Handlebars.default;\n    import \"i18n!profiles.avatar_dialog\";\nimport \"coffeescripts/handlebars_helpers.coffee\";\n\n    var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n    var name = 'profiles/avatarDialog';\n    templates[name] = template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n      <li class=\\\"active\\\">\\n        <a href=\\\"#upload-picture\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"upload_a_picture_9f5f6e3c\", \"Upload a Picture\", options) : helperMissing.call(depth0, \"t\", \"upload_a_picture_9f5f6e3c\", \"Upload a Picture\", options)))\n    + \"</a>\\n      </li>\\n    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n      <li>\\n        <a href=\\\"#take-picture\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"take_a_picture_d582acf1\", \"Take a Picture\", options) : helperMissing.call(depth0, \"t\", \"take_a_picture_d582acf1\", \"Take a Picture\", options)))\n    + \"</a>\\n      </li>\\n    \";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n      <li>\\n        <a href=\\\"#from-gravatar\\\">\"\n    + escapeExpression((helper = helpers.t || (depth0 && depth0.t),options={hash:{\n    'i18n_inferred_key': (true)\n  },data:data},helper ? helper.call(depth0, \"from_gravatar_58372d5a\", \"From Gravatar\", options) : helperMissing.call(depth0, \"t\", \"from_gravatar_58372d5a\", \"From Gravatar\", options)))\n    + \"</a>\\n      </li>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"avatar-nav\\\">\\n  <ul class=\\\"nav nav-pills\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasFileReader), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasGetUserMedia), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.enableGravatar), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </ul>\\n</div>\\n\\n<div class=\\\"avatar-content\\\">\\n  <div class=\\\"active\\\" id=\\\"upload-picture\\\"></div>\\n  <div id=\\\"take-picture\\\" class=\\\"text-center\\\"></div>\\n  <div id=\\\"from-gravatar\\\" class=\\\"text-center\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n    ;\n    ;\n    export default templates[name];\n  ","//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\nimport I18n from 'i18n!profile'\nimport $ from 'jquery'\nimport _ from 'underscore'\nimport DialogBaseView from '../DialogBaseView'\nimport UploadFileView from './UploadFileView'\nimport TakePictureView from './TakePictureView'\nimport GravatarView from './GravatarView'\nimport {completeUpload} from 'jsx/shared/upload_file'\nimport template from 'jst/profiles/avatarDialog'\n\nexport default class AvatarDialogView extends DialogBaseView {\n  static initClass() {\n    this.prototype.template = template\n\n    this.prototype.AVATAR_SIZE = {\n      h: 128,\n      w: 128\n    }\n\n    this.child('uploadFileView', '#upload-picture')\n    this.child('takePictureView', '#take-picture')\n    this.child('gravatarView', '#from-gravatar')\n\n    this.prototype.messages = {\n      selectAvatar: I18n.t('buttons.select_profile_picture', 'Select Profile Picture'),\n      cancel: I18n.t('#buttons.cancel', 'Cancel'),\n      selectImage: I18n.t('buttons.save', 'Save'),\n      selectingImage: I18n.t('buttons.selecting_image', 'Selecting Image...')\n    }\n\n    this.prototype.events = {\n      'click .nav-pills a': 'onNav',\n      'click .select-photo-link': 'onUploadClick',\n      'change #selected-photo': 'onSelectAvatar'\n    }\n  }\n\n  dialogOptions() {\n    return {\n      title: this.messages.selectAvatar,\n      buttons: [\n        {\n          text: this.messages.cancel,\n          click: (...args) => this.cancel(...args)\n        },\n        {\n          text: this.messages.selectImage,\n          class: 'btn-primary select_button',\n          click: () => this.updateAvatar()\n        }\n      ],\n      height: 500,\n      width: 600\n    }\n  }\n\n  initialize() {\n    this.uploadFileView = new UploadFileView({avatarSize: this.AVATAR_SIZE})\n    this.takePictureView = new TakePictureView({avatarSize: this.AVATAR_SIZE})\n    this.gravatarView = new GravatarView({avatarSize: this.AVATAR_SIZE})\n    return super.initialize(...arguments)\n  }\n\n  show() {\n    this.render()\n    _.each(this.children, child => this.listenTo(child, 'ready', this.onReady))\n    this.togglePane(this.$('.nav-pills a')[0])\n    return super.show(...arguments)\n  }\n\n  cancel() {\n    this.teardown()\n    return super.cancel(...arguments)\n  }\n\n  close() {\n    this.teardown()\n    this.enableSelectButton()\n    return super.close(...arguments)\n  }\n\n  getImage() {\n    return (this.currentView || this.$('.avatar-content > div:first-child').data('view')).getImage()\n  }\n\n  updateAvatar() {\n    this.disableSelectButton()\n    if (this.currentView && this.currentView.updateAvatar) {\n      return this.viewUpdateAvatar()\n    } else {\n      return this.imageUpdateAvatar()\n    }\n  }\n\n  enableSelectButton() {\n    $('.select_button')\n      .prop('disabled', false)\n      .removeClass('ui-state-hover')\n      .text(this.messages.selectImage)\n  }\n\n  disableSelectButton() {\n    $('.select_button')\n      .prop('disabled', true)\n      .text(this.messages.selectingImage)\n  }\n\n  viewUpdateAvatar() {\n    return this.currentView.updateAvatar().then(response => {\n      return this.updateDomAvatar(response.avatar_url)\n    })\n  }\n\n  imageUpdateAvatar() {\n    return $.when(this.getImage(), this.preflightRequest()).then(this.onPreflight.bind(this))\n  }\n\n  handleErrorUpdating(response) {\n    if (response) {\n      // try to get an error message out of JSON string\n      const errors = (() => {\n        try {\n          return JSON.parse(response).errors\n        } catch (error) {\n          return undefined\n        }\n      })()\n\n      if (errors) {\n        const errorReducer = (errorString, currentError) => (errorString += currentError.message)\n\n        const message = _.isString(errors.base)\n          ? errors.base\n          : _.isArray(errors.base)\n          ? errors.base.reduce(errorReducer, '')\n          : I18n.t(\n              'Your profile photo could not be uploaded. You may have exceeded your upload limit.'\n            )\n\n        $.flashError(message)\n        return this.enableSelectButton()\n      }\n    }\n  }\n\n  preflightRequest() {\n    // not using uploader.uploadFile because need to have completeUpload also\n    // wait on @getImage in imageUpdateAvatar\n    return $.post('/files/pending', {\n      name: 'profile.jpg',\n      format: 'text',\n      no_redirect: true,\n      'attachment[on_duplicate]': 'overwrite',\n      'attachment[folder_id]': ENV.folder_id,\n      'attachment[filename]': 'profile.jpg',\n      'attachment[context_code]': `user_${ENV.current_user_id}`\n    }).fail(xhr => this.handleErrorUpdating(xhr.responseText))\n  }\n\n  onPreflight(image, response) {\n    const preflight = response[0]\n    return completeUpload(preflight, image, {filename: 'profile.jpg', includeAvatar: true})\n      .then(resp => this.onUploadSuccess(resp))\n      .catch(xhr => this.handleErrorUpdating(xhr.responseText))\n  }\n\n  onUploadSuccess(response) {\n    return this.waitAndSaveUserAvatar(response.avatar.token, response.avatar.url, 0)\n  }\n\n  // need to wait for the avatar to get processed by background jobs before\n  // it will save properly.\n  // wait 5 seconds and then error out\n  waitAndSaveUserAvatar(token, url, count) {\n    return $.getJSON('/api/v1/users/self/avatars').then(avatarList => {\n      const processedAvatar = _.find(avatarList, avatar => avatar.token === token)\n      if (processedAvatar) {\n        return this.saveUserAvatar(token, url)\n      } else if (count < 50) {\n        return window.setTimeout(() => this.waitAndSaveUserAvatar(token, url, count + 1), 100)\n      } else {\n        return this.handleErrorUpdating(\n          JSON.stringify({\n            errors: {\n              base: I18n.t('Profile photo save failed too many times')\n            }\n          })\n        )\n      }\n    })\n  }\n\n  saveUserAvatar(token, url) {\n    return $.ajax('/api/v1/users/self', {\n      data: {'user[avatar][token]': token},\n      dataType: 'json',\n      type: 'PUT'\n    }).then(_.partial(this.updateDomAvatar, url))\n  }\n\n  updateDomAvatar = url => {\n    $('.profile_pic_link, .profile-link').css('background-image', `url('${url}')`)\n    return this.close()\n  }\n\n  onNav(e) {\n    e.preventDefault()\n    return this.togglePane(e.target)\n  }\n\n  togglePane(link) {\n    const $target = this.$(link).parent()\n    const $content = this.$(link.getAttribute('href'))\n    $target.siblings().removeClass('active')\n    $target.addClass('active')\n    this.teardown()\n    $('.select_button').prop('disabled', true)\n    this.$('.avatar-content div').removeClass('active')\n    __guard__($content.addClass('active').data('view'), x => x.setup())\n    return (this.currentView = $content.data('view'))\n  }\n\n  onReady(ready = true) {\n    $('.select_button').prop('disabled', !ready)\n    return this.checkFocus()\n  }\n\n  checkFocus() {\n    // deferring this makes it work more reliably because in some cases (like\n    // visibility updates) the focus isn't lost immediately.\n    return _.defer(this.checkFocusDeferred)\n  }\n\n  checkFocusDeferred = () => {\n    if (\n      !$.contains(this.$el[0], document.activeElement) ||\n      !$(document.activeElement).is(':visible')\n    ) {\n      $('.ui-dialog-titlebar-close').focus()\n    }\n  }\n\n  teardown() {\n    return _.each(this.children, child => child.teardown())\n  }\n\n  toJSON() {\n    const hasFileReader = !!window.FileReader\n    const hasUserMedia = !!(\n      navigator.getUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia ||\n      navigator.webkitGetUserMedia\n    )\n    return {hasFileReader, hasGetUserMedia: hasUserMedia, enableGravatar: ENV.enable_gravatar}\n  }\n}\nAvatarDialogView.initClass()\n\nfunction __guard__(value, transform) {\n  return typeof value !== 'undefined' && value !== null ? transform(value) : undefined\n}\n","//\n// Copyright (C) 2013 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n//\n\n// On click of the given element, display the profile picture picker dialog.\n\nimport $ from 'jquery'\nimport AvatarDialogView from '../views/profiles/AvatarDialogView'\n\nexport default class AvatarWidget {\n  constructor(el) {\n    this.$el = $(el)\n    this._attachEvents()\n  }\n\n  // Internal: Add click event to @$el to open widget.\n  //\n  // Returns nothing.\n  _attachEvents() {\n    return this.$el.on('click', this._openAvatarDialog)\n  }\n\n  // Internal: Attempt to open the avatar widget.\n  //\n  // e - Event object.\n  //\n  // Returns nothing.\n  _openAvatarDialog = e => {\n    if (e != null) {\n      e.preventDefault()\n    }\n    if (!this.avatarDialog) {\n      this.avatarDialog = new AvatarDialogView()\n    }\n    return this.avatarDialog.show()\n  }\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message))\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n"],"sourceRoot":""}