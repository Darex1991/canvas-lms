{"version":3,"sources":["webpack:///./public/javascripts/translations/context.roster_user_usage.js","webpack:///./public/javascripts/dummyI18nResource.js?ea62","webpack:///./app/coffeescripts/bundles/legacy/context_roster_usage.js","webpack:///./public/javascripts/jquery.templateData.js","webpack:///./public/javascripts/vendor/jquery.pageless.js"],"names":["mergeI18nTranslations","JSON","parse","scoped","$","url","ENV","context_url","pageless","totalPages","accesses_total_pages","loaderMsg","I18n","t","scrape","data","parseJSON","e","idx","$access","clone","removeClass","access","asset_user_access","addClass","asset_class_name","find","icon","readable_name","display_name","asset_code","last_viewed","datetimeString","last_access","fillTemplateData","append","show","fn","options","this","length","iterator","andSelf","each","$el","i","attr","replace","id","contentChange","item","except","inArray","dataValues","toString","$found_all","avoid","$found","closest","htmlValues","html","raw","hasClass","tagName","toUpperCase","val","str","htmlEscape","hrefValues","oldHref","oldRel","oldName","$obj","hasOwnProperty","name","newHref","replaceTags","encodeURIComponent","orig","text","document","triggerHandler","defaults","getTemplateData","result","textValues","_this","forEach","$item","trim","charCodeAt","$elem","getTemplateValue","value","opts","extend","BARE_INSTANCE","createClosure","element","loader","container","$container","isLoading","settings","window","currentPage","distance","pagination","params","location","href","loaderImage","animate","init","remove","startListener","loading","bool","parents","first","is","fadeIn","fadeOut","hide","bind","SCROLL","watch","trigger","unbind","end","call","height","scrollTop","scrollHeight","page","get","xhr","isFunction","before","complete","activate","applyContext","$loader","loaderHtml","pagelessInstance"],"mappings":"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","file":"legacy/context_roster_usage-c-56a9e8c2ea.js","sourcesContent":["// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"تحميل مزيد من النتائج\\\"}}},\\\"cy\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Wrthi’n llwytho mwy o ganlyniadau\\\"}}},\\\"da\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"indlæser flere resultater\\\"}}},\\\"da-x-k12\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Indlæser flere resultater\\\"}}},\\\"de\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Weitere Ergebnisse laden\\\"}}},\\\"el\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Γίνεται φόρτωση περισσοτέρων αποτελεσμάτων\\\"}}},\\\"en-AU\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Loading more results\\\"}}},\\\"en-CA\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Loading more results\\\"}}},\\\"en-GB\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Loading more results\\\"}}},\\\"es\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Cargando más resultados\\\"}}},\\\"fa\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"بارگذاری نتایج بیشتر\\\"}}},\\\"fi\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Lataa lisää tuloksia\\\"}}},\\\"fr\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Chargement de résultats supplémentaires\\\"}}},\\\"fr-CA\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Chargement de résultats supplémentaires\\\"}}},\\\"he\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"טוען תוצאות נוספות\\\"}}},\\\"ht\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Chajman plis rezilta\\\"}}},\\\"hu\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"További találatok betöltése\\\"}}},\\\"hy\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Բեռնում է լրացուցիչ արդյունքներ\\\"}}},\\\"is\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Sæki fleiri niðurstöður\\\"}}},\\\"it\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Caricamento di ulteriori risultati\\\"}}},\\\"ja\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"より多くの結果を読み込んでいます\\\"}}},\\\"ko\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"더 많은 결과 로드 중\\\"}}},\\\"mi\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Uta ana nui atu ngā hua\\\"}}},\\\"nb\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Laster flere resultater\\\"}}},\\\"nb-x-k12\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Laster flere resultater\\\"}}},\\\"nl\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Bezig met laden van meer resultaten\\\"}}},\\\"nn\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Lastar fleire resultat\\\"}}},\\\"pl\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Trwa ładowanie większej liczby wyników\\\"}}},\\\"pt\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"A carregar mais resultados\\\"}}},\\\"pt-BR\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Carregando mais resultados\\\"}}},\\\"ru\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Загрузка других результатов\\\"}}},\\\"sl\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Nalaganje več rezultatov\\\"}}},\\\"sv\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Laddar fler resultat\\\"}}},\\\"sv-x-k12\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Laddar fler resultat\\\"}}},\\\"tr\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Daha fazla sonuç yükleniyor\\\"}}},\\\"uk\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"Завантажити більше результатів\\\"}}},\\\"zh-Hans\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"正在加载其它结果\\\"}}},\\\"zh-Hant\\\":{\\\"context\\\":{\\\"roster_user_usage\\\":{\\\"loading_more_results\\\":\\\"載入更多結果\\\"}}}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/context.roster_user_usage';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('context.roster_user_usage');\n  ","//\n// Copyright (C) 2014 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\nimport $ from 'jquery'\n\nimport I18n from 'i18n!context.roster_user_usage'\nimport 'jquery.instructure_date_and_time'\nimport 'jquery.templateData'\nimport 'vendor/jquery.pageless'\n\n$(() => {\n  const url = ENV.context_url\n  $('#usage_report').pageless({\n    totalPages: ENV.accesses_total_pages,\n    url,\n    loaderMsg: I18n.t('loading_more_results', 'Loading more results'),\n    scrape(data) {\n      if (typeof data === 'string') {\n        try {\n          data = $.parseJSON(data)\n        } catch (e) {\n          data = []\n        }\n      }\n      for (const idx in data) {\n        const $access = $('#usage_report .access.blank:first')\n          .clone(true)\n          .removeClass('blank')\n        const access = data[idx].asset_user_access\n        $access.addClass(access.asset_class_name)\n        $access.find('.icon').addClass(access.icon)\n        delete access.icon\n        access.readable_name = access.readable_name || access.display_name || access.asset_code\n        access.last_viewed = $.datetimeString(access.last_access)\n        $access.fillTemplateData({data: access})\n        $('#usage_report table tbody').append($access.show())\n      }\n      return ''\n    }\n  })\n})\n","/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery'\nimport htmlEscape from './str/htmlEscape'\nimport './jquery.instructure_misc_helpers' /* replaceTags */\n\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n$.fn.fillTemplateData = function(options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*')\n        .andSelf()\n        .each(function() {\n          const $el = $(this)\n          $.each(['name', 'id', 'class'], (i, attr) => {\n            if ($el.attr(attr)) {\n              $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator))\n            }\n          })\n        })\n    }\n    if (options.id) {\n      this.attr('id', options.id)\n    }\n    let contentChange = false\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && $.inArray(item, options.except) != -1) {\n          continue\n        }\n        if (options.data[item] && options.dataValues && $.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString())\n        }\n        const $found_all = this.find('.' + item)\n        var avoid = options.avoid || ''\n        $found_all.each(function() {\n          const $found = $(this)\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = ''\n            }\n            if (options.htmlValues && $.inArray(item, options.htmlValues) != -1) {\n              $found.html($.raw(options.data[item].toString()))\n              if ($found.hasClass('user_content')) {\n                contentChange = true\n                $found.removeClass('enhanced')\n                $found.data('unenhanced_content_html', options.data[item].toString())\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item])\n            } else {\n              try {\n                const str = options.data[item].toString()\n                $found.html(htmlEscape(str))\n              } catch (e) {}\n            }\n          }\n        })\n      }\n    }\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function() {\n        let $obj = $(this),\n          oldHref,\n          oldRel,\n          oldName\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue\n          }\n          const name = options.hrefValues[i]\n          if ((oldHref = $obj.attr('href'))) {\n            const newHref = $.replaceTags(oldHref, name, encodeURIComponent(options.data[name]))\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref)\n              if (orig) {\n                $obj.text(orig)\n              }\n            }\n          }\n          if ((oldRel = $obj.attr('rel'))) {\n            $obj.attr('rel', $.replaceTags(oldRel, name, options.data[name]))\n          }\n          if ((oldName = $obj.attr('name'))) {\n            $obj.attr('name', $.replaceTags(oldName, name, options.data[name]))\n          }\n        }\n      })\n    }\n    if (contentChange) {\n      $(document).triggerHandler('user_content_change')\n    }\n  }\n  return this\n}\n\n$.fn.fillTemplateData.defaults = {htmlValues: null, hrefValues: null}\n\n// Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n$.fn.getTemplateData = function(options) {\n  if (!this.length || !options) {\n    return {}\n  }\n  var result = {},\n    item,\n    val\n  if (options.textValues) {\n    const _this = this\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first')\n      val = $.trim($item.text())\n      if ($item.html() === '&nbsp;') {\n        val = ''\n      }\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = ''\n      }\n      result[item] = val\n    })\n  }\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item])\n      if (val) {\n        result[options.dataValues[item]] = val\n      }\n    }\n  }\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find(\n        '.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first'\n      )\n      val = null\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html')\n      } else {\n        val = $.trim($elem.html())\n      }\n      result[options.htmlValues[item]] = val\n    }\n  }\n  return result\n}\n\n$.fn.getTemplateValue = function(value, options) {\n  const opts = $.extend({}, options, {textValues: [value]})\n  return this.getTemplateData(opts)[value]\n}\n","// =======================================================================\n// PageLess - endless page\n//\n// Pageless is a jQuery plugin.\n// As you scroll down you see more results coming back at you automatically.\n// It provides an automatic pagination in an accessible way : if javascript \n// is disabled your standard pagination is supposed to work.\n//\n// Licensed under the MIT:\n// http://www.opensource.org/licenses/mit-license.php\n//\n// Parameters:\n//    currentPage: current page (params[:page])\n//    distance: distance to the end of page in px when ajax query is fired\n//    loader: selector of the loader div (ajax activity indicator)\n//    loaderHtml: html code of the div if loader not used\n//    loaderImage: image inside the loader\n//    loaderMsg: displayed ajax message\n//    pagination: selector of the paginator divs. \n//                if javascript is disabled paginator is provided\n//    params: paramaters for the ajax query, you can pass auth_token here\n//    totalPages: total number of pages\n//    url: URL used to request more data\n//\n// Callback Parameters:\n//    scrape: A function to modify the incoming data.\n//    complete: A function to call when a new page has been loaded (optional)\n//    end: A function to call when the last page has been loaded (optional)\n//\n// Usage:\n//   $('#results').pageless({ totalPages: 10\n//                          , url: '/articles/'\n//                          , loaderMsg: 'Loading more results'\n//                          });\n//\n// Requires: jquery\n//\n// Author: Jean-Sébastien Ney (https://github.com/jney)\n//\n// Contributors:\n//   Alexander Lang (https://github.com/langalex)\n//   Lukas Rieder (https://github.com/Overbryd)\n//\n// Thanks to:\n//  * codemonky.com/post/34940898\n//  * www.unspace.ca/discover/pageless/\n//  * famspam.com/facebox\n// =======================================================================\n\nimport $ from 'jquery'\n\n  var FALSE = !1\n    , TRUE = !FALSE\n    , NAMESPACE = '.pageless'\n    , SCROLL = 'scroll' + NAMESPACE\n    , RESIZE = 'resize' + NAMESPACE\n    , BARE_INSTANCE = null;\n\n  var createClosure = function (opts) {\n    var element\n      , isLoading = FALSE\n      , loader\n      , settings = { container: window\n                   , currentPage: 1\n                   , distance: 100\n                   , pagination: '.pagination'\n                   , params: {}\n                   , url: location.href\n                   , loaderImage: \"/images/load.gif\"\n                   , animate: true\n                   }\n      , container\n      , $container;\n      \n    var activate = function(opts) {\n      $.isFunction(opts) ? opts.call() : init(opts);\n    };\n    \n    var loaderHtml = function () {\n      return settings.loaderHtml || '\\\n<div id=\"pageless-loader\" style=\"display:none;text-align:center;width:100%;\">\\\n  <div class=\"msg\" style=\"color:#e9e9e9;font-size:2em\"></div>\\\n  <img src=\"' + settings.loaderImage + '\" alt=\"loading more results\" style=\"margin:10px auto\" />\\\n</div>';\n    };\n   \n    // settings params: totalPages\n    var init = function (opts) {\n      if (opts) $.extend(settings, opts);\n      \n      container = settings.container;\n      $container = $(container);\n      \n      // for accessibility we can keep pagination links\n      // but since we have javascript enabled we remove pagination links \n      if(settings.pagination) $(settings.pagination).remove();\n      \n      // start the listener\n      startListener();\n    };\n    \n    var applyContext = function ($el, opts) {\n      var $loader = $(opts.loader, $el);\n        \n      element = $el;\n      \n      // loader element\n      if (opts.loader && $loader.length) {\n        loader = $loader;\n      } else {\n        loader = $(loaderHtml());\n        $el.append(loader);\n        // if we use the default loader, set the message\n        if (!opts.loaderHtml) {\n          $('#pageless-loader .msg').html(opts.loaderMsg);\n        }\n      }\n      loading(isLoading);\n    };\n    \n    //\n    var loading = function (bool) {\n      isLoading = bool;\n      if (!loader) { return; }\n      if (isLoading) {\n        if (loader.parents().first().is(':visible') && settings.animate) {\n          // visible parent, animate it\n          loader.fadeIn('normal');\n        } else {\n          // invisible parent, just show so it's visible when parent is shown\n          loader.show();\n        }\n      } else {\n        if (loader.parents().first().is(':visible') && settings.animate) {\n          // visible parent, animate it\n          loader.fadeOut('normal');\n        } else {\n          // invisible parent, just hide so it remains invisible when parent is\n          // shown\n          loader.hide();\n        }\n      }\n    };\n    \n    // distance to end of the container\n    var distanceToBottom = function () {\n      return (container === window)\n           ? $(document).height() \n           - $container.scrollTop() \n           - $container.height()\n           : $container[0].scrollHeight \n           - $container.scrollTop() \n           - $container.height();\n    };\n\n    var stopListener = function() {\n      $container.unbind(NAMESPACE);\n    };\n    \n    // * bind a scroll event\n    // * trigger is once in case of reload\n    var startListener = function() {\n      $container.bind(SCROLL+' '+RESIZE, watch)\n                .trigger(SCROLL);\n    };\n    \n    var watch = function() {\n      // listener was stopped or we've run out of pages\n      if (settings.totalPages <= settings.currentPage) {\n        stopListener();\n        // if there is a afterStopListener callback we call it\n        if (settings.end) settings.end.call();\n        return;\n      }\n      \n      // if slider past our scroll offset, then fire a request for more data\n      if(!isLoading && (distanceToBottom() < settings.distance)) {\n        loading(TRUE);\n        // move to next page\n        settings.currentPage++;\n        // set up ajax query params\n        $.extend( settings.params\n                , { page: settings.currentPage });\n        // finally ajax query\n        $.get( settings.url\n             , settings.params\n             , function (data, text, xhr) {\n                 var data = $.isFunction(settings.scrape) ? settings.scrape(data, xhr) : data;\n                 loader ? loader.before(data) : element.append(data);\n                 loading(FALSE);\n                 // if there is a complete callback we call it\n                 if (settings.complete) settings.complete.call();\n             }, 'html');\n      }\n    };\n\n    return {activate: activate, applyContext: applyContext};\n  };\n\n  $.pageless = function(opts) {\n    if (BARE_INSTANCE === null) {\n      BARE_INSTANCE = createClosure(opts);\n      BARE_INSTANCE.activate(opts);\n    }\n    return BARE_INSTANCE;\n  };\n\n  $.fn.pageless = function(opts) {\n    if (!this.hasOwnProperty('pagelessInstance')) {\n      this.pagelessInstance = createClosure(opts);\n      this.pagelessInstance.activate(opts);\n    }\n    this.pagelessInstance.applyContext($(this), opts);\n    return this;\n  };\n  \n"],"sourceRoot":""}