{"version":3,"sources":["webpack:///./public/javascripts/translations/assignments_2_elide_string.js","webpack:///./public/javascripts/dummyI18nResource.js?66c3","webpack:///./app/jsx/shared/helpers/elideString.js","webpack:///./public/javascripts/translations/assignments_2_media_attempt.js","webpack:///./public/javascripts/dummyI18nResource.js?2a83","webpack:///./app/jsx/assignments_2/student/components/AttemptType/MediaAttempt.js"],"names":["mergeI18nTranslations","JSON","parse","scoped","elideString","title","length","substr","I18n","t","languages","Object","keys","closedCaptionLanguages","map","key","id","label","VIDEO_SIZE_OPTIONS","height","width","IconAttachMediaLine","color","LoadingIndicator","MediaAttempt","React","Component","state","mediaModalOpen","iframeURL","onComplete","err","data","this","props","updateUploadingFiles","mediaObject","embedded_iframe_url","setState","createSubmissionDraft","variables","submission","activeSubmissionType","attempt","mediaId","media_object","media_id","onDismiss","handleRemoveFile","renderMediaPlayer","renderTrashIcon","mediaSources","forEach","mediaSource","mediaTracks","track","src","_id","locale","type","kind","language","shouldRenderWithIframeURL","Flex","direction","alignItems","Item","data-testid","style","position","paddingBottom","border","minWidth","minHeight","VideoPlayer","tracks","sources","overflowY","margin","aria-hidden","ScreenReaderContent","Button","icon","IconTrashLine","onClick","size","filename","renderSubmissionDraft","submissionDraft","renderSubmission","renderMediaUpload","View","as","borderWidth","onUploadComplete","contextId","assignment","env","courseId","contextType","open","tabs","embed","record","upload","uploadMediaTranslations","UploadMediaStrings","MediaCaptureStrings","liveRegion","document","getElementById","Billboard","heading","hero","message","variant","render","uploadingFiles","includes"],"mappings":"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","file":"565-c-1230a41eeb.js","sourcesContent":["// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"cy\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"da\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"da-x-k12\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"de\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"el\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"en-AU\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"en-CA\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"en-GB\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"es\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"fa\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"fi\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"fr\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"fr-CA\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"he\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"ht\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"hu\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"hy\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"is\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"it\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"ja\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"ko\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"mi\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"nb\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"nb-x-k12\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"nl\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"nn\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"pl\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"pt\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"pt-BR\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"ru\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"sv\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"sv-x-k12\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"tr\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"zh-Hans\\\":{\\\"_5a374287\\\":\\\"...\\\"},\\\"zh-Hant\\\":{\\\"_5a374287\\\":\\\"...\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/assignments_2_elide_string';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('assignments_2_elide_string');\n  ","/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport I18n from 'i18n!assignments_2_elide_string'\n\nconst elideString = title => {\n  if (title.length > 21) {\n    return `${title.substr(0, 9)}${I18n.t('...')}${title.substr(-9)}`\n  } else {\n    return title\n  }\n}\n\nexport default elideString\n","// this file was auto-generated by rake i18n:generate_js.\n// you probably shouldn't edit it directly\nimport mergeI18nTranslations from 'mergeI18nTranslations';\n\n// we use JSON.parse here instead of just loading it as a javascript object literal\n// because according to https://v8.dev/blog/cost-of-javascript-2019#json that is faster\nmergeI18nTranslations(JSON.parse(\"{\\\"ar\\\":{\\\"add_media_cfa37b54\\\":\\\"إضافة وسائط\\\",\\\"record_upload_35dfb2ab\\\":\\\"تسجيل/تحميل\\\",\\\"remove_filename_dab5c02e\\\":\\\"إزالة %{filename}\\\"},\\\"cy\\\":{\\\"add_media_cfa37b54\\\":\\\"Ychwanegu Cyfryngau\\\",\\\"record_upload_35dfb2ab\\\":\\\"Recordio/ Llwytho i fyny\\\",\\\"remove_filename_dab5c02e\\\":\\\"Tynnu %{filename}\\\"},\\\"da\\\":{\\\"add_media_cfa37b54\\\":\\\"Tilføj medie\\\",\\\"record_upload_35dfb2ab\\\":\\\"Optag / upload\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjern %{filename}\\\"},\\\"da-x-k12\\\":{\\\"add_media_cfa37b54\\\":\\\"Tilføj medie\\\",\\\"record_upload_35dfb2ab\\\":\\\"Optag / upload\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjern %{filename}\\\"},\\\"de\\\":{\\\"add_media_cfa37b54\\\":\\\"Medien hinzufügen\\\",\\\"record_upload_35dfb2ab\\\":\\\"Aufzeichnen/Hochladen\\\",\\\"remove_filename_dab5c02e\\\":\\\"%{filename} entfernen\\\"},\\\"en-AU\\\":{\\\"add_media_cfa37b54\\\":\\\"Add Media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Record/Upload\\\",\\\"remove_filename_dab5c02e\\\":\\\"Remove %{filename}\\\"},\\\"en-CA\\\":{\\\"add_media_cfa37b54\\\":\\\"Add Media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Record/Upload\\\",\\\"remove_filename_dab5c02e\\\":\\\"Remove %{filename}\\\"},\\\"en-GB\\\":{\\\"add_media_cfa37b54\\\":\\\"Add Media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Record/Upload\\\",\\\"remove_filename_dab5c02e\\\":\\\"Remove %{filename}\\\"},\\\"es\\\":{\\\"add_media_cfa37b54\\\":\\\"Agregar multimedia\\\",\\\"record_upload_35dfb2ab\\\":\\\"Grabar/cargar\\\",\\\"remove_filename_dab5c02e\\\":\\\"Eliminar %{filename}\\\"},\\\"fi\\\":{\\\"add_media_cfa37b54\\\":\\\"Lisää tietoväline\\\",\\\"record_upload_35dfb2ab\\\":\\\"Nauhoita/lataa\\\",\\\"remove_filename_dab5c02e\\\":\\\"Poista %{filename}\\\"},\\\"fr\\\":{\\\"add_media_cfa37b54\\\":\\\"Ajouter support média\\\",\\\"record_upload_35dfb2ab\\\":\\\"Enregistrer/Envoyer\\\",\\\"remove_filename_dab5c02e\\\":\\\"Supprimer %{filename}\\\"},\\\"fr-CA\\\":{\\\"add_media_cfa37b54\\\":\\\"Ajouter support média\\\",\\\"record_upload_35dfb2ab\\\":\\\"Enregistrer/téléverser\\\",\\\"remove_filename_dab5c02e\\\":\\\"Retirer %{filename}\\\"},\\\"ht\\\":{\\\"add_media_cfa37b54\\\":\\\"Ajoute Medya\\\",\\\"record_upload_35dfb2ab\\\":\\\"Anrejistre/Transfere\\\",\\\"remove_filename_dab5c02e\\\":\\\"Elimine %{filename}\\\"},\\\"is\\\":{\\\"add_media_cfa37b54\\\":\\\"Bæta við margmiðlunarefni\\\",\\\"record_upload_35dfb2ab\\\":\\\"Taka/hlaða upp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjarlægja %{filename}\\\"},\\\"it\\\":{\\\"add_media_cfa37b54\\\":\\\"Aggiungi file multimediale\\\",\\\"record_upload_35dfb2ab\\\":\\\"Registra/Carica\\\",\\\"remove_filename_dab5c02e\\\":\\\"Rimuovi %{filename}\\\"},\\\"ja\\\":{\\\"add_media_cfa37b54\\\":\\\"メディアを追加\\\",\\\"record_upload_35dfb2ab\\\":\\\"記録/アップロード\\\",\\\"remove_filename_dab5c02e\\\":\\\"%{filename}を削除する\\\"},\\\"mi\\\":{\\\"add_media_cfa37b54\\\":\\\"Tāpiri pāpāho\\\",\\\"record_upload_35dfb2ab\\\":\\\"Tāhopu/Kaweake\\\",\\\"remove_filename_dab5c02e\\\":\\\"Tango %{filename}\\\"},\\\"nb\\\":{\\\"add_media_cfa37b54\\\":\\\"Legg til medie\\\",\\\"record_upload_35dfb2ab\\\":\\\"Gjør opptak/last opp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjern %{filename}\\\"},\\\"nb-x-k12\\\":{\\\"add_media_cfa37b54\\\":\\\"Legg til medie\\\",\\\"record_upload_35dfb2ab\\\":\\\"Gjør opptak/last opp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjern %{filename}\\\"},\\\"nl\\\":{\\\"add_media_cfa37b54\\\":\\\"Media toevoegen\\\",\\\"record_upload_35dfb2ab\\\":\\\"Opnemen/uploaden\\\",\\\"remove_filename_dab5c02e\\\":\\\"Verwijder %{filename}\\\"},\\\"nn\\\":{\\\"add_media_cfa37b54\\\":\\\"Legg til media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Ta opp / last opp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Fjern %{filename}\\\"},\\\"pl\\\":{\\\"add_media_cfa37b54\\\":\\\"Dodaj multimedia\\\",\\\"record_upload_35dfb2ab\\\":\\\"Rejestruj/prześlij\\\",\\\"remove_filename_dab5c02e\\\":\\\"Usuń %{filename}\\\"},\\\"pt\\\":{\\\"add_media_cfa37b54\\\":\\\"Adicionar mídia\\\",\\\"record_upload_35dfb2ab\\\":\\\"Gravar/Carregar\\\",\\\"remove_filename_dab5c02e\\\":\\\"Remover %{filename}\\\"},\\\"pt-BR\\\":{\\\"add_media_cfa37b54\\\":\\\"Adicionar mídia\\\",\\\"record_upload_35dfb2ab\\\":\\\"Gravar/Carregar\\\",\\\"remove_filename_dab5c02e\\\":\\\"Remover %{filename}\\\"},\\\"ru\\\":{\\\"add_media_cfa37b54\\\":\\\"Добавить носитель\\\",\\\"record_upload_35dfb2ab\\\":\\\"Записать / загрузить\\\",\\\"remove_filename_dab5c02e\\\":\\\"Удалить %{filename}\\\"},\\\"sv\\\":{\\\"add_media_cfa37b54\\\":\\\"Lägg till media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Spela in/ladda upp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Ta bort %{filename}\\\"},\\\"sv-x-k12\\\":{\\\"add_media_cfa37b54\\\":\\\"Lägg till media\\\",\\\"record_upload_35dfb2ab\\\":\\\"Spela in/ladda upp\\\",\\\"remove_filename_dab5c02e\\\":\\\"Ta bort %{filename}\\\"},\\\"zh-Hans\\\":{\\\"add_media_cfa37b54\\\":\\\"添加媒体\\\",\\\"record_upload_35dfb2ab\\\":\\\"记录/上传\\\",\\\"remove_filename_dab5c02e\\\":\\\"移除 %{filename}\\\"},\\\"zh-Hant\\\":{\\\"add_media_cfa37b54\\\":\\\"添加媒體\\\",\\\"record_upload_35dfb2ab\\\":\\\"錄製/上傳\\\",\\\"remove_filename_dab5c02e\\\":\\\"移除 %{filename}\\\"}}\"));\n","\n    import I18n from 'i18nObj';\n    \n      import 'translations/assignments_2_media_attempt';\n      import 'translations/_core';\n    \n    import 'translations/_core_en';\n\n    export default I18n.scoped('assignments_2_media_attempt');\n  ","/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {Assignment} from '../../graphqlData/Assignment'\nimport {bool, func} from 'prop-types'\nimport closedCaptionLanguages from '../../../../shared/closedCaptionLanguages'\nimport elideString from '../../../../shared/helpers/elideString'\nimport I18n from 'i18n!assignments_2_media_attempt'\nimport {IconTrashLine, IconAttachMediaLine} from '@instructure/ui-icons'\nimport LoadingIndicator from '../../../shared/LoadingIndicator'\nimport React from 'react'\nimport {ScreenReaderContent} from '@instructure/ui-a11y'\nimport {Submission} from '../../graphqlData/Submission'\nimport UploadMedia from '@instructure/canvas-media'\nimport {UploadMediaStrings, MediaCaptureStrings} from '../../../../shared/UploadMediaTranslations'\n\nimport {Billboard} from '@instructure/ui-billboard'\nimport {Button} from '@instructure/ui-buttons'\nimport {Flex} from '@instructure/ui-flex'\nimport {VideoPlayer} from '@instructure/ui-media-player'\nimport {View} from '@instructure/ui-layout'\n\nconst languages = Object.keys(closedCaptionLanguages).map(key => {\n  return {id: key, label: closedCaptionLanguages[key]}\n})\n\nexport const VIDEO_SIZE_OPTIONS = {height: '400px', width: '768px'}\n\nexport default class MediaAttempt extends React.Component {\n  static propTypes = {\n    assignment: Assignment.shape.isRequired,\n    createSubmissionDraft: func.isRequired,\n    submission: Submission.shape.isRequired,\n    updateUploadingFiles: func.isRequired,\n    uploadingFiles: bool.isRequired\n  }\n\n  state = {\n    mediaModalOpen: false,\n    iframeURL: ''\n  }\n\n  onComplete = (err, data) => {\n    this.props.updateUploadingFiles(true)\n    if (data.mediaObject.embedded_iframe_url) {\n      this.setState({iframeURL: data.mediaObject.embedded_iframe_url})\n    }\n    this.props.createSubmissionDraft({\n      variables: {\n        id: this.props.submission.id,\n        activeSubmissionType: 'media_recording',\n        attempt: this.props.submission.attempt || 1,\n        mediaId: data.mediaObject.media_object.media_id\n      }\n    })\n  }\n\n  onDismiss = () => {\n    this.setState({mediaModalOpen: false})\n  }\n\n  handleRemoveFile = () => {\n    this.props.updateUploadingFiles(true)\n    this.props.createSubmissionDraft({\n      variables: {\n        id: this.props.submission.id,\n        activeSubmissionType: 'media_recording',\n        attempt: this.props.submission.attempt || 1\n      }\n    })\n    this.setState({iframeURL: ''})\n  }\n\n  renderMediaPlayer = (mediaObject, renderTrashIcon) => {\n    mediaObject.mediaSources.forEach(mediaSource => {\n      mediaSource.label = `${mediaSource.width}x${mediaSource.height}`\n    })\n    const mediaTracks = mediaObject.mediaTracks.map(track => ({\n      src: `/media_objects/${mediaObject._id}/media_tracks/${track._id}`,\n      label: track.locale,\n      type: track.kind,\n      language: track.locale\n    }))\n    const shouldRenderWithIframeURL = mediaObject.mediaSources.length === 0 && this.state.iframeURL\n\n    return (\n      <Flex direction=\"column\" alignItems=\"center\">\n        <Flex.Item data-testid=\"media-recording\" width=\"100%\">\n          {shouldRenderWithIframeURL ? (\n            <div\n              style={{\n                position: 'relative',\n                width: '100%',\n                height: '0',\n                paddingBottom: '56.25%' // 16:9 aspect ratio\n              }}\n            >\n              <iframe\n                src={this.state.iframeURL}\n                title=\"preview\"\n                style={{\n                  position: 'absolute',\n                  border: 'none',\n                  minWidth: '100%',\n                  minHeight: '100%'\n                }}\n              />\n            </div>\n          ) : (\n            <VideoPlayer tracks={mediaTracks} sources={mediaObject.mediaSources} />\n          )}\n        </Flex.Item>\n        <Flex.Item overflowY=\"visible\" margin=\"medium 0\">\n          <span aria-hidden title={mediaObject.title}>\n            {elideString(mediaObject.title)}\n          </span>\n          <ScreenReaderContent>{mediaObject.title}</ScreenReaderContent>\n          {renderTrashIcon && (\n            <Button\n              data-testid=\"remove-media-recording\"\n              icon={IconTrashLine}\n              id={mediaObject.id}\n              margin=\"0 0 0 x-small\"\n              onClick={this.handleRemoveFile}\n              size=\"small\"\n            >\n              <ScreenReaderContent>\n                {I18n.t('Remove %{filename}', {filename: mediaObject.title})}\n              </ScreenReaderContent>\n            </Button>\n          )}\n        </Flex.Item>\n      </Flex>\n    )\n  }\n\n  renderSubmissionDraft = () => {\n    const mediaObject = this.props.submission.submissionDraft.mediaObject\n    return this.renderMediaPlayer(mediaObject, true)\n  }\n\n  renderSubmission = () => {\n    const mediaObject = this.props.submission.mediaObject\n    return this.renderMediaPlayer(mediaObject, false)\n  }\n\n  renderMediaUpload = () => (\n    <View as=\"div\" borderWidth=\"small\">\n      <UploadMedia\n        onUploadComplete={this.onComplete}\n        onDismiss={this.onDismiss}\n        contextId={this.props.assignment.env.courseId}\n        contextType=\"course\"\n        open={this.state.mediaModalOpen}\n        tabs={{embed: false, record: true, upload: true}}\n        uploadMediaTranslations={{UploadMediaStrings, MediaCaptureStrings}}\n        liveRegion={() => document.getElementById('flash_screenreader_holder')}\n        languages={languages}\n      />\n      <Billboard\n        heading={I18n.t('Add Media')}\n        hero={<IconAttachMediaLine color=\"brand\" />}\n        message={\n          <Button\n            size=\"small\"\n            data-testid=\"media-modal-launch-button\"\n            variant=\"primary\"\n            onClick={() => this.setState({mediaModalOpen: true})}\n          >\n            {I18n.t('Record/Upload')}\n          </Button>\n        }\n      />\n    </View>\n  )\n\n  render() {\n    if (this.props.uploadingFiles) {\n      return <LoadingIndicator />\n    }\n\n    if (['submitted', 'graded'].includes(this.props.submission.state)) {\n      return this.renderSubmission()\n    }\n\n    if (this.props.submission.submissionDraft?.mediaObject?._id) {\n      return this.renderSubmissionDraft()\n    }\n\n    return this.renderMediaUpload()\n  }\n}\n"],"sourceRoot":""}