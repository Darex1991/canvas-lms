(window.canvasWebpackJsonp=window.canvasWebpackJsonp||[]).push([[553],{"+iUZ":function(e,t,a){"use strict"
var n=a("pQTu"),i=a("m0r6")
Object(i.a)(JSON.parse('{"ar":{"_5a374287":"..."},"cy":{"_5a374287":"..."},"da":{"_5a374287":"..."},"da-x-k12":{"_5a374287":"..."},"de":{"_5a374287":"..."},"el":{"_5a374287":"..."},"en-AU":{"_5a374287":"..."},"en-CA":{"_5a374287":"..."},"en-GB":{"_5a374287":"..."},"es":{"_5a374287":"..."},"fa":{"_5a374287":"..."},"fi":{"_5a374287":"..."},"fr":{"_5a374287":"..."},"fr-CA":{"_5a374287":"..."},"he":{"_5a374287":"..."},"ht":{"_5a374287":"..."},"hu":{"_5a374287":"..."},"hy":{"_5a374287":"..."},"is":{"_5a374287":"..."},"it":{"_5a374287":"..."},"ja":{"_5a374287":"..."},"ko":{"_5a374287":"..."},"mi":{"_5a374287":"..."},"nb":{"_5a374287":"..."},"nb-x-k12":{"_5a374287":"..."},"nl":{"_5a374287":"..."},"nn":{"_5a374287":"..."},"pl":{"_5a374287":"..."},"pt":{"_5a374287":"..."},"pt-BR":{"_5a374287":"..."},"ru":{"_5a374287":"..."},"sv":{"_5a374287":"..."},"sv-x-k12":{"_5a374287":"..."},"tr":{"_5a374287":"..."},"zh-Hans":{"_5a374287":"..."},"zh-Hant":{"_5a374287":"..."}}'))
a("jQeR"),a("0sPK")
var s=n.default.scoped("assignments_2_elide_string")
t.a=e=>e.length>21?"".concat(e.substr(0,9)).concat(s.t("...")).concat(e.substr(-9)):e},"684e":function(e,t,a){"use strict"
a.d(t,"a",(function(){return k}))
var n=a("rePB"),i=a("ODXe"),s=a("1OyB"),r=a("vuIU"),o=a("md7G"),c=a("foSv"),l=a("Ji7U"),d=a("q1tI"),p=a.n(d),u=a("17x9"),h=a.n(u),m=a("TSYQ"),b=a.n(m),f=a("3zPy"),g=a.n(f),v=a("xr/Z"),D=a("MiD/"),y=a("Irhw"),_=a("Ok0q"),O=a("oXx0"),j=a("GLQS"),E=a("ELJd"),T=a("8S//")
function w(e,t){if(e&&t&&"application/x-moz-file"!==e.type){var a=F(t),n=e.type||"",i=n.replace(/\/.*$/,"")
return a.some((function(t){return"."===t.charAt(0)?e.name?e.name.toLowerCase().endsWith(t.toLowerCase()):n.endsWith(t.slice(1)):/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):n===t}))}return!0}function F(e){return(Array.isArray(e)?e:e.split(",")).map((function(e){return e.trim().replace(/^\w+$/,".$&")}))}function B(e,t){var a=e.dataTransfer
if(a){if(a.files&&a.files.length)return a.files
if(a.items&&a.items.length)return a.items}else if(t&&t.files)return t.files
return[]}var C,x,U,I=a("6RTY")
function S(e){var t=e.borders,a=e.colors
return{backgroundColor:a.backgroundLightest,borderRadius:t.radiusLarge,borderWidth:t.widthMedium,borderStyle:"dashed",borderColor:a.borderMedium,hoverBorderColor:a.borderBrand,focusBorderWidth:t.widthMedium,focusBorderStyle:"solid",focusBorderColor:a.borderBrand,acceptedColor:a.textBrand,rejectedColor:a.textDanger,disabledColor:Object(I.a)(a.borderMedium,50)}}S.canvas=function(e){return{hoverBorderColor:e["ic-brand-primary"],acceptedColor:e["ic-brand-primary"]}}
var A={componentId:"cDEpT",template:function(e){return"\n\n.cDEpT_blJt,.cDEpT_bGBk{position:relative}\n\n.cDEpT_blJt{box-sizing:border-box;display:block}\n\n.cDEpT_cwos{border:0;clip:rect(0 0 0 0);height:0.0625rem;margin:-0.0625rem;overflow:hidden;padding:0;position:absolute;width:0.0625rem}\n\n.cDEpT_QUBp{border:".concat(e.borderWidth||"inherit"," ").concat(e.borderStyle||"inherit"," ").concat(e.borderColor||"inherit",";border-radius:").concat(e.borderRadius||"inherit",";box-sizing:border-box;cursor:pointer;display:block;position:relative;text-align:center;z-index:1}\n\n[dir=ltr] .cDEpT_QUBp,[dir=rtl] .cDEpT_QUBp{text-align:center}\n\n.cDEpT_QUBp:hover{border-color:").concat(e.hoverBorderColor||"inherit","}\n\n.cDEpT_QUBp:before{border:").concat(e.focusBorderWidth||"inherit"," ").concat(e.focusBorderStyle||"inherit"," ").concat(e.focusBorderColor||"inherit",";border-radius:calc(").concat(e.borderRadius||"inherit",'*1.5);bottom:-0.375rem;content:"";left:-0.375rem;opacity:0;pointer-events:none;position:absolute;right:-0.375rem;top:-0.375rem;transform:scale(0.9);transition:all 0.2s}\n\n.cDEpT_byIz{border-radius:').concat(e.borderRadius||"inherit",";display:block;overflow:hidden}\n\n.cDEpT_cVYB .cDEpT_QUBp:before{opacity:1;transform:scale(1)}\n\n.cDEpT_cbYS.cDEpT_cVYB .cDEpT_QUBp:before,.cDEpT_cbYS .cDEpT_QUBp{border-color:").concat(e.acceptedColor||"inherit","}\n\n.cDEpT_cvQK.cDEpT_cVYB .cDEpT_QUBp:before,.cDEpT_cvQK .cDEpT_QUBp{border-color:").concat(e.rejectedColor||"inherit","}\n\n.cDEpT_cFXB{cursor:not-allowed;pointer-events:none}\n\n.cDEpT_eXzv{opacity:0.5}\n\n.cDEpT_eXzv .cDEpT_QUBp{border-color:").concat(e.disabledColor||"inherit","}")},label:"cDEpT_blJt",root:"cDEpT_bGBk",input:"cDEpT_cwos",labelContent:"cDEpT_QUBp",layout:"cDEpT_byIz",focused:"cDEpT_cVYB",dragAccepted:"cDEpT_cbYS",dragRejected:"cDEpT_cvQK",functionallyDisabled:"cDEpT_cFXB",visuallyDisabled:"cDEpT_eXzv"}
var R=function(){var e=!1
try{e=document.documentMode||T.a}catch(e){}return e}(),k=Object(j.a)("7.0.0",null,"Use FileDrop from ui-file-drop instead.")(C=Object(O.a)()(C=Object(_.g)(S,A)((U=x=function(e){function t(e){var a
return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={isDragAccepted:!1,isDragRejected:!1,isFocused:!1,isFileBrowserDisplayed:!1},a.enterCounter=0,a.fileInputEl=null,a.defaultId=null,a.handleDragEnter=function(e){if(e.preventDefault(),a.enterCounter+=1,!(a.enterCounter>1)){var t=a.allFilesAccepted(a.getDataTransferItems(e))
a.setState({isDragAccepted:t,isDragRejected:!t}),a.props.onDragEnter(e)}},a.handleDragOver=function(e){e.preventDefault(),e.stopPropagation()
try{e.dataTransfer.dropEffect="copy"}catch(e){}return a.props.onDragOver(e),!1},a.handleDragLeave=function(e){e.preventDefault(),a.enterCounter-=1,a.enterCounter>0||(a.setState({isDragAccepted:!1,isDragRejected:!1}),a.props.onDragLeave(e))},a.handleChange=function(e){var t=a.props,n=t.onDrop,s=t.onDropAccepted,r=t.onDropRejected,o=t.enablePreview,c=a.getDataTransferItems(e,o),l=a.parseFiles(c),d=Object(i.a)(l,2),p=d[0],u=d[1]
e.preventDefault(),a.enterCounter=0,n(p,u,e),u.length>0&&r(u,e),p.length>0&&s(p,e),a.setState({isDragAccepted:!1,isDragRejected:!1,isFileBrowserDisplayed:!1})},a.fileAccepted=function(e){return w(e,a.props.accept)},a.handleRef=function(e){a.fileInputEl=e},a.handleBlur=function(){a.setState({isFocused:!1,isFileBrowserDisplayed:!1})},a.handleFocus=function(){a.setState({isFocused:!0,isFileBrowserDisplayed:!1})},a.handleClick=function(e){a.fileInputEl.value&&a.props.allowRepeatFileSelection&&(a.fileInputEl.value=null),a.fileInputEl.focus(),a.props.onClick(e),a.setState({isFileBrowserDisplayed:!0})},a.handleKeyDown=function(e){var t
a.state.isFocused&&((t=e).keyCode===g.a.codes.space||t.keyCode===g.a.codes.enter)&&(a.props.allowRepeatFileSelection&&(a.fileInputEl.value=null),R&&(e.stopPropagation(),e.preventDefault(),a.fileInputEl.click()))},a.handleKeyUp=function(e){e.keyCode===g.a.codes.esc&&a.state.isFileBrowserDisplayed&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.setState({isFileBrowserDisplayed:!1}))},a.defaultId=Object(y.a)("FileDrop"),a.messagesId=Object(y.a)("FileDrop-messages"),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getDataTransferItems",value:function(e,t){var a=Array.from(B(e,this.fileInputEl))
return a.length>1&&(a=this.props.allowMultiple?a:[a[0]]),t?a.map((function(e){return Object.assign(e,{preview:window.URL.createObjectURL(e)})})):a}},{key:"parseFiles",value:function(e){var t=this,a=[],n=[]
return e.forEach((function(e){t.fileAccepted(e)&&t.fileMatchSize(e)?a.push(e):n.push(e)})),[a,n]}},{key:"fileMatchSize",value:function(e){return e.size<=this.props.maxSize&&e.size>=this.props.minSize}},{key:"allFilesAccepted",value:function(e){return e.every(this.fileAccepted)}},{key:"acceptStr",value:function(){var e=this.props.accept
return e?F(e).join(","):null}},{key:"renderLabel",value:function(){var e=this.props,t=e.label,a=e.interaction,n=e.disabled,i=e.readOnly,s=t
return"function"!=typeof s?s:p.a.createElement(s,{isDragAccepted:this.state.isDragAccepted,isDragRejected:this.state.isDragRejected,disabled:"disabled"===a||n,readOnly:"readonly"===a||i,interaction:a})}},{key:"render",value:function(){var e,a=this.props,i=a.allowMultiple,s=a.disabled,r=a.readOnly,o=a.interaction,c=this.props.id||this.defaultId,l=s||r||"disabled"===o||"readonly"===o,d=(e={},Object(n.a)(e,A.label,!0),Object(n.a)(e,A.functionallyDisabled,l),Object(n.a)(e,A.visuallyDisabled,"disabled"===o||s),Object(n.a)(e,A.dragRejected,this.state.isDragRejected||this.invalid),Object(n.a)(e,A.dragAccepted,this.state.isDragAccepted),Object(n.a)(e,A.focused,this.state.isFocused),e),u=Object(E.a)(this.props,t.propTypes)
return p.a.createElement("div",{className:A.root},p.a.createElement("label",{className:b()(d),htmlFor:c,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleChange},p.a.createElement("span",{className:A.labelContent},p.a.createElement("span",{className:A.layout},this.renderLabel()))),p.a.createElement("input",Object.assign({},u,{onClick:this.handleClick,type:"file",className:A.input,id:c,ref:this.handleRef,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,multiple:i,accept:this.acceptStr(),onChange:this.handleChange,"aria-describedby":this.hasMessages?this.messagesId:null,disabled:l})),this.hasMessages?p.a.createElement(D.a,{display:"block",margin:"small 0 0"},p.a.createElement(v.d,{id:this.messagesId,messages:this.props.messages})):null)}},{key:"hasMessages",get:function(){return this.props.messages&&this.props.messages.length>0}},{key:"invalid",get:function(){return this.hasMessages&&this.props.messages.findIndex((function(e){return"error"===e.type}))>=0}}]),t.displayName="FileDrop",t}(d.Component),x.propTypes={id:h.a.string,label:h.a.oneOfType([h.a.func,h.a.node]).isRequired,accept:h.a.oneOfType([h.a.string,h.a.arrayOf(h.a.string)]),messages:h.a.arrayOf(v.e.message),onClick:h.a.func,onDrop:h.a.func,onDropAccepted:h.a.func,onDropRejected:h.a.func,onDragEnter:h.a.func,onDragOver:h.a.func,onDragLeave:h.a.func,enablePreview:h.a.bool,allowMultiple:h.a.bool,maxSize:h.a.number,minSize:h.a.number,allowRepeatFileSelection:h.a.bool,disabled:h.a.bool,readOnly:h.a.bool,interaction:h.a.oneOf(["enabled","disabled","readonly"])},x.defaultProps={onClick:function(e){},onDrop:function(e,t,a){},onDropAccepted:function(e,t){},onDropRejected:function(e,t){},onDragEnter:function(e){},onDragOver:function(e){},onDragLeave:function(e){},enablePreview:!1,allowMultiple:!1,allowRepeatFileSelection:!0,maxSize:Infinity,minSize:0,interaction:"enabled",messages:[],id:void 0,accept:void 0},C=U))||C)||C)||C},F4pv:function(e,t,a){"use strict"
a.r(t),a.d(t,"default",(function(){return E}))
var n=a("An8g"),i=a("lOrd"),s=(a("yLL3"),a("LvDl")),r=a("wK7G"),o=a("+iUZ"),c=(a("17x9"),a("Vv7M")),l=a("TeMW"),d=a("flbL"),p=a("xD+y"),u=a("q1tI"),h=(a("+M3D"),a("60Hp")),m=a("agq5"),b=a("Xx/m"),f=a("684e"),g=a("nhsw"),v=a("lr1R"),D=a("xHhu"),y=a("WfMV"),_=a("5JRF"),O=a("7np9")
var j=Object(n.a)(d.a,{})
class E extends u.Component{constructor(...e){super(...e),this.state={filesToUpload:[],messages:[]},this._isMounted=!1,this.getDraftAttachments=()=>this.props.submission.submissionDraft&&this.props.submission.submissionDraft.attachments?this.props.submission.submissionDraft.attachments:[],this.handleLTIFiles=async e=>{if("LtiDeepLinkingResponse"===e.data.messageType){if(e.data.errormsg)return void this.context.setOnFailure(e.data.errormsg)
await this.handleDropAccepted(e.data.content_items)}"A2ExternalContentReady"===e.data.messageType&&(e.data.errormsg||await this.handleDropAccepted(e.data.content_items))},this.handleCanvasFiles=async e=>{e?this.updateUploadingFiles(async()=>{try{await this.createSubmissionDraft([e])}catch(e){this.context.setOnFailure(l.a.t("Error updating submission draft"))}}):this.context.setOnFailure(l.a.t("Error adding canvas file to submission draft"))},this.handleDropAccepted=async e=>{e.length?(this.setState({filesToUpload:e.map((e,t)=>e.url?{isLoading:!0,_id:"".concat(t,"-").concat(e.url)}:{isLoading:!0,_id:"".concat(t,"-").concat(e.name)})},()=>{this.context.setOnSuccess(l.a.t("Uploading files"))}),this.updateUploadingFiles(async()=>{try{const a=await Object(h.uploadFiles)(e,(t=this.props.assignment,"/api/v1/courses/".concat(t.env.courseId,"/assignments/").concat(t._id,"/submissions/").concat(t.env.currentUser.id,"/files")))
await this.createSubmissionDraft(a.map(e=>e.id))}catch(e){this.context.setOnFailure(l.a.t("Error updating submission draft"))}finally{this.setState({filesToUpload:[]})}var t})):this.context.setOnFailure(l.a.t("Error adding files to submission draft"))},this.handleDropRejected=()=>{this.setState({messages:[{text:l.a.t("Invalid file type"),type:"error"}]})},this.updateUploadingFiles=async e=>{this._isMounted&&this.props.updateUploadingFiles(!0),await e(),this._isMounted&&this.props.updateUploadingFiles(!1)},this.createSubmissionDraft=async e=>{await this.props.createSubmissionDraft({variables:{id:this.props.submission.id,activeSubmissionType:"online_upload",attempt:this.props.submission.attempt||1,fileIds:this.getDraftAttachments().map(e=>e._id).concat(e)}})},this.handleRemoveFile=async e=>{const t=parseInt(e.currentTarget.id,10),a=this.getDraftAttachments().findIndex(e=>parseInt(e._id,10)===t),n=this.getDraftAttachments().filter((e,t)=>t!==a)
await this.props.createSubmissionDraft({variables:{id:this.props.submission.id,activeSubmissionType:"online_upload",attempt:this.props.submission.attempt,fileIds:n.map(e=>e._id)}}),this._isMounted&&this.setState({messages:[]})
const i=0===this.getDraftAttachments().length||0===a?"inputFileDrop":this.getDraftAttachments()[a-1]._id
document.getElementById(i).focus()},this.shouldRenderFiles=()=>0!==this.getDraftAttachments().length||0!==this.state.filesToUpload.length}componentDidMount(){this._isMounted=!0,window.addEventListener("message",this.handleLTIFiles)}componentWillUnmount(){this._isMounted=!1,window.removeEventListener("message",this.handleLTIFiles)}renderUploadBox(){return Object(n.a)("div",{"data-testid":"upload-box"},void 0,Object(n.a)(g.a,{direction:"column"},void 0,Object(n.a)(g.a.Item,{margin:"0 0 small 0",overflowY:"visible"},void 0,Object(n.a)(f.a,{accept:this.props.assignment.allowedExtensions.length?this.props.assignment.allowedExtensions:"",allowMultiple:!0,enablePreview:!0,id:"inputFileDrop","data-testid":"input-file-drop",label:Object(n.a)(m.a,{heading:l.a.t("Upload File"),hero:r.a,message:Object(n.a)(g.a,{direction:"column"},void 0,this.props.assignment.allowedExtensions.length?Object(n.a)(g.a.Item,{},void 0,l.a.t("File permitted: %{fileTypes}",{fileTypes:this.props.assignment.allowedExtensions.map(e=>e.toUpperCase()).join(", ")})):null,Object(n.a)(g.a.Item,{padding:"small 0 0"},void 0,Object(n.a)(_.a,{size:"small"},void 0,l.a.t("Drag and drop, or click to browse your computer"))))}),messages:this.state.messages,onDropAccepted:e=>this.handleDropAccepted(e),onDropRejected:this.handleDropRejected})),Object(n.a)(g.a.Item,{padding:"xx-small",textAlign:"center"},void 0,Object(n.a)(p.a,{assignmentID:this.props.assignment._id,courseID:this.props.assignment.env.courseId,handleCanvasFiles:this.handleCanvasFiles,renderCanvasFiles:!0,userID:this.props.assignment.env.currentUser.id}))))}renderUploadedFile(e){return e.isLoading?j:Object(n.a)(m.a,{heading:l.a.t("Uploaded"),headingLevel:"h3",hero:Object(c.b)(e,"large"),message:Object(n.a)("div",{},void 0,Object(n.a)("span",{"aria-hidden":!0,title:e.displayName},void 0,Object(o.a)(e.displayName)),Object(n.a)(y.a,{},void 0,e.displayName),Object(n.a)(b.a,{icon:D.a,id:e._id,margin:"0 0 0 x-small",onClick:this.handleRemoveFile,size:"small"},void 0,Object(n.a)(y.a,{},void 0,l.a.t("Remove %{filename}",{filename:e.displayName}))))})}renderUploadBoxAndUploadedFiles(){let e=this.getDraftAttachments()
this.state.filesToUpload.length&&(e=e.concat(this.state.filesToUpload))
const t=e.slice(0,2),a=e.length>2?Object(s.chunk)(e.slice(2,e.length),3):[]
return Object(n.a)(v.a,{},void 0,Object(n.a)(v.a.Row,{},"upload-box",Object(n.a)(v.a.Col,{width:4},void 0,this.renderUploadBox()),t.map(e=>Object(n.a)(v.a.Col,{width:4,vAlign:"bottom"},e._id,this.renderUploadedFile(e)))),a.map((e,t)=>Object(n.a)(v.a.Row,{},t,e.map(e=>Object(n.a)(v.a.Col,{width:4,vAlign:"bottom"},e._id,this.renderUploadedFile(e))))))}render(){return Object(n.a)("div",{"data-testid":"upload-pane",style:{marginBottom:O.a.variables.spacing.xxLarge}},void 0,this.renderUploadBoxAndUploadedFiles())}}E.contextType=i.a},xHhu:function(e,t,a){"use strict"
a.d(t,"a",(function(){return h}))
var n=a("VTBJ"),i=a("1OyB"),s=a("vuIU"),r=a("md7G"),o=a("foSv"),c=a("Ji7U"),l=a("q1tI"),d=a.n(l),p=a("CSQ8"),u=d.a.createElement("path",{d:"M1581.176 1750.588c0 31.06-25.411 56.47-56.47 56.47H395.294c-31.059 0-56.47-25.41-56.47-56.47V564.706H225.882v1185.882c0 93.403 76.01 169.412 169.412 169.412h1129.412c93.402 0 169.412-76.01 169.412-169.412V564.706h-112.942v1185.882zm-903.529-169.412h112.941V677.647h-112.94v903.53zm451.765 0h112.94V677.647h-112.94v903.53zm211.211-1242.352L1217.065 0H694.6L571.268 338.824H.01v112.94h1920v-112.94h-579.388zm-649.299 0l82.334-225.883h364.462l82.334 225.883h-529.13z",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),h=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return d.a.createElement(p.a,Object.assign({},this.props,{name:"IconTrash",viewBox:"0 0 1920 1920"}),u)}}]),t.displayName="IconTrashLine",t}(l.Component)
h.glyphName="trash",h.variant="Line",h.propTypes=Object(n.a)({},p.a.propTypes)}}])

//# sourceMappingURL=553-c-ad33c7f4df.js.map