(window.canvasWebpackJsonp=window.canvasWebpackJsonp||[]).push([[296],{xMd9:function(t,e,l){"use strict"
l.r(e)
var a=l("XEib"),_=l("ouhR"),s=l.n(_),r=l("5Ky4"),d=l("JD5e")
l("jYyc"),l("YGE8")
function o(){s.a.each(ENV.LDAP_TESTS,(t,e)=>{s()("#ldap_"+e.test_type+"_result").html(""),s()("#ldap_"+e.test_type+"_help .server_error").remove(),s()("#ldap_"+e.test_type+"_help").hide()}),s()("#ldap_login_result").html(""),s()("#ldap_login_form").hide(),s()("#test_ldap_dialog").dialog({title:a.a.t("test_ldap_dialog_title","Test LDAP Settings"),width:600}),ENV.LDAP_TESTS[0].js_function()}s.a.each(ENV.LDAP_TESTS,(t,e)=>{e.js_function=function(){s()("#ldap_"+e.test_type+"_result").html("<img src='/images/ajax-loader.gif'/>"),s.a.getJSON(e.url,l=>{let _=!0,d=""
if(s.a.each(l,(t,l)=>{l["ldap_"+e.test_type+"_test"]||(_=!1,l.errors[0]&&l.errors[0]["ldap_"+e.test_type+"_test"]&&(d=l.errors[0]["ldap_"+e.test_type+"_test"]))}),_)s()("#ldap_"+e.test_type+"_result").html("<h4 style='color:green'>"+Object(r.a)(a.a.t("test_ldap_result_ok","OK"))+"</h4>"),ENV.LDAP_TESTS[t+1]?ENV.LDAP_TESTS[t+1].js_function():s()("#ldap_login_form").show("blind")
else{s()("#ldap_"+e.test_type+"_result").html("<h4 style='color:red'>"+Object(r.a)(a.a.t("test_ldap_result_failed","Failed"))+"</h4>"),s()("#ldap_"+e.test_type+"_help").show()
const l=s()("<p></p>").addClass("server_error").css("color","red").text(d)
s()("#ldap_"+e.test_type+"_help").append(l),s.a.each(ENV.LDAP_TESTS.slice(t+1),(t,e)=>{s()("#ldap_"+e.test_type+"_result").html("<h4 style='color:red'>"+Object(r.a)(a.a.t("test_ldap_result_canceled","Canceled"))+"</h4>")}),s()("#ldap_login_result").html("<h4 style='color:red'>"+Object(r.a)(a.a.t("test_ldap_result_canceled","Canceled"))+"</h4>")}})}}),s()(document).ready(()=>{s()(".test_ldap_link").click(t=>{t.preventDefault(),o()}),s()(".ldap_test_close").click(t=>{t.preventDefault(),s()("#test_ldap_dialog").dialog("close")}),s()("#ldap_test_login_form").submit(t=>{t.preventDefault(),function(){s()("#ldap_test_login").attr("disabled","true").attr("value",a.a.t("testing","Testing...")),s()("#ldap_login_result").html("<img src='/images/ajax-loader.gif'/>")
const t=s()("#ldap_test_login_user").val(),e=s()("#ldap_test_login_pass").val()
s.a.post(ENV.LOGIN_TEST_URL,{username:t,password:e,authenticity_token:Object(d.a)()},t=>{let e=!0,l=""
s.a.each(t,(t,a)=>{a.ldap_login_test||(e=!1),a.errors&&s.a.each(a.errors,(t,e)=>{s.a.each(e,(t,e)=>{l+=e})})}),e?(s()("#ldap_login_help_error").hide(),s()("#ldap_login_result").html("<h4 style='color:green'>"+Object(r.a)(a.a.t("test_ldap_result_ok","OK"))+"</h4>"),s()("#ldap_test_login").attr("disabled","").attr("value",a.a.t("test_login","Test Login"))):(s()("#ldap_login_result").html("<h4 style='color:red'>"+Object(r.a)(a.a.t("test_ldap_result_failed","Failed"))+"</h4>"),s()("#ldap_login_help").show(),s()("#ldap_test_login").attr("disabled","").attr("value",a.a.t("retry_login","Retry Login")),s()("#ldap_login_help_error").text(l))})}()})})}}])

//# sourceMappingURL=ldap_settings_test-c-51ffbe38f6.js.map